function nP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in e)){const o=Object.getOwnPropertyDescriptor(r,l);o&&Object.defineProperty(e,l,o.get?o:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function si(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rP(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var l=!1;try{l=this instanceof r}catch{}return l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var l=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return e[r]}})}),n}var Dv={exports:{}},Gc={};var hS;function aP(){if(hS)return Gc;hS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,l,o){var u=null;if(o!==void 0&&(u=""+o),l.key!==void 0&&(u=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:e,type:r,key:u,ref:l!==void 0?l:null,props:o}}return Gc.Fragment=t,Gc.jsx=n,Gc.jsxs=n,Gc}var mS;function iP(){return mS||(mS=1,Dv.exports=aP()),Dv.exports}var i=iP(),Ov={exports:{}},xt={};var vS;function sP(){if(vS)return xt;vS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function j($){return $===null||typeof $!="object"?null:($=x&&$[x]||$["@@iterator"],typeof $=="function"?$:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,S={};function C($,ie,we){this.props=$,this.context=ie,this.refs=S,this.updater=we||w}C.prototype.isReactComponent={},C.prototype.setState=function($,ie){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ie,"setState")},C.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function k(){}k.prototype=C.prototype;function E($,ie,we){this.props=$,this.context=ie,this.refs=S,this.updater=we||w}var O=E.prototype=new k;O.constructor=E,N(O,C.prototype),O.isPureReactComponent=!0;var D=Array.isArray;function A(){}var M={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function te($,ie,we){var Z=we.ref;return{$$typeof:e,type:$,key:ie,ref:Z!==void 0?Z:null,props:we}}function ce($,ie){return te($.type,ie,$.props)}function G($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function R($){var ie={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(we){return ie[we]})}var F=/\/+/g;function he($,ie){return typeof $=="object"&&$!==null&&$.key!=null?R(""+$.key):ie.toString(36)}function ee($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(A,A):($.status="pending",$.then(function(ie){$.status==="pending"&&($.status="fulfilled",$.value=ie)},function(ie){$.status==="pending"&&($.status="rejected",$.reason=ie)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function U($,ie,we,Z,K){var Ee=typeof $;(Ee==="undefined"||Ee==="boolean")&&($=null);var de=!1;if($===null)de=!0;else switch(Ee){case"bigint":case"string":case"number":de=!0;break;case"object":switch($.$$typeof){case e:case t:de=!0;break;case m:return de=$._init,U(de($._payload),ie,we,Z,K)}}if(de)return K=K($),de=Z===""?"."+he($,0):Z,D(K)?(we="",de!=null&&(we=de.replace(F,"$&/")+"/"),U(K,ie,we,"",function(me){return me})):K!=null&&(G(K)&&(K=ce(K,we+(K.key==null||$&&$.key===K.key?"":(""+K.key).replace(F,"$&/")+"/")+de)),ie.push(K)),1;de=0;var Se=Z===""?".":Z+":";if(D($))for(var W=0;W<$.length;W++)Z=$[W],Ee=Se+he(Z,W),de+=U(Z,ie,we,Ee,K);else if(W=j($),typeof W=="function")for($=W.call($),W=0;!(Z=$.next()).done;)Z=Z.value,Ee=Se+he(Z,W++),de+=U(Z,ie,we,Ee,K);else if(Ee==="object"){if(typeof $.then=="function")return U(ee($),ie,we,Z,K);throw ie=String($),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return de}function ne($,ie,we){if($==null)return $;var Z=[],K=0;return U($,Z,"","",function(Ee){return ie.call(we,Ee,K++)}),Z}function J($){if($._status===-1){var ie=$._result;ie=ie(),ie.then(function(we){($._status===0||$._status===-1)&&($._status=1,$._result=we)},function(we){($._status===0||$._status===-1)&&($._status=2,$._result=we)}),$._status===-1&&($._status=0,$._result=ie)}if($._status===1)return $._result.default;throw $._result}var xe=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},Ce={map:ne,forEach:function($,ie,we){ne($,function(){ie.apply(this,arguments)},we)},count:function($){var ie=0;return ne($,function(){ie++}),ie},toArray:function($){return ne($,function(ie){return ie})||[]},only:function($){if(!G($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return xt.Activity=v,xt.Children=Ce,xt.Component=C,xt.Fragment=n,xt.Profiler=l,xt.PureComponent=E,xt.StrictMode=r,xt.Suspense=h,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,xt.__COMPILER_RUNTIME={__proto__:null,c:function($){return M.H.useMemoCache($)}},xt.cache=function($){return function(){return $.apply(null,arguments)}},xt.cacheSignal=function(){return null},xt.cloneElement=function($,ie,we){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var Z=N({},$.props),K=$.key;if(ie!=null)for(Ee in ie.key!==void 0&&(K=""+ie.key),ie)!q.call(ie,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ie.ref===void 0||(Z[Ee]=ie[Ee]);var Ee=arguments.length-2;if(Ee===1)Z.children=we;else if(1<Ee){for(var de=Array(Ee),Se=0;Se<Ee;Se++)de[Se]=arguments[Se+2];Z.children=de}return te($.type,K,Z)},xt.createContext=function($){return $={$$typeof:u,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},xt.createElement=function($,ie,we){var Z,K={},Ee=null;if(ie!=null)for(Z in ie.key!==void 0&&(Ee=""+ie.key),ie)q.call(ie,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(K[Z]=ie[Z]);var de=arguments.length-2;if(de===1)K.children=we;else if(1<de){for(var Se=Array(de),W=0;W<de;W++)Se[W]=arguments[W+2];K.children=Se}if($&&$.defaultProps)for(Z in de=$.defaultProps,de)K[Z]===void 0&&(K[Z]=de[Z]);return te($,Ee,K)},xt.createRef=function(){return{current:null}},xt.forwardRef=function($){return{$$typeof:d,render:$}},xt.isValidElement=G,xt.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:J}},xt.memo=function($,ie){return{$$typeof:p,type:$,compare:ie===void 0?null:ie}},xt.startTransition=function($){var ie=M.T,we={};M.T=we;try{var Z=$(),K=M.S;K!==null&&K(we,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(A,xe)}catch(Ee){xe(Ee)}finally{ie!==null&&we.types!==null&&(ie.types=we.types),M.T=ie}},xt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},xt.use=function($){return M.H.use($)},xt.useActionState=function($,ie,we){return M.H.useActionState($,ie,we)},xt.useCallback=function($,ie){return M.H.useCallback($,ie)},xt.useContext=function($){return M.H.useContext($)},xt.useDebugValue=function(){},xt.useDeferredValue=function($,ie){return M.H.useDeferredValue($,ie)},xt.useEffect=function($,ie){return M.H.useEffect($,ie)},xt.useEffectEvent=function($){return M.H.useEffectEvent($)},xt.useId=function(){return M.H.useId()},xt.useImperativeHandle=function($,ie,we){return M.H.useImperativeHandle($,ie,we)},xt.useInsertionEffect=function($,ie){return M.H.useInsertionEffect($,ie)},xt.useLayoutEffect=function($,ie){return M.H.useLayoutEffect($,ie)},xt.useMemo=function($,ie){return M.H.useMemo($,ie)},xt.useOptimistic=function($,ie){return M.H.useOptimistic($,ie)},xt.useReducer=function($,ie,we){return M.H.useReducer($,ie,we)},xt.useRef=function($){return M.H.useRef($)},xt.useState=function($){return M.H.useState($)},xt.useSyncExternalStore=function($,ie,we){return M.H.useSyncExternalStore($,ie,we)},xt.useTransition=function(){return M.H.useTransition()},xt.version="19.2.0",xt}var gS;function qo(){return gS||(gS=1,Ov.exports=sP()),Ov.exports}var g=qo();const ni=si(g),lP=nP({__proto__:null,default:ni},[g]);var Tv={exports:{}},Yc={},Av={exports:{}},Mv={};var yS;function oP(){return yS||(yS=1,(function(e){function t(U,ne){var J=U.length;U.push(ne);e:for(;0<J;){var xe=J-1>>>1,Ce=U[xe];if(0<l(Ce,ne))U[xe]=ne,U[J]=Ce,J=xe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var ne=U[0],J=U.pop();if(J!==ne){U[0]=J;e:for(var xe=0,Ce=U.length,$=Ce>>>1;xe<$;){var ie=2*(xe+1)-1,we=U[ie],Z=ie+1,K=U[Z];if(0>l(we,J))Z<Ce&&0>l(K,we)?(U[xe]=K,U[Z]=J,xe=Z):(U[xe]=we,U[ie]=J,xe=ie);else if(Z<Ce&&0>l(K,J))U[xe]=K,U[Z]=J,xe=Z;else break e}}return ne}function l(U,ne){var J=U.sortIndex-ne.sortIndex;return J!==0?J:U.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var h=[],p=[],m=1,v=null,x=3,j=!1,w=!1,N=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function O(U){for(var ne=n(p);ne!==null;){if(ne.callback===null)r(p);else if(ne.startTime<=U)r(p),ne.sortIndex=ne.expirationTime,t(h,ne);else break;ne=n(p)}}function D(U){if(N=!1,O(U),!w)if(n(h)!==null)w=!0,A||(A=!0,R());else{var ne=n(p);ne!==null&&ee(D,ne.startTime-U)}}var A=!1,M=-1,q=5,te=-1;function ce(){return S?!0:!(e.unstable_now()-te<q)}function G(){if(S=!1,A){var U=e.unstable_now();te=U;var ne=!0;try{e:{w=!1,N&&(N=!1,k(M),M=-1),j=!0;var J=x;try{t:{for(O(U),v=n(h);v!==null&&!(v.expirationTime>U&&ce());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,x=v.priorityLevel;var Ce=xe(v.expirationTime<=U);if(U=e.unstable_now(),typeof Ce=="function"){v.callback=Ce,O(U),ne=!0;break t}v===n(h)&&r(h),O(U)}else r(h);v=n(h)}if(v!==null)ne=!0;else{var $=n(p);$!==null&&ee(D,$.startTime-U),ne=!1}}break e}finally{v=null,x=J,j=!1}ne=void 0}}finally{ne?R():A=!1}}}var R;if(typeof E=="function")R=function(){E(G)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,he=F.port2;F.port1.onmessage=G,R=function(){he.postMessage(null)}}else R=function(){C(G,0)};function ee(U,ne){M=C(function(){U(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(U){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var J=x;x=ne;try{return U()}finally{x=J}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=x;x=U;try{return ne()}finally{x=J}},e.unstable_scheduleCallback=function(U,ne,J){var xe=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?xe+J:xe):J=xe,U){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=J+Ce,U={id:m++,callback:ne,priorityLevel:U,startTime:J,expirationTime:Ce,sortIndex:-1},J>xe?(U.sortIndex=J,t(p,U),n(h)===null&&U===n(p)&&(N?(k(M),M=-1):N=!0,ee(D,J-xe))):(U.sortIndex=Ce,t(h,U),w||j||(w=!0,A||(A=!0,R()))),U},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(U){var ne=x;return function(){var J=x;x=ne;try{return U.apply(this,arguments)}finally{x=J}}}})(Mv)),Mv}var xS;function cP(){return xS||(xS=1,Av.exports=oP()),Av.exports}var Pv={exports:{}},Pr={};var bS;function uP(){if(bS)return Pr;bS=1;var e=qo();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(h,p,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:h,containerInfo:p,implementation:m}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Pr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Pr.createPortal=function(h,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(h,p,null,m)},Pr.flushSync=function(h){var p=u.T,m=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=p,r.p=m,r.d.f()}},Pr.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(h,p))},Pr.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Pr.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var m=p.as,v=d(m,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,j=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?r.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:j}):m==="script"&&r.d.X(h,{crossOrigin:v,integrity:x,fetchPriority:j,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Pr.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=d(p.as,p.crossOrigin);r.d.M(h,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(h)},Pr.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,v=d(m,p.crossOrigin);r.d.L(h,m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Pr.preloadModule=function(h,p){if(typeof h=="string")if(p){var m=d(p.as,p.crossOrigin);r.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(h)},Pr.requestFormReset=function(h){r.d.r(h)},Pr.unstable_batchedUpdates=function(h,p){return h(p)},Pr.useFormState=function(h,p,m){return u.H.useFormState(h,p,m)},Pr.useFormStatus=function(){return u.H.useHostTransitionStatus()},Pr.version="19.2.0",Pr}var jS;function SE(){if(jS)return Pv.exports;jS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Pv.exports=uP(),Pv.exports}var wS;function dP(){if(wS)return Yc;wS=1;var e=cP(),t=qo(),n=SE();function r(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,c=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(c=s.return),a=s.return;while(a)}return s.tag===3?c:null}function u(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function d(a){if(a.tag===31){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function h(a){if(o(a)!==a)throw Error(r(188))}function p(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(r(188));return s!==a?null:a}for(var c=a,f=s;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(f=y.return,f!==null){c=f;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return h(y),a;if(b===f)return h(y),s;b=b.sibling}throw Error(r(188))}if(c.return!==f.return)c=y,f=b;else{for(var _=!1,T=y.child;T;){if(T===c){_=!0,c=y,f=b;break}if(T===f){_=!0,f=y,c=b;break}T=T.sibling}if(!_){for(T=b.child;T;){if(T===c){_=!0,c=b,f=y;break}if(T===f){_=!0,f=b,c=y;break}T=T.sibling}if(!_)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:s}function m(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=m(a),s!==null)return s;a=a.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),E=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),te=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function R(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var F=Symbol.for("react.client.reference");function he(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===F?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case N:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case A:return"SuspenseList";case te:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case E:return a.displayName||"Context";case k:return(a._context.displayName||"Context")+".Consumer";case O:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return s=a.displayName||null,s!==null?s:he(a.type)||"Memo";case q:s=a._payload,a=a._init;try{return he(a(s))}catch{}}return null}var ee=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},xe=[],Ce=-1;function $(a){return{current:a}}function ie(a){0>Ce||(a.current=xe[Ce],xe[Ce]=null,Ce--)}function we(a,s){Ce++,xe[Ce]=a.current,a.current=s}var Z=$(null),K=$(null),Ee=$(null),de=$(null);function Se(a,s){switch(we(Ee,s),we(K,a),we(Z,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?Iw(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=Iw(s),a=Lw(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ie(Z),we(Z,a)}function W(){ie(Z),ie(K),ie(Ee)}function me(a){a.memoizedState!==null&&we(de,a);var s=Z.current,c=Lw(s,a.type);s!==c&&(we(K,a),we(Z,c))}function Me(a){K.current===a&&(ie(Z),ie(K)),de.current===a&&(ie(de),qc._currentValue=J)}var Q,$e;function Ae(a){if(Q===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Q=s&&s[1]||"",$e=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Q+a+$e}var vt=!1;function jt(a,s){if(!a||vt)return"";vt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(fe){var oe=fe}Reflect.construct(a,[],ke)}else{try{ke.call()}catch(fe){oe=fe}a.call(ke.prototype)}}else{try{throw Error()}catch(fe){oe=fe}(ke=a())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(fe){if(fe&&oe&&typeof fe.stack=="string")return[fe.stack,oe.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),_=b[0],T=b[1];if(_&&T){var B=_.split(`
`),le=T.split(`
`);for(y=f=0;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;for(;y<le.length&&!le[y].includes("DetermineComponentFrameRoot");)y++;if(f===B.length||y===le.length)for(f=B.length-1,y=le.length-1;1<=f&&0<=y&&B[f]!==le[y];)y--;for(;1<=f&&0<=y;f--,y--)if(B[f]!==le[y]){if(f!==1||y!==1)do if(f--,y--,0>y||B[f]!==le[y]){var je=`
`+B[f].replace(" at new "," at ");return a.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",a.displayName)),je}while(1<=f&&0<=y);break}}}finally{vt=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?Ae(c):""}function gt(a,s){switch(a.tag){case 26:case 27:case 5:return Ae(a.type);case 16:return Ae("Lazy");case 13:return a.child!==s&&s!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return jt(a.type,!1);case 11:return jt(a.type.render,!1);case 1:return jt(a.type,!0);case 31:return Ae("Activity");default:return""}}function Xn(a){try{var s="",c=null;do s+=gt(a,c),c=a,a=a.return;while(a);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var pn=Object.prototype.hasOwnProperty,Wn=e.unstable_scheduleCallback,ca=e.unstable_cancelCallback,Mn=e.unstable_shouldYield,yt=e.unstable_requestPaint,Tt=e.unstable_now,Ur=e.unstable_getCurrentPriorityLevel,Pn=e.unstable_ImmediatePriority,Ln=e.unstable_UserBlockingPriority,ln=e.unstable_NormalPriority,Ca=e.unstable_LowPriority,Fr=e.unstable_IdlePriority,oi=e.log,qr=e.unstable_setDisableYieldValue,Zr=null,Ut=null;function Zn(a){if(typeof oi=="function"&&qr(a),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Zr,a)}catch{}}var At=Math.clz32?Math.clz32:Vt,Lt=Math.log,Ft=Math.LN2;function Vt(a){return a>>>=0,a===0?32:31-(Lt(a)/Ft|0)|0}var qt=256,nn=262144,on=4194304;function cn(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function hn(a,s,c){var f=a.pendingLanes;if(f===0)return 0;var y=0,b=a.suspendedLanes,_=a.pingedLanes;a=a.warmLanes;var T=f&134217727;return T!==0?(f=T&~b,f!==0?y=cn(f):(_&=T,_!==0?y=cn(_):c||(c=T&~a,c!==0&&(y=cn(c))))):(T=f&~b,T!==0?y=cn(T):_!==0?y=cn(_):c||(c=f&~a,c!==0&&(y=cn(c)))),y===0?0:s!==0&&s!==y&&(s&b)===0&&(b=y&-y,c=s&-s,b>=c||b===32&&(c&4194048)!==0)?s:y}function H(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function Ve(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gt(){var a=on;return on<<=1,(on&62914560)===0&&(on=4194304),a}function Dt(a){for(var s=[],c=0;31>c;c++)s.push(a);return s}function ut(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function wt(a,s,c,f,y,b){var _=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var T=a.entanglements,B=a.expirationTimes,le=a.hiddenUpdates;for(c=_&~c;0<c;){var je=31-At(c),ke=1<<je;T[je]=0,B[je]=-1;var oe=le[je];if(oe!==null)for(le[je]=null,je=0;je<oe.length;je++){var fe=oe[je];fe!==null&&(fe.lane&=-536870913)}c&=~ke}f!==0&&Yt(a,f,0),b!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=b&~(_&~s))}function Yt(a,s,c){a.pendingLanes|=s,a.suspendedLanes&=~s;var f=31-At(s);a.entangledLanes|=s,a.entanglements[f]=a.entanglements[f]|1073741824|c&261930}function _t(a,s){var c=a.entangledLanes|=s;for(a=a.entanglements;c;){var f=31-At(c),y=1<<f;y&s|a[f]&s&&(a[f]|=s),c&=~y}}function Ge(a,s){var c=s&-s;return c=(c&42)!==0?1:kt(c),(c&(a.suspendedLanes|s))!==0?0:c}function kt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function et(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Hr(){var a=ne.p;return a!==0?a:(a=window.event,a===void 0?32:lS(a.type))}function Dn(a,s){var c=ne.p;try{return ne.p=a,s()}finally{ne.p=c}}var Ot=Math.random().toString(36).slice(2),Le="__reactFiber$"+Ot,ht="__reactProps$"+Ot,it="__reactContainer$"+Ot,Ye="__reactEvents$"+Ot,ze="__reactListeners$"+Ot,ft="__reactHandles$"+Ot,rn="__reactResources$"+Ot,dt="__reactMarker$"+Ot;function bt(a){delete a[Le],delete a[ht],delete a[Ye],delete a[ze],delete a[ft]}function at(a){var s=a[Le];if(s)return s;for(var c=a.parentNode;c;){if(s=c[it]||c[Le]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(a=Ww(a);a!==null;){if(c=a[Le])return c;a=Ww(a)}return s}a=c,c=a.parentNode}return null}function Ht(a){if(a=a[Le]||a[it]){var s=a.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return a}return null}function Sn(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(r(33))}function Jn(a){var s=a[rn];return s||(s=a[rn]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(a){a[dt]=!0}var Kt=new Set,$n={};function Nn(a,s){V(a,s),V(a+"Capture",s)}function V(a,s){for($n[a]=s,a=0;a<s.length;a++)Kt.add(s[a])}var Pe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),re={},Qe={};function Et(a){return pn.call(Qe,a)?!0:pn.call(re,a)?!1:Pe.test(a)?Qe[a]=!0:(re[a]=!0,!1)}function Cn(a,s,c){if(Et(s))if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+c)}}function Mt(a,s,c){if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+c)}}function pt(a,s,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(s,c,""+f)}}function $t(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Wr(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ua(a,s,c){var f=Object.getOwnPropertyDescriptor(a.constructor.prototype,s);if(!a.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,b=f.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return y.call(this)},set:function(_){c=""+_,b.call(this,_)}}),Object.defineProperty(a,s,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function _a(a){if(!a._valueTracker){var s=Wr(a)?"checked":"value";a._valueTracker=ua(a,s,""+a[s])}}function I(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return a&&(f=Wr(a)?a.checked?"true":"false":a.value),a=f,a!==c?(s.setValue(a),!0):!1}function ge(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var De=/[\n"\\]/g;function _e(a){return a.replace(De,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Oe(a,s,c,f,y,b,_,T){a.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.type=_:a.removeAttribute("type"),s!=null?_==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+$t(s)):a.value!==""+$t(s)&&(a.value=""+$t(s)):_!=="submit"&&_!=="reset"||a.removeAttribute("value"),s!=null?ve(a,_,$t(s)):c!=null?ve(a,_,$t(c)):f!=null&&a.removeAttribute("value"),y==null&&b!=null&&(a.defaultChecked=!!b),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?a.name=""+$t(T):a.removeAttribute("name")}function be(a,s,c,f,y,b,_,T){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),s!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){_a(a);return}c=c!=null?""+$t(c):"",s=s!=null?""+$t(s):c,T||s===a.value||(a.value=s),a.defaultValue=s}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=T?a.checked:!!f,a.defaultChecked=!!f,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.name=_),_a(a)}function ve(a,s,c){s==="number"&&ge(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function Re(a,s,c,f){if(a=a.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=s.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&f&&(a[c].defaultSelected=!0)}else{for(c=""+$t(c),s=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,f&&(a[y].defaultSelected=!0);return}s!==null||a[y].disabled||(s=a[y])}s!==null&&(s.selected=!0)}}function st(a,s,c){if(s!=null&&(s=""+$t(s),s!==a.value&&(a.value=s),c==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=c!=null?""+$t(c):""}function ot(a,s,c,f){if(s==null){if(f!=null){if(c!=null)throw Error(r(92));if(ee(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),s=c}c=$t(s),a.defaultValue=c,f=a.textContent,f===c&&f!==""&&f!==null&&(a.value=f),_a(a)}function mt(a,s){if(s){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=s;return}}a.textContent=s}var tt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Te(a,s,c){var f=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":f?a.setProperty(s,c):typeof c!="number"||c===0||tt.has(s)?s==="float"?a.cssFloat=c:a[s]=(""+c).trim():a[s]=c+"px"}function Fe(a,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(a=a.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var y in s)f=s[y],s.hasOwnProperty(y)&&c[y]!==f&&Te(a,y,f)}else for(var b in s)s.hasOwnProperty(b)&&Te(a,b,s[b])}function an(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function er(a){return gr.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Mr(){}var rl=null;function ac(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var gs=null,ys=null;function Hl(a){var s=Ht(a);if(s&&(a=s.stateNode)){var c=a[ht]||null;e:switch(a=s.stateNode,s.type){case"input":if(Oe(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+_e(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==a&&f.form===a.form){var y=f[ht]||null;if(!y)throw Error(r(90));Oe(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<c.length;s++)f=c[s],f.form===a.form&&I(f)}break e;case"textarea":st(a,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Re(a,!!c.multiple,s,!1)}}}var ic=!1;function rd(a,s,c){if(ic)return a(s,c);ic=!0;try{var f=a(s);return f}finally{if(ic=!1,(gs!==null||ys!==null)&&(Bd(),gs&&(s=gs,a=ys,ys=gs=null,Hl(s),a)))for(s=0;s<a.length;s++)Hl(a[s])}}function xs(a,s){var c=a.stateNode;if(c===null)return null;var f=c[ht]||null;if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=!1;if(Ga)try{var al={};Object.defineProperty(al,"passive",{get:function(){sc=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{sc=!1}var ci=null,lc=null,Wl=null;function oc(){if(Wl)return Wl;var a,s=lc,c=s.length,f,y="value"in ci?ci.value:ci.textContent,b=y.length;for(a=0;a<c&&s[a]===y[a];a++);var _=c-a;for(f=1;f<=_&&s[c-f]===y[b-f];f++);return Wl=y.slice(a,1<f?1-f:void 0)}function Vl(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function il(){return!0}function ui(){return!1}function yr(a){function s(c,f,y,b,_){this._reactName=c,this._targetInst=y,this.type=f,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var T in a)a.hasOwnProperty(T)&&(c=a[T],this[T]=c?c(b):b[T]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?il:ui,this.isPropagationStopped=ui,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),s}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P=yr(ka),L=v({},ka,{view:0,detail:0}),z=yr(L),ae,ue,Ie,Ke=v({},L,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ie&&(Ie&&a.type==="mousemove"?(ae=a.screenX-Ie.screenX,ue=a.screenY-Ie.screenY):ue=ae=0,Ie=a),ae)},movementY:function(a){return"movementY"in a?a.movementY:ue}}),nt=yr(Ke),_n=v({},Ke,{dataTransfer:0}),kn=yr(_n),da=v({},L,{relatedTarget:0}),rt=yr(da),fa=v({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Vn=yr(fa),Ei=v({},ka,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Di=yr(Ei),ad=v({},ka,{data:0}),cc=yr(ad),Mh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f2(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=d2[a])?!!s[a]:!1}function Ph(){return f2}var p2=v({},L,{key:function(a){if(a.key){var s=Mh[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=Vl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?u2[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(a){return a.type==="keypress"?Vl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Vl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),h2=yr(p2),m2=v({},Ke,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fb=yr(m2),v2=v({},L,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),g2=yr(v2),y2=v({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),x2=yr(y2),b2=v({},Ke,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),j2=yr(b2),w2=v({},ka,{newState:0,oldState:0}),S2=yr(w2),N2=[9,13,27,32],zh=Ga&&"CompositionEvent"in window,uc=null;Ga&&"documentMode"in document&&(uc=document.documentMode);var C2=Ga&&"TextEvent"in window&&!uc,qb=Ga&&(!zh||uc&&8<uc&&11>=uc),Hb=" ",Wb=!1;function Vb(a,s){switch(a){case"keyup":return N2.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gb(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Gl=!1;function _2(a,s){switch(a){case"compositionend":return Gb(s);case"keypress":return s.which!==32?null:(Wb=!0,Hb);case"textInput":return a=s.data,a===Hb&&Wb?null:a;default:return null}}function k2(a,s){if(Gl)return a==="compositionend"||!zh&&Vb(a,s)?(a=oc(),Wl=lc=ci=null,Gl=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qb&&s.locale!=="ko"?null:s.data;default:return null}}var E2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yb(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!E2[a.type]:s==="textarea"}function Kb(a,s,c,f){gs?ys?ys.push(f):ys=[f]:gs=f,s=Gd(s,"onChange"),0<s.length&&(c=new P("onChange","change",null,c,f),a.push({event:c,listeners:s}))}var dc=null,fc=null;function D2(a){Tw(a,0)}function id(a){var s=Sn(a);if(I(s))return a}function Qb(a,s){if(a==="change")return s}var Xb=!1;if(Ga){var Rh;if(Ga){var Ih="oninput"in document;if(!Ih){var Zb=document.createElement("div");Zb.setAttribute("oninput","return;"),Ih=typeof Zb.oninput=="function"}Rh=Ih}else Rh=!1;Xb=Rh&&(!document.documentMode||9<document.documentMode)}function Jb(){dc&&(dc.detachEvent("onpropertychange",e1),fc=dc=null)}function e1(a){if(a.propertyName==="value"&&id(fc)){var s=[];Kb(s,fc,a,ac(a)),rd(D2,s)}}function O2(a,s,c){a==="focusin"?(Jb(),dc=s,fc=c,dc.attachEvent("onpropertychange",e1)):a==="focusout"&&Jb()}function T2(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return id(fc)}function A2(a,s){if(a==="click")return id(s)}function M2(a,s){if(a==="input"||a==="change")return id(s)}function P2(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var pa=typeof Object.is=="function"?Object.is:P2;function pc(a,s){if(pa(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var c=Object.keys(a),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var y=c[f];if(!pn.call(s,y)||!pa(a[y],s[y]))return!1}return!0}function t1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function n1(a,s){var c=t1(a);a=0;for(var f;c;){if(c.nodeType===3){if(f=a+c.textContent.length,a<=s&&f>=s)return{node:c,offset:s-a};a=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=t1(c)}}function r1(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?r1(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function a1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=ge(a.document);s instanceof a.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)a=s.contentWindow;else break;s=ge(a.document)}return s}function Lh(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var z2=Ga&&"documentMode"in document&&11>=document.documentMode,Yl=null,$h=null,hc=null,Bh=!1;function i1(a,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Bh||Yl==null||Yl!==ge(f)||(f=Yl,"selectionStart"in f&&Lh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),hc&&pc(hc,f)||(hc=f,f=Gd($h,"onSelect"),0<f.length&&(s=new P("onSelect","select",null,s,c),a.push({event:s,listeners:f}),s.target=Yl)))}function sl(a,s){var c={};return c[a.toLowerCase()]=s.toLowerCase(),c["Webkit"+a]="webkit"+s,c["Moz"+a]="moz"+s,c}var Kl={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionrun:sl("Transition","TransitionRun"),transitionstart:sl("Transition","TransitionStart"),transitioncancel:sl("Transition","TransitionCancel"),transitionend:sl("Transition","TransitionEnd")},Uh={},s1={};Ga&&(s1=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function ll(a){if(Uh[a])return Uh[a];if(!Kl[a])return a;var s=Kl[a],c;for(c in s)if(s.hasOwnProperty(c)&&c in s1)return Uh[a]=s[c];return a}var l1=ll("animationend"),o1=ll("animationiteration"),c1=ll("animationstart"),R2=ll("transitionrun"),I2=ll("transitionstart"),L2=ll("transitioncancel"),u1=ll("transitionend"),d1=new Map,Fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fh.push("scrollEnd");function Ya(a,s){d1.set(a,s),Nn(s,[a])}var sd=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ea=[],Ql=0,qh=0;function ld(){for(var a=Ql,s=qh=Ql=0;s<a;){var c=Ea[s];Ea[s++]=null;var f=Ea[s];Ea[s++]=null;var y=Ea[s];Ea[s++]=null;var b=Ea[s];if(Ea[s++]=null,f!==null&&y!==null){var _=f.pending;_===null?y.next=y:(y.next=_.next,_.next=y),f.pending=y}b!==0&&f1(c,y,b)}}function od(a,s,c,f){Ea[Ql++]=a,Ea[Ql++]=s,Ea[Ql++]=c,Ea[Ql++]=f,qh|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function Hh(a,s,c,f){return od(a,s,c,f),cd(a)}function ol(a,s){return od(a,null,null,s),cd(a)}function f1(a,s,c){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c);for(var y=!1,b=a.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(y=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,y&&s!==null&&(y=31-At(c),a=b.hiddenUpdates,f=a[y],f===null?a[y]=[s]:f.push(s),s.lane=c|536870912),b):null}function cd(a){if(50<Rc)throw Rc=0,Jm=null,Error(r(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var Xl={};function $2(a,s,c,f){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(a,s,c,f){return new $2(a,s,c,f)}function Wh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Oi(a,s){var c=a.alternate;return c===null?(c=ha(a.tag,s,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=s,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,s=a.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function p1(a,s){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,s=c.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function ud(a,s,c,f,y,b){var _=0;if(f=a,typeof a=="function")Wh(a)&&(_=1);else if(typeof a=="string")_=H5(a,c,Z.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case te:return a=ha(31,c,s,y),a.elementType=te,a.lanes=b,a;case N:return cl(c.children,y,b,s);case S:_=8,y|=24;break;case C:return a=ha(12,c,s,y|2),a.elementType=C,a.lanes=b,a;case D:return a=ha(13,c,s,y),a.elementType=D,a.lanes=b,a;case A:return a=ha(19,c,s,y),a.elementType=A,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:_=10;break e;case k:_=9;break e;case O:_=11;break e;case M:_=14;break e;case q:_=16,f=null;break e}_=29,c=Error(r(130,a===null?"null":typeof a,"")),f=null}return s=ha(_,c,s,y),s.elementType=a,s.type=f,s.lanes=b,s}function cl(a,s,c,f){return a=ha(7,a,f,s),a.lanes=c,a}function Vh(a,s,c){return a=ha(6,a,null,s),a.lanes=c,a}function h1(a){var s=ha(18,null,null,0);return s.stateNode=a,s}function Gh(a,s,c){return s=ha(4,a.children!==null?a.children:[],a.key,s),s.lanes=c,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var m1=new WeakMap;function Da(a,s){if(typeof a=="object"&&a!==null){var c=m1.get(a);return c!==void 0?c:(s={value:a,source:s,stack:Xn(s)},m1.set(a,s),s)}return{value:a,source:s,stack:Xn(s)}}var Zl=[],Jl=0,dd=null,mc=0,Oa=[],Ta=0,bs=null,di=1,fi="";function Ti(a,s){Zl[Jl++]=mc,Zl[Jl++]=dd,dd=a,mc=s}function v1(a,s,c){Oa[Ta++]=di,Oa[Ta++]=fi,Oa[Ta++]=bs,bs=a;var f=di;a=fi;var y=32-At(f)-1;f&=~(1<<y),c+=1;var b=32-At(s)+y;if(30<b){var _=y-y%5;b=(f&(1<<_)-1).toString(32),f>>=_,y-=_,di=1<<32-At(s)+y|c<<y|f,fi=b+a}else di=1<<b|c<<y|f,fi=a}function Yh(a){a.return!==null&&(Ti(a,1),v1(a,1,0))}function Kh(a){for(;a===dd;)dd=Zl[--Jl],Zl[Jl]=null,mc=Zl[--Jl],Zl[Jl]=null;for(;a===bs;)bs=Oa[--Ta],Oa[Ta]=null,fi=Oa[--Ta],Oa[Ta]=null,di=Oa[--Ta],Oa[Ta]=null}function g1(a,s){Oa[Ta++]=di,Oa[Ta++]=fi,Oa[Ta++]=bs,di=s.id,fi=s.overflow,bs=a}var _r=null,On=null,Bt=!1,js=null,Aa=!1,Qh=Error(r(519));function ws(a){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vc(Da(s,a)),Qh}function y1(a){var s=a.stateNode,c=a.type,f=a.memoizedProps;switch(s[Le]=a,s[ht]=f,c){case"dialog":zt("cancel",s),zt("close",s);break;case"iframe":case"object":case"embed":zt("load",s);break;case"video":case"audio":for(c=0;c<Lc.length;c++)zt(Lc[c],s);break;case"source":zt("error",s);break;case"img":case"image":case"link":zt("error",s),zt("load",s);break;case"details":zt("toggle",s);break;case"input":zt("invalid",s),be(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":zt("invalid",s);break;case"textarea":zt("invalid",s),ot(s,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||f.suppressHydrationWarning===!0||zw(s.textContent,c)?(f.popover!=null&&(zt("beforetoggle",s),zt("toggle",s)),f.onScroll!=null&&zt("scroll",s),f.onScrollEnd!=null&&zt("scrollend",s),f.onClick!=null&&(s.onclick=Mr),s=!0):s=!1,s||ws(a,!0)}function x1(a){for(_r=a.return;_r;)switch(_r.tag){case 5:case 31:case 13:Aa=!1;return;case 27:case 3:Aa=!0;return;default:_r=_r.return}}function eo(a){if(a!==_r)return!1;if(!Bt)return x1(a),Bt=!0,!1;var s=a.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||hv(a.type,a.memoizedProps)),c=!c),c&&On&&ws(a),x1(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));On=Hw(a)}else if(s===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));On=Hw(a)}else s===27?(s=On,Rs(a.type)?(a=xv,xv=null,On=a):On=s):On=_r?Pa(a.stateNode.nextSibling):null;return!0}function ul(){On=_r=null,Bt=!1}function Xh(){var a=js;return a!==null&&(na===null?na=a:na.push.apply(na,a),js=null),a}function vc(a){js===null?js=[a]:js.push(a)}var Zh=$(null),dl=null,Ai=null;function Ss(a,s,c){we(Zh,s._currentValue),s._currentValue=c}function Mi(a){a._currentValue=Zh.current,ie(Zh)}function Jh(a,s,c){for(;a!==null;){var f=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),a===c)break;a=a.return}}function em(a,s,c,f){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var b=y.dependencies;if(b!==null){var _=y.child;b=b.firstContext;e:for(;b!==null;){var T=b;b=y;for(var B=0;B<s.length;B++)if(T.context===s[B]){b.lanes|=c,T=b.alternate,T!==null&&(T.lanes|=c),Jh(b.return,c,a),f||(_=null);break e}b=T.next}}else if(y.tag===18){if(_=y.return,_===null)throw Error(r(341));_.lanes|=c,b=_.alternate,b!==null&&(b.lanes|=c),Jh(_,c,a),_=null}else _=y.child;if(_!==null)_.return=y;else for(_=y;_!==null;){if(_===a){_=null;break}if(y=_.sibling,y!==null){y.return=_.return,_=y;break}_=_.return}y=_}}function to(a,s,c,f){a=null;for(var y=s,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var _=y.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=y.type;pa(y.pendingProps.value,_.value)||(a!==null?a.push(T):a=[T])}}else if(y===de.current){if(_=y.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(qc):a=[qc])}y=y.return}a!==null&&em(s,a,c,f),s.flags|=262144}function fd(a){for(a=a.firstContext;a!==null;){if(!pa(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function fl(a){dl=a,Ai=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function kr(a){return b1(dl,a)}function pd(a,s){return dl===null&&fl(a),b1(a,s)}function b1(a,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Ai===null){if(a===null)throw Error(r(308));Ai=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Ai=Ai.next=s;return c}var B2=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(c,f){a.push(f)}};this.abort=function(){s.aborted=!0,a.forEach(function(c){return c()})}},U2=e.unstable_scheduleCallback,F2=e.unstable_NormalPriority,tr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tm(){return{controller:new B2,data:new Map,refCount:0}}function gc(a){a.refCount--,a.refCount===0&&U2(F2,function(){a.controller.abort()})}var yc=null,nm=0,no=0,ro=null;function q2(a,s){if(yc===null){var c=yc=[];nm=0,no=iv(),ro={status:"pending",value:void 0,then:function(f){c.push(f)}}}return nm++,s.then(j1,j1),s}function j1(){if(--nm===0&&yc!==null){ro!==null&&(ro.status="fulfilled");var a=yc;yc=null,no=0,ro=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function H2(a,s){var c=[],f={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){f.status="fulfilled",f.value=s;for(var y=0;y<c.length;y++)(0,c[y])(s)},function(y){for(f.status="rejected",f.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),f}var w1=U.S;U.S=function(a,s){iw=Tt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&q2(a,s),w1!==null&&w1(a,s)};var pl=$(null);function rm(){var a=pl.current;return a!==null?a:bn.pooledCache}function hd(a,s){s===null?we(pl,pl.current):we(pl,s.pool)}function S1(){var a=rm();return a===null?null:{parent:tr._currentValue,pool:a}}var ao=Error(r(460)),am=Error(r(474)),md=Error(r(542)),vd={then:function(){}};function N1(a){return a=a.status,a==="fulfilled"||a==="rejected"}function C1(a,s,c){switch(c=a[c],c===void 0?a.push(s):c!==s&&(s.then(Mr,Mr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,k1(a),a;default:if(typeof s.status=="string")s.then(Mr,Mr);else{if(a=bn,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=s,a.status="pending",a.then(function(f){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=f}},function(f){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,k1(a),a}throw ml=s,ao}}function hl(a){try{var s=a._init;return s(a._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ml=c,ao):c}}var ml=null;function _1(){if(ml===null)throw Error(r(459));var a=ml;return ml=null,a}function k1(a){if(a===ao||a===md)throw Error(r(483))}var io=null,xc=0;function gd(a){var s=xc;return xc+=1,io===null&&(io=[]),C1(io,a,s)}function bc(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function yd(a,s){throw s.$$typeof===x?Error(r(525)):(a=Object.prototype.toString.call(s),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function E1(a){function s(X,Y){if(a){var se=X.deletions;se===null?(X.deletions=[Y],X.flags|=16):se.push(Y)}}function c(X,Y){if(!a)return null;for(;Y!==null;)s(X,Y),Y=Y.sibling;return null}function f(X){for(var Y=new Map;X!==null;)X.key!==null?Y.set(X.key,X):Y.set(X.index,X),X=X.sibling;return Y}function y(X,Y){return X=Oi(X,Y),X.index=0,X.sibling=null,X}function b(X,Y,se){return X.index=se,a?(se=X.alternate,se!==null?(se=se.index,se<Y?(X.flags|=67108866,Y):se):(X.flags|=67108866,Y)):(X.flags|=1048576,Y)}function _(X){return a&&X.alternate===null&&(X.flags|=67108866),X}function T(X,Y,se,Ne){return Y===null||Y.tag!==6?(Y=Vh(se,X.mode,Ne),Y.return=X,Y):(Y=y(Y,se),Y.return=X,Y)}function B(X,Y,se,Ne){var Ze=se.type;return Ze===N?je(X,Y,se.props.children,Ne,se.key):Y!==null&&(Y.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===q&&hl(Ze)===Y.type)?(Y=y(Y,se.props),bc(Y,se),Y.return=X,Y):(Y=ud(se.type,se.key,se.props,null,X.mode,Ne),bc(Y,se),Y.return=X,Y)}function le(X,Y,se,Ne){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==se.containerInfo||Y.stateNode.implementation!==se.implementation?(Y=Gh(se,X.mode,Ne),Y.return=X,Y):(Y=y(Y,se.children||[]),Y.return=X,Y)}function je(X,Y,se,Ne,Ze){return Y===null||Y.tag!==7?(Y=cl(se,X.mode,Ne,Ze),Y.return=X,Y):(Y=y(Y,se),Y.return=X,Y)}function ke(X,Y,se){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Vh(""+Y,X.mode,se),Y.return=X,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case j:return se=ud(Y.type,Y.key,Y.props,null,X.mode,se),bc(se,Y),se.return=X,se;case w:return Y=Gh(Y,X.mode,se),Y.return=X,Y;case q:return Y=hl(Y),ke(X,Y,se)}if(ee(Y)||R(Y))return Y=cl(Y,X.mode,se,null),Y.return=X,Y;if(typeof Y.then=="function")return ke(X,gd(Y),se);if(Y.$$typeof===E)return ke(X,pd(X,Y),se);yd(X,Y)}return null}function oe(X,Y,se,Ne){var Ze=Y!==null?Y.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Ze!==null?null:T(X,Y,""+se,Ne);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case j:return se.key===Ze?B(X,Y,se,Ne):null;case w:return se.key===Ze?le(X,Y,se,Ne):null;case q:return se=hl(se),oe(X,Y,se,Ne)}if(ee(se)||R(se))return Ze!==null?null:je(X,Y,se,Ne,null);if(typeof se.then=="function")return oe(X,Y,gd(se),Ne);if(se.$$typeof===E)return oe(X,Y,pd(X,se),Ne);yd(X,se)}return null}function fe(X,Y,se,Ne,Ze){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return X=X.get(se)||null,T(Y,X,""+Ne,Ze);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case j:return X=X.get(Ne.key===null?se:Ne.key)||null,B(Y,X,Ne,Ze);case w:return X=X.get(Ne.key===null?se:Ne.key)||null,le(Y,X,Ne,Ze);case q:return Ne=hl(Ne),fe(X,Y,se,Ne,Ze)}if(ee(Ne)||R(Ne))return X=X.get(se)||null,je(Y,X,Ne,Ze,null);if(typeof Ne.then=="function")return fe(X,Y,se,gd(Ne),Ze);if(Ne.$$typeof===E)return fe(X,Y,se,pd(Y,Ne),Ze);yd(Y,Ne)}return null}function qe(X,Y,se,Ne){for(var Ze=null,Xt=null,He=Y,Ct=Y=0,It=null;He!==null&&Ct<se.length;Ct++){He.index>Ct?(It=He,He=null):It=He.sibling;var Zt=oe(X,He,se[Ct],Ne);if(Zt===null){He===null&&(He=It);break}a&&He&&Zt.alternate===null&&s(X,He),Y=b(Zt,Y,Ct),Xt===null?Ze=Zt:Xt.sibling=Zt,Xt=Zt,He=It}if(Ct===se.length)return c(X,He),Bt&&Ti(X,Ct),Ze;if(He===null){for(;Ct<se.length;Ct++)He=ke(X,se[Ct],Ne),He!==null&&(Y=b(He,Y,Ct),Xt===null?Ze=He:Xt.sibling=He,Xt=He);return Bt&&Ti(X,Ct),Ze}for(He=f(He);Ct<se.length;Ct++)It=fe(He,X,Ct,se[Ct],Ne),It!==null&&(a&&It.alternate!==null&&He.delete(It.key===null?Ct:It.key),Y=b(It,Y,Ct),Xt===null?Ze=It:Xt.sibling=It,Xt=It);return a&&He.forEach(function(Us){return s(X,Us)}),Bt&&Ti(X,Ct),Ze}function ct(X,Y,se,Ne){if(se==null)throw Error(r(151));for(var Ze=null,Xt=null,He=Y,Ct=Y=0,It=null,Zt=se.next();He!==null&&!Zt.done;Ct++,Zt=se.next()){He.index>Ct?(It=He,He=null):It=He.sibling;var Us=oe(X,He,Zt.value,Ne);if(Us===null){He===null&&(He=It);break}a&&He&&Us.alternate===null&&s(X,He),Y=b(Us,Y,Ct),Xt===null?Ze=Us:Xt.sibling=Us,Xt=Us,He=It}if(Zt.done)return c(X,He),Bt&&Ti(X,Ct),Ze;if(He===null){for(;!Zt.done;Ct++,Zt=se.next())Zt=ke(X,Zt.value,Ne),Zt!==null&&(Y=b(Zt,Y,Ct),Xt===null?Ze=Zt:Xt.sibling=Zt,Xt=Zt);return Bt&&Ti(X,Ct),Ze}for(He=f(He);!Zt.done;Ct++,Zt=se.next())Zt=fe(He,X,Ct,Zt.value,Ne),Zt!==null&&(a&&Zt.alternate!==null&&He.delete(Zt.key===null?Ct:Zt.key),Y=b(Zt,Y,Ct),Xt===null?Ze=Zt:Xt.sibling=Zt,Xt=Zt);return a&&He.forEach(function(tP){return s(X,tP)}),Bt&&Ti(X,Ct),Ze}function gn(X,Y,se,Ne){if(typeof se=="object"&&se!==null&&se.type===N&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case j:e:{for(var Ze=se.key;Y!==null;){if(Y.key===Ze){if(Ze=se.type,Ze===N){if(Y.tag===7){c(X,Y.sibling),Ne=y(Y,se.props.children),Ne.return=X,X=Ne;break e}}else if(Y.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===q&&hl(Ze)===Y.type){c(X,Y.sibling),Ne=y(Y,se.props),bc(Ne,se),Ne.return=X,X=Ne;break e}c(X,Y);break}else s(X,Y);Y=Y.sibling}se.type===N?(Ne=cl(se.props.children,X.mode,Ne,se.key),Ne.return=X,X=Ne):(Ne=ud(se.type,se.key,se.props,null,X.mode,Ne),bc(Ne,se),Ne.return=X,X=Ne)}return _(X);case w:e:{for(Ze=se.key;Y!==null;){if(Y.key===Ze)if(Y.tag===4&&Y.stateNode.containerInfo===se.containerInfo&&Y.stateNode.implementation===se.implementation){c(X,Y.sibling),Ne=y(Y,se.children||[]),Ne.return=X,X=Ne;break e}else{c(X,Y);break}else s(X,Y);Y=Y.sibling}Ne=Gh(se,X.mode,Ne),Ne.return=X,X=Ne}return _(X);case q:return se=hl(se),gn(X,Y,se,Ne)}if(ee(se))return qe(X,Y,se,Ne);if(R(se)){if(Ze=R(se),typeof Ze!="function")throw Error(r(150));return se=Ze.call(se),ct(X,Y,se,Ne)}if(typeof se.then=="function")return gn(X,Y,gd(se),Ne);if(se.$$typeof===E)return gn(X,Y,pd(X,se),Ne);yd(X,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Y!==null&&Y.tag===6?(c(X,Y.sibling),Ne=y(Y,se),Ne.return=X,X=Ne):(c(X,Y),Ne=Vh(se,X.mode,Ne),Ne.return=X,X=Ne),_(X)):c(X,Y)}return function(X,Y,se,Ne){try{xc=0;var Ze=gn(X,Y,se,Ne);return io=null,Ze}catch(He){if(He===ao||He===md)throw He;var Xt=ha(29,He,null,X.mode);return Xt.lanes=Ne,Xt.return=X,Xt}finally{}}}var vl=E1(!0),D1=E1(!1),Ns=!1;function im(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sm(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Cs(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function _s(a,s,c){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(en&2)!==0){var y=f.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),f.pending=s,s=cd(a),f1(a,null,c),s}return od(a,f,s,c),cd(a)}function jc(a,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var f=s.lanes;f&=a.pendingLanes,c|=f,s.lanes=c,_t(a,c)}}function lm(a,s){var c=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=_:b=b.next=_,c=c.next}while(c!==null);b===null?y=b=s:b=b.next=s}else y=b=s;c={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=s:a.next=s,c.lastBaseUpdate=s}var om=!1;function wc(){if(om){var a=ro;if(a!==null)throw a}}function Sc(a,s,c,f){om=!1;var y=a.updateQueue;Ns=!1;var b=y.firstBaseUpdate,_=y.lastBaseUpdate,T=y.shared.pending;if(T!==null){y.shared.pending=null;var B=T,le=B.next;B.next=null,_===null?b=le:_.next=le,_=B;var je=a.alternate;je!==null&&(je=je.updateQueue,T=je.lastBaseUpdate,T!==_&&(T===null?je.firstBaseUpdate=le:T.next=le,je.lastBaseUpdate=B))}if(b!==null){var ke=y.baseState;_=0,je=le=B=null,T=b;do{var oe=T.lane&-536870913,fe=oe!==T.lane;if(fe?(Rt&oe)===oe:(f&oe)===oe){oe!==0&&oe===no&&(om=!0),je!==null&&(je=je.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var qe=a,ct=T;oe=s;var gn=c;switch(ct.tag){case 1:if(qe=ct.payload,typeof qe=="function"){ke=qe.call(gn,ke,oe);break e}ke=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=ct.payload,oe=typeof qe=="function"?qe.call(gn,ke,oe):qe,oe==null)break e;ke=v({},ke,oe);break e;case 2:Ns=!0}}oe=T.callback,oe!==null&&(a.flags|=64,fe&&(a.flags|=8192),fe=y.callbacks,fe===null?y.callbacks=[oe]:fe.push(oe))}else fe={lane:oe,tag:T.tag,payload:T.payload,callback:T.callback,next:null},je===null?(le=je=fe,B=ke):je=je.next=fe,_|=oe;if(T=T.next,T===null){if(T=y.shared.pending,T===null)break;fe=T,T=fe.next,fe.next=null,y.lastBaseUpdate=fe,y.shared.pending=null}}while(!0);je===null&&(B=ke),y.baseState=B,y.firstBaseUpdate=le,y.lastBaseUpdate=je,b===null&&(y.shared.lanes=0),Ts|=_,a.lanes=_,a.memoizedState=ke}}function O1(a,s){if(typeof a!="function")throw Error(r(191,a));a.call(s)}function T1(a,s){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)O1(c[a],s)}var so=$(null),xd=$(0);function A1(a,s){a=Fi,we(xd,a),we(so,s),Fi=a|s.baseLanes}function cm(){we(xd,Fi),we(so,so.current)}function um(){Fi=xd.current,ie(so),ie(xd)}var ma=$(null),Ma=null;function ks(a){var s=a.alternate;we(Gn,Gn.current&1),we(ma,a),Ma===null&&(s===null||so.current!==null||s.memoizedState!==null)&&(Ma=a)}function dm(a){we(Gn,Gn.current),we(ma,a),Ma===null&&(Ma=a)}function M1(a){a.tag===22?(we(Gn,Gn.current),we(ma,a),Ma===null&&(Ma=a)):Es()}function Es(){we(Gn,Gn.current),we(ma,ma.current)}function va(a){ie(ma),Ma===a&&(Ma=null),ie(Gn)}var Gn=$(0);function bd(a){for(var s=a;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||gv(c)||yv(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pi=0,St=null,mn=null,nr=null,jd=!1,lo=!1,gl=!1,wd=0,Nc=0,oo=null,W2=0;function Fn(){throw Error(r(321))}function fm(a,s){if(s===null)return!1;for(var c=0;c<s.length&&c<a.length;c++)if(!pa(a[c],s[c]))return!1;return!0}function pm(a,s,c,f,y,b){return Pi=b,St=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,U.H=a===null||a.memoizedState===null?vj:Em,gl=!1,b=c(f,y),gl=!1,lo&&(b=z1(s,c,f,y)),P1(a),b}function P1(a){U.H=kc;var s=mn!==null&&mn.next!==null;if(Pi=0,nr=mn=St=null,jd=!1,Nc=0,oo=null,s)throw Error(r(300));a===null||rr||(a=a.dependencies,a!==null&&fd(a)&&(rr=!0))}function z1(a,s,c,f){St=a;var y=0;do{if(lo&&(oo=null),Nc=0,lo=!1,25<=y)throw Error(r(301));if(y+=1,nr=mn=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}U.H=gj,b=s(c,f)}while(lo);return b}function V2(){var a=U.H,s=a.useState()[0];return s=typeof s.then=="function"?Cc(s):s,a=a.useState()[0],(mn!==null?mn.memoizedState:null)!==a&&(St.flags|=1024),s}function hm(){var a=wd!==0;return wd=0,a}function mm(a,s,c){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~c}function vm(a){if(jd){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}jd=!1}Pi=0,nr=mn=St=null,lo=!1,Nc=wd=0,oo=null}function Vr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nr===null?St.memoizedState=nr=a:nr=nr.next=a,nr}function Yn(){if(mn===null){var a=St.alternate;a=a!==null?a.memoizedState:null}else a=mn.next;var s=nr===null?St.memoizedState:nr.next;if(s!==null)nr=s,mn=a;else{if(a===null)throw St.alternate===null?Error(r(467)):Error(r(310));mn=a,a={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},nr===null?St.memoizedState=nr=a:nr=nr.next=a}return nr}function Sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cc(a){var s=Nc;return Nc+=1,oo===null&&(oo=[]),a=C1(oo,a,s),s=St,(nr===null?s.memoizedState:nr.next)===null&&(s=s.alternate,U.H=s===null||s.memoizedState===null?vj:Em),a}function Nd(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Cc(a);if(a.$$typeof===E)return kr(a)}throw Error(r(438,String(a)))}function gm(a){var s=null,c=St.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var f=St.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Sd(),St.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(a),f=0;f<a;f++)c[f]=ce;return s.index++,c}function zi(a,s){return typeof s=="function"?s(a):s}function Cd(a){var s=Yn();return ym(s,mn,a)}function ym(a,s,c){var f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var y=a.baseQueue,b=f.pending;if(b!==null){if(y!==null){var _=y.next;y.next=b.next,b.next=_}s.baseQueue=y=b,f.pending=null}if(b=a.baseState,y===null)a.memoizedState=b;else{s=y.next;var T=_=null,B=null,le=s,je=!1;do{var ke=le.lane&-536870913;if(ke!==le.lane?(Rt&ke)===ke:(Pi&ke)===ke){var oe=le.revertLane;if(oe===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ke===no&&(je=!0);else if((Pi&oe)===oe){le=le.next,oe===no&&(je=!0);continue}else ke={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},B===null?(T=B=ke,_=b):B=B.next=ke,St.lanes|=oe,Ts|=oe;ke=le.action,gl&&c(b,ke),b=le.hasEagerState?le.eagerState:c(b,ke)}else oe={lane:ke,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},B===null?(T=B=oe,_=b):B=B.next=oe,St.lanes|=ke,Ts|=ke;le=le.next}while(le!==null&&le!==s);if(B===null?_=b:B.next=T,!pa(b,a.memoizedState)&&(rr=!0,je&&(c=ro,c!==null)))throw c;a.memoizedState=b,a.baseState=_,a.baseQueue=B,f.lastRenderedState=b}return y===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function xm(a){var s=Yn(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=c.dispatch,y=c.pending,b=s.memoizedState;if(y!==null){c.pending=null;var _=y=y.next;do b=a(b,_.action),_=_.next;while(_!==y);pa(b,s.memoizedState)||(rr=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),c.lastRenderedState=b}return[b,f]}function R1(a,s,c){var f=St,y=Yn(),b=Bt;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=s();var _=!pa((mn||y).memoizedState,c);if(_&&(y.memoizedState=c,rr=!0),y=y.queue,wm($1.bind(null,f,y,a),[a]),y.getSnapshot!==s||_||nr!==null&&nr.memoizedState.tag&1){if(f.flags|=2048,co(9,{destroy:void 0},L1.bind(null,f,y,c,s),null),bn===null)throw Error(r(349));b||(Pi&127)!==0||I1(f,s,c)}return c}function I1(a,s,c){a.flags|=16384,a={getSnapshot:s,value:c},s=St.updateQueue,s===null?(s=Sd(),St.updateQueue=s,s.stores=[a]):(c=s.stores,c===null?s.stores=[a]:c.push(a))}function L1(a,s,c,f){s.value=c,s.getSnapshot=f,B1(s)&&U1(a)}function $1(a,s,c){return c(function(){B1(s)&&U1(a)})}function B1(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!pa(a,c)}catch{return!0}}function U1(a){var s=ol(a,2);s!==null&&ra(s,a,2)}function bm(a){var s=Vr();if(typeof a=="function"){var c=a;if(a=c(),gl){Zn(!0);try{c()}finally{Zn(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},s}function F1(a,s,c,f){return a.baseState=c,ym(a,mn,typeof f=="function"?f:zi)}function G2(a,s,c,f,y){if(Ed(a))throw Error(r(485));if(a=s.action,a!==null){var b={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){b.listeners.push(_)}};U.T!==null?c(!0):b.isTransition=!1,f(b),c=s.pending,c===null?(b.next=s.pending=b,q1(s,b)):(b.next=c.next,s.pending=c.next=b)}}function q1(a,s){var c=s.action,f=s.payload,y=a.state;if(s.isTransition){var b=U.T,_={};U.T=_;try{var T=c(y,f),B=U.S;B!==null&&B(_,T),H1(a,s,T)}catch(le){jm(a,s,le)}finally{b!==null&&_.types!==null&&(b.types=_.types),U.T=b}}else try{b=c(y,f),H1(a,s,b)}catch(le){jm(a,s,le)}}function H1(a,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){W1(a,s,f)},function(f){return jm(a,s,f)}):W1(a,s,c)}function W1(a,s,c){s.status="fulfilled",s.value=c,V1(s),a.state=c,s=a.pending,s!==null&&(c=s.next,c===s?a.pending=null:(c=c.next,s.next=c,q1(a,c)))}function jm(a,s,c){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=c,V1(s),s=s.next;while(s!==f)}a.action=null}function V1(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function G1(a,s){return s}function Y1(a,s){if(Bt){var c=bn.formState;if(c!==null){e:{var f=St;if(Bt){if(On){t:{for(var y=On,b=Aa;y.nodeType!==8;){if(!b){y=null;break t}if(y=Pa(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){On=Pa(y.nextSibling),f=y.data==="F!";break e}}ws(f)}f=!1}f&&(s=c[0])}}return c=Vr(),c.memoizedState=c.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:G1,lastRenderedState:s},c.queue=f,c=pj.bind(null,St,f),f.dispatch=c,f=bm(!1),b=km.bind(null,St,!1,f.queue),f=Vr(),y={state:s,dispatch:null,action:a,pending:null},f.queue=y,c=G2.bind(null,St,y,b,c),y.dispatch=c,f.memoizedState=a,[s,c,!1]}function K1(a){var s=Yn();return Q1(s,mn,a)}function Q1(a,s,c){if(s=ym(a,s,G1)[0],a=Cd(zi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Cc(s)}catch(_){throw _===ao?md:_}else f=s;s=Yn();var y=s.queue,b=y.dispatch;return c!==s.memoizedState&&(St.flags|=2048,co(9,{destroy:void 0},Y2.bind(null,y,c),null)),[f,b,a]}function Y2(a,s){a.action=s}function X1(a){var s=Yn(),c=mn;if(c!==null)return Q1(s,c,a);Yn(),s=s.memoizedState,c=Yn();var f=c.queue.dispatch;return c.memoizedState=a,[s,f,!1]}function co(a,s,c,f){return a={tag:a,create:c,deps:f,inst:s,next:null},s=St.updateQueue,s===null&&(s=Sd(),St.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=a.next=a:(f=c.next,c.next=a,a.next=f,s.lastEffect=a),a}function Z1(){return Yn().memoizedState}function _d(a,s,c,f){var y=Vr();St.flags|=a,y.memoizedState=co(1|s,{destroy:void 0},c,f===void 0?null:f)}function kd(a,s,c,f){var y=Yn();f=f===void 0?null:f;var b=y.memoizedState.inst;mn!==null&&f!==null&&fm(f,mn.memoizedState.deps)?y.memoizedState=co(s,b,c,f):(St.flags|=a,y.memoizedState=co(1|s,b,c,f))}function J1(a,s){_d(8390656,8,a,s)}function wm(a,s){kd(2048,8,a,s)}function K2(a){St.flags|=4;var s=St.updateQueue;if(s===null)s=Sd(),St.updateQueue=s,s.events=[a];else{var c=s.events;c===null?s.events=[a]:c.push(a)}}function ej(a){var s=Yn().memoizedState;return K2({ref:s,nextImpl:a}),function(){if((en&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function tj(a,s){return kd(4,2,a,s)}function nj(a,s){return kd(4,4,a,s)}function rj(a,s){if(typeof s=="function"){a=a();var c=s(a);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function aj(a,s,c){c=c!=null?c.concat([a]):null,kd(4,4,rj.bind(null,s,a),c)}function Sm(){}function ij(a,s){var c=Yn();s=s===void 0?null:s;var f=c.memoizedState;return s!==null&&fm(s,f[1])?f[0]:(c.memoizedState=[a,s],a)}function sj(a,s){var c=Yn();s=s===void 0?null:s;var f=c.memoizedState;if(s!==null&&fm(s,f[1]))return f[0];if(f=a(),gl){Zn(!0);try{a()}finally{Zn(!1)}}return c.memoizedState=[f,s],f}function Nm(a,s,c){return c===void 0||(Pi&1073741824)!==0&&(Rt&261930)===0?a.memoizedState=s:(a.memoizedState=c,a=lw(),St.lanes|=a,Ts|=a,c)}function lj(a,s,c,f){return pa(c,s)?c:so.current!==null?(a=Nm(a,c,f),pa(a,s)||(rr=!0),a):(Pi&42)===0||(Pi&1073741824)!==0&&(Rt&261930)===0?(rr=!0,a.memoizedState=c):(a=lw(),St.lanes|=a,Ts|=a,s)}function oj(a,s,c,f,y){var b=ne.p;ne.p=b!==0&&8>b?b:8;var _=U.T,T={};U.T=T,km(a,!1,s,c);try{var B=y(),le=U.S;if(le!==null&&le(T,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var je=H2(B,f);_c(a,s,je,xa(a))}else _c(a,s,f,xa(a))}catch(ke){_c(a,s,{then:function(){},status:"rejected",reason:ke},xa())}finally{ne.p=b,_!==null&&T.types!==null&&(_.types=T.types),U.T=_}}function Q2(){}function Cm(a,s,c,f){if(a.tag!==5)throw Error(r(476));var y=cj(a).queue;oj(a,y,s,J,c===null?Q2:function(){return uj(a),c(f)})}function cj(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:J},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:c},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function uj(a){var s=cj(a);s.next===null&&(s=a.alternate.memoizedState),_c(a,s.next.queue,{},xa())}function _m(){return kr(qc)}function dj(){return Yn().memoizedState}function fj(){return Yn().memoizedState}function X2(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var c=xa();a=Cs(c);var f=_s(s,a,c);f!==null&&(ra(f,s,c),jc(f,s,c)),s={cache:tm()},a.payload=s;return}s=s.return}}function Z2(a,s,c){var f=xa();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ed(a)?hj(s,c):(c=Hh(a,s,c,f),c!==null&&(ra(c,a,f),mj(c,s,f)))}function pj(a,s,c){var f=xa();_c(a,s,c,f)}function _c(a,s,c,f){var y={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ed(a))hj(s,y);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var _=s.lastRenderedState,T=b(_,c);if(y.hasEagerState=!0,y.eagerState=T,pa(T,_))return od(a,s,y,0),bn===null&&ld(),!1}catch{}finally{}if(c=Hh(a,s,y,f),c!==null)return ra(c,a,f),mj(c,s,f),!0}return!1}function km(a,s,c,f){if(f={lane:2,revertLane:iv(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ed(a)){if(s)throw Error(r(479))}else s=Hh(a,c,f,2),s!==null&&ra(s,a,2)}function Ed(a){var s=a.alternate;return a===St||s!==null&&s===St}function hj(a,s){lo=jd=!0;var c=a.pending;c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s}function mj(a,s,c){if((c&4194048)!==0){var f=s.lanes;f&=a.pendingLanes,c|=f,s.lanes=c,_t(a,c)}}var kc={readContext:kr,use:Nd,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useLayoutEffect:Fn,useInsertionEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useSyncExternalStore:Fn,useId:Fn,useHostTransitionStatus:Fn,useFormState:Fn,useActionState:Fn,useOptimistic:Fn,useMemoCache:Fn,useCacheRefresh:Fn};kc.useEffectEvent=Fn;var vj={readContext:kr,use:Nd,useCallback:function(a,s){return Vr().memoizedState=[a,s===void 0?null:s],a},useContext:kr,useEffect:J1,useImperativeHandle:function(a,s,c){c=c!=null?c.concat([a]):null,_d(4194308,4,rj.bind(null,s,a),c)},useLayoutEffect:function(a,s){return _d(4194308,4,a,s)},useInsertionEffect:function(a,s){_d(4,2,a,s)},useMemo:function(a,s){var c=Vr();s=s===void 0?null:s;var f=a();if(gl){Zn(!0);try{a()}finally{Zn(!1)}}return c.memoizedState=[f,s],f},useReducer:function(a,s,c){var f=Vr();if(c!==void 0){var y=c(s);if(gl){Zn(!0);try{c(s)}finally{Zn(!1)}}}else y=s;return f.memoizedState=f.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},f.queue=a,a=a.dispatch=Z2.bind(null,St,a),[f.memoizedState,a]},useRef:function(a){var s=Vr();return a={current:a},s.memoizedState=a},useState:function(a){a=bm(a);var s=a.queue,c=pj.bind(null,St,s);return s.dispatch=c,[a.memoizedState,c]},useDebugValue:Sm,useDeferredValue:function(a,s){var c=Vr();return Nm(c,a,s)},useTransition:function(){var a=bm(!1);return a=oj.bind(null,St,a.queue,!0,!1),Vr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,c){var f=St,y=Vr();if(Bt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),bn===null)throw Error(r(349));(Rt&127)!==0||I1(f,s,c)}y.memoizedState=c;var b={value:c,getSnapshot:s};return y.queue=b,J1($1.bind(null,f,b,a),[a]),f.flags|=2048,co(9,{destroy:void 0},L1.bind(null,f,b,c,s),null),c},useId:function(){var a=Vr(),s=bn.identifierPrefix;if(Bt){var c=fi,f=di;c=(f&~(1<<32-At(f)-1)).toString(32)+c,s="_"+s+"R_"+c,c=wd++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=W2++,s="_"+s+"r_"+c.toString(32)+"_";return a.memoizedState=s},useHostTransitionStatus:_m,useFormState:Y1,useActionState:Y1,useOptimistic:function(a){var s=Vr();s.memoizedState=s.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=km.bind(null,St,!0,c),c.dispatch=s,[a,s]},useMemoCache:gm,useCacheRefresh:function(){return Vr().memoizedState=X2.bind(null,St)},useEffectEvent:function(a){var s=Vr(),c={impl:a};return s.memoizedState=c,function(){if((en&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Em={readContext:kr,use:Nd,useCallback:ij,useContext:kr,useEffect:wm,useImperativeHandle:aj,useInsertionEffect:tj,useLayoutEffect:nj,useMemo:sj,useReducer:Cd,useRef:Z1,useState:function(){return Cd(zi)},useDebugValue:Sm,useDeferredValue:function(a,s){var c=Yn();return lj(c,mn.memoizedState,a,s)},useTransition:function(){var a=Cd(zi)[0],s=Yn().memoizedState;return[typeof a=="boolean"?a:Cc(a),s]},useSyncExternalStore:R1,useId:dj,useHostTransitionStatus:_m,useFormState:K1,useActionState:K1,useOptimistic:function(a,s){var c=Yn();return F1(c,mn,a,s)},useMemoCache:gm,useCacheRefresh:fj};Em.useEffectEvent=ej;var gj={readContext:kr,use:Nd,useCallback:ij,useContext:kr,useEffect:wm,useImperativeHandle:aj,useInsertionEffect:tj,useLayoutEffect:nj,useMemo:sj,useReducer:xm,useRef:Z1,useState:function(){return xm(zi)},useDebugValue:Sm,useDeferredValue:function(a,s){var c=Yn();return mn===null?Nm(c,a,s):lj(c,mn.memoizedState,a,s)},useTransition:function(){var a=xm(zi)[0],s=Yn().memoizedState;return[typeof a=="boolean"?a:Cc(a),s]},useSyncExternalStore:R1,useId:dj,useHostTransitionStatus:_m,useFormState:X1,useActionState:X1,useOptimistic:function(a,s){var c=Yn();return mn!==null?F1(c,mn,a,s):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:gm,useCacheRefresh:fj};gj.useEffectEvent=ej;function Dm(a,s,c,f){s=a.memoizedState,c=c(f,s),c=c==null?s:v({},s,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Om={enqueueSetState:function(a,s,c){a=a._reactInternals;var f=xa(),y=Cs(f);y.payload=s,c!=null&&(y.callback=c),s=_s(a,y,f),s!==null&&(ra(s,a,f),jc(s,a,f))},enqueueReplaceState:function(a,s,c){a=a._reactInternals;var f=xa(),y=Cs(f);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=_s(a,y,f),s!==null&&(ra(s,a,f),jc(s,a,f))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var c=xa(),f=Cs(c);f.tag=2,s!=null&&(f.callback=s),s=_s(a,f,c),s!==null&&(ra(s,a,c),jc(s,a,c))}};function yj(a,s,c,f,y,b,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,b,_):s.prototype&&s.prototype.isPureReactComponent?!pc(c,f)||!pc(y,b):!0}function xj(a,s,c,f){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==a&&Om.enqueueReplaceState(s,s.state,null)}function yl(a,s){var c=s;if("ref"in s){c={};for(var f in s)f!=="ref"&&(c[f]=s[f])}if(a=a.defaultProps){c===s&&(c=v({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}function bj(a){sd(a)}function jj(a){console.error(a)}function wj(a){sd(a)}function Dd(a,s){try{var c=a.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function Sj(a,s,c){try{var f=a.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Tm(a,s,c){return c=Cs(c),c.tag=3,c.payload={element:null},c.callback=function(){Dd(a,s)},c}function Nj(a){return a=Cs(a),a.tag=3,a}function Cj(a,s,c,f){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=f.value;a.payload=function(){return y(b)},a.callback=function(){Sj(s,c,f)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){Sj(s,c,f),typeof y!="function"&&(As===null?As=new Set([this]):As.add(this));var T=f.stack;this.componentDidCatch(f.value,{componentStack:T!==null?T:""})})}function J2(a,s,c,f,y){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=c.alternate,s!==null&&to(s,c,y,!0),c=ma.current,c!==null){switch(c.tag){case 31:case 13:return Ma===null?Ud():c.alternate===null&&qn===0&&(qn=3),c.flags&=-257,c.flags|=65536,c.lanes=y,f===vd?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([f]):s.add(f),nv(a,f,y)),!1;case 22:return c.flags|=65536,f===vd?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([f]):c.add(f)),nv(a,f,y)),!1}throw Error(r(435,c.tag))}return nv(a,f,y),Ud(),!1}if(Bt)return s=ma.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,f!==Qh&&(a=Error(r(422),{cause:f}),vc(Da(a,c)))):(f!==Qh&&(s=Error(r(423),{cause:f}),vc(Da(s,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,f=Da(f,c),y=Tm(a.stateNode,f,y),lm(a,y),qn!==4&&(qn=2)),!1;var b=Error(r(520),{cause:f});if(b=Da(b,c),zc===null?zc=[b]:zc.push(b),qn!==4&&(qn=2),s===null)return!0;f=Da(f,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Tm(c.stateNode,f,a),lm(c,a),!1;case 1:if(s=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(As===null||!As.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=Nj(y),Cj(y,a,c,f),lm(c,y),!1}c=c.return}while(c!==null);return!1}var Am=Error(r(461)),rr=!1;function Er(a,s,c,f){s.child=a===null?D1(s,null,c,f):vl(s,a.child,c,f)}function _j(a,s,c,f,y){c=c.render;var b=s.ref;if("ref"in f){var _={};for(var T in f)T!=="ref"&&(_[T]=f[T])}else _=f;return fl(s),f=pm(a,s,c,_,b,y),T=hm(),a!==null&&!rr?(mm(a,s,y),Ri(a,s,y)):(Bt&&T&&Yh(s),s.flags|=1,Er(a,s,f,y),s.child)}function kj(a,s,c,f,y){if(a===null){var b=c.type;return typeof b=="function"&&!Wh(b)&&b.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=b,Ej(a,s,b,f,y)):(a=ud(c.type,null,f,s,s.mode,y),a.ref=s.ref,a.return=s,s.child=a)}if(b=a.child,!Bm(a,y)){var _=b.memoizedProps;if(c=c.compare,c=c!==null?c:pc,c(_,f)&&a.ref===s.ref)return Ri(a,s,y)}return s.flags|=1,a=Oi(b,f),a.ref=s.ref,a.return=s,s.child=a}function Ej(a,s,c,f,y){if(a!==null){var b=a.memoizedProps;if(pc(b,f)&&a.ref===s.ref)if(rr=!1,s.pendingProps=f=b,Bm(a,y))(a.flags&131072)!==0&&(rr=!0);else return s.lanes=a.lanes,Ri(a,s,y)}return Mm(a,s,c,f,y)}function Dj(a,s,c,f){var y=f.children,b=a!==null?a.memoizedState:null;if(a===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,a!==null){for(f=s.child=a.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;f=y&~b}else f=0,s.child=null;return Oj(a,s,b,c,f)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&hd(s,b!==null?b.cachePool:null),b!==null?A1(s,b):cm(),M1(s);else return f=s.lanes=536870912,Oj(a,s,b!==null?b.baseLanes|c:c,c,f)}else b!==null?(hd(s,b.cachePool),A1(s,b),Es(),s.memoizedState=null):(a!==null&&hd(s,null),cm(),Es());return Er(a,s,y,c),s.child}function Ec(a,s){return a!==null&&a.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Oj(a,s,c,f,y){var b=rm();return b=b===null?null:{parent:tr._currentValue,pool:b},s.memoizedState={baseLanes:c,cachePool:b},a!==null&&hd(s,null),cm(),M1(s),a!==null&&to(a,s,f,!0),s.childLanes=y,null}function Od(a,s){return s=Ad({mode:s.mode,children:s.children},a.mode),s.ref=a.ref,a.child=s,s.return=a,s}function Tj(a,s,c){return vl(s,a.child,null,c),a=Od(s,s.pendingProps),a.flags|=2,va(s),s.memoizedState=null,a}function e5(a,s,c){var f=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,a===null){if(Bt){if(f.mode==="hidden")return a=Od(s,f),s.lanes=536870912,Ec(null,a);if(dm(s),(a=On)?(a=qw(a,Aa),a=a!==null&&a.data==="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:bs!==null?{id:di,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},c=h1(a),c.return=s,s.child=c,_r=s,On=null)):a=null,a===null)throw ws(s);return s.lanes=536870912,null}return Od(s,f)}var b=a.memoizedState;if(b!==null){var _=b.dehydrated;if(dm(s),y)if(s.flags&256)s.flags&=-257,s=Tj(a,s,c);else if(s.memoizedState!==null)s.child=a.child,s.flags|=128,s=null;else throw Error(r(558));else if(rr||to(a,s,c,!1),y=(c&a.childLanes)!==0,rr||y){if(f=bn,f!==null&&(_=Ge(f,c),_!==0&&_!==b.retryLane))throw b.retryLane=_,ol(a,_),ra(f,a,_),Am;Ud(),s=Tj(a,s,c)}else a=b.treeContext,On=Pa(_.nextSibling),_r=s,Bt=!0,js=null,Aa=!1,a!==null&&g1(s,a),s=Od(s,f),s.flags|=4096;return s}return a=Oi(a.child,{mode:f.mode,children:f.children}),a.ref=s.ref,s.child=a,a.return=s,a}function Td(a,s){var c=s.ref;if(c===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(s.flags|=4194816)}}function Mm(a,s,c,f,y){return fl(s),c=pm(a,s,c,f,void 0,y),f=hm(),a!==null&&!rr?(mm(a,s,y),Ri(a,s,y)):(Bt&&f&&Yh(s),s.flags|=1,Er(a,s,c,y),s.child)}function Aj(a,s,c,f,y,b){return fl(s),s.updateQueue=null,c=z1(s,f,c,y),P1(a),f=hm(),a!==null&&!rr?(mm(a,s,b),Ri(a,s,b)):(Bt&&f&&Yh(s),s.flags|=1,Er(a,s,c,b),s.child)}function Mj(a,s,c,f,y){if(fl(s),s.stateNode===null){var b=Xl,_=c.contextType;typeof _=="object"&&_!==null&&(b=kr(_)),b=new c(f,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Om,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=f,b.state=s.memoizedState,b.refs={},im(s),_=c.contextType,b.context=typeof _=="object"&&_!==null?kr(_):Xl,b.state=s.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Dm(s,c,_,f),b.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(_=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),_!==b.state&&Om.enqueueReplaceState(b,b.state,null),Sc(s,f,b,y),wc(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(a===null){b=s.stateNode;var T=s.memoizedProps,B=yl(c,T);b.props=B;var le=b.context,je=c.contextType;_=Xl,typeof je=="object"&&je!==null&&(_=kr(je));var ke=c.getDerivedStateFromProps;je=typeof ke=="function"||typeof b.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,je||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T||le!==_)&&xj(s,b,f,_),Ns=!1;var oe=s.memoizedState;b.state=oe,Sc(s,f,b,y),wc(),le=s.memoizedState,T||oe!==le||Ns?(typeof ke=="function"&&(Dm(s,c,ke,f),le=s.memoizedState),(B=Ns||yj(s,c,B,f,oe,le,_))?(je||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=le),b.props=f,b.state=le,b.context=_,f=B):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{b=s.stateNode,sm(a,s),_=s.memoizedProps,je=yl(c,_),b.props=je,ke=s.pendingProps,oe=b.context,le=c.contextType,B=Xl,typeof le=="object"&&le!==null&&(B=kr(le)),T=c.getDerivedStateFromProps,(le=typeof T=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==ke||oe!==B)&&xj(s,b,f,B),Ns=!1,oe=s.memoizedState,b.state=oe,Sc(s,f,b,y),wc();var fe=s.memoizedState;_!==ke||oe!==fe||Ns||a!==null&&a.dependencies!==null&&fd(a.dependencies)?(typeof T=="function"&&(Dm(s,c,T,f),fe=s.memoizedState),(je=Ns||yj(s,c,je,f,oe,fe,B)||a!==null&&a.dependencies!==null&&fd(a.dependencies))?(le||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,fe,B),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,fe,B)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===a.memoizedProps&&oe===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&oe===a.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=fe),b.props=f,b.state=fe,b.context=B,f=je):(typeof b.componentDidUpdate!="function"||_===a.memoizedProps&&oe===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&oe===a.memoizedState||(s.flags|=1024),f=!1)}return b=f,Td(a,s),f=(s.flags&128)!==0,b||f?(b=s.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,a!==null&&f?(s.child=vl(s,a.child,null,y),s.child=vl(s,null,c,y)):Er(a,s,c,y),s.memoizedState=b.state,a=s.child):a=Ri(a,s,y),a}function Pj(a,s,c,f){return ul(),s.flags|=256,Er(a,s,c,f),s.child}var Pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zm(a){return{baseLanes:a,cachePool:S1()}}function Rm(a,s,c){return a=a!==null?a.childLanes&~c:0,s&&(a|=ya),a}function zj(a,s,c){var f=s.pendingProps,y=!1,b=(s.flags&128)!==0,_;if((_=b)||(_=a!==null&&a.memoizedState===null?!1:(Gn.current&2)!==0),_&&(y=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,a===null){if(Bt){if(y?ks(s):Es(),(a=On)?(a=qw(a,Aa),a=a!==null&&a.data!=="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:bs!==null?{id:di,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},c=h1(a),c.return=s,s.child=c,_r=s,On=null)):a=null,a===null)throw ws(s);return yv(a)?s.lanes=32:s.lanes=536870912,null}var T=f.children;return f=f.fallback,y?(Es(),y=s.mode,T=Ad({mode:"hidden",children:T},y),f=cl(f,y,c,null),T.return=s,f.return=s,T.sibling=f,s.child=T,f=s.child,f.memoizedState=zm(c),f.childLanes=Rm(a,_,c),s.memoizedState=Pm,Ec(null,f)):(ks(s),Im(s,T))}var B=a.memoizedState;if(B!==null&&(T=B.dehydrated,T!==null)){if(b)s.flags&256?(ks(s),s.flags&=-257,s=Lm(a,s,c)):s.memoizedState!==null?(Es(),s.child=a.child,s.flags|=128,s=null):(Es(),T=f.fallback,y=s.mode,f=Ad({mode:"visible",children:f.children},y),T=cl(T,y,c,null),T.flags|=2,f.return=s,T.return=s,f.sibling=T,s.child=f,vl(s,a.child,null,c),f=s.child,f.memoizedState=zm(c),f.childLanes=Rm(a,_,c),s.memoizedState=Pm,s=Ec(null,f));else if(ks(s),yv(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var le=_.dgst;_=le,f=Error(r(419)),f.stack="",f.digest=_,vc({value:f,source:null,stack:null}),s=Lm(a,s,c)}else if(rr||to(a,s,c,!1),_=(c&a.childLanes)!==0,rr||_){if(_=bn,_!==null&&(f=Ge(_,c),f!==0&&f!==B.retryLane))throw B.retryLane=f,ol(a,f),ra(_,a,f),Am;gv(T)||Ud(),s=Lm(a,s,c)}else gv(T)?(s.flags|=192,s.child=a.child,s=null):(a=B.treeContext,On=Pa(T.nextSibling),_r=s,Bt=!0,js=null,Aa=!1,a!==null&&g1(s,a),s=Im(s,f.children),s.flags|=4096);return s}return y?(Es(),T=f.fallback,y=s.mode,B=a.child,le=B.sibling,f=Oi(B,{mode:"hidden",children:f.children}),f.subtreeFlags=B.subtreeFlags&65011712,le!==null?T=Oi(le,T):(T=cl(T,y,c,null),T.flags|=2),T.return=s,f.return=s,f.sibling=T,s.child=f,Ec(null,f),f=s.child,T=a.child.memoizedState,T===null?T=zm(c):(y=T.cachePool,y!==null?(B=tr._currentValue,y=y.parent!==B?{parent:B,pool:B}:y):y=S1(),T={baseLanes:T.baseLanes|c,cachePool:y}),f.memoizedState=T,f.childLanes=Rm(a,_,c),s.memoizedState=Pm,Ec(a.child,f)):(ks(s),c=a.child,a=c.sibling,c=Oi(c,{mode:"visible",children:f.children}),c.return=s,c.sibling=null,a!==null&&(_=s.deletions,_===null?(s.deletions=[a],s.flags|=16):_.push(a)),s.child=c,s.memoizedState=null,c)}function Im(a,s){return s=Ad({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function Ad(a,s){return a=ha(22,a,null,s),a.lanes=0,a}function Lm(a,s,c){return vl(s,a.child,null,c),a=Im(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function Rj(a,s,c){a.lanes|=s;var f=a.alternate;f!==null&&(f.lanes|=s),Jh(a.return,s,c)}function $m(a,s,c,f,y,b){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:y,treeForkCount:b}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=c,_.tailMode=y,_.treeForkCount=b)}function Ij(a,s,c){var f=s.pendingProps,y=f.revealOrder,b=f.tail;f=f.children;var _=Gn.current,T=(_&2)!==0;if(T?(_=_&1|2,s.flags|=128):_&=1,we(Gn,_),Er(a,s,f,c),f=Bt?mc:0,!T&&a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Rj(a,c,s);else if(a.tag===19)Rj(a,c,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(y){case"forwards":for(c=s.child,y=null;c!==null;)a=c.alternate,a!==null&&bd(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),$m(s,!1,y,c,b,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(a=y.alternate,a!==null&&bd(a)===null){s.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}$m(s,!0,c,null,b,f);break;case"together":$m(s,!1,null,null,void 0,f);break;default:s.memoizedState=null}return s.child}function Ri(a,s,c){if(a!==null&&(s.dependencies=a.dependencies),Ts|=s.lanes,(c&s.childLanes)===0)if(a!==null){if(to(a,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(r(153));if(s.child!==null){for(a=s.child,c=Oi(a,a.pendingProps),s.child=c,c.return=s;a.sibling!==null;)a=a.sibling,c=c.sibling=Oi(a,a.pendingProps),c.return=s;c.sibling=null}return s.child}function Bm(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&fd(a)))}function t5(a,s,c){switch(s.tag){case 3:Se(s,s.stateNode.containerInfo),Ss(s,tr,a.memoizedState.cache),ul();break;case 27:case 5:me(s);break;case 4:Se(s,s.stateNode.containerInfo);break;case 10:Ss(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,dm(s),null;break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(ks(s),s.flags|=128,null):(c&s.child.childLanes)!==0?zj(a,s,c):(ks(s),a=Ri(a,s,c),a!==null?a.sibling:null);ks(s);break;case 19:var y=(a.flags&128)!==0;if(f=(c&s.childLanes)!==0,f||(to(a,s,c,!1),f=(c&s.childLanes)!==0),y){if(f)return Ij(a,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),we(Gn,Gn.current),f)break;return null;case 22:return s.lanes=0,Dj(a,s,c,s.pendingProps);case 24:Ss(s,tr,a.memoizedState.cache)}return Ri(a,s,c)}function Lj(a,s,c){if(a!==null)if(a.memoizedProps!==s.pendingProps)rr=!0;else{if(!Bm(a,c)&&(s.flags&128)===0)return rr=!1,t5(a,s,c);rr=(a.flags&131072)!==0}else rr=!1,Bt&&(s.flags&1048576)!==0&&v1(s,mc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var f=s.pendingProps;if(a=hl(s.elementType),s.type=a,typeof a=="function")Wh(a)?(f=yl(a,f),s.tag=1,s=Mj(null,s,a,f,c)):(s.tag=0,s=Mm(null,s,a,f,c));else{if(a!=null){var y=a.$$typeof;if(y===O){s.tag=11,s=_j(null,s,a,f,c);break e}else if(y===M){s.tag=14,s=kj(null,s,a,f,c);break e}}throw s=he(a)||a,Error(r(306,s,""))}}return s;case 0:return Mm(a,s,s.type,s.pendingProps,c);case 1:return f=s.type,y=yl(f,s.pendingProps),Mj(a,s,f,y,c);case 3:e:{if(Se(s,s.stateNode.containerInfo),a===null)throw Error(r(387));f=s.pendingProps;var b=s.memoizedState;y=b.element,sm(a,s),Sc(s,f,null,c);var _=s.memoizedState;if(f=_.cache,Ss(s,tr,f),f!==b.cache&&em(s,[tr],c,!0),wc(),f=_.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=Pj(a,s,f,c);break e}else if(f!==y){y=Da(Error(r(424)),s),vc(y),s=Pj(a,s,f,c);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(On=Pa(a.firstChild),_r=s,Bt=!0,js=null,Aa=!0,c=D1(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ul(),f===y){s=Ri(a,s,c);break e}Er(a,s,f,c)}s=s.child}return s;case 26:return Td(a,s),a===null?(c=Kw(s.type,null,s.pendingProps,null))?s.memoizedState=c:Bt||(c=s.type,a=s.pendingProps,f=Yd(Ee.current).createElement(c),f[Le]=s,f[ht]=a,Dr(f,c,a),Nt(f),s.stateNode=f):s.memoizedState=Kw(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return me(s),a===null&&Bt&&(f=s.stateNode=Vw(s.type,s.pendingProps,Ee.current),_r=s,Aa=!0,y=On,Rs(s.type)?(xv=y,On=Pa(f.firstChild)):On=y),Er(a,s,s.pendingProps.children,c),Td(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&Bt&&((y=f=On)&&(f=T5(f,s.type,s.pendingProps,Aa),f!==null?(s.stateNode=f,_r=s,On=Pa(f.firstChild),Aa=!1,y=!0):y=!1),y||ws(s)),me(s),y=s.type,b=s.pendingProps,_=a!==null?a.memoizedProps:null,f=b.children,hv(y,b)?f=null:_!==null&&hv(y,_)&&(s.flags|=32),s.memoizedState!==null&&(y=pm(a,s,V2,null,null,c),qc._currentValue=y),Td(a,s),Er(a,s,f,c),s.child;case 6:return a===null&&Bt&&((a=c=On)&&(c=A5(c,s.pendingProps,Aa),c!==null?(s.stateNode=c,_r=s,On=null,a=!0):a=!1),a||ws(s)),null;case 13:return zj(a,s,c);case 4:return Se(s,s.stateNode.containerInfo),f=s.pendingProps,a===null?s.child=vl(s,null,f,c):Er(a,s,f,c),s.child;case 11:return _j(a,s,s.type,s.pendingProps,c);case 7:return Er(a,s,s.pendingProps,c),s.child;case 8:return Er(a,s,s.pendingProps.children,c),s.child;case 12:return Er(a,s,s.pendingProps.children,c),s.child;case 10:return f=s.pendingProps,Ss(s,s.type,f.value),Er(a,s,f.children,c),s.child;case 9:return y=s.type._context,f=s.pendingProps.children,fl(s),y=kr(y),f=f(y),s.flags|=1,Er(a,s,f,c),s.child;case 14:return kj(a,s,s.type,s.pendingProps,c);case 15:return Ej(a,s,s.type,s.pendingProps,c);case 19:return Ij(a,s,c);case 31:return e5(a,s,c);case 22:return Dj(a,s,c,s.pendingProps);case 24:return fl(s),f=kr(tr),a===null?(y=rm(),y===null&&(y=bn,b=tm(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),s.memoizedState={parent:f,cache:y},im(s),Ss(s,tr,y)):((a.lanes&c)!==0&&(sm(a,s),Sc(s,null,null,c),wc()),y=a.memoizedState,b=s.memoizedState,y.parent!==f?(y={parent:f,cache:f},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Ss(s,tr,f)):(f=b.cache,Ss(s,tr,f),f!==y.cache&&em(s,[tr],c,!0))),Er(a,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ii(a){a.flags|=4}function Um(a,s,c,f,y){if((s=(a.mode&32)!==0)&&(s=!1),s){if(a.flags|=16777216,(y&335544128)===y)if(a.stateNode.complete)a.flags|=8192;else if(dw())a.flags|=8192;else throw ml=vd,am}else a.flags&=-16777217}function $j(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!eS(s))if(dw())a.flags|=8192;else throw ml=vd,am}function Md(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?Gt():536870912,a.lanes|=s,ho|=s)}function Dc(a,s){if(!Bt)switch(a.tailMode){case"hidden":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Tn(a){var s=a.alternate!==null&&a.alternate.child===a.child,c=0,f=0;if(s)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=f,a.childLanes=c,s}function n5(a,s,c){var f=s.pendingProps;switch(Kh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(s),null;case 1:return Tn(s),null;case 3:return c=s.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Mi(tr),W(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(eo(s)?Ii(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xh())),Tn(s),null;case 26:var y=s.type,b=s.memoizedState;return a===null?(Ii(s),b!==null?(Tn(s),$j(s,b)):(Tn(s),Um(s,y,null,f,c))):b?b!==a.memoizedState?(Ii(s),Tn(s),$j(s,b)):(Tn(s),s.flags&=-16777217):(a=a.memoizedProps,a!==f&&Ii(s),Tn(s),Um(s,y,a,f,c)),null;case 27:if(Me(s),c=Ee.current,y=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==f&&Ii(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return Tn(s),null}a=Z.current,eo(s)?y1(s):(a=Vw(y,f,c),s.stateNode=a,Ii(s))}return Tn(s),null;case 5:if(Me(s),y=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==f&&Ii(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return Tn(s),null}if(b=Z.current,eo(s))y1(s);else{var _=Yd(Ee.current);switch(b){case 1:b=_.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=_.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=_.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=_.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=_.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?_.createElement("select",{is:f.is}):_.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?_.createElement(y,{is:f.is}):_.createElement(y)}}b[Le]=s,b[ht]=f;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=b;e:switch(Dr(b,y,f),y){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Ii(s)}}return Tn(s),Um(s,s.type,a===null?null:a.memoizedProps,s.pendingProps,c),null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==f&&Ii(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(r(166));if(a=Ee.current,eo(s)){if(a=s.stateNode,c=s.memoizedProps,f=null,y=_r,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}a[Le]=s,a=!!(a.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||zw(a.nodeValue,c)),a||ws(s,!0)}else a=Yd(a).createTextNode(f),a[Le]=s,s.stateNode=a}return Tn(s),null;case 31:if(c=s.memoizedState,a===null||a.memoizedState!==null){if(f=eo(s),c!==null){if(a===null){if(!f)throw Error(r(318));if(a=s.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Le]=s}else ul(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tn(s),a=!1}else c=Xh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a)return s.flags&256?(va(s),s):(va(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Tn(s),null;case 13:if(f=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=eo(s),f!==null&&f.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Le]=s}else ul(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tn(s),y=!1}else y=Xh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(va(s),s):(va(s),null)}return va(s),(s.flags&128)!==0?(s.lanes=c,s):(c=f!==null,a=a!==null&&a.memoizedState!==null,c&&(f=s.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==y&&(f.flags|=2048)),c!==a&&c&&(s.child.flags|=8192),Md(s,s.updateQueue),Tn(s),null);case 4:return W(),a===null&&cv(s.stateNode.containerInfo),Tn(s),null;case 10:return Mi(s.type),Tn(s),null;case 19:if(ie(Gn),f=s.memoizedState,f===null)return Tn(s),null;if(y=(s.flags&128)!==0,b=f.rendering,b===null)if(y)Dc(f,!1);else{if(qn!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(b=bd(a),b!==null){for(s.flags|=128,Dc(f,!1),a=b.updateQueue,s.updateQueue=a,Md(s,a),s.subtreeFlags=0,a=c,c=s.child;c!==null;)p1(c,a),c=c.sibling;return we(Gn,Gn.current&1|2),Bt&&Ti(s,f.treeForkCount),s.child}a=a.sibling}f.tail!==null&&Tt()>Ld&&(s.flags|=128,y=!0,Dc(f,!1),s.lanes=4194304)}else{if(!y)if(a=bd(b),a!==null){if(s.flags|=128,y=!0,a=a.updateQueue,s.updateQueue=a,Md(s,a),Dc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!Bt)return Tn(s),null}else 2*Tt()-f.renderingStartTime>Ld&&c!==536870912&&(s.flags|=128,y=!0,Dc(f,!1),s.lanes=4194304);f.isBackwards?(b.sibling=s.child,s.child=b):(a=f.last,a!==null?a.sibling=b:s.child=b,f.last=b)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=Tt(),a.sibling=null,c=Gn.current,we(Gn,y?c&1|2:c&1),Bt&&Ti(s,f.treeForkCount),a):(Tn(s),null);case 22:case 23:return va(s),um(),f=s.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(c&536870912)!==0&&(s.flags&128)===0&&(Tn(s),s.subtreeFlags&6&&(s.flags|=8192)):Tn(s),c=s.updateQueue,c!==null&&Md(s,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==c&&(s.flags|=2048),a!==null&&ie(pl),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Mi(tr),Tn(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function r5(a,s){switch(Kh(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return Mi(tr),W(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return Me(s),null;case 31:if(s.memoizedState!==null){if(va(s),s.alternate===null)throw Error(r(340));ul()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 13:if(va(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ul()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return ie(Gn),null;case 4:return W(),null;case 10:return Mi(s.type),null;case 22:case 23:return va(s),um(),a!==null&&ie(pl),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return Mi(tr),null;case 25:return null;default:return null}}function Bj(a,s){switch(Kh(s),s.tag){case 3:Mi(tr),W();break;case 26:case 27:case 5:Me(s);break;case 4:W();break;case 31:s.memoizedState!==null&&va(s);break;case 13:va(s);break;case 19:ie(Gn);break;case 10:Mi(s.type);break;case 22:case 23:va(s),um(),a!==null&&ie(pl);break;case 24:Mi(tr)}}function Oc(a,s){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var y=f.next;c=y;do{if((c.tag&a)===a){f=void 0;var b=c.create,_=c.inst;f=b(),_.destroy=f}c=c.next}while(c!==y)}}catch(T){dn(s,s.return,T)}}function Ds(a,s,c){try{var f=s.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var b=y.next;f=b;do{if((f.tag&a)===a){var _=f.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,y=s;var B=c,le=T;try{le()}catch(je){dn(y,B,je)}}}f=f.next}while(f!==b)}}catch(je){dn(s,s.return,je)}}function Uj(a){var s=a.updateQueue;if(s!==null){var c=a.stateNode;try{T1(s,c)}catch(f){dn(a,a.return,f)}}}function Fj(a,s,c){c.props=yl(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(f){dn(a,s,f)}}function Tc(a,s){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof c=="function"?a.refCleanup=c(f):c.current=f}}catch(y){dn(a,s,y)}}function pi(a,s){var c=a.ref,f=a.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(y){dn(a,s,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){dn(a,s,y)}else c.current=null}function qj(a){var s=a.type,c=a.memoizedProps,f=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(y){dn(a,a.return,y)}}function Fm(a,s,c){try{var f=a.stateNode;C5(f,a.type,c,s),f[ht]=s}catch(y){dn(a,a.return,y)}}function Hj(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Rs(a.type)||a.tag===4}function qm(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Hj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Rs(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Hm(a,s,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(a),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Mr));else if(f!==4&&(f===27&&Rs(a.type)&&(c=a.stateNode,s=null),a=a.child,a!==null))for(Hm(a,s,c),a=a.sibling;a!==null;)Hm(a,s,c),a=a.sibling}function Pd(a,s,c){var f=a.tag;if(f===5||f===6)a=a.stateNode,s?c.insertBefore(a,s):c.appendChild(a);else if(f!==4&&(f===27&&Rs(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Pd(a,s,c),a=a.sibling;a!==null;)Pd(a,s,c),a=a.sibling}function Wj(a){var s=a.stateNode,c=a.memoizedProps;try{for(var f=a.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Dr(s,f,c),s[Le]=a,s[ht]=c}catch(b){dn(a,a.return,b)}}var Li=!1,ar=!1,Wm=!1,Vj=typeof WeakSet=="function"?WeakSet:Set,xr=null;function a5(a,s){if(a=a.containerInfo,fv=tf,a=a1(a),Lh(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var y=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var _=0,T=-1,B=-1,le=0,je=0,ke=a,oe=null;t:for(;;){for(var fe;ke!==c||y!==0&&ke.nodeType!==3||(T=_+y),ke!==b||f!==0&&ke.nodeType!==3||(B=_+f),ke.nodeType===3&&(_+=ke.nodeValue.length),(fe=ke.firstChild)!==null;)oe=ke,ke=fe;for(;;){if(ke===a)break t;if(oe===c&&++le===y&&(T=_),oe===b&&++je===f&&(B=_),(fe=ke.nextSibling)!==null)break;ke=oe,oe=ke.parentNode}ke=fe}c=T===-1||B===-1?null:{start:T,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(pv={focusedElem:a,selectionRange:c},tf=!1,xr=s;xr!==null;)if(s=xr,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,xr=a;else for(;xr!==null;){switch(s=xr,b=s.alternate,a=s.flags,s.tag){case 0:if((a&4)!==0&&(a=s.updateQueue,a=a!==null?a.events:null,a!==null))for(c=0;c<a.length;c++)y=a[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,c=s,y=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var qe=yl(c.type,y);a=f.getSnapshotBeforeUpdate(qe,b),f.__reactInternalSnapshotBeforeUpdate=a}catch(ct){dn(c,c.return,ct)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,c=a.nodeType,c===9)vv(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":vv(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=s.sibling,a!==null){a.return=s.return,xr=a;break}xr=s.return}}function Gj(a,s,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Bi(a,c),f&4&&Oc(5,c);break;case 1:if(Bi(a,c),f&4)if(a=c.stateNode,s===null)try{a.componentDidMount()}catch(_){dn(c,c.return,_)}else{var y=yl(c.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(y,s,a.__reactInternalSnapshotBeforeUpdate)}catch(_){dn(c,c.return,_)}}f&64&&Uj(c),f&512&&Tc(c,c.return);break;case 3:if(Bi(a,c),f&64&&(a=c.updateQueue,a!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{T1(a,s)}catch(_){dn(c,c.return,_)}}break;case 27:s===null&&f&4&&Wj(c);case 26:case 5:Bi(a,c),s===null&&f&4&&qj(c),f&512&&Tc(c,c.return);break;case 12:Bi(a,c);break;case 31:Bi(a,c),f&4&&Qj(a,c);break;case 13:Bi(a,c),f&4&&Xj(a,c),f&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=p5.bind(null,c),M5(a,c))));break;case 22:if(f=c.memoizedState!==null||Li,!f){s=s!==null&&s.memoizedState!==null||ar,y=Li;var b=ar;Li=f,(ar=s)&&!b?Ui(a,c,(c.subtreeFlags&8772)!==0):Bi(a,c),Li=y,ar=b}break;case 30:break;default:Bi(a,c)}}function Yj(a){var s=a.alternate;s!==null&&(a.alternate=null,Yj(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&bt(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var zn=null,Jr=!1;function $i(a,s,c){for(c=c.child;c!==null;)Kj(a,s,c),c=c.sibling}function Kj(a,s,c){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Zr,c)}catch{}switch(c.tag){case 26:ar||pi(c,s),$i(a,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ar||pi(c,s);var f=zn,y=Jr;Rs(c.type)&&(zn=c.stateNode,Jr=!1),$i(a,s,c),Bc(c.stateNode),zn=f,Jr=y;break;case 5:ar||pi(c,s);case 6:if(f=zn,y=Jr,zn=null,$i(a,s,c),zn=f,Jr=y,zn!==null)if(Jr)try{(zn.nodeType===9?zn.body:zn.nodeName==="HTML"?zn.ownerDocument.body:zn).removeChild(c.stateNode)}catch(b){dn(c,s,b)}else try{zn.removeChild(c.stateNode)}catch(b){dn(c,s,b)}break;case 18:zn!==null&&(Jr?(a=zn,Uw(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),wo(a)):Uw(zn,c.stateNode));break;case 4:f=zn,y=Jr,zn=c.stateNode.containerInfo,Jr=!0,$i(a,s,c),zn=f,Jr=y;break;case 0:case 11:case 14:case 15:Ds(2,c,s),ar||Ds(4,c,s),$i(a,s,c);break;case 1:ar||(pi(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Fj(c,s,f)),$i(a,s,c);break;case 21:$i(a,s,c);break;case 22:ar=(f=ar)||c.memoizedState!==null,$i(a,s,c),ar=f;break;default:$i(a,s,c)}}function Qj(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{wo(a)}catch(c){dn(s,s.return,c)}}}function Xj(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{wo(a)}catch(c){dn(s,s.return,c)}}function i5(a){switch(a.tag){case 31:case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new Vj),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new Vj),s;default:throw Error(r(435,a.tag))}}function zd(a,s){var c=i5(a);s.forEach(function(f){if(!c.has(f)){c.add(f);var y=h5.bind(null,a,f);f.then(y,y)}})}function ea(a,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var y=c[f],b=a,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Rs(T.type)){zn=T.stateNode,Jr=!1;break e}break;case 5:zn=T.stateNode,Jr=!1;break e;case 3:case 4:zn=T.stateNode.containerInfo,Jr=!0;break e}T=T.return}if(zn===null)throw Error(r(160));Kj(b,_,y),zn=null,Jr=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Zj(s,a),s=s.sibling}var Ka=null;function Zj(a,s){var c=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ea(s,a),ta(a),f&4&&(Ds(3,a,a.return),Oc(3,a),Ds(5,a,a.return));break;case 1:ea(s,a),ta(a),f&512&&(ar||c===null||pi(c,c.return)),f&64&&Li&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var y=Ka;if(ea(s,a),ta(a),f&512&&(ar||c===null||pi(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=a.memoizedState,c===null)if(f===null)if(a.stateNode===null){e:{f=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":b=y.getElementsByTagName("title")[0],(!b||b[dt]||b[Le]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(f),y.head.insertBefore(b,y.querySelector("head > title"))),Dr(b,f,c),b[Le]=a,Nt(b),f=b;break e;case"link":var _=Zw("link","href",y).get(f+(c.href||""));if(_){for(var T=0;T<_.length;T++)if(b=_[T],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(T,1);break t}}b=y.createElement(f),Dr(b,f,c),y.head.appendChild(b);break;case"meta":if(_=Zw("meta","content",y).get(f+(c.content||""))){for(T=0;T<_.length;T++)if(b=_[T],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(T,1);break t}}b=y.createElement(f),Dr(b,f,c),y.head.appendChild(b);break;default:throw Error(r(468,f))}b[Le]=a,Nt(b),f=b}a.stateNode=f}else Jw(y,a.type,a.stateNode);else a.stateNode=Xw(y,f,a.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?Jw(y,a.type,a.stateNode):Xw(y,f,a.memoizedProps)):f===null&&a.stateNode!==null&&Fm(a,a.memoizedProps,c.memoizedProps)}break;case 27:ea(s,a),ta(a),f&512&&(ar||c===null||pi(c,c.return)),c!==null&&f&4&&Fm(a,a.memoizedProps,c.memoizedProps);break;case 5:if(ea(s,a),ta(a),f&512&&(ar||c===null||pi(c,c.return)),a.flags&32){y=a.stateNode;try{mt(y,"")}catch(qe){dn(a,a.return,qe)}}f&4&&a.stateNode!=null&&(y=a.memoizedProps,Fm(a,y,c!==null?c.memoizedProps:y)),f&1024&&(Wm=!0);break;case 6:if(ea(s,a),ta(a),f&4){if(a.stateNode===null)throw Error(r(162));f=a.memoizedProps,c=a.stateNode;try{c.nodeValue=f}catch(qe){dn(a,a.return,qe)}}break;case 3:if(Xd=null,y=Ka,Ka=Kd(s.containerInfo),ea(s,a),Ka=y,ta(a),f&4&&c!==null&&c.memoizedState.isDehydrated)try{wo(s.containerInfo)}catch(qe){dn(a,a.return,qe)}Wm&&(Wm=!1,Jj(a));break;case 4:f=Ka,Ka=Kd(a.stateNode.containerInfo),ea(s,a),ta(a),Ka=f;break;case 12:ea(s,a),ta(a);break;case 31:ea(s,a),ta(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,zd(a,f)));break;case 13:ea(s,a),ta(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Id=Tt()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,zd(a,f)));break;case 22:y=a.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,le=Li,je=ar;if(Li=le||y,ar=je||B,ea(s,a),ar=je,Li=le,ta(a),f&8192)e:for(s=a.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(c===null||B||Li||ar||xl(a)),c=null,s=a;;){if(s.tag===5||s.tag===26){if(c===null){B=c=s;try{if(b=B.stateNode,y)_=b.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=B.stateNode;var ke=B.memoizedProps.style,oe=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;T.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(qe){dn(B,B.return,qe)}}}else if(s.tag===6){if(c===null){B=s;try{B.stateNode.nodeValue=y?"":B.memoizedProps}catch(qe){dn(B,B.return,qe)}}}else if(s.tag===18){if(c===null){B=s;try{var fe=B.stateNode;y?Fw(fe,!0):Fw(B.stateNode,!1)}catch(qe){dn(B,B.return,qe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=a.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,zd(a,c))));break;case 19:ea(s,a),ta(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,zd(a,f)));break;case 30:break;case 21:break;default:ea(s,a),ta(a)}}function ta(a){var s=a.flags;if(s&2){try{for(var c,f=a.return;f!==null;){if(Hj(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,b=qm(a);Pd(a,b,y);break;case 5:var _=c.stateNode;c.flags&32&&(mt(_,""),c.flags&=-33);var T=qm(a);Pd(a,T,_);break;case 3:case 4:var B=c.stateNode.containerInfo,le=qm(a);Hm(a,le,B);break;default:throw Error(r(161))}}catch(je){dn(a,a.return,je)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function Jj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;Jj(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function Bi(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Gj(a,s.alternate,s),s=s.sibling}function xl(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:Ds(4,s,s.return),xl(s);break;case 1:pi(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&Fj(s,s.return,c),xl(s);break;case 27:Bc(s.stateNode);case 26:case 5:pi(s,s.return),xl(s);break;case 22:s.memoizedState===null&&xl(s);break;case 30:xl(s);break;default:xl(s)}a=a.sibling}}function Ui(a,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,y=a,b=s,_=b.flags;switch(b.tag){case 0:case 11:case 15:Ui(y,b,c),Oc(4,b);break;case 1:if(Ui(y,b,c),f=b,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(le){dn(f,f.return,le)}if(f=b,y=f.updateQueue,y!==null){var T=f.stateNode;try{var B=y.shared.hiddenCallbacks;if(B!==null)for(y.shared.hiddenCallbacks=null,y=0;y<B.length;y++)O1(B[y],T)}catch(le){dn(f,f.return,le)}}c&&_&64&&Uj(b),Tc(b,b.return);break;case 27:Wj(b);case 26:case 5:Ui(y,b,c),c&&f===null&&_&4&&qj(b),Tc(b,b.return);break;case 12:Ui(y,b,c);break;case 31:Ui(y,b,c),c&&_&4&&Qj(y,b);break;case 13:Ui(y,b,c),c&&_&4&&Xj(y,b);break;case 22:b.memoizedState===null&&Ui(y,b,c),Tc(b,b.return);break;case 30:break;default:Ui(y,b,c)}s=s.sibling}}function Vm(a,s){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&gc(c))}function Gm(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&gc(a))}function Qa(a,s,c,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ew(a,s,c,f),s=s.sibling}function ew(a,s,c,f){var y=s.flags;switch(s.tag){case 0:case 11:case 15:Qa(a,s,c,f),y&2048&&Oc(9,s);break;case 1:Qa(a,s,c,f);break;case 3:Qa(a,s,c,f),y&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&gc(a)));break;case 12:if(y&2048){Qa(a,s,c,f),a=s.stateNode;try{var b=s.memoizedProps,_=b.id,T=b.onPostCommit;typeof T=="function"&&T(_,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(B){dn(s,s.return,B)}}else Qa(a,s,c,f);break;case 31:Qa(a,s,c,f);break;case 13:Qa(a,s,c,f);break;case 23:break;case 22:b=s.stateNode,_=s.alternate,s.memoizedState!==null?b._visibility&2?Qa(a,s,c,f):Ac(a,s):b._visibility&2?Qa(a,s,c,f):(b._visibility|=2,uo(a,s,c,f,(s.subtreeFlags&10256)!==0||!1)),y&2048&&Vm(_,s);break;case 24:Qa(a,s,c,f),y&2048&&Gm(s.alternate,s);break;default:Qa(a,s,c,f)}}function uo(a,s,c,f,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=a,_=s,T=c,B=f,le=_.flags;switch(_.tag){case 0:case 11:case 15:uo(b,_,T,B,y),Oc(8,_);break;case 23:break;case 22:var je=_.stateNode;_.memoizedState!==null?je._visibility&2?uo(b,_,T,B,y):Ac(b,_):(je._visibility|=2,uo(b,_,T,B,y)),y&&le&2048&&Vm(_.alternate,_);break;case 24:uo(b,_,T,B,y),y&&le&2048&&Gm(_.alternate,_);break;default:uo(b,_,T,B,y)}s=s.sibling}}function Ac(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=a,f=s,y=f.flags;switch(f.tag){case 22:Ac(c,f),y&2048&&Vm(f.alternate,f);break;case 24:Ac(c,f),y&2048&&Gm(f.alternate,f);break;default:Ac(c,f)}s=s.sibling}}var Mc=8192;function fo(a,s,c){if(a.subtreeFlags&Mc)for(a=a.child;a!==null;)tw(a,s,c),a=a.sibling}function tw(a,s,c){switch(a.tag){case 26:fo(a,s,c),a.flags&Mc&&a.memoizedState!==null&&W5(c,Ka,a.memoizedState,a.memoizedProps);break;case 5:fo(a,s,c);break;case 3:case 4:var f=Ka;Ka=Kd(a.stateNode.containerInfo),fo(a,s,c),Ka=f;break;case 22:a.memoizedState===null&&(f=a.alternate,f!==null&&f.memoizedState!==null?(f=Mc,Mc=16777216,fo(a,s,c),Mc=f):fo(a,s,c));break;default:fo(a,s,c)}}function nw(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function Pc(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];xr=f,aw(f,a)}nw(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)rw(a),a=a.sibling}function rw(a){switch(a.tag){case 0:case 11:case 15:Pc(a),a.flags&2048&&Ds(9,a,a.return);break;case 3:Pc(a);break;case 12:Pc(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,Rd(a)):Pc(a);break;default:Pc(a)}}function Rd(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var f=s[c];xr=f,aw(f,a)}nw(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:Ds(8,s,s.return),Rd(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Rd(s));break;default:Rd(s)}a=a.sibling}}function aw(a,s){for(;xr!==null;){var c=xr;switch(c.tag){case 0:case 11:case 15:Ds(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:gc(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,xr=f;else e:for(c=a;xr!==null;){f=xr;var y=f.sibling,b=f.return;if(Yj(f),f===c){xr=null;break e}if(y!==null){y.return=b,xr=y;break e}xr=b}}}var s5={getCacheForType:function(a){var s=kr(tr),c=s.data.get(a);return c===void 0&&(c=a(),s.data.set(a,c)),c},cacheSignal:function(){return kr(tr).controller.signal}},l5=typeof WeakMap=="function"?WeakMap:Map,en=0,bn=null,Pt=null,Rt=0,un=0,ga=null,Os=!1,po=!1,Ym=!1,Fi=0,qn=0,Ts=0,bl=0,Km=0,ya=0,ho=0,zc=null,na=null,Qm=!1,Id=0,iw=0,Ld=1/0,$d=null,As=null,cr=0,Ms=null,mo=null,qi=0,Xm=0,Zm=null,sw=null,Rc=0,Jm=null;function xa(){return(en&2)!==0&&Rt!==0?Rt&-Rt:U.T!==null?iv():Hr()}function lw(){if(ya===0)if((Rt&536870912)===0||Bt){var a=nn;nn<<=1,(nn&3932160)===0&&(nn=262144),ya=a}else ya=536870912;return a=ma.current,a!==null&&(a.flags|=32),ya}function ra(a,s,c){(a===bn&&(un===2||un===9)||a.cancelPendingCommit!==null)&&(vo(a,0),Ps(a,Rt,ya,!1)),ut(a,c),((en&2)===0||a!==bn)&&(a===bn&&((en&2)===0&&(bl|=c),qn===4&&Ps(a,Rt,ya,!1)),hi(a))}function ow(a,s,c){if((en&6)!==0)throw Error(r(327));var f=!c&&(s&127)===0&&(s&a.expiredLanes)===0||H(a,s),y=f?u5(a,s):tv(a,s,!0),b=f;do{if(y===0){po&&!f&&Ps(a,s,0,!1);break}else{if(c=a.current.alternate,b&&!o5(c)){y=tv(a,s,!1),b=!1;continue}if(y===2){if(b=s,a.errorRecoveryDisabledLanes&b)var _=0;else _=a.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var T=a;y=zc;var B=T.current.memoizedState.isDehydrated;if(B&&(vo(T,_).flags|=256),_=tv(T,_,!1),_!==2){if(Ym&&!B){T.errorRecoveryDisabledLanes|=b,bl|=b,y=4;break e}b=na,na=y,b!==null&&(na===null?na=b:na.push.apply(na,b))}y=_}if(b=!1,y!==2)continue}}if(y===1){vo(a,0),Ps(a,s,0,!0);break}e:{switch(f=a,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ps(f,s,ya,!Os);break e;case 2:na=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(y=Id+300-Tt(),10<y)){if(Ps(f,s,ya,!Os),hn(f,0,!0)!==0)break e;qi=s,f.timeoutHandle=$w(cw.bind(null,f,c,na,$d,Qm,s,ya,bl,ho,Os,b,"Throttled",-0,0),y);break e}cw(f,c,na,$d,Qm,s,ya,bl,ho,Os,b,null,-0,0)}}break}while(!0);hi(a)}function cw(a,s,c,f,y,b,_,T,B,le,je,ke,oe,fe){if(a.timeoutHandle=-1,ke=s.subtreeFlags,ke&8192||(ke&16785408)===16785408){ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mr},tw(s,b,ke);var qe=(b&62914560)===b?Id-Tt():(b&4194048)===b?iw-Tt():0;if(qe=V5(ke,qe),qe!==null){qi=b,a.cancelPendingCommit=qe(gw.bind(null,a,s,b,c,f,y,_,T,B,je,ke,null,oe,fe)),Ps(a,b,_,!le);return}}gw(a,s,b,c,f,y,_,T,B)}function o5(a){for(var s=a;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var y=c[f],b=y.getSnapshot;y=y.value;try{if(!pa(b(),y))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ps(a,s,c,f){s&=~Km,s&=~bl,a.suspendedLanes|=s,a.pingedLanes&=~s,f&&(a.warmLanes|=s),f=a.expirationTimes;for(var y=s;0<y;){var b=31-At(y),_=1<<b;f[b]=-1,y&=~_}c!==0&&Yt(a,c,s)}function Bd(){return(en&6)===0?(Ic(0),!1):!0}function ev(){if(Pt!==null){if(un===0)var a=Pt.return;else a=Pt,Ai=dl=null,vm(a),io=null,xc=0,a=Pt;for(;a!==null;)Bj(a.alternate,a),a=a.return;Pt=null}}function vo(a,s){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,E5(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),qi=0,ev(),bn=a,Pt=c=Oi(a.current,null),Rt=s,un=0,ga=null,Os=!1,po=H(a,s),Ym=!1,ho=ya=Km=bl=Ts=qn=0,na=zc=null,Qm=!1,(s&8)!==0&&(s|=s&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=s;0<f;){var y=31-At(f),b=1<<y;s|=a[y],f&=~b}return Fi=s,ld(),c}function uw(a,s){St=null,U.H=kc,s===ao||s===md?(s=_1(),un=3):s===am?(s=_1(),un=4):un=s===Am?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ga=s,Pt===null&&(qn=1,Dd(a,Da(s,a.current)))}function dw(){var a=ma.current;return a===null?!0:(Rt&4194048)===Rt?Ma===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?a===Ma:!1}function fw(){var a=U.H;return U.H=kc,a===null?kc:a}function pw(){var a=U.A;return U.A=s5,a}function Ud(){qn=4,Os||(Rt&4194048)!==Rt&&ma.current!==null||(po=!0),(Ts&134217727)===0&&(bl&134217727)===0||bn===null||Ps(bn,Rt,ya,!1)}function tv(a,s,c){var f=en;en|=2;var y=fw(),b=pw();(bn!==a||Rt!==s)&&($d=null,vo(a,s)),s=!1;var _=qn;e:do try{if(un!==0&&Pt!==null){var T=Pt,B=ga;switch(un){case 8:ev(),_=6;break e;case 3:case 2:case 9:case 6:ma.current===null&&(s=!0);var le=un;if(un=0,ga=null,go(a,T,B,le),c&&po){_=0;break e}break;default:le=un,un=0,ga=null,go(a,T,B,le)}}c5(),_=qn;break}catch(je){uw(a,je)}while(!0);return s&&a.shellSuspendCounter++,Ai=dl=null,en=f,U.H=y,U.A=b,Pt===null&&(bn=null,Rt=0,ld()),_}function c5(){for(;Pt!==null;)hw(Pt)}function u5(a,s){var c=en;en|=2;var f=fw(),y=pw();bn!==a||Rt!==s?($d=null,Ld=Tt()+500,vo(a,s)):po=H(a,s);e:do try{if(un!==0&&Pt!==null){s=Pt;var b=ga;t:switch(un){case 1:un=0,ga=null,go(a,s,b,1);break;case 2:case 9:if(N1(b)){un=0,ga=null,mw(s);break}s=function(){un!==2&&un!==9||bn!==a||(un=7),hi(a)},b.then(s,s);break e;case 3:un=7;break e;case 4:un=5;break e;case 7:N1(b)?(un=0,ga=null,mw(s)):(un=0,ga=null,go(a,s,b,7));break;case 5:var _=null;switch(Pt.tag){case 26:_=Pt.memoizedState;case 5:case 27:var T=Pt;if(_?eS(_):T.stateNode.complete){un=0,ga=null;var B=T.sibling;if(B!==null)Pt=B;else{var le=T.return;le!==null?(Pt=le,Fd(le)):Pt=null}break t}}un=0,ga=null,go(a,s,b,5);break;case 6:un=0,ga=null,go(a,s,b,6);break;case 8:ev(),qn=6;break e;default:throw Error(r(462))}}d5();break}catch(je){uw(a,je)}while(!0);return Ai=dl=null,U.H=f,U.A=y,en=c,Pt!==null?0:(bn=null,Rt=0,ld(),qn)}function d5(){for(;Pt!==null&&!Mn();)hw(Pt)}function hw(a){var s=Lj(a.alternate,a,Fi);a.memoizedProps=a.pendingProps,s===null?Fd(a):Pt=s}function mw(a){var s=a,c=s.alternate;switch(s.tag){case 15:case 0:s=Aj(c,s,s.pendingProps,s.type,void 0,Rt);break;case 11:s=Aj(c,s,s.pendingProps,s.type.render,s.ref,Rt);break;case 5:vm(s);default:Bj(c,s),s=Pt=p1(s,Fi),s=Lj(c,s,Fi)}a.memoizedProps=a.pendingProps,s===null?Fd(a):Pt=s}function go(a,s,c,f){Ai=dl=null,vm(s),io=null,xc=0;var y=s.return;try{if(J2(a,y,s,c,Rt)){qn=1,Dd(a,Da(c,a.current)),Pt=null;return}}catch(b){if(y!==null)throw Pt=y,b;qn=1,Dd(a,Da(c,a.current)),Pt=null;return}s.flags&32768?(Bt||f===1?a=!0:po||(Rt&536870912)!==0?a=!1:(Os=a=!0,(f===2||f===9||f===3||f===6)&&(f=ma.current,f!==null&&f.tag===13&&(f.flags|=16384))),vw(s,a)):Fd(s)}function Fd(a){var s=a;do{if((s.flags&32768)!==0){vw(s,Os);return}a=s.return;var c=n5(s.alternate,s,Fi);if(c!==null){Pt=c;return}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=a}while(s!==null);qn===0&&(qn=5)}function vw(a,s){do{var c=r5(a.alternate,a);if(c!==null){c.flags&=32767,Pt=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(a=a.sibling,a!==null)){Pt=a;return}Pt=a=c}while(a!==null);qn=6,Pt=null}function gw(a,s,c,f,y,b,_,T,B){a.cancelPendingCommit=null;do qd();while(cr!==0);if((en&6)!==0)throw Error(r(327));if(s!==null){if(s===a.current)throw Error(r(177));if(b=s.lanes|s.childLanes,b|=qh,wt(a,c,b,_,T,B),a===bn&&(Pt=bn=null,Rt=0),mo=s,Ms=a,qi=c,Xm=b,Zm=y,sw=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,m5(ln,function(){return ww(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=U.T,U.T=null,y=ne.p,ne.p=2,_=en,en|=4;try{a5(a,s,c)}finally{en=_,ne.p=y,U.T=f}}cr=1,yw(),xw(),bw()}}function yw(){if(cr===1){cr=0;var a=Ms,s=mo,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=U.T,U.T=null;var f=ne.p;ne.p=2;var y=en;en|=4;try{Zj(s,a);var b=pv,_=a1(a.containerInfo),T=b.focusedElem,B=b.selectionRange;if(_!==T&&T&&T.ownerDocument&&r1(T.ownerDocument.documentElement,T)){if(B!==null&&Lh(T)){var le=B.start,je=B.end;if(je===void 0&&(je=le),"selectionStart"in T)T.selectionStart=le,T.selectionEnd=Math.min(je,T.value.length);else{var ke=T.ownerDocument||document,oe=ke&&ke.defaultView||window;if(oe.getSelection){var fe=oe.getSelection(),qe=T.textContent.length,ct=Math.min(B.start,qe),gn=B.end===void 0?ct:Math.min(B.end,qe);!fe.extend&&ct>gn&&(_=gn,gn=ct,ct=_);var X=n1(T,ct),Y=n1(T,gn);if(X&&Y&&(fe.rangeCount!==1||fe.anchorNode!==X.node||fe.anchorOffset!==X.offset||fe.focusNode!==Y.node||fe.focusOffset!==Y.offset)){var se=ke.createRange();se.setStart(X.node,X.offset),fe.removeAllRanges(),ct>gn?(fe.addRange(se),fe.extend(Y.node,Y.offset)):(se.setEnd(Y.node,Y.offset),fe.addRange(se))}}}}for(ke=[],fe=T;fe=fe.parentNode;)fe.nodeType===1&&ke.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ke.length;T++){var Ne=ke[T];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}tf=!!fv,pv=fv=null}finally{en=y,ne.p=f,U.T=c}}a.current=s,cr=2}}function xw(){if(cr===2){cr=0;var a=Ms,s=mo,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=U.T,U.T=null;var f=ne.p;ne.p=2;var y=en;en|=4;try{Gj(a,s.alternate,s)}finally{en=y,ne.p=f,U.T=c}}cr=3}}function bw(){if(cr===4||cr===3){cr=0,yt();var a=Ms,s=mo,c=qi,f=sw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?cr=5:(cr=0,mo=Ms=null,jw(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(As=null),et(c),s=s.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Zr,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=U.T,y=ne.p,ne.p=2,U.T=null;try{for(var b=a.onRecoverableError,_=0;_<f.length;_++){var T=f[_];b(T.value,{componentStack:T.stack})}}finally{U.T=s,ne.p=y}}(qi&3)!==0&&qd(),hi(a),y=a.pendingLanes,(c&261930)!==0&&(y&42)!==0?a===Jm?Rc++:(Rc=0,Jm=a):Rc=0,Ic(0)}}function jw(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,gc(s)))}function qd(){return yw(),xw(),bw(),ww()}function ww(){if(cr!==5)return!1;var a=Ms,s=Xm;Xm=0;var c=et(qi),f=U.T,y=ne.p;try{ne.p=32>c?32:c,U.T=null,c=Zm,Zm=null;var b=Ms,_=qi;if(cr=0,mo=Ms=null,qi=0,(en&6)!==0)throw Error(r(331));var T=en;if(en|=4,rw(b.current),ew(b,b.current,_,c),en=T,Ic(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Zr,b)}catch{}return!0}finally{ne.p=y,U.T=f,jw(a,s)}}function Sw(a,s,c){s=Da(c,s),s=Tm(a.stateNode,s,2),a=_s(a,s,2),a!==null&&(ut(a,2),hi(a))}function dn(a,s,c){if(a.tag===3)Sw(a,a,c);else for(;s!==null;){if(s.tag===3){Sw(s,a,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(As===null||!As.has(f))){a=Da(c,a),c=Nj(2),f=_s(s,c,2),f!==null&&(Cj(c,f,s,a),ut(f,2),hi(f));break}}s=s.return}}function nv(a,s,c){var f=a.pingCache;if(f===null){f=a.pingCache=new l5;var y=new Set;f.set(s,y)}else y=f.get(s),y===void 0&&(y=new Set,f.set(s,y));y.has(c)||(Ym=!0,y.add(c),a=f5.bind(null,a,s,c),s.then(a,a))}function f5(a,s,c){var f=a.pingCache;f!==null&&f.delete(s),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,bn===a&&(Rt&c)===c&&(qn===4||qn===3&&(Rt&62914560)===Rt&&300>Tt()-Id?(en&2)===0&&vo(a,0):Km|=c,ho===Rt&&(ho=0)),hi(a)}function Nw(a,s){s===0&&(s=Gt()),a=ol(a,s),a!==null&&(ut(a,s),hi(a))}function p5(a){var s=a.memoizedState,c=0;s!==null&&(c=s.retryLane),Nw(a,c)}function h5(a,s){var c=0;switch(a.tag){case 31:case 13:var f=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(s),Nw(a,c)}function m5(a,s){return Wn(a,s)}var Hd=null,yo=null,rv=!1,Wd=!1,av=!1,zs=0;function hi(a){a!==yo&&a.next===null&&(yo===null?Hd=yo=a:yo=yo.next=a),Wd=!0,rv||(rv=!0,g5())}function Ic(a,s){if(!av&&Wd){av=!0;do for(var c=!1,f=Hd;f!==null;){if(a!==0){var y=f.pendingLanes;if(y===0)var b=0;else{var _=f.suspendedLanes,T=f.pingedLanes;b=(1<<31-At(42|a)+1)-1,b&=y&~(_&~T),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Ew(f,b))}else b=Rt,b=hn(f,f===bn?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||H(f,b)||(c=!0,Ew(f,b));f=f.next}while(c);av=!1}}function v5(){Cw()}function Cw(){Wd=rv=!1;var a=0;zs!==0&&k5()&&(a=zs);for(var s=Tt(),c=null,f=Hd;f!==null;){var y=f.next,b=_w(f,s);b===0?(f.next=null,c===null?Hd=y:c.next=y,y===null&&(yo=c)):(c=f,(a!==0||(b&3)!==0)&&(Wd=!0)),f=y}cr!==0&&cr!==5||Ic(a),zs!==0&&(zs=0)}function _w(a,s){for(var c=a.suspendedLanes,f=a.pingedLanes,y=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var _=31-At(b),T=1<<_,B=y[_];B===-1?((T&c)===0||(T&f)!==0)&&(y[_]=Ve(T,s)):B<=s&&(a.expiredLanes|=T),b&=~T}if(s=bn,c=Rt,c=hn(a,a===s?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,c===0||a===s&&(un===2||un===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&ca(f),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||H(a,c)){if(s=c&-c,s===a.callbackPriority)return s;switch(f!==null&&ca(f),et(c)){case 2:case 8:c=Ln;break;case 32:c=ln;break;case 268435456:c=Fr;break;default:c=ln}return f=kw.bind(null,a),c=Wn(c,f),a.callbackPriority=s,a.callbackNode=c,s}return f!==null&&f!==null&&ca(f),a.callbackPriority=2,a.callbackNode=null,2}function kw(a,s){if(cr!==0&&cr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(qd()&&a.callbackNode!==c)return null;var f=Rt;return f=hn(a,a===bn?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(ow(a,f,s),_w(a,Tt()),a.callbackNode!=null&&a.callbackNode===c?kw.bind(null,a):null)}function Ew(a,s){if(qd())return null;ow(a,s,!0)}function g5(){D5(function(){(en&6)!==0?Wn(Pn,v5):Cw()})}function iv(){if(zs===0){var a=no;a===0&&(a=qt,qt<<=1,(qt&261888)===0&&(qt=256)),zs=a}return zs}function Dw(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:er(""+a)}function Ow(a,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,a.id&&c.setAttribute("form",a.id),s.parentNode.insertBefore(c,s),a=new FormData(a),c.parentNode.removeChild(c),a}function y5(a,s,c,f,y){if(s==="submit"&&c&&c.stateNode===y){var b=Dw((y[ht]||null).action),_=f.submitter;_&&(s=(s=_[ht]||null)?Dw(s.formAction):_.getAttribute("formAction"),s!==null&&(b=s,_=null));var T=new P("action","action",null,f,y);a.push({event:T,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(zs!==0){var B=_?Ow(y,_):new FormData(y);Cm(c,{pending:!0,data:B,method:y.method,action:b},null,B)}}else typeof b=="function"&&(T.preventDefault(),B=_?Ow(y,_):new FormData(y),Cm(c,{pending:!0,data:B,method:y.method,action:b},b,B))},currentTarget:y}]})}}for(var sv=0;sv<Fh.length;sv++){var lv=Fh[sv],x5=lv.toLowerCase(),b5=lv[0].toUpperCase()+lv.slice(1);Ya(x5,"on"+b5)}Ya(l1,"onAnimationEnd"),Ya(o1,"onAnimationIteration"),Ya(c1,"onAnimationStart"),Ya("dblclick","onDoubleClick"),Ya("focusin","onFocus"),Ya("focusout","onBlur"),Ya(R2,"onTransitionRun"),Ya(I2,"onTransitionStart"),Ya(L2,"onTransitionCancel"),Ya(u1,"onTransitionEnd"),V("onMouseEnter",["mouseout","mouseover"]),V("onMouseLeave",["mouseout","mouseover"]),V("onPointerEnter",["pointerout","pointerover"]),V("onPointerLeave",["pointerout","pointerover"]),Nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function Tw(a,s){s=(s&4)!==0;for(var c=0;c<a.length;c++){var f=a[c],y=f.event;f=f.listeners;e:{var b=void 0;if(s)for(var _=f.length-1;0<=_;_--){var T=f[_],B=T.instance,le=T.currentTarget;if(T=T.listener,B!==b&&y.isPropagationStopped())break e;b=T,y.currentTarget=le;try{b(y)}catch(je){sd(je)}y.currentTarget=null,b=B}else for(_=0;_<f.length;_++){if(T=f[_],B=T.instance,le=T.currentTarget,T=T.listener,B!==b&&y.isPropagationStopped())break e;b=T,y.currentTarget=le;try{b(y)}catch(je){sd(je)}y.currentTarget=null,b=B}}}}function zt(a,s){var c=s[Ye];c===void 0&&(c=s[Ye]=new Set);var f=a+"__bubble";c.has(f)||(Aw(s,a,2,!1),c.add(f))}function ov(a,s,c){var f=0;s&&(f|=4),Aw(c,a,f,s)}var Vd="_reactListening"+Math.random().toString(36).slice(2);function cv(a){if(!a[Vd]){a[Vd]=!0,Kt.forEach(function(c){c!=="selectionchange"&&(j5.has(c)||ov(c,!1,a),ov(c,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[Vd]||(s[Vd]=!0,ov("selectionchange",!1,s))}}function Aw(a,s,c,f){switch(lS(s)){case 2:var y=K5;break;case 8:y=Q5;break;default:y=Nv}c=y.bind(null,s,c,a),y=void 0,!sc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),f?y!==void 0?a.addEventListener(s,c,{capture:!0,passive:y}):a.addEventListener(s,c,!0):y!==void 0?a.addEventListener(s,c,{passive:y}):a.addEventListener(s,c,!1)}function uv(a,s,c,f,y){var b=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var T=f.stateNode.containerInfo;if(T===y)break;if(_===4)for(_=f.return;_!==null;){var B=_.tag;if((B===3||B===4)&&_.stateNode.containerInfo===y)return;_=_.return}for(;T!==null;){if(_=at(T),_===null)return;if(B=_.tag,B===5||B===6||B===26||B===27){f=b=_;continue e}T=T.parentNode}}f=f.return}rd(function(){var le=b,je=ac(c),ke=[];e:{var oe=d1.get(a);if(oe!==void 0){var fe=P,qe=a;switch(a){case"keypress":if(Vl(c)===0)break e;case"keydown":case"keyup":fe=h2;break;case"focusin":qe="focus",fe=rt;break;case"focusout":qe="blur",fe=rt;break;case"beforeblur":case"afterblur":fe=rt;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=nt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=kn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=g2;break;case l1:case o1:case c1:fe=Vn;break;case u1:fe=x2;break;case"scroll":case"scrollend":fe=z;break;case"wheel":fe=j2;break;case"copy":case"cut":case"paste":fe=Di;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Fb;break;case"toggle":case"beforetoggle":fe=S2}var ct=(s&4)!==0,gn=!ct&&(a==="scroll"||a==="scrollend"),X=ct?oe!==null?oe+"Capture":null:oe;ct=[];for(var Y=le,se;Y!==null;){var Ne=Y;if(se=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||se===null||X===null||(Ne=xs(Y,X),Ne!=null&&ct.push($c(Y,Ne,se))),gn)break;Y=Y.return}0<ct.length&&(oe=new fe(oe,qe,null,c,je),ke.push({event:oe,listeners:ct}))}}if((s&7)===0){e:{if(oe=a==="mouseover"||a==="pointerover",fe=a==="mouseout"||a==="pointerout",oe&&c!==rl&&(qe=c.relatedTarget||c.fromElement)&&(at(qe)||qe[it]))break e;if((fe||oe)&&(oe=je.window===je?je:(oe=je.ownerDocument)?oe.defaultView||oe.parentWindow:window,fe?(qe=c.relatedTarget||c.toElement,fe=le,qe=qe?at(qe):null,qe!==null&&(gn=o(qe),ct=qe.tag,qe!==gn||ct!==5&&ct!==27&&ct!==6)&&(qe=null)):(fe=null,qe=le),fe!==qe)){if(ct=nt,Ne="onMouseLeave",X="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(ct=Fb,Ne="onPointerLeave",X="onPointerEnter",Y="pointer"),gn=fe==null?oe:Sn(fe),se=qe==null?oe:Sn(qe),oe=new ct(Ne,Y+"leave",fe,c,je),oe.target=gn,oe.relatedTarget=se,Ne=null,at(je)===le&&(ct=new ct(X,Y+"enter",qe,c,je),ct.target=se,ct.relatedTarget=gn,Ne=ct),gn=Ne,fe&&qe)t:{for(ct=w5,X=fe,Y=qe,se=0,Ne=X;Ne;Ne=ct(Ne))se++;Ne=0;for(var Ze=Y;Ze;Ze=ct(Ze))Ne++;for(;0<se-Ne;)X=ct(X),se--;for(;0<Ne-se;)Y=ct(Y),Ne--;for(;se--;){if(X===Y||Y!==null&&X===Y.alternate){ct=X;break t}X=ct(X),Y=ct(Y)}ct=null}else ct=null;fe!==null&&Mw(ke,oe,fe,ct,!1),qe!==null&&gn!==null&&Mw(ke,gn,qe,ct,!0)}}e:{if(oe=le?Sn(le):window,fe=oe.nodeName&&oe.nodeName.toLowerCase(),fe==="select"||fe==="input"&&oe.type==="file")var Xt=Qb;else if(Yb(oe))if(Xb)Xt=M2;else{Xt=T2;var He=O2}else fe=oe.nodeName,!fe||fe.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?le&&an(le.elementType)&&(Xt=Qb):Xt=A2;if(Xt&&(Xt=Xt(a,le))){Kb(ke,Xt,c,je);break e}He&&He(a,oe,le),a==="focusout"&&le&&oe.type==="number"&&le.memoizedProps.value!=null&&ve(oe,"number",oe.value)}switch(He=le?Sn(le):window,a){case"focusin":(Yb(He)||He.contentEditable==="true")&&(Yl=He,$h=le,hc=null);break;case"focusout":hc=$h=Yl=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,i1(ke,c,je);break;case"selectionchange":if(z2)break;case"keydown":case"keyup":i1(ke,c,je)}var Ct;if(zh)e:{switch(a){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else Gl?Vb(a,c)&&(It="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(It="onCompositionStart");It&&(qb&&c.locale!=="ko"&&(Gl||It!=="onCompositionStart"?It==="onCompositionEnd"&&Gl&&(Ct=oc()):(ci=je,lc="value"in ci?ci.value:ci.textContent,Gl=!0)),He=Gd(le,It),0<He.length&&(It=new cc(It,a,null,c,je),ke.push({event:It,listeners:He}),Ct?It.data=Ct:(Ct=Gb(c),Ct!==null&&(It.data=Ct)))),(Ct=C2?_2(a,c):k2(a,c))&&(It=Gd(le,"onBeforeInput"),0<It.length&&(He=new cc("onBeforeInput","beforeinput",null,c,je),ke.push({event:He,listeners:It}),He.data=Ct)),y5(ke,a,le,c,je)}Tw(ke,s)})}function $c(a,s,c){return{instance:a,listener:s,currentTarget:c}}function Gd(a,s){for(var c=s+"Capture",f=[];a!==null;){var y=a,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=xs(a,c),y!=null&&f.unshift($c(a,y,b)),y=xs(a,s),y!=null&&f.push($c(a,y,b))),a.tag===3)return f;a=a.return}return[]}function w5(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Mw(a,s,c,f,y){for(var b=s._reactName,_=[];c!==null&&c!==f;){var T=c,B=T.alternate,le=T.stateNode;if(T=T.tag,B!==null&&B===f)break;T!==5&&T!==26&&T!==27||le===null||(B=le,y?(le=xs(c,b),le!=null&&_.unshift($c(c,le,B))):y||(le=xs(c,b),le!=null&&_.push($c(c,le,B)))),c=c.return}_.length!==0&&a.push({event:s,listeners:_})}var S5=/\r\n?/g,N5=/\u0000|\uFFFD/g;function Pw(a){return(typeof a=="string"?a:""+a).replace(S5,`
`).replace(N5,"")}function zw(a,s){return s=Pw(s),Pw(a)===s}function vn(a,s,c,f,y,b){switch(c){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||mt(a,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&mt(a,""+f);break;case"className":Mt(a,"class",f);break;case"tabIndex":Mt(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Mt(a,c,f);break;case"style":Fe(a,f,b);break;case"data":if(s!=="object"){Mt(a,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||c!=="href")){a.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=er(""+f),a.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(s!=="input"&&vn(a,s,"name",y.name,y,null),vn(a,s,"formEncType",y.formEncType,y,null),vn(a,s,"formMethod",y.formMethod,y,null),vn(a,s,"formTarget",y.formTarget,y,null)):(vn(a,s,"encType",y.encType,y,null),vn(a,s,"method",y.method,y,null),vn(a,s,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(c);break}f=er(""+f),a.setAttribute(c,f);break;case"onClick":f!=null&&(a.onclick=Mr);break;case"onScroll":f!=null&&zt("scroll",a);break;case"onScrollEnd":f!=null&&zt("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}c=er(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""+f):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":f===!0?a.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(c,f):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(c,f):a.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(c):a.setAttribute(c,f);break;case"popover":zt("beforetoggle",a),zt("toggle",a),Cn(a,"popover",f);break;case"xlinkActuate":pt(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":pt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":pt(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":pt(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":pt(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":pt(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":pt(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":pt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":pt(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Cn(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Qt.get(c)||c,Cn(a,c,f))}}function dv(a,s,c,f,y,b){switch(c){case"style":Fe(a,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof f=="string"?mt(a,f):(typeof f=="number"||typeof f=="bigint")&&mt(a,""+f);break;case"onScroll":f!=null&&zt("scroll",a);break;case"onScrollEnd":f!=null&&zt("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$n.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),s=c.slice(2,y?c.length-7:void 0),b=a[ht]||null,b=b!=null?b[c]:null,typeof b=="function"&&a.removeEventListener(s,b,y),typeof f=="function")){typeof b!="function"&&b!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(s,f,y);break e}c in a?a[c]=f:f===!0?a.setAttribute(c,""):Cn(a,c,f)}}}function Dr(a,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",a),zt("load",a);var f=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var _=c[b];if(_!=null)switch(b){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:vn(a,s,b,_,c,null)}}y&&vn(a,s,"srcSet",c.srcSet,c,null),f&&vn(a,s,"src",c.src,c,null);return;case"input":zt("invalid",a);var T=b=_=y=null,B=null,le=null;for(f in c)if(c.hasOwnProperty(f)){var je=c[f];if(je!=null)switch(f){case"name":y=je;break;case"type":_=je;break;case"checked":B=je;break;case"defaultChecked":le=je;break;case"value":b=je;break;case"defaultValue":T=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(r(137,s));break;default:vn(a,s,f,je,c,null)}}be(a,b,T,B,le,_,y,!1);return;case"select":zt("invalid",a),f=_=b=null;for(y in c)if(c.hasOwnProperty(y)&&(T=c[y],T!=null))switch(y){case"value":b=T;break;case"defaultValue":_=T;break;case"multiple":f=T;default:vn(a,s,y,T,c,null)}s=b,c=_,a.multiple=!!f,s!=null?Re(a,!!f,s,!1):c!=null&&Re(a,!!f,c,!0);return;case"textarea":zt("invalid",a),b=y=f=null;for(_ in c)if(c.hasOwnProperty(_)&&(T=c[_],T!=null))switch(_){case"value":f=T;break;case"defaultValue":y=T;break;case"children":b=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:vn(a,s,_,T,c,null)}ot(a,f,y,b);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(f=c[B],f!=null))switch(B){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:vn(a,s,B,f,c,null)}return;case"dialog":zt("beforetoggle",a),zt("toggle",a),zt("cancel",a),zt("close",a);break;case"iframe":case"object":zt("load",a);break;case"video":case"audio":for(f=0;f<Lc.length;f++)zt(Lc[f],a);break;case"image":zt("error",a),zt("load",a);break;case"details":zt("toggle",a);break;case"embed":case"source":case"link":zt("error",a),zt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in c)if(c.hasOwnProperty(le)&&(f=c[le],f!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:vn(a,s,le,f,c,null)}return;default:if(an(s)){for(je in c)c.hasOwnProperty(je)&&(f=c[je],f!==void 0&&dv(a,s,je,f,c,void 0));return}}for(T in c)c.hasOwnProperty(T)&&(f=c[T],f!=null&&vn(a,s,T,f,c,null))}function C5(a,s,c,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,_=null,T=null,B=null,le=null,je=null;for(fe in c){var ke=c[fe];if(c.hasOwnProperty(fe)&&ke!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":B=ke;default:f.hasOwnProperty(fe)||vn(a,s,fe,null,f,ke)}}for(var oe in f){var fe=f[oe];if(ke=c[oe],f.hasOwnProperty(oe)&&(fe!=null||ke!=null))switch(oe){case"type":b=fe;break;case"name":y=fe;break;case"checked":le=fe;break;case"defaultChecked":je=fe;break;case"value":_=fe;break;case"defaultValue":T=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,s));break;default:fe!==ke&&vn(a,s,oe,fe,f,ke)}}Oe(a,_,T,B,le,je,b,y);return;case"select":fe=_=T=oe=null;for(b in c)if(B=c[b],c.hasOwnProperty(b)&&B!=null)switch(b){case"value":break;case"multiple":fe=B;default:f.hasOwnProperty(b)||vn(a,s,b,null,f,B)}for(y in f)if(b=f[y],B=c[y],f.hasOwnProperty(y)&&(b!=null||B!=null))switch(y){case"value":oe=b;break;case"defaultValue":T=b;break;case"multiple":_=b;default:b!==B&&vn(a,s,y,b,f,B)}s=T,c=_,f=fe,oe!=null?Re(a,!!c,oe,!1):!!f!=!!c&&(s!=null?Re(a,!!c,s,!0):Re(a,!!c,c?[]:"",!1));return;case"textarea":fe=oe=null;for(T in c)if(y=c[T],c.hasOwnProperty(T)&&y!=null&&!f.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:vn(a,s,T,null,f,y)}for(_ in f)if(y=f[_],b=c[_],f.hasOwnProperty(_)&&(y!=null||b!=null))switch(_){case"value":oe=y;break;case"defaultValue":fe=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&vn(a,s,_,y,f,b)}st(a,oe,fe);return;case"option":for(var qe in c)if(oe=c[qe],c.hasOwnProperty(qe)&&oe!=null&&!f.hasOwnProperty(qe))switch(qe){case"selected":a.selected=!1;break;default:vn(a,s,qe,null,f,oe)}for(B in f)if(oe=f[B],fe=c[B],f.hasOwnProperty(B)&&oe!==fe&&(oe!=null||fe!=null))switch(B){case"selected":a.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:vn(a,s,B,oe,f,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in c)oe=c[ct],c.hasOwnProperty(ct)&&oe!=null&&!f.hasOwnProperty(ct)&&vn(a,s,ct,null,f,oe);for(le in f)if(oe=f[le],fe=c[le],f.hasOwnProperty(le)&&oe!==fe&&(oe!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,s));break;default:vn(a,s,le,oe,f,fe)}return;default:if(an(s)){for(var gn in c)oe=c[gn],c.hasOwnProperty(gn)&&oe!==void 0&&!f.hasOwnProperty(gn)&&dv(a,s,gn,void 0,f,oe);for(je in f)oe=f[je],fe=c[je],!f.hasOwnProperty(je)||oe===fe||oe===void 0&&fe===void 0||dv(a,s,je,oe,f,fe);return}}for(var X in c)oe=c[X],c.hasOwnProperty(X)&&oe!=null&&!f.hasOwnProperty(X)&&vn(a,s,X,null,f,oe);for(ke in f)oe=f[ke],fe=c[ke],!f.hasOwnProperty(ke)||oe===fe||oe==null&&fe==null||vn(a,s,ke,oe,f,fe)}function Rw(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _5(){if(typeof performance.getEntriesByType=="function"){for(var a=0,s=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var y=c[f],b=y.transferSize,_=y.initiatorType,T=y.duration;if(b&&T&&Rw(_)){for(_=0,T=y.responseEnd,f+=1;f<c.length;f++){var B=c[f],le=B.startTime;if(le>T)break;var je=B.transferSize,ke=B.initiatorType;je&&Rw(ke)&&(B=B.responseEnd,_+=je*(B<T?1:(T-le)/(B-le)))}if(--f,s+=8*(b+_)/(y.duration/1e3),a++,10<a)break}}if(0<a)return s/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var fv=null,pv=null;function Yd(a){return a.nodeType===9?a:a.ownerDocument}function Iw(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lw(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function hv(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mv=null;function k5(){var a=window.event;return a&&a.type==="popstate"?a===mv?!1:(mv=a,!0):(mv=null,!1)}var $w=typeof setTimeout=="function"?setTimeout:void 0,E5=typeof clearTimeout=="function"?clearTimeout:void 0,Bw=typeof Promise=="function"?Promise:void 0,D5=typeof queueMicrotask=="function"?queueMicrotask:typeof Bw<"u"?function(a){return Bw.resolve(null).then(a).catch(O5)}:$w;function O5(a){setTimeout(function(){throw a})}function Rs(a){return a==="head"}function Uw(a,s){var c=s,f=0;do{var y=c.nextSibling;if(a.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(f===0){a.removeChild(y),wo(s);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Bc(a.ownerDocument.documentElement);else if(c==="head"){c=a.ownerDocument.head,Bc(c);for(var b=c.firstChild;b;){var _=b.nextSibling,T=b.nodeName;b[dt]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=_}}else c==="body"&&Bc(a.ownerDocument.body);c=y}while(c);wo(s)}function Fw(a,s){var c=a;a=0;do{var f=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(a===0)break;a--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||a++;c=f}while(c)}function vv(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":vv(c),bt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function T5(a,s,c,f){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[dt])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Pa(a.nextSibling),a===null)break}return null}function A5(a,s,c){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=Pa(a.nextSibling),a===null))return null;return a}function qw(a,s){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!s||(a=Pa(a.nextSibling),a===null))return null;return a}function gv(a){return a.data==="$?"||a.data==="$~"}function yv(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function M5(a,s){var c=a.ownerDocument;if(a.data==="$~")a._reactRetry=s;else if(a.data!=="$?"||c.readyState!=="loading")s();else{var f=function(){s(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Pa(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return a}var xv=null;function Hw(a){a=a.nextSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"||c==="/&"){if(s===0)return Pa(a.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}a=a.nextSibling}return null}function Ww(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return a;s--}else c!=="/$"&&c!=="/&"||s++}a=a.previousSibling}return null}function Vw(a,s,c){switch(s=Yd(c),a){case"html":if(a=s.documentElement,!a)throw Error(r(452));return a;case"head":if(a=s.head,!a)throw Error(r(453));return a;case"body":if(a=s.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Bc(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);bt(a)}var za=new Map,Gw=new Set;function Kd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Hi=ne.d;ne.d={f:P5,r:z5,D:R5,C:I5,L:L5,m:$5,X:U5,S:B5,M:F5};function P5(){var a=Hi.f(),s=Bd();return a||s}function z5(a){var s=Ht(a);s!==null&&s.tag===5&&s.type==="form"?uj(s):Hi.r(a)}var xo=typeof document>"u"?null:document;function Yw(a,s,c){var f=xo;if(f&&typeof s=="string"&&s){var y=_e(s);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),Gw.has(y)||(Gw.add(y),a={rel:a,crossOrigin:c,href:s},f.querySelector(y)===null&&(s=f.createElement("link"),Dr(s,"link",a),Nt(s),f.head.appendChild(s)))}}function R5(a){Hi.D(a),Yw("dns-prefetch",a,null)}function I5(a,s){Hi.C(a,s),Yw("preconnect",a,s)}function L5(a,s,c){Hi.L(a,s,c);var f=xo;if(f&&a&&s){var y='link[rel="preload"][as="'+_e(s)+'"]';s==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+_e(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+_e(c.imageSizes)+'"]')):y+='[href="'+_e(a)+'"]';var b=y;switch(s){case"style":b=bo(a);break;case"script":b=jo(a)}za.has(b)||(a=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:a,as:s},c),za.set(b,a),f.querySelector(y)!==null||s==="style"&&f.querySelector(Uc(b))||s==="script"&&f.querySelector(Fc(b))||(s=f.createElement("link"),Dr(s,"link",a),Nt(s),f.head.appendChild(s)))}}function $5(a,s){Hi.m(a,s);var c=xo;if(c&&a){var f=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+_e(f)+'"][href="'+_e(a)+'"]',b=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=jo(a)}if(!za.has(b)&&(a=v({rel:"modulepreload",href:a},s),za.set(b,a),c.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Fc(b)))return}f=c.createElement("link"),Dr(f,"link",a),Nt(f),c.head.appendChild(f)}}}function B5(a,s,c){Hi.S(a,s,c);var f=xo;if(f&&a){var y=Jn(f).hoistableStyles,b=bo(a);s=s||"default";var _=y.get(b);if(!_){var T={loading:0,preload:null};if(_=f.querySelector(Uc(b)))T.loading=5;else{a=v({rel:"stylesheet",href:a,"data-precedence":s},c),(c=za.get(b))&&bv(a,c);var B=_=f.createElement("link");Nt(B),Dr(B,"link",a),B._p=new Promise(function(le,je){B.onload=le,B.onerror=je}),B.addEventListener("load",function(){T.loading|=1}),B.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Qd(_,s,f)}_={type:"stylesheet",instance:_,count:1,state:T},y.set(b,_)}}}function U5(a,s){Hi.X(a,s);var c=xo;if(c&&a){var f=Jn(c).hoistableScripts,y=jo(a),b=f.get(y);b||(b=c.querySelector(Fc(y)),b||(a=v({src:a,async:!0},s),(s=za.get(y))&&jv(a,s),b=c.createElement("script"),Nt(b),Dr(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(y,b))}}function F5(a,s){Hi.M(a,s);var c=xo;if(c&&a){var f=Jn(c).hoistableScripts,y=jo(a),b=f.get(y);b||(b=c.querySelector(Fc(y)),b||(a=v({src:a,async:!0,type:"module"},s),(s=za.get(y))&&jv(a,s),b=c.createElement("script"),Nt(b),Dr(b,"link",a),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(y,b))}}function Kw(a,s,c,f){var y=(y=Ee.current)?Kd(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=bo(c.href),c=Jn(y).hoistableStyles,f=c.get(s),f||(f={type:"style",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=bo(c.href);var b=Jn(y).hoistableStyles,_=b.get(a);if(_||(y=y.ownerDocument||y,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,_),(b=y.querySelector(Uc(a)))&&!b._p&&(_.instance=b,_.state.loading=5),za.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},za.set(a,c),b||q5(y,a,c,_.state))),s&&f===null)throw Error(r(528,""));return _}if(s&&f!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=jo(c),c=Jn(y).hoistableScripts,f=c.get(s),f||(f={type:"script",instance:null,count:0,state:null},c.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function bo(a){return'href="'+_e(a)+'"'}function Uc(a){return'link[rel="stylesheet"]['+a+"]"}function Qw(a){return v({},a,{"data-precedence":a.precedence,precedence:null})}function q5(a,s,c,f){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=a.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),Dr(s,"link",c),Nt(s),a.head.appendChild(s))}function jo(a){return'[src="'+_e(a)+'"]'}function Fc(a){return"script[async]"+a}function Xw(a,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var f=a.querySelector('style[data-href~="'+_e(c.href)+'"]');if(f)return s.instance=f,Nt(f),f;var y=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),Nt(f),Dr(f,"style",y),Qd(f,c.precedence,a),s.instance=f;case"stylesheet":y=bo(c.href);var b=a.querySelector(Uc(y));if(b)return s.state.loading|=4,s.instance=b,Nt(b),b;f=Qw(c),(y=za.get(y))&&bv(f,y),b=(a.ownerDocument||a).createElement("link"),Nt(b);var _=b;return _._p=new Promise(function(T,B){_.onload=T,_.onerror=B}),Dr(b,"link",f),s.state.loading|=4,Qd(b,c.precedence,a),s.instance=b;case"script":return b=jo(c.src),(y=a.querySelector(Fc(b)))?(s.instance=y,Nt(y),y):(f=c,(y=za.get(b))&&(f=v({},c),jv(f,y)),a=a.ownerDocument||a,y=a.createElement("script"),Nt(y),Dr(y,"link",f),a.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,Qd(f,c.precedence,a));return s.instance}function Qd(a,s,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,b=y,_=0;_<f.length;_++){var T=f[_];if(T.dataset.precedence===s)b=T;else if(b!==y)break}b?b.parentNode.insertBefore(a,b.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(a,s.firstChild))}function bv(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function jv(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var Xd=null;function Zw(a,s,c){if(Xd===null){var f=new Map,y=Xd=new Map;y.set(c,f)}else y=Xd,f=y.get(c),f||(f=new Map,y.set(c,f));if(f.has(a))return f;for(f.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var b=c[y];if(!(b[dt]||b[Le]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var _=b.getAttribute(s)||"";_=a+_;var T=f.get(_);T?T.push(b):f.set(_,[b])}}return f}function Jw(a,s,c){a=a.ownerDocument||a,a.head.insertBefore(c,s==="title"?a.querySelector("head > title"):null)}function H5(a,s,c){if(c===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function eS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function W5(a,s,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=bo(f.href),b=s.querySelector(Uc(y));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(a.count++,a=Zd.bind(a),s.then(a,a)),c.state.loading|=4,c.instance=b,Nt(b);return}b=s.ownerDocument||s,f=Qw(f),(y=za.get(y))&&bv(f,y),b=b.createElement("link"),Nt(b);var _=b;_._p=new Promise(function(T,B){_.onload=T,_.onerror=B}),Dr(b,"link",f),c.instance=b}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(a.count++,c=Zd.bind(a),s.addEventListener("load",c),s.addEventListener("error",c))}}var wv=0;function V5(a,s){return a.stylesheets&&a.count===0&&ef(a,a.stylesheets),0<a.count||0<a.imgCount?function(c){var f=setTimeout(function(){if(a.stylesheets&&ef(a,a.stylesheets),a.unsuspend){var b=a.unsuspend;a.unsuspend=null,b()}},6e4+s);0<a.imgBytes&&wv===0&&(wv=62500*_5());var y=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&ef(a,a.stylesheets),a.unsuspend)){var b=a.unsuspend;a.unsuspend=null,b()}},(a.imgBytes>wv?50:800)+s);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f),clearTimeout(y)}}:null}function Zd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Jd=null;function ef(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Jd=new Map,s.forEach(G5,a),Jd=null,Zd.call(a))}function G5(a,s){if(!(s.state.loading&4)){var c=Jd.get(a);if(c)var f=c.get(null);else{c=new Map,Jd.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var _=y[b];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),f=_)}f&&c.set(null,f)}y=s.instance,_=y.getAttribute("data-precedence"),b=c.get(_)||f,b===f&&c.set(null,y),c.set(_,y),this.count++,f=Zd.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),b?b.parentNode.insertBefore(y,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),s.state.loading|=4}}var qc={$$typeof:E,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Y5(a,s,c,f,y,b,_,T,B){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function tS(a,s,c,f,y,b,_,T,B,le,je,ke){return a=new Y5(a,s,c,_,B,le,je,ke,T),s=1,b===!0&&(s|=24),b=ha(3,null,null,s),a.current=b,b.stateNode=a,s=tm(),s.refCount++,a.pooledCache=s,s.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:s},im(b),a}function nS(a){return a?(a=Xl,a):Xl}function rS(a,s,c,f,y,b){y=nS(y),f.context===null?f.context=y:f.pendingContext=y,f=Cs(s),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=_s(a,f,s),c!==null&&(ra(c,a,s),jc(c,a,s))}function aS(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<s?c:s}}function Sv(a,s){aS(a,s),(a=a.alternate)&&aS(a,s)}function iS(a){if(a.tag===13||a.tag===31){var s=ol(a,67108864);s!==null&&ra(s,a,67108864),Sv(a,67108864)}}function sS(a){if(a.tag===13||a.tag===31){var s=xa();s=kt(s);var c=ol(a,s);c!==null&&ra(c,a,s),Sv(a,s)}}var tf=!0;function K5(a,s,c,f){var y=U.T;U.T=null;var b=ne.p;try{ne.p=2,Nv(a,s,c,f)}finally{ne.p=b,U.T=y}}function Q5(a,s,c,f){var y=U.T;U.T=null;var b=ne.p;try{ne.p=8,Nv(a,s,c,f)}finally{ne.p=b,U.T=y}}function Nv(a,s,c,f){if(tf){var y=Cv(f);if(y===null)uv(a,s,f,nf,c),oS(a,f);else if(Z5(y,a,s,c,f))f.stopPropagation();else if(oS(a,f),s&4&&-1<X5.indexOf(a)){for(;y!==null;){var b=Ht(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var _=cn(b.pendingLanes);if(_!==0){var T=b;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var B=1<<31-At(_);T.entanglements[1]|=B,_&=~B}hi(b),(en&6)===0&&(Ld=Tt()+500,Ic(0))}}break;case 31:case 13:T=ol(b,2),T!==null&&ra(T,b,2),Bd(),Sv(b,2)}if(b=Cv(f),b===null&&uv(a,s,f,nf,c),b===y)break;y=b}y!==null&&f.stopPropagation()}else uv(a,s,f,null,c)}}function Cv(a){return a=ac(a),_v(a)}var nf=null;function _v(a){if(nf=null,a=at(a),a!==null){var s=o(a);if(s===null)a=null;else{var c=s.tag;if(c===13){if(a=u(s),a!==null)return a;a=null}else if(c===31){if(a=d(s),a!==null)return a;a=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return nf=a,null}function lS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ur()){case Pn:return 2;case Ln:return 8;case ln:case Ca:return 32;case Fr:return 268435456;default:return 32}default:return 32}}var kv=!1,Is=null,Ls=null,$s=null,Hc=new Map,Wc=new Map,Bs=[],X5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oS(a,s){switch(a){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Hc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(s.pointerId)}}function Vc(a,s,c,f,y,b){return a===null||a.nativeEvent!==b?(a={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[y]},s!==null&&(s=Ht(s),s!==null&&iS(s)),a):(a.eventSystemFlags|=f,s=a.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),a)}function Z5(a,s,c,f,y){switch(s){case"focusin":return Is=Vc(Is,a,s,c,f,y),!0;case"dragenter":return Ls=Vc(Ls,a,s,c,f,y),!0;case"mouseover":return $s=Vc($s,a,s,c,f,y),!0;case"pointerover":var b=y.pointerId;return Hc.set(b,Vc(Hc.get(b)||null,a,s,c,f,y)),!0;case"gotpointercapture":return b=y.pointerId,Wc.set(b,Vc(Wc.get(b)||null,a,s,c,f,y)),!0}return!1}function cS(a){var s=at(a.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){a.blockedOn=s,Dn(a.priority,function(){sS(c)});return}}else if(s===31){if(s=d(c),s!==null){a.blockedOn=s,Dn(a.priority,function(){sS(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function rf(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var c=Cv(a.nativeEvent);if(c===null){c=a.nativeEvent;var f=new c.constructor(c.type,c);rl=f,c.target.dispatchEvent(f),rl=null}else return s=Ht(c),s!==null&&iS(s),a.blockedOn=c,!1;s.shift()}return!0}function uS(a,s,c){rf(a)&&c.delete(s)}function J5(){kv=!1,Is!==null&&rf(Is)&&(Is=null),Ls!==null&&rf(Ls)&&(Ls=null),$s!==null&&rf($s)&&($s=null),Hc.forEach(uS),Wc.forEach(uS)}function af(a,s){a.blockedOn===s&&(a.blockedOn=null,kv||(kv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,J5)))}var sf=null;function dS(a){sf!==a&&(sf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){sf===a&&(sf=null);for(var s=0;s<a.length;s+=3){var c=a[s],f=a[s+1],y=a[s+2];if(typeof f!="function"){if(_v(f||c)===null)continue;break}var b=Ht(c);b!==null&&(a.splice(s,3),s-=3,Cm(b,{pending:!0,data:y,method:c.method,action:f},f,y))}}))}function wo(a){function s(B){return af(B,a)}Is!==null&&af(Is,a),Ls!==null&&af(Ls,a),$s!==null&&af($s,a),Hc.forEach(s),Wc.forEach(s);for(var c=0;c<Bs.length;c++){var f=Bs[c];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Bs.length&&(c=Bs[0],c.blockedOn===null);)cS(c),c.blockedOn===null&&Bs.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var y=c[f],b=c[f+1],_=y[ht]||null;if(typeof b=="function")_||dS(c);else if(_){var T=null;if(b&&b.hasAttribute("formAction")){if(y=b,_=b[ht]||null)T=_.formAction;else if(_v(y)!==null)continue}else T=_.action;typeof T=="function"?c[f+1]=T:(c.splice(f,3),f-=3),dS(c)}}}function fS(){function a(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(_){return y=_})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,y=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Ev(a){this._internalRoot=a}lf.prototype.render=Ev.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,f=xa();rS(c,f,a,s,null,null)},lf.prototype.unmount=Ev.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;rS(a.current,2,null,a,null,null),Bd(),s[it]=null}};function lf(a){this._internalRoot=a}lf.prototype.unstable_scheduleHydration=function(a){if(a){var s=Hr();a={blockedOn:null,target:a,priority:s};for(var c=0;c<Bs.length&&s!==0&&s<Bs[c].priority;c++);Bs.splice(c,0,a),c===0&&cS(a)}};var pS=t.version;if(pS!=="19.2.0")throw Error(r(527,pS,"19.2.0"));ne.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=p(s),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var eP={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var of=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!of.isDisabled&&of.supportsFiber)try{Zr=of.inject(eP),Ut=of}catch{}}return Yc.createRoot=function(a,s){if(!l(a))throw Error(r(299));var c=!1,f="",y=bj,b=jj,_=wj;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=tS(a,1,!1,null,null,c,f,null,y,b,_,fS),a[it]=s.current,cv(a),new Ev(s)},Yc.hydrateRoot=function(a,s,c){if(!l(a))throw Error(r(299));var f=!1,y="",b=bj,_=jj,T=wj,B=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),s=tS(a,1,!0,s,c??null,f,y,B,b,_,T,fS),s.context=nS(null),c=s.current,f=xa(),f=kt(f),y=Cs(f),y.callback=null,_s(c,y,f),c=f,s.current.lanes=c,ut(s,c),hi(s),a[it]=s.current,cv(a),new lf(s)},Yc.version="19.2.0",Yc}var SS;function fP(){if(SS)return Tv.exports;SS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Tv.exports=dP(),Tv.exports}var pP=fP();var NS="popstate";function hP(e={}){function t(r,l){let{pathname:o,search:u,hash:d}=r.location;return qy("",{pathname:o,search:u,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(r,l){return typeof l=="string"?l:fu(l)}return vP(t,n,null,e)}function Bn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ai(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mP(){return Math.random().toString(36).substring(2,10)}function CS(e,t){return{usr:e.state,key:e.key,idx:t}}function qy(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ho(t):t,state:n,key:t&&t.key||r||mP()}}function fu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ho(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function vP(e,t,n,r={}){let{window:l=document.defaultView,v5Compat:o=!1}=r,u=l.history,d="POP",h=null,p=m();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function m(){return(u.state||{idx:null}).idx}function v(){d="POP";let S=m(),C=S==null?null:S-p;p=S,h&&h({action:d,location:N.location,delta:C})}function x(S,C){d="PUSH";let k=qy(N.location,S,C);p=m()+1;let E=CS(k,p),O=N.createHref(k);try{u.pushState(E,"",O)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;l.location.assign(O)}o&&h&&h({action:d,location:N.location,delta:1})}function j(S,C){d="REPLACE";let k=qy(N.location,S,C);p=m();let E=CS(k,p),O=N.createHref(k);u.replaceState(E,"",O),o&&h&&h({action:d,location:N.location,delta:0})}function w(S){return gP(S)}let N={get action(){return d},get location(){return e(l,u)},listen(S){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(NS,v),h=S,()=>{l.removeEventListener(NS,v),h=null}},createHref(S){return t(l,S)},createURL:w,encodeLocation(S){let C=w(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:x,replace:j,go(S){return u.go(S)}};return N}function gP(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Bn(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:fu(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function NE(e,t,n="/"){return yP(e,t,n,!1)}function yP(e,t,n,r){let l=typeof t=="string"?Ho(t):t,o=ns(l.pathname||"/",n);if(o==null)return null;let u=CE(e);xP(u);let d=null;for(let h=0;d==null&&h<u.length;++h){let p=OP(o);d=EP(u[h],p,r)}return d}function CE(e,t=[],n=[],r="",l=!1){let o=(u,d,h=l,p)=>{let m={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&h)return;Bn(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let v=Xi([r,m.relativePath]),x=n.concat(m);u.children&&u.children.length>0&&(Bn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),CE(u.children,t,x,v,h)),!(u.path==null&&!u.index)&&t.push({path:v,score:_P(v,u.index),routesMeta:x})};return e.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))o(u,d);else for(let h of _E(u.path))o(u,d,!0,h)}),t}function _E(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return l?[o,""]:[o];let u=_E(r.join("/")),d=[];return d.push(...u.map(h=>h===""?o:[o,h].join("/"))),l&&d.push(...u),d.map(h=>e.startsWith("/")&&h===""?"/":h)}function xP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var bP=/^:[\w-]+$/,jP=3,wP=2,SP=1,NP=10,CP=-2,_S=e=>e==="*";function _P(e,t){let n=e.split("/"),r=n.length;return n.some(_S)&&(r+=CP),t&&(r+=wP),n.filter(l=>!_S(l)).reduce((l,o)=>l+(bP.test(o)?jP:o===""?SP:NP),r)}function kP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function EP(e,t,n=!1){let{routesMeta:r}=e,l={},o="/",u=[];for(let d=0;d<r.length;++d){let h=r[d],p=d===r.length-1,m=o==="/"?t:t.slice(o.length)||"/",v=If({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),x=h.route;if(!v&&p&&n&&!r[r.length-1].route.index&&(v=If({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!v)return null;Object.assign(l,v.params),u.push({params:l,pathname:Xi([o,v.pathname]),pathnameBase:PP(Xi([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=Xi([o,v.pathnameBase]))}return u}function If(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=DP(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let o=l[0],u=o.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:v},x)=>{if(m==="*"){let w=d[x]||"";u=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const j=d[x];return v&&!j?p[m]=void 0:p[m]=(j||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:e}}function DP(e,t=!1,n=!0){ai(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function OP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ai(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ns(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function TP(e,t="/"){let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?Ho(e):e;return{pathname:n?n.startsWith("/")?n:AP(n,t):t,search:zP(r),hash:RP(l)}}function AP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function zv(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kE(e){let t=MP(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function EE(e,t,n,r=!1){let l;typeof e=="string"?l=Ho(e):(l={...e},Bn(!l.pathname||!l.pathname.includes("?"),zv("?","pathname","search",l)),Bn(!l.pathname||!l.pathname.includes("#"),zv("#","pathname","hash",l)),Bn(!l.search||!l.search.includes("#"),zv("#","search","hash",l)));let o=e===""||l.pathname==="",u=o?"/":l.pathname,d;if(u==null)d=n;else{let v=t.length-1;if(!r&&u.startsWith("..")){let x=u.split("/");for(;x[0]==="..";)x.shift(),v-=1;l.pathname=x.join("/")}d=v>=0?t[v]:"/"}let h=TP(l,d),p=u&&u!=="/"&&u.endsWith("/"),m=(o||u===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}var Xi=e=>e.join("/").replace(/\/\/+/g,"/"),PP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),zP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function IP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var DE=["POST","PUT","PATCH","DELETE"];new Set(DE);var LP=["GET",...DE];new Set(LP);var Wo=g.createContext(null);Wo.displayName="DataRouter";var Op=g.createContext(null);Op.displayName="DataRouterState";g.createContext(!1);var OE=g.createContext({isTransitioning:!1});OE.displayName="ViewTransition";var $P=g.createContext(new Map);$P.displayName="Fetchers";var BP=g.createContext(null);BP.displayName="Await";var Ni=g.createContext(null);Ni.displayName="Navigation";var Tu=g.createContext(null);Tu.displayName="Location";var Ci=g.createContext({outlet:null,matches:[],isDataRoute:!1});Ci.displayName="Route";var Qx=g.createContext(null);Qx.displayName="RouteError";function UP(e,{relative:t}={}){Bn(Au(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(Ni),{hash:l,pathname:o,search:u}=Pu(e,{relative:t}),d=o;return n!=="/"&&(d=o==="/"?n:Xi([n,o])),r.createHref({pathname:d,search:u,hash:l})}function Au(){return g.useContext(Tu)!=null}function cs(){return Bn(Au(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Tu).location}var TE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AE(e){g.useContext(Ni).static||g.useLayoutEffect(e)}function Mu(){let{isDataRoute:e}=g.useContext(Ci);return e?nz():FP()}function FP(){Bn(Au(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Wo),{basename:t,navigator:n}=g.useContext(Ni),{matches:r}=g.useContext(Ci),{pathname:l}=cs(),o=JSON.stringify(kE(r)),u=g.useRef(!1);return AE(()=>{u.current=!0}),g.useCallback((h,p={})=>{if(ai(u.current,TE),!u.current)return;if(typeof h=="number"){n.go(h);return}let m=EE(h,JSON.parse(o),l,p.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Xi([t,m.pathname])),(p.replace?n.replace:n.push)(m,p.state,p)},[t,n,o,l,e])}var qP=g.createContext(null);function HP(e){let t=g.useContext(Ci).outlet;return g.useMemo(()=>t&&g.createElement(qP.Provider,{value:e},t),[t,e])}function Pu(e,{relative:t}={}){let{matches:n}=g.useContext(Ci),{pathname:r}=cs(),l=JSON.stringify(kE(n));return g.useMemo(()=>EE(e,JSON.parse(l),r,t==="path"),[e,l,r,t])}function WP(e,t){return ME(e,t)}function ME(e,t,n,r,l){Bn(Au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=g.useContext(Ni),{matches:u}=g.useContext(Ci),d=u[u.length-1],h=d?d.params:{},p=d?d.pathname:"/",m=d?d.pathnameBase:"/",v=d&&d.route;{let k=v&&v.path||"";PE(p,!v||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let x=cs(),j;if(t){let k=typeof t=="string"?Ho(t):t;Bn(m==="/"||k.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${k.pathname}" was given in the \`location\` prop.`),j=k}else j=x;let w=j.pathname||"/",N=w;if(m!=="/"){let k=m.replace(/^\//,"").split("/");N="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=NE(e,{pathname:N});ai(v||S!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),ai(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=QP(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},h,k.params),pathname:Xi([m,o.encodeLocation?o.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?m:Xi([m,o.encodeLocation?o.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),u,n,r,l);return t&&C?g.createElement(Tu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},C):C}function VP(){let e=tz(),t=IP(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:o},"ErrorBoundary")," or"," ",g.createElement("code",{style:o},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:l},n):null,u)}var GP=g.createElement(VP,null),YP=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Ci.Provider,{value:this.props.routeContext},g.createElement(Qx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KP({routeContext:e,match:t,children:n}){let r=g.useContext(Wo);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Ci.Provider,{value:e},n)}function QP(e,t=[],n=null,r=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,u=n?.errors;if(u!=null){let p=o.findIndex(m=>m.route.id&&u?.[m.route.id]!==void 0);Bn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,h=-1;if(n)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:v,errors:x}=n,j=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||j){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,v)=>{let x,j=!1,w=null,N=null;n&&(x=u&&m.route.id?u[m.route.id]:void 0,w=m.route.errorElement||GP,d&&(h<0&&v===0?(PE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,N=null):h===v&&(j=!0,N=m.route.hydrateFallbackElement||null)));let S=t.concat(o.slice(0,v+1)),C=()=>{let k;return x?k=w:j?k=N:m.route.Component?k=g.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=p,g.createElement(KP,{match:m,routeContext:{outlet:p,matches:S,isDataRoute:n!=null},children:k})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?g.createElement(YP,{location:n.location,revalidation:n.revalidation,component:w,error:x,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:r}):C()},null)}function Xx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XP(e){let t=g.useContext(Wo);return Bn(t,Xx(e)),t}function ZP(e){let t=g.useContext(Op);return Bn(t,Xx(e)),t}function JP(e){let t=g.useContext(Ci);return Bn(t,Xx(e)),t}function Zx(e){let t=JP(e),n=t.matches[t.matches.length-1];return Bn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ez(){return Zx("useRouteId")}function tz(){let e=g.useContext(Qx),t=ZP("useRouteError"),n=Zx("useRouteError");return e!==void 0?e:t.errors?.[n]}function nz(){let{router:e}=XP("useNavigate"),t=Zx("useNavigate"),n=g.useRef(!1);return AE(()=>{n.current=!0}),g.useCallback(async(l,o={})=>{ai(n.current,TE),n.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:t,...o}))},[e,t])}var kS={};function PE(e,t,n){!t&&!kS[e]&&(kS[e]=!0,ai(!1,n))}g.memo(rz);function rz({routes:e,future:t,state:n,unstable_onError:r}){return ME(e,void 0,n,r,t)}function az(e){return HP(e.context)}function Gr(e){Bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iz({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:l,static:o=!1}){Bn(!Au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:u,navigator:l,static:o,future:{}}),[u,l,o]);typeof n=="string"&&(n=Ho(n));let{pathname:h="/",search:p="",hash:m="",state:v=null,key:x="default"}=n,j=g.useMemo(()=>{let w=ns(h,u);return w==null?null:{location:{pathname:w,search:p,hash:m,state:v,key:x},navigationType:r}},[u,h,p,m,v,x,r]);return ai(j!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:g.createElement(Ni.Provider,{value:d},g.createElement(Tu.Provider,{children:t,value:j}))}function sz({children:e,location:t}){return WP(Hy(e),t)}function Hy(e,t=[]){let n=[];return g.Children.forEach(e,(r,l)=>{if(!g.isValidElement(r))return;let o=[...t,l];if(r.type===g.Fragment){n.push.apply(n,Hy(r.props.children,o));return}Bn(r.type===Gr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Hy(r.props.children,o)),n.push(u)}),n}var Df="get",Of="application/x-www-form-urlencoded";function Tp(e){return e!=null&&typeof e.tagName=="string"}function lz(e){return Tp(e)&&e.tagName.toLowerCase()==="button"}function oz(e){return Tp(e)&&e.tagName.toLowerCase()==="form"}function cz(e){return Tp(e)&&e.tagName.toLowerCase()==="input"}function uz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function dz(e,t){return e.button===0&&(!t||t==="_self")&&!uz(e)}function Wy(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(l=>[n,l]):[[n,r]])},[]))}function fz(e,t){let n=Wy(e);return t&&t.forEach((r,l)=>{n.has(l)||t.getAll(l).forEach(o=>{n.append(l,o)})}),n}var cf=null;function pz(){if(cf===null)try{new FormData(document.createElement("form"),0),cf=!1}catch{cf=!0}return cf}var hz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rv(e){return e!=null&&!hz.has(e)?(ai(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Of}"`),null):e}function mz(e,t){let n,r,l,o,u;if(oz(e)){let d=e.getAttribute("action");r=d?ns(d,t):null,n=e.getAttribute("method")||Df,l=Rv(e.getAttribute("enctype"))||Of,o=new FormData(e)}else if(lz(e)||cz(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||d.getAttribute("action");if(r=h?ns(h,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||Df,l=Rv(e.getAttribute("formenctype"))||Rv(d.getAttribute("enctype"))||Of,o=new FormData(d,e),!pz()){let{name:p,type:m,value:v}=e;if(m==="image"){let x=p?`${p}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else p&&o.append(p,v)}}else{if(Tp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Df,r=null,l=Of,u=e}return o&&l==="text/plain"&&(u=o,o=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vz(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&ns(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function gz(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yz(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function xz(e,t,n){let r=await Promise.all(e.map(async l=>{let o=t.routes[l.route.id];if(o){let u=await gz(o,n);return u.links?u.links():[]}return[]}));return Sz(r.flat(1).filter(yz).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function ES(e,t,n,r,l,o){let u=(h,p)=>n[p]?h.route.id!==n[p].route.id:!0,d=(h,p)=>n[p].pathname!==h.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==h.params["*"];return o==="assets"?t.filter((h,p)=>u(h,p)||d(h,p)):o==="data"?t.filter((h,p)=>{let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(u(h,p)||d(h,p))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function bz(e,t,{includeHydrateFallback:n}={}){return jz(e.map(r=>{let l=t.routes[r.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function jz(e){return[...new Set(e)]}function wz(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Sz(e,t){let n=new Set;return new Set(t),e.reduce((r,l)=>{let o=JSON.stringify(wz(l));return n.has(o)||(n.add(o),r.push({key:o,link:l})),r},[])}function zE(){let e=g.useContext(Wo);return Jx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Nz(){let e=g.useContext(Op);return Jx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var e0=g.createContext(void 0);e0.displayName="FrameworkContext";function RE(){let e=g.useContext(e0);return Jx(e,"You must render this element inside a <HydratedRouter> element"),e}function Cz(e,t){let n=g.useContext(e0),[r,l]=g.useState(!1),[o,u]=g.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:p,onMouseLeave:m,onTouchStart:v}=t,x=g.useRef(null);g.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let N=C=>{C.forEach(k=>{u(k.isIntersecting)})},S=new IntersectionObserver(N,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[e]),g.useEffect(()=>{if(r){let N=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(N)}}},[r]);let j=()=>{l(!0)},w=()=>{l(!1),u(!1)};return n?e!=="intent"?[o,x,{}]:[o,x,{onFocus:Kc(d,j),onBlur:Kc(h,w),onMouseEnter:Kc(p,j),onMouseLeave:Kc(m,w),onTouchStart:Kc(v,j)}]:[!1,x,{}]}function Kc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function _z({page:e,...t}){let{router:n}=zE(),r=g.useMemo(()=>NE(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(Ez,{page:e,matches:r,...t}):null}function kz(e){let{manifest:t,routeModules:n}=RE(),[r,l]=g.useState([]);return g.useEffect(()=>{let o=!1;return xz(e,t,n).then(u=>{o||l(u)}),()=>{o=!0}},[e,t,n]),r}function Ez({page:e,matches:t,...n}){let r=cs(),{manifest:l,routeModules:o}=RE(),{basename:u}=zE(),{loaderData:d,matches:h}=Nz(),p=g.useMemo(()=>ES(e,t,h,l,r,"data"),[e,t,h,l,r]),m=g.useMemo(()=>ES(e,t,h,l,r,"assets"),[e,t,h,l,r]),v=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let w=new Set,N=!1;if(t.forEach(C=>{let k=l.routes[C.route.id];!k||!k.hasLoader||(!p.some(E=>E.route.id===C.route.id)&&C.route.id in d&&o[C.route.id]?.shouldRevalidate||k.hasClientLoader?N=!0:w.add(C.route.id))}),w.size===0)return[];let S=vz(e,u,"data");return N&&w.size>0&&S.searchParams.set("_routes",t.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[u,d,r,l,p,t,e,o]),x=g.useMemo(()=>bz(m,l),[m,l]),j=kz(m);return g.createElement(g.Fragment,null,v.map(w=>g.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),x.map(w=>g.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),j.map(({key:w,link:N})=>g.createElement("link",{key:w,nonce:n.nonce,...N})))}function Dz(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var IE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IE&&(window.__reactRouterVersion="7.9.5")}catch{}function Oz({basename:e,children:t,window:n}){let r=g.useRef();r.current==null&&(r.current=hP({window:n,v5Compat:!0}));let l=r.current,[o,u]=g.useState({action:l.action,location:l.location}),d=g.useCallback(h=>{g.startTransition(()=>u(h))},[u]);return g.useLayoutEffect(()=>l.listen(d),[l,d]),g.createElement(iz,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:l})}var LE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$E=g.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:l,reloadDocument:o,replace:u,state:d,target:h,to:p,preventScrollReset:m,viewTransition:v,...x},j){let{basename:w}=g.useContext(Ni),N=typeof p=="string"&&LE.test(p),S,C=!1;if(typeof p=="string"&&N&&(S=p,IE))try{let te=new URL(window.location.href),ce=p.startsWith("//")?new URL(te.protocol+p):new URL(p),G=ns(ce.pathname,w);ce.origin===te.origin&&G!=null?p=G+ce.search+ce.hash:C=!0}catch{ai(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=UP(p,{relative:l}),[E,O,D]=Cz(r,x),A=Mz(p,{replace:u,state:d,target:h,preventScrollReset:m,relative:l,viewTransition:v});function M(te){t&&t(te),te.defaultPrevented||A(te)}let q=g.createElement("a",{...x,...D,href:S||k,onClick:C||o?t:M,ref:Dz(j,O),target:h,"data-discover":!N&&n==="render"?"true":void 0});return E&&!N?g.createElement(g.Fragment,null,q,g.createElement(_z,{page:k})):q});$E.displayName="Link";var BE=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:l=!1,style:o,to:u,viewTransition:d,children:h,...p},m){let v=Pu(u,{relative:p.relative}),x=cs(),j=g.useContext(Op),{navigator:w,basename:N}=g.useContext(Ni),S=j!=null&&$z(v)&&d===!0,C=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,k=x.pathname,E=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;n||(k=k.toLowerCase(),E=E?E.toLowerCase():null,C=C.toLowerCase()),E&&N&&(E=ns(E,N)||E);const O=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let D=k===C||!l&&k.startsWith(C)&&k.charAt(O)==="/",A=E!=null&&(E===C||!l&&E.startsWith(C)&&E.charAt(C.length)==="/"),M={isActive:D,isPending:A,isTransitioning:S},q=D?t:void 0,te;typeof r=="function"?te=r(M):te=[r,D?"active":null,A?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ce=typeof o=="function"?o(M):o;return g.createElement($E,{...p,"aria-current":q,className:te,ref:m,style:ce,to:u,viewTransition:d},typeof h=="function"?h(M):h)});BE.displayName="NavLink";var Tz=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:l,state:o,method:u=Df,action:d,onSubmit:h,relative:p,preventScrollReset:m,viewTransition:v,...x},j)=>{let w=Iz(),N=Lz(d,{relative:p}),S=u.toLowerCase()==="get"?"get":"post",C=typeof d=="string"&&LE.test(d),k=E=>{if(h&&h(E),E.defaultPrevented)return;E.preventDefault();let O=E.nativeEvent.submitter,D=O?.getAttribute("formmethod")||u;w(O||E.currentTarget,{fetcherKey:t,method:D,navigate:n,replace:l,state:o,relative:p,preventScrollReset:m,viewTransition:v})};return g.createElement("form",{ref:j,method:S,action:N,onSubmit:r?h:k,...x,"data-discover":!C&&e==="render"?"true":void 0})});Tz.displayName="Form";function Az(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UE(e){let t=g.useContext(Wo);return Bn(t,Az(e)),t}function Mz(e,{target:t,replace:n,state:r,preventScrollReset:l,relative:o,viewTransition:u}={}){let d=Mu(),h=cs(),p=Pu(e,{relative:o});return g.useCallback(m=>{if(dz(m,t)){m.preventDefault();let v=n!==void 0?n:fu(h)===fu(p);d(e,{replace:v,state:r,preventScrollReset:l,relative:o,viewTransition:u})}},[h,d,p,n,r,t,e,l,o,u])}function Pz(e){ai(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(Wy(e)),n=g.useRef(!1),r=cs(),l=g.useMemo(()=>fz(r.search,n.current?null:t.current),[r.search]),o=Mu(),u=g.useCallback((d,h)=>{const p=Wy(typeof d=="function"?d(new URLSearchParams(l)):d);n.current=!0,o("?"+p,h)},[o,l]);return[l,u]}var zz=0,Rz=()=>`__${String(++zz)}__`;function Iz(){let{router:e}=UE("useSubmit"),{basename:t}=g.useContext(Ni),n=ez();return g.useCallback(async(r,l={})=>{let{action:o,method:u,encType:d,formData:h,body:p}=mz(r,t);if(l.navigate===!1){let m=l.fetcherKey||Rz();await e.fetch(m,n,l.action||o,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||u,formEncType:l.encType||d,flushSync:l.flushSync})}else await e.navigate(l.action||o,{preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||u,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,n])}function Lz(e,{relative:t}={}){let{basename:n}=g.useContext(Ni),r=g.useContext(Ci);Bn(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),o={...Pu(e||".",{relative:t})},u=cs();if(e==null){o.search=u.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(m=>m==="")){d.delete("index"),h.filter(v=>v).forEach(v=>d.append("index",v));let m=d.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Xi([n,o.pathname])),fu(o)}function $z(e,{relative:t}={}){let n=g.useContext(OE);Bn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=UE("useViewTransitionState"),l=Pu(e,{relative:t});if(!n.isTransitioning)return!1;let o=ns(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=ns(n.nextLocation.pathname,r)||n.nextLocation.pathname;return If(l.pathname,u)!=null||If(l.pathname,o)!=null}var FE=SE();const Bz=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uz=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),DS=e=>{const t=Uz(e);return t.charAt(0).toUpperCase()+t.slice(1)},qE=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Fz=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var qz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hz=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:l="",children:o,iconNode:u,...d},h)=>g.createElement("svg",{ref:h,...qz,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:qE("lucide",l),...!o&&!Fz(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,m])=>g.createElement(p,m)),...Array.isArray(o)?o:[o]]));const Xe=(e,t)=>{const n=g.forwardRef(({className:r,...l},o)=>g.createElement(Hz,{ref:o,iconNode:t,className:qE(`lucide-${Bz(DS(e))}`,`lucide-${e}`,r),...l}));return n.displayName=DS(e),n};const Wz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Vz=Xe("arrow-left",Wz);const Gz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],HE=Xe("arrow-right",Gz);const Yz=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],Kz=Xe("arrow-up-a-z",Yz);const Qz=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Xz=Xe("arrow-up-down",Qz);const Zz=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jz=Xe("ban",Zz);const e4=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],WE=Xe("bot",e4);const t4=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],zu=Xe("building-2",t4);const n4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],t0=Xe("calendar",n4);const r4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Vy=Xe("chart-column",r4);const a4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Yi=Xe("check",a4);const i4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jn=Xe("chevron-down",i4);const s4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pu=Xe("chevron-left",s4);const l4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Lf=Xe("chevron-right",l4);const o4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ur=Xe("chevron-up",o4);const c4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Wa=Xe("circle-alert",c4);const u4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vo=Xe("circle-check-big",u4);const d4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Kr=Xe("circle-check",d4);const f4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],VE=Xe("circle-x",f4);const p4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],au=Xe("circle",p4);const h4=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],m4=Xe("clipboard-list",h4);const v4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ru=Xe("clock",v4);const g4=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],y4=Xe("code",g4);const x4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Tf=Xe("copy",x4);const b4=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ap=Xe("dollar-sign",b4);const j4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],n0=Xe("download",j4);const w4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],S4=Xe("external-link",w4);const N4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],C4=Xe("eye-off",N4);const _4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],r0=Xe("eye",_4);const k4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Xa=Xe("file-text",k4);const E4=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],D4=Xe("flask-conical",E4);const O4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],T4=Xe("image",O4);const A4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Po=Xe("info",A4);const M4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],P4=Xe("layout-dashboard",M4);const z4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],sa=Xe("loader-circle",z4);const R4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],I4=Xe("mail",R4);const L4=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],$4=Xe("menu",L4);const B4=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],U4=Xe("message-square",B4);const F4=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],q4=Xe("network",F4);const H4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Za=Xe("package",H4);const W4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],V4=Xe("pen",W4);const G4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ws=Xe("plus",G4);const Y4=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],K4=Xe("scroll-text",Y4);const Q4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Bl=Xe("search",Q4);const X4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Gy=Xe("send",X4);const Z4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],GE=Xe("settings",Z4);const J4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],YE=Xe("sparkles",J4);const e3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],OS=Xe("square-pen",e3);const t3=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],n3=Xe("sticky-note",t3);const r3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zi=Xe("trash-2",r3);const a3=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],i3=Xe("trending-down",a3);const s3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Go=Xe("trending-up",s3);const l3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tn=Xe("triangle-alert",l3);const o3=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],c3=Xe("unlink",o3);const u3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Mp=Xe("upload",u3);const d3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],f3=Xe("user",d3);const p3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sn=Xe("x",p3);function h3({to:e,icon:t,label:n,badge:r,badgeVariant:l="secondary",testId:o,isCollapsed:u,isVisible:d=!0}){return d?i.jsx(BE,{to:e,"data-testid":o,end:e==="/",className:({isActive:h})=>`sidebar-item ${h?"sidebar-item-active":""} ${u?"sidebar-item-collapsed":""}`,children:({isActive:h})=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`sidebar-item-icon ${h?"sidebar-item-icon-active":""}`,children:i.jsx(t,{style:{width:"20px",height:"20px"}})}),i.jsx("span",{className:`sidebar-item-label ${u?"sidebar-item-label-hidden":""}`,style:{opacity:u?0:1,width:u?0:"auto",transition:"opacity 450ms cubic-bezier(0.25, 0.46, 0.45, 0.94), width 450ms cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:n}),r!==void 0&&r>0&&!u&&i.jsx("span",{className:`sidebar-item-badge ${l==="destructive"?"sidebar-item-badge-destructive":"sidebar-item-badge-secondary"}`,"data-testid":o?`${o}-badge`:void 0,style:{opacity:u?0:1,transition:"opacity 450ms cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:r}),h&&i.jsx("span",{className:"sr-only","aria-current":"page",children:"Current page"})]})}):null}const m3=[{id:"dashboard",label:"Dashboard",icon:P4,path:"/",roles:["GM","Finance","ShiftLead"],section:"Core",testId:"nav-dashboard"},{id:"invoices",label:"Invoices",icon:Xa,path:"/invoices",roles:["GM","Finance","ShiftLead"],section:"Core",testId:"nav-invoices"},{id:"invoices-gen",label:"Invoices Gen (Test)",icon:D4,path:"/invoices-gen",roles:["GM","Finance","ShiftLead"],section:"Core",testId:"nav-invoices-gen"},{id:"delivery-notes",label:"Delivery Notes",icon:m4,path:"/delivery-notes",roles:["GM","Finance","ShiftLead"],section:"Core",badge:{testId:"badge-unmatched-dn"},testId:"nav-delivery-notes"},{id:"suppliers",label:"Suppliers",icon:zu,path:"/suppliers",roles:["GM","Finance"],section:"Core",testId:"nav-suppliers"},{id:"issues",label:"Flagged Issues",icon:tn,path:"/issues",roles:["GM","Finance","ShiftLead"],section:"Core",badge:{variant:"destructive",testId:"badge-flagged"},testId:"nav-issues"},{id:"waste",label:"Waste",icon:Zi,path:"/waste",roles:["GM","Finance","ShiftLead"],section:"Core",testId:"nav-waste"},{id:"products",label:"Products",icon:Za,path:"/products",roles:["GM","Finance"],section:"Analysis",testId:"nav-products"},{id:"reports",label:"Reports",icon:Vy,path:"/reports",roles:["GM","Finance"],section:"Analysis",testId:"nav-reports"},{id:"forecasting",label:"Forecasting",icon:Vy,path:"/forecasting",roles:["GM","Finance"],section:"Analysis",testId:"nav-forecasting"},{id:"notes",label:"Notes & Logs",icon:n3,path:"/notes",roles:["GM","Finance"],section:"Admin",testId:"nav-notes"},{id:"settings",label:"Settings",icon:GE,path:"/settings",roles:["GM","Finance"],testId:"nav-settings"}];function v3(e,t){return e.filter(n=>n.roles.includes(t))}function g3(e){const t={};return e.forEach(n=>{const r=n.section||"Other";t[r]||(t[r]=[]),t[r].push(n)}),t}function y3({currentRole:e="GM",onWidthChange:t,onToggle:n}){cs();const r=g.useRef(null),l=g.useRef(null),[o,u]=g.useState(!0),[d,h]=g.useState(!1),[p,m]=g.useState(!1),[v,x]=g.useState(!1),[j,w]=g.useState(()=>typeof window>"u"?!0:window.innerWidth>=1024);g.useEffect(()=>{const D=()=>{w(window.innerWidth>=1024)};return window.addEventListener("resize",D),D(),()=>window.removeEventListener("resize",D)},[]);const N=p?!1:d||o;g.useEffect(()=>{typeof window>"u"||(localStorage.removeItem("owlin:sidebar"),u(!0))},[]),g.useEffect(()=>{if(!j||p)return;const D=()=>{l.current&&(clearTimeout(l.current),l.current=null),h(!0),setTimeout(()=>{u(!0)},50)},A=()=>{l.current=setTimeout(()=>{h(!1),setTimeout(()=>{u(!1)},100)},200)},M=r.current;if(M)return M.addEventListener("mouseenter",D),M.addEventListener("mouseleave",A),()=>{M.removeEventListener("mouseenter",D),M.removeEventListener("mouseleave",A),l.current&&clearTimeout(l.current)}},[j,p]),g.useEffect(()=>{if(!j||p||!N)return;const D=A=>{const M=r.current;M&&!M.contains(A.target)&&(l.current&&(clearTimeout(l.current),l.current=null),h(!1),u(!1))};return document.addEventListener("mousedown",D,!0),()=>{document.removeEventListener("mousedown",D,!0)}},[j,p,N]),g.useEffect(()=>{if(typeof window>"u")return;t?.(N?280:80),n?.(N)},[N,t,n]),g.useEffect(()=>{const D=A=>{(A.metaKey||A.ctrlKey)&&A.key==="`"&&(A.preventDefault(),m(M=>!M),l.current&&clearTimeout(l.current)),A.key==="Escape"&&v&&x(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[v]);const S=v3(m3,e),C=g3(S),k=["Core","Analysis","Admin","Other"],E=D=>D.map(A=>i.jsx(h3,{to:A.path,icon:A.icon,label:A.label,badge:void 0,badgeVariant:A.badge?.variant,testId:A.testId||A.id,isCollapsed:!N,isVisible:!0},A.id)),O=j?i.jsxs("aside",{ref:r,"data-testid":"sidebar",className:"sidebar-desktop",style:{display:"flex",height:"100vh",width:N?"280px":"80px",backgroundColor:"#1a1a1a",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",borderRight:"1px solid rgba(255, 255, 255, 0.12)",boxShadow:N?"0 8px 32px rgba(0, 0, 0, 0.5), -4px 0 16px rgba(0, 0, 0, 0.3)":"0 8px 32px rgba(0, 0, 0, 0.4), -2px 0 8px rgba(0, 0, 0, 0.2)",flexDirection:"column",position:"fixed",left:0,top:0,zIndex:20,transition:"width 300ms cubic-bezier(0.4, 0, 0.2, 1), box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1)",backgroundImage:"none",overflow:"hidden"},children:[i.jsxs("div",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",padding:N?"24px 20px":"20px 12px",display:"flex",alignItems:"center",justifyContent:N?"flex-start":"center",gap:"12px",transition:"padding 300ms cubic-bezier(0.4, 0, 0.2, 1)",minHeight:"72px"},children:[i.jsx("div",{style:{width:N?"44px":"40px",height:N?"44px":"40px",borderRadius:"14px",background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:N?"20px":"18px",boxShadow:"0 4px 16px rgba(37, 99, 235, 0.35)",flexShrink:0,transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer"},onMouseEnter:D=>{D.currentTarget.style.transform="scale(1.05)",D.currentTarget.style.boxShadow="0 6px 20px rgba(37, 99, 235, 0.45)"},onMouseLeave:D=>{D.currentTarget.style.transform="scale(1)",D.currentTarget.style.boxShadow="0 4px 16px rgba(37, 99, 235, 0.35)"},children:"O"}),N&&i.jsx("span",{style:{fontSize:"22px",fontWeight:700,color:"rgba(255, 255, 255, 0.87)",letterSpacing:"-0.02em",whiteSpace:"nowrap",opacity:N?1:0,transition:"opacity 400ms cubic-bezier(0.4, 0, 0.2, 1)",animation:N?"fadeIn 400ms cubic-bezier(0.4, 0, 0.2, 1)":"none"},children:"Owlin"})]}),i.jsx("nav",{style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:N?"20px 12px":"16px 8px",display:"flex",flexDirection:"column",gap:N?"28px":"20px",transition:"padding 300ms cubic-bezier(0.4, 0, 0.2, 1)"},children:k.map(D=>{const A=C[D];return!A||A.length===0?null:i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[N&&D!=="Core"&&i.jsx("div",{style:{padding:"0 12px 6px 12px",opacity:N?1:0,transition:"opacity 400ms cubic-bezier(0.4, 0, 0.2, 1)"},children:i.jsx("span",{style:{fontSize:"11px",fontWeight:700,color:"rgba(255, 255, 255, 0.7)",textTransform:"uppercase",letterSpacing:"0.1em"},children:D})}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:E(A)})]},D)})}),N&&i.jsx("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px",opacity:N?1:0,transition:"opacity 400ms cubic-bezier(0.4, 0, 0.2, 1)"},children:i.jsxs("button",{onClick:()=>{m(!0),h(!1),l.current&&clearTimeout(l.current)},"data-testid":"sidebar-toggle",style:{width:"100%",display:"flex",alignItems:"center",gap:"12px",color:"rgba(255, 255, 255, 0.75)",padding:"10px 12px",borderRadius:"12px",fontSize:"14px",fontWeight:500,transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1)",border:"none",background:"rgba(255, 255, 255, 0.03)",cursor:"pointer",backdropFilter:"blur(10px)"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)",D.currentTarget.style.color="rgba(255, 255, 255, 1)",D.currentTarget.style.transform="translateX(-2px)"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.03)",D.currentTarget.style.color="rgba(255, 255, 255, 0.75)",D.currentTarget.style.transform="translateX(0)"},children:[i.jsx(pu,{style:{width:"18px",height:"18px",flexShrink:0}}),i.jsx("span",{children:"Collapse"})]})}),!N&&!p&&i.jsx("div",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",opacity:.6,pointerEvents:"none",transition:"opacity 300ms cubic-bezier(0.4, 0, 0.2, 1)"},children:i.jsx(Lf,{style:{width:"16px",height:"16px",color:"rgba(255, 255, 255, 0.4)"}})})]}):null;return i.jsxs(i.Fragment,{children:[p&&j&&i.jsx("div",{style:{position:"fixed",top:"20px",left:"20px",zIndex:50},children:i.jsx("button",{onClick:()=>{m(!1),u(!0)},"data-testid":"sidebar-mini",style:{width:"52px",height:"52px",padding:0,backgroundColor:"#1a1a1a",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#1f1f1f",D.currentTarget.style.transform="scale(1.08)",D.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.7)"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="#1a1a1a",D.currentTarget.style.transform="scale(1)",D.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.5)"},"aria-label":"Open sidebar",children:i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"18px",boxShadow:"0 4px 12px rgba(37, 99, 235, 0.4)"},children:"O"})})}),!j&&i.jsx("div",{style:{position:"fixed",top:"20px",left:"20px",zIndex:50},children:i.jsx("button",{onClick:()=>x(!v),"data-testid":"sidebar-open",style:{width:"52px",height:"52px",backgroundColor:"#1a1a1a",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.5)",padding:"14px",borderRadius:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 300ms cubic-bezier(0.4, 0, 0.2, 1)"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#1f1f1f",D.currentTarget.style.transform="scale(1.08)"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="#1a1a1a",D.currentTarget.style.transform="scale(1)"},children:i.jsx($4,{style:{width:"22px",height:"22px",color:"rgba(255, 255, 255, 0.87)"}})})}),v&&!j&&i.jsxs("div",{style:{position:"fixed",inset:0,zIndex:40},children:[i.jsx("div",{style:{position:"absolute",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)"},onClick:()=>x(!1)}),i.jsxs("aside",{style:{position:"absolute",left:0,top:0,height:"100%",width:"280px",backgroundColor:"#1a1a1a",backdropFilter:"blur(24px)",WebkitBackdropFilter:"blur(24px)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.7)",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",padding:"24px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"14px",background:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"20px",boxShadow:"0 4px 16px rgba(37, 99, 235, 0.35)"},children:"O"}),i.jsx("span",{style:{fontSize:"22px",fontWeight:700,color:"rgba(255, 255, 255, 0.87)"},children:"Owlin"})]}),i.jsx("button",{onClick:()=>x(!1),style:{width:"36px",height:"36px",borderRadius:"10px",border:"none",background:"rgba(255, 255, 255, 0.05)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255, 255, 255, 0.6)",transition:"all 150ms ease-out"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",D.currentTarget.style.color="rgba(255, 255, 255, 0.95)"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",D.currentTarget.style.color="rgba(255, 255, 255, 0.6)"},children:i.jsx(pu,{style:{width:"20px",height:"20px"}})})]}),i.jsx("nav",{style:{flex:1,overflowY:"auto",padding:"20px 12px"},children:i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"28px"},children:k.map(D=>{const A=C[D];return!A||A.length===0?null:i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[D!=="Core"&&i.jsx("div",{style:{padding:"0 12px 6px 12px"},children:i.jsx("span",{style:{fontSize:"11px",fontWeight:700,color:"rgba(255, 255, 255, 0.7)",textTransform:"uppercase",letterSpacing:"0.1em"},children:D})}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:E(A)})]},D)})})})]})]}),O]})}function TS({file:e,snippet:t,language:n="text"}){const[r,l]=g.useState(!1),o=()=>{navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3)};return i.jsxs("div",{style:{margin:"16px 0",borderRadius:"12px",overflow:"hidden",border:"1px solid rgba(255, 255, 255, 0.1)",background:"linear-gradient(135deg, #1e1e1e, #2a2a2a)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05)"},children:[e&&i.jsxs("div",{style:{padding:"10px 14px",background:"linear-gradient(135deg, #2d2d2d, #252525)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"12px",color:"rgba(255, 255, 255, 0.6)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("span",{style:{fontFamily:"monospace",fontWeight:500,display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("span",{style:{fontSize:"14px"},children:""}),e]}),i.jsx("button",{onClick:o,style:{padding:"6px 12px",background:r?"rgba(20, 184, 166, 0.2)":"rgba(61, 61, 61, 0.8)",backdropFilter:"blur(10px)",color:r?"#14b8a6":"rgba(255, 255, 255, 0.87)",border:r?"1px solid rgba(20, 184, 166, 0.4)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:500,transition:"all 0.2s",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:u=>{r||(u.currentTarget.style.background="rgba(61, 61, 61, 1)",u.currentTarget.style.transform="scale(1.05)")},onMouseLeave:u=>{r||(u.currentTarget.style.background="rgba(61, 61, 61, 0.8)",u.currentTarget.style.transform="scale(1)")},children:r?" Copied":" Copy"})]}),i.jsx("pre",{style:{margin:0,padding:"18px",overflow:"auto",fontSize:"13px",lineHeight:"1.6",color:"#e5e5e5",fontFamily:'"SF Mono", "Monaco", "Consolas", "Courier New", monospace',background:"#1e1e1e"},children:i.jsx("code",{style:{color:"#e5e5e5"},children:t})}),!e&&i.jsx("div",{style:{padding:"8px 14px",background:"linear-gradient(135deg, #2d2d2d, #252525)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"flex-end"},children:i.jsx("button",{onClick:o,style:{padding:"6px 12px",background:r?"rgba(20, 184, 166, 0.2)":"rgba(61, 61, 61, 0.8)",backdropFilter:"blur(10px)",color:r?"#14b8a6":"rgba(255, 255, 255, 0.87)",border:r?"1px solid rgba(20, 184, 166, 0.4)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:500,transition:"all 0.2s",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:u=>{r||(u.currentTarget.style.background="rgba(61, 61, 61, 1)",u.currentTarget.style.transform="scale(1.05)")},onMouseLeave:u=>{r||(u.currentTarget.style.background="rgba(61, 61, 61, 0.8)",u.currentTarget.style.transform="scale(1)")},children:r?" Copied":" Copy"})})]})}const lt={backgroundLevel2:"#16191F",primary:"#4CA3FF",border:"rgba(255, 255, 255, 0.05)",borderSoft:"rgba(255, 255, 255, 0.08)",textPrimary:"rgba(255, 255, 255, 0.87)",textSecondary:"rgba(255, 255, 255, 0.6)",textSlate:"#cbd5e1",hover:"rgba(255, 255, 255, 0.03)",navy:"#2B3A55",sageGreenLight:"rgba(123, 158, 135, 0.15)",sageGreenBorder:"rgba(123, 158, 135, 0.2)",backgroundCard:"#16191F"},ir={fontFamily:'Inter, "Work Sans", -apple-system, BlinkMacSystemFont, sans-serif',weights:{label:500,title:600}},Iv={default:"all 200ms ease-out"};function x3({role:e,content:t,codeReferences:n,error:r,retryable:l,requiresOllama:o,explorationMode:u,explorationMetadata:d,onRetry:h}){const p=e==="user",[m,v]=g.useState(!1),[x,j]=g.useState(!1),w=async()=>{try{await navigator.clipboard.writeText(t),v(!0),setTimeout(()=>v(!1),2e3)}catch(S){console.error("Failed to copy:",S)}},N=S=>S.split("```").map((k,E)=>{if(E%2===0){let O=k;return O=O.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),O=O.replace(/\*(.+?)\*/g,"<em>$1</em>"),O=O.replace(/`(.+?)`/g,`<code style="background: ${lt.backgroundCard}; padding: 2px 6px; border-radius: 4px; font-family: monospace; font-size: 0.9em; color: ${lt.textPrimary}; border: 1px solid ${lt.border};">$1</code>`),O=O.replace(/^### (.+)$/gm,`<h3 style="font-size: 1.1em; font-weight: ${ir.weights.title}; margin: 12px 0 8px 0; color: ${lt.textPrimary}; font-family: ${ir.fontFamily};">$1</h3>`),O=O.replace(/^## (.+)$/gm,`<h2 style="font-size: 1.2em; font-weight: ${ir.weights.title}; margin: 16px 0 10px 0; color: ${lt.textPrimary}; font-family: ${ir.fontFamily};">$1</h2>`),O=O.replace(/^# (.+)$/gm,`<h1 style="font-size: 1.3em; font-weight: ${ir.weights.title}; margin: 20px 0 12px 0; color: ${lt.textPrimary}; font-family: ${ir.fontFamily};">$1</h1>`),O=O.replace(/^[-*] (.+)$/gm,'<li style="margin: 4px 0; padding-left: 8px;">$1</li>'),O=O.replace(/(<li.*<\/li>)/s,'<ul style="margin: 8px 0; padding-left: 20px;">$1</ul>'),O=O.replace(/^\d+\. (.+)$/gm,'<li style="margin: 4px 0; padding-left: 8px;">$1</li>'),O=O.replace(/\n/g,"<br />"),i.jsx("div",{dangerouslySetInnerHTML:{__html:O},style:{whiteSpace:"pre-wrap"}},E)}else{const O=k.split(`
`),D=O[0]?.trim()||"text",A=O.slice(1).join(`
`);return i.jsx(TS,{snippet:A,language:D},E)}});return i.jsxs("div",{style:{display:"flex",flexDirection:"row",marginBottom:"12px",alignItems:"flex-end",gap:"8px",position:"relative",justifyContent:p?"flex-end":"flex-start"},onMouseEnter:()=>!p&&j(!0),onMouseLeave:()=>!p&&j(!1),children:[!p&&i.jsx("div",{style:{width:"32px",height:"32px",minWidth:"32px",borderRadius:"50%",background:lt.backgroundLevel2,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${lt.border}`,flexShrink:0},children:i.jsx(WE,{size:18,strokeWidth:1.5,color:lt.textSlate})}),i.jsxs("div",{style:{maxWidth:"75%",padding:"12px 16px",borderRadius:p?"18px 18px 4px 18px":"18px 18px 18px 4px",background:r?"rgba(239, 68, 68, 0.15)":lt.backgroundLevel2,color:r?"rgba(239, 68, 68, 1)":lt.textPrimary,fontSize:"14px",lineHeight:"1.6",wordWrap:"break-word",border:r?"1px solid rgba(239, 68, 68, 0.3)":`1px solid ${lt.border}`,boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",transition:Iv.default,position:"relative",fontFamily:ir.fontFamily},children:[!p&&(x||m)&&i.jsx("button",{onClick:w,style:{position:"absolute",top:"8px",right:"8px",padding:"6px 10px",background:m?lt.hover:lt.backgroundLevel2,border:m?`1px solid ${lt.borderSoft}`:`1px solid ${lt.border}`,borderRadius:"6px",cursor:"pointer",fontSize:"12px",color:m?lt.primary:lt.textSecondary,fontWeight:ir.weights.label,transition:Iv.default,display:"flex",alignItems:"center",gap:"6px",opacity:x||m?1:0,transform:x||m?"scale(1)":"scale(0.9)",zIndex:10,boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",fontFamily:ir.fontFamily},onMouseEnter:S=>{m||(S.currentTarget.style.background=lt.hover,S.currentTarget.style.borderColor=lt.borderSoft,S.currentTarget.style.color=lt.textPrimary,S.currentTarget.style.transform="scale(1.05)")},onMouseLeave:S=>{m||(S.currentTarget.style.background=lt.backgroundLevel2,S.currentTarget.style.borderColor=lt.border,S.currentTarget.style.color=lt.textSecondary,S.currentTarget.style.transform="scale(1)")},children:m?i.jsxs(i.Fragment,{children:[i.jsx(Yi,{size:14,strokeWidth:1.5}),i.jsx("span",{children:"Copied"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Tf,{size:14,strokeWidth:1.5}),i.jsx("span",{children:"Copy"})]})}),i.jsx("div",{style:{whiteSpace:"pre-wrap"},children:N(t)})]}),u&&d&&i.jsxs("div",{style:{marginTop:"10px",padding:"12px 16px",background:lt.sageGreenLight,backdropFilter:"blur(20px)",borderRadius:"6px",fontSize:"12px",color:lt.textPrimary,border:`1px solid ${lt.sageGreenBorder}`,boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",maxWidth:"85%",fontFamily:ir.fontFamily},children:[i.jsxs("div",{style:{fontWeight:ir.weights.title,marginBottom:"8px",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px",color:lt.textPrimary,fontFamily:ir.fontFamily},children:[i.jsx("span",{style:{width:"20px",height:"20px",borderRadius:"50%",background:lt.sageGreenLight,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",border:`1px solid ${lt.sageGreenBorder}`},children:""}),"Exploration Mode ",d.mode==="multi_turn"?"(Multi-turn)":""]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px",marginBottom:"8px"},children:[d.searches_executed!==void 0&&i.jsxs("div",{style:{padding:"6px 10px",background:lt.backgroundCard,borderRadius:"6px",fontSize:"11px",display:"flex",alignItems:"center",gap:"6px",color:lt.textPrimary,border:`1px solid ${lt.border}`,fontFamily:ir.fontFamily},children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[i.jsx("strong",{children:d.searches_executed})," searches"]})]}),d.files_searched!==void 0&&i.jsxs("div",{style:{padding:"6px 10px",background:lt.backgroundCard,borderRadius:"6px",fontSize:"11px",display:"flex",alignItems:"center",gap:"6px",color:lt.textPrimary,border:`1px solid ${lt.border}`,fontFamily:ir.fontFamily},children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[i.jsx("strong",{children:d.files_searched})," files"]})]}),d.findings_count!==void 0&&i.jsxs("div",{style:{padding:"6px 10px",background:lt.backgroundCard,borderRadius:"6px",fontSize:"11px",display:"flex",alignItems:"center",gap:"6px",color:lt.textPrimary,border:`1px solid ${lt.border}`,fontFamily:ir.fontFamily},children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[i.jsx("strong",{children:d.findings_count})," findings"]})]}),d.exploration_time!==void 0&&i.jsxs("div",{style:{padding:"6px 10px",background:lt.backgroundCard,borderRadius:"6px",fontSize:"11px",display:"flex",alignItems:"center",gap:"6px",color:lt.textPrimary,border:`1px solid ${lt.border}`,fontFamily:ir.fontFamily},children:[i.jsx("span",{children:""}),i.jsx("span",{children:i.jsxs("strong",{children:[d.exploration_time,"s"]})})]})]}),d.files_read&&d.files_read.length>0&&i.jsxs("div",{style:{marginTop:"8px",padding:"8px 12px",background:lt.backgroundCard,borderRadius:"6px",fontSize:"11px",color:lt.navy,border:`1px solid ${lt.border}`,fontFamily:ir.fontFamily},children:[i.jsx("strong",{style:{display:"block",marginBottom:"4px"},children:"Files explored:"}),i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",fontFamily:"monospace",fontSize:"10px"},children:[d.files_read.slice(0,5).map((S,C)=>i.jsx("span",{style:{padding:"2px 6px",background:lt.sageGreenLight,borderRadius:"4px",border:`1px solid ${lt.sageGreenBorder}`},children:S},C)),d.files_read.length>5&&i.jsxs("span",{style:{padding:"2px 6px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:["+",d.files_read.length-5," more"]})]})]})]}),n&&n.length>0&&i.jsx("div",{style:{marginTop:"8px",width:"85%"},children:n.map((S,C)=>i.jsx(TS,{file:S.file,snippet:S.snippet},C))}),r&&l&&h&&i.jsxs("div",{style:{marginTop:"12px",display:"flex",alignItems:"center",gap:"10px",maxWidth:"85%"},children:[i.jsxs("button",{onClick:h,style:{padding:"8px 16px",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)",background:"rgba(239, 68, 68, 0.1)",backdropFilter:"blur(10px)",color:"rgba(239, 68, 68, 1)",fontSize:"13px",fontWeight:ir.weights.title,cursor:"pointer",transition:Iv.default,boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",display:"flex",alignItems:"center",gap:"6px",fontFamily:ir.fontFamily},onMouseEnter:S=>{S.currentTarget.style.background="rgba(239, 68, 68, 0.15)",S.currentTarget.style.borderColor="rgba(239, 68, 68, 0.4)",S.currentTarget.style.transform="scale(1.02)",S.currentTarget.style.boxShadow="0 2px 4px rgba(239, 68, 68, 0.2)"},onMouseLeave:S=>{S.currentTarget.style.background="rgba(239, 68, 68, 0.1)",S.currentTarget.style.borderColor="rgba(239, 68, 68, 0.3)",S.currentTarget.style.transform="scale(1)",S.currentTarget.style.boxShadow="0 1px 2px rgba(0, 0, 0, 0.04)"},children:[i.jsx("span",{children:""}),"Retry"]}),o&&i.jsxs("div",{style:{padding:"6px 12px",background:lt.backgroundCard,backdropFilter:"blur(10px)",borderRadius:"6px",fontSize:"12px",color:lt.textSecondary,border:`1px solid ${lt.border}`,display:"flex",alignItems:"center",gap:"6px",fontFamily:ir.fontFamily},children:[i.jsx("span",{children:""}),"Make sure Ollama is running"]})]})]})}function b3({tasks:e,phaseProgress:t,aliveTs:n,lastActivityTs:r,taskSummary:l,isCollapsed:o=!1}){const[u,d]=g.useState(o),[h,p]=g.useState(!1);g.useEffect(()=>{if(n){p(!0);const w=setTimeout(()=>p(!1),300);return()=>clearTimeout(w)}},[n]);const m=w=>{switch(w.status){case"pending":return i.jsx("span",{className:"task-icon-pending",children:""});case"running":return i.jsxs("span",{className:"task-icon-running",children:[i.jsx("span",{className:"spinner",children:""}),w.progress!==void 0&&w.progress>0&&i.jsxs("span",{className:"progress-text",children:[w.progress,"%"]})]});case"done":return i.jsx("span",{className:"task-icon-done",children:""});case"failed":return i.jsx("span",{className:"task-icon-failed",title:w.note||"Failed",children:""});default:return i.jsx("span",{children:""})}},v=w=>w?w<1e3?`${w}ms`:`${(w/1e3).toFixed(1)}s`:"",x=w=>{if(w<1e3)return`${w}ms`;const N=w/1e3;return N<60?`${N.toFixed(1)}s`:`${(N/60).toFixed(1)}m`};e.some(w=>w.status==="running"||w.status==="pending");const j=l!==null;return i.jsxs("div",{className:"task-list-container",children:[i.jsxs("div",{className:"task-list-header",onClick:()=>d(!u),style:{cursor:"pointer",userSelect:"none"},children:[i.jsxs("span",{className:"task-list-title",children:["Agent Tasks ",j&&`(${l.completed}/${l.tasks_total})`]}),i.jsx("span",{className:"task-list-toggle",children:u?"":""})]}),!u&&i.jsxs("div",{className:"task-list-content",children:[n&&i.jsxs("div",{className:"heartbeat-indicator",children:[i.jsx("span",{className:`heartbeat-dot ${h?"pulsing":""}`}),i.jsx("span",{className:"heartbeat-text",children:"Agent alive"})]}),(t.reads.total>0||t.greps.total>0||t.searches.total>0||t.traces.total>0)&&i.jsxs("div",{className:"phase-progress",children:[t.reads.total>0&&i.jsxs("div",{className:"phase-meter",children:["reads ",t.reads.current,"/",t.reads.total]}),t.greps.total>0&&i.jsxs("div",{className:"phase-meter",children:["greps ",t.greps.current,"/",t.greps.total]}),t.searches.total>0&&i.jsxs("div",{className:"phase-meter",children:["searches ",t.searches.current,"/",t.searches.total]}),t.traces.total>0&&i.jsxs("div",{className:"phase-meter",children:["traces ",t.traces.current,"/",t.traces.total]})]}),i.jsx("div",{className:"task-items",children:e.map(w=>i.jsxs("div",{className:`task-item task-${w.status}`,children:[i.jsx("div",{className:"task-status-icon",children:m(w)}),i.jsxs("div",{className:"task-details",children:[i.jsx("div",{className:"task-title",children:w.title}),w.durationMs&&w.status!=="running"&&i.jsx("div",{className:"task-duration",children:v(w.durationMs)})]})]},w.id))}),j&&l&&i.jsxs("div",{className:"task-summary",children:[l.completed,"/",l.tasks_total," completed",l.failed>0&&`  ${l.failed} failed`," "," ",x(l.duration_ms)]})]}),i.jsx("style",{jsx:!0,children:`
        .task-list-container {
          border: 1px solid #e0e0e0;
          border-radius: 4px;
          margin: 8px 0;
          background: #f9f9f9;
        }

        .task-list-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 8px 12px;
          background: #f0f0f0;
          border-bottom: 1px solid #e0e0e0;
          font-weight: 500;
          font-size: 13px;
        }

        .task-list-title {
          flex: 1;
        }

        .task-list-toggle {
          font-size: 10px;
          color: #666;
        }

        .task-list-content {
          padding: 8px 12px;
        }

        .heartbeat-indicator {
          display: flex;
          align-items: center;
          gap: 6px;
          margin-bottom: 8px;
          font-size: 12px;
          color: #666;
        }

        .heartbeat-dot {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background: #4caf50;
          display: inline-block;
        }

        .heartbeat-dot.pulsing {
          animation: pulse 1s ease-in-out;
        }

        @keyframes pulse {
          0%,
          100% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(1.2);
          }
        }

        .heartbeat-text {
          font-size: 11px;
        }

        .phase-progress {
          display: flex;
          gap: 12px;
          margin-bottom: 8px;
          font-size: 11px;
          color: #666;
          flex-wrap: wrap;
        }

        .phase-meter {
          padding: 2px 6px;
          background: #e8e8e8;
          border-radius: 3px;
        }

        .task-items {
          display: flex;
          flex-direction: column;
          gap: 4px;
        }

        .task-item {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 4px 0;
          font-size: 12px;
        }

        .task-status-icon {
          width: 20px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .task-icon-pending {
          color: #999;
          font-size: 14px;
        }

        .task-icon-running {
          display: flex;
          align-items: center;
          gap: 4px;
          color: #2196f3;
        }

        .spinner {
          animation: spin 1s linear infinite;
          font-size: 14px;
        }

        @keyframes spin {
          from {
            transform: rotate(0deg);
          }
          to {
            transform: rotate(360deg);
          }
        }

        .progress-text {
          font-size: 10px;
        }

        .task-icon-done {
          color: #4caf50;
          font-size: 16px;
          font-weight: bold;
        }

        .task-icon-failed {
          color: #f44336;
          font-size: 16px;
          font-weight: bold;
          cursor: help;
        }

        .task-details {
          flex: 1;
        }

        .task-title {
          font-size: 12px;
          color: #333;
        }

        .task-duration {
          font-size: 10px;
          color: #666;
          margin-top: 2px;
        }

        .task-summary {
          margin-top: 8px;
          padding-top: 8px;
          border-top: 1px solid #e0e0e0;
          font-size: 11px;
          color: #666;
          text-align: center;
        }
      `})]})}function j3(){return"http://127.0.0.1:8000"}const Be=j3(),KE=g.createContext(void 0);function w3({children:e}){const[t,n]=g.useState(!1);return i.jsx(KE.Provider,{value:{isExpanded:t,setIsExpanded:n},children:e})}function S3(){const e=g.useContext(KE);return e===void 0?{isExpanded:!1,setIsExpanded:()=>{}}:e}const ye={backgroundLevel1:"#101214",backgroundLevel2:"#16191F",backgroundMenu:"rgba(20, 23, 28, 0.96)",primary:"#4CA3FF",primaryHover:"#5DB0FF",border:"rgba(255, 255, 255, 0.05)",borderSoft:"rgba(255, 255, 255, 0.08)",textPrimary:"rgba(255, 255, 255, 0.87)",textSecondary:"rgba(255, 255, 255, 0.6)",textMuted:"rgba(255, 255, 255, 0.4)",textSlate:"#cbd5e1",hover:"rgba(255, 255, 255, 0.03)",navy:"#2B3A55",sageGreen:"#7B9E87",sageGreenLight:"rgba(123, 158, 135, 0.15)",sageGreenBorder:"rgba(123, 158, 135, 0.2)",backgroundSoft:"rgba(255, 255, 255, 0.03)",backgroundCard:"#16191F"},Wt={fontFamily:'Inter, "Work Sans", -apple-system, BlinkMacSystemFont, sans-serif',weights:{body:400,label:500,title:600}},Kn={micro:"8px",element:"16px",section:"24px"},aa={default:"all 200ms ease-out"};function QE({compactInputExternal:e=!1,renderAsWidget:t=!1,useSharedState:n=!1}){const[r,l]=g.useState(!1),o=S3(),u=n?o.isExpanded:r,d=n?o.setIsExpanded:l,[h,p]=g.useState(!0),[m,v]=g.useState({x:0,y:0}),[x,j]=g.useState({width:400,height:600}),[w,N]=g.useState(!1),[S,C]=g.useState(!1),[k,E]=g.useState({x:0,y:0}),[O,D]=g.useState({x:0,y:0,width:0,height:0}),[A,M]=g.useState([]),[q,te]=g.useState(""),[ce,G]=g.useState(!1),[R,F]=g.useState(!1),[he,ee]=g.useState("Unknown"),[U,ne]=g.useState(""),[J,xe]=g.useState(!1),[Ce,$]=g.useState(!1),[ie,we]=g.useState(null),[Z,K]=g.useState([]),[Ee,de]=g.useState(!1),[Se,W]=g.useState(null),[me,Me]=g.useState({reads:{current:0,total:0},greps:{current:0,total:0},searches:{current:0,total:0},traces:{current:0,total:0}}),[Q,$e]=g.useState(null),[Ae,vt]=g.useState(null),[jt,gt]=g.useState(null),[Xn,pn]=g.useState(null),[Wn,ca]=g.useState(()=>{const H=localStorage.getItem("chat_context_size");return H?parseInt(H,10):32e3}),[Mn,yt]=g.useState(!1),Tt=g.useRef(null),Ur=g.useRef(null),Pn=g.useRef(null),Ln=g.useRef(null),ln=g.useRef(null);g.useEffect(()=>{Zr()},[]),g.useEffect(()=>{u&&Tt.current&&Tt.current.scrollIntoView({behavior:"smooth"})},[A,u]),g.useEffect(()=>{u&&Ur.current&&Ur.current.focus()},[u]);const Ca=g.useRef(null);g.useEffect(()=>{const H=Ve=>{const Gt=Ve.target;Mn&&Ca.current&&!Ca.current.contains(Gt)&&Pn.current&&!Pn.current.contains(Gt)&&yt(!1)};if(Mn){const Ve=setTimeout(()=>{document.addEventListener("mousedown",H)},0);return()=>{clearTimeout(Ve),document.removeEventListener("mousedown",H)}}},[Mn]),g.useEffect(()=>{e&&u&&(p(!0),v({x:0,y:0}))},[e,u]);const Fr=()=>{h?p(!1):(p(!0),v({x:0,y:0}))},oi=H=>{if(e||!u||h||H.target.closest("button, input, select, textarea"))return;N(!0);const Ve=Pn.current?.getBoundingClientRect();Ve&&E({x:H.clientX-Ve.left,y:H.clientY-Ve.top}),H.preventDefault()},qr=H=>{H.stopPropagation(),C(!0),D({x:H.clientX,y:H.clientY,width:x.width,height:x.height})};g.useEffect(()=>{const H=Gt=>{if(w&&!h&&Pn.current){const Dt=Gt.clientX-k.x,ut=Gt.clientY-k.y,wt=window.innerWidth-x.width,Yt=window.innerHeight-x.height;v({x:Math.max(0,Math.min(Dt,wt)),y:Math.max(0,Math.min(ut,Yt))})}if(S&&Pn.current){if(e)return;const Dt=Gt.clientX-O.x,ut=Gt.clientY-O.y,wt=Math.max(300,Math.min(800,O.width+Dt)),Yt=Math.max(400,Math.min(window.innerHeight-100,O.height+ut));if(j({width:wt,height:Yt}),!h){const _t=window.innerWidth-wt,Ge=window.innerHeight-Yt;v(kt=>({x:Math.min(kt.x,_t),y:Math.min(kt.y,Ge)}))}}},Ve=()=>{N(!1),C(!1)};if(w||S)return document.addEventListener("mousemove",H),document.addEventListener("mouseup",Ve),()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",Ve)}},[w,S,h,k,O,x,e]);const Zr=async()=>{try{const H=await fetch(`${Be}/api/chat/status`);if(H.ok){const Ve=await H.json();F(Ve.ollama_available||!1),ee(Ve.primary_model||"Unknown")}}catch(H){console.error("Failed to check chat status:",H)}},Ut=()=>{u||(e&&(p(!0),v({x:0,y:0})),d(!0))},Zn=H=>{te(H.target.value)},At=()=>{ln.current&&(ln.current.abort(),ln.current=null),G(!1),we(null);const H={role:"assistant",content:"Operation cancelled by user.",error:!1};M(Ve=>[...Ve,H])},Lt=async H=>{if(H.preventDefault(),!q.trim()||ce)return;const Ve=q.trim();te(""),e&&(p(!0),v({x:0,y:0})),d(!0),ne(Ve);const Gt={role:"user",content:Ve};M(ut=>[...ut,Gt]),G(!0);const Dt=new AbortController;ln.current=Dt;try{const ut=A.map(Yt=>({role:Yt.role,content:Yt.content})),wt={current_page:window.location.pathname,error_logs:!0};if(J||Ce){Ce?(we(null),pn("Analyzing your question and planning tasks...")):we({message:"Starting exploration...",current:0,total:4,percentage:0});const Yt=await fetch(`${Be}/api/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify({message:Ve,conversation_history:ut,context:wt,context_size:Wn,use_search_mode:J,use_agent_mode:Ce}),signal:Dt.signal});if(!Yt.ok)throw new Error(`Chat API error: ${Yt.statusText}`);const _t=Yt.body?.getReader(),Ge=new TextDecoder;let kt="";if(_t)for(;;){if(Dt.signal.aborted){_t.cancel();break}const{done:et,value:Hr}=await _t.read();if(et)break;kt+=Ge.decode(Hr,{stream:!0});const Dn=kt.split(`
`);kt=Dn.pop()||"";for(const Ot of Dn)if(Ot.startsWith("data: "))try{const Le=JSON.parse(Ot.slice(6));if(Le.type==="plan"){const ht=(Le.tasks||[]).map(Ye=>({id:Ye.id,title:Ye.title,type:Ye.type,status:Ye.status||"pending",progress:0}));K(ht),de(!0);const it=ht.find(Ye=>Ye.status==="running");if(it){let Ye="";const ze=it.title;if(it.type==="READ"){const ft=ze.match(/Reading\s+(.+)/i);Ye=`Reading file: ${ft?ft[1]:ze.replace(/^[]\s*/,"")}`}else if(it.type==="GREP"){const ft=ze.match(/Searching for ['"](.+?)['"]/i);Ye=`Searching codebase for: ${ft?ft[1]:ze.replace(/^[]\s*Searching for\s*/i,"")}`}else if(it.type==="SEARCH"){const ft=ze.match(/Exploring ['"](.+?)['"]/i);Ye=`Exploring codebase: ${ft?ft[1]:ze.replace(/^[]\s*Exploring\s*/i,"")}`}else it.type==="TRACE"?Ye=`Tracing data flow: ${ze.replace(/^[]\s*Tracing\s*/i,"")}`:it.type==="ANALYZE"?Ye="Analyzing findings and preparing response...":Ye=ze.replace(/^[]\s*/,"");pn(Ye)}else ht.length>0&&pn(`Planning complete. Starting ${ht.length} task${ht.length>1?"s":""}...`)}else if(Le.type==="task_update")Le.task&&(K(ht=>{const it=ht.map(ze=>ze.id===Le.task.id?{...ze,status:Le.task.status,progress:Le.task.progress??ze.progress,startedAt:Le.task.started_at??ze.startedAt,endedAt:Le.task.ended_at??ze.endedAt,durationMs:Le.task.duration_ms??ze.durationMs,note:Le.task.note??ze.note}:ze),Ye=it.find(ze=>ze.status==="running");if(Ye){let ze="";const ft=Ye.title,rn=Ye.type;if(rn==="READ"){const dt=ft.match(/Reading\s+(.+)/i),bt=dt?dt[1]:ft.replace(/^[]\s*/,""),at=me.reads.total>0?` (${me.reads.current+1}/${me.reads.total})`:"";ze=`Reading file: ${bt}${at}`,Ye.progress&&Ye.progress>0&&(ze+=`  ${Ye.progress}%`)}else if(rn==="GREP"){const dt=ft.match(/Searching for ['"](.+?)['"]/i)||ft.match(/Searching for (.+)/i),bt=dt?dt[1]:ft.replace(/^[]\s*Searching for\s*/i,""),at=me.greps.total>0?` (${me.greps.current+1}/${me.greps.total})`:"";ze=`Searching codebase for: ${bt}${at}`,Ye.progress&&Ye.progress>0&&(ze+=`  ${Ye.progress}%`)}else if(rn==="SEARCH"){const dt=ft.match(/Exploring ['"](.+?)['"]/i)||ft.match(/Exploring (.+)/i),bt=dt?dt[1]:ft.replace(/^[]\s*Exploring\s*/i,""),at=me.searches.total>0?` (${me.searches.current+1}/${me.searches.total})`:"";ze=`Exploring codebase: ${bt}${at}`,Ye.progress&&Ye.progress>0&&(ze+=`  ${Ye.progress}%`)}else if(rn==="TRACE"){const dt=ft.replace(/^[]\s*Tracing\s*/i,""),bt=me.traces.total>0?` (${me.traces.current+1}/${me.traces.total})`:"";ze=`Tracing data flow: ${dt}${bt}`,Ye.progress&&Ye.progress>0&&(ze+=`  ${Ye.progress}%`)}else if(rn==="ANALYZE"){ze="Analyzing findings and preparing response...";const dt=it.filter(at=>at.status==="done"||at.status==="completed").length,bt=it.length;bt>0&&(ze+=` (${dt}/${bt} tasks completed)`)}else ze=ft.replace(/^[]\s*/,"");Ye.note&&(ze+=`  ${Ye.note}`),pn(ze)}else{const ze=it.filter(dt=>dt.status==="pending"),ft=it.filter(dt=>dt.status==="done"||dt.status==="completed").length,rn=it.length;if(ze.length>0){const dt=ze[0];let bt="";if(dt.type==="READ"){const at=dt.title.match(/Reading\s+(.+)/i);bt=`Next: Reading ${at?at[1]:dt.title.replace(/^[]\s*/,"")}`}else if(dt.type==="GREP"){const at=dt.title.match(/Searching for ['"](.+?)['"]/i);bt=`Next: Searching for ${at?at[1]:dt.title.replace(/^[]\s*Searching for\s*/i,"")}`}else if(dt.type==="SEARCH"){const at=dt.title.match(/Exploring ['"](.+?)['"]/i);bt=`Next: Exploring ${at?at[1]:dt.title.replace(/^[]\s*Exploring\s*/i,"")}`}else dt.type==="TRACE"?bt=`Next: Tracing ${dt.title.replace(/^[]\s*Tracing\s*/i,"")}`:bt="Preparing next task...";pn(`${bt} (${ft}/${rn} completed)`)}else rn>0&&ft===rn?pn("Finalizing response..."):pn(null)}return it}),vt(Date.now()));else if(Le.type==="progress")Le.phase&&Le.current!==void 0&&Le.total!==void 0?Me(ht=>{const it={...ht,[Le.phase]:{current:Le.current,total:Le.total}};return K(Ye=>{const ze=Ye.find(ft=>ft.status==="running");if(ze){const ft=Le.phase,rn=it[ft].current,dt=it[ft].total;let bt="";const at=ze.title;if(ze.type==="READ"){const Ht=at.match(/Reading\s+(.+)/i);bt=`Reading file: ${Ht?Ht[1]:at.replace(/^[]\s*/,"")} (${rn+1}/${dt})`}else if(ze.type==="GREP"){const Ht=at.match(/Searching for ['"](.+?)['"]/i);bt=`Searching codebase for: ${Ht?Ht[1]:at.replace(/^[]\s*Searching for\s*/i,"")} (${rn+1}/${dt})`}else if(ze.type==="SEARCH"){const Ht=at.match(/Exploring ['"](.+?)['"]/i);bt=`Exploring codebase: ${Ht?Ht[1]:at.replace(/^[]\s*Exploring\s*/i,"")} (${rn+1}/${dt})`}else ze.type==="TRACE"&&(bt=`Tracing data flow: ${at.replace(/^[]\s*Tracing\s*/i,"")} (${rn+1}/${dt})`);bt&&ze.progress&&ze.progress>0&&(bt+=`  ${ze.progress}%`),ze.note&&(bt+=`  ${ze.note}`),bt&&pn(bt)}return Ye}),it}):we({message:Le.message||"Processing...",current:Le.current||0,total:Le.total||0,percentage:Le.percentage||0});else if(Le.type==="agent_started")de(!0),Z.length===0&&(K([{id:"planning",title:"Planning tasks...",type:"ANALYZE",status:"running",progress:0}]),pn("Analyzing your question and planning tasks..."));else if(Le.type==="heartbeat")$e(Le.ts||Date.now());else if(Le.type==="done")gt(Le.summary||null),de(!0),pn("Finalizing response...");else if(Le.type==="tasks")K(Le.tasks||[]),de(!0);else if(Le.type==="time_remaining")W(Le.seconds||null);else if(Le.type==="response"){we(null),pn(null);const ht={role:"assistant",content:Le.response,codeReferences:Le.code_references||[],explorationMode:Le.exploration_mode||!1,explorationMetadata:Le.exploration_metadata||void 0};M(it=>[...it,ht]),Le.ollama_available!==void 0&&F(Le.ollama_available)}else if(Le.type==="error"){we(null),$e(null);const ht={role:"assistant",content:Le.message||"An error occurred during exploration.",error:!0,retryable:!0};M(it=>[...it,ht])}}catch(Le){console.error("Error parsing SSE data:",Le)}}}else{const Yt=await fetch(`${Be}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:Ve,conversation_history:ut,context:wt,context_size:Wn,use_search_mode:J,use_agent_mode:Ce}),signal:Dt.signal});if(!Yt.ok)throw new Error(`Chat API error: ${Yt.statusText}`);const _t=await Yt.json();if(_t.error||_t.requires_ollama){const Ge={role:"assistant",content:_t.response||"Ollama is not available. Please start Ollama and try again.",error:!0,retryable:_t.retryable||!1,requiresOllama:_t.requires_ollama||!1};M(kt=>[...kt,Ge]),console.log("Ollama connection failed. Check diagnostics at:",`${Be}/api/chat/diagnose`)}else{const Ge={role:"assistant",content:_t.response,codeReferences:_t.code_references||[],explorationMode:_t.exploration_mode||!1,explorationMetadata:_t.exploration_metadata||void 0};M(kt=>[...kt,Ge]),_t.ollama_available!==void 0&&F(_t.ollama_available)}}}catch(ut){if(ut instanceof Error&&ut.name==="AbortError")return;console.error("Chat error:",ut),we(null);const wt={role:"assistant",content:`Sorry, I encountered an error: ${ut instanceof Error?ut.message:"Unknown error"}. Please try again.`,error:!0,retryable:!0};M(Yt=>[...Yt,wt])}finally{G(!1),we(null),ln.current=null}},Ft=async()=>{if(!(!U.trim()||ce)){G(!0);try{let H=[];M(ut=>{H=ut.filter(Yt=>!Yt.error).map(Yt=>({role:Yt.role,content:Yt.content}));const wt=[...ut];return wt.length>0&&wt[wt.length-1].error?(wt.pop(),wt):ut});const Ve={current_page:window.location.pathname,error_logs:!0},Gt=await fetch(`${Be}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:U,conversation_history:H,context:Ve,context_size:Wn})});if(!Gt.ok)throw new Error(`Chat API error: ${Gt.statusText}`);const Dt=await Gt.json();if(Dt.error||Dt.requires_ollama){const ut={role:"assistant",content:Dt.response||"Ollama is not available. Please start Ollama and try again.",error:!0,retryable:Dt.retryable||!1,requiresOllama:Dt.requires_ollama||!1};M(wt=>[...wt,ut])}else{const ut={role:"assistant",content:Dt.response,codeReferences:Dt.code_references||[]};M(wt=>[...wt,ut])}Dt.ollama_available!==void 0&&F(Dt.ollama_available)}catch(H){console.error("Chat retry error:",H);const Ve={role:"assistant",content:`Sorry, I encountered an error: ${H instanceof Error?H.message:"Unknown error"}. Please try again.`,error:!0,retryable:!0};M(Gt=>[...Gt,Ve])}finally{G(!1)}}},Vt=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),Lt(H))},qt=()=>{d(!1)},nn=()=>i.jsxs("form",{onSubmit:Lt,className:"assistant-input-form",style:{display:"flex",alignItems:"center",gap:Kn.micro,width:e?"100%":"280px",maxWidth:e?"320px":"280px",minWidth:e?"240px":"280px",height:"44px",position:e?"relative":"fixed",top:e?"auto":Kn.section,right:e?"auto":Kn.section,zIndex:e?"auto":999,padding:"4px",background:ye.backgroundLevel2,borderRadius:"22px",border:`1px solid ${ye.border}`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",transition:aa.default,flexShrink:1,fontFamily:Wt.fontFamily},onMouseEnter:H=>{H.currentTarget.style.background=ye.hover,H.currentTarget.style.borderColor=ye.borderSoft,H.currentTarget.style.boxShadow=`0 0 0 2px ${ye.primary}40`},onMouseLeave:H=>{H.currentTarget.style.background=ye.backgroundLevel2,H.currentTarget.style.borderColor=ye.border,H.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},children:[i.jsx("input",{ref:Ur,type:"text",value:q,onChange:Zn,onFocus:Ut,onKeyDown:Vt,placeholder:"Ask Owlin Assistant...",disabled:ce,style:{flex:1,height:"100%",padding:`0 ${Kn.element}`,border:"none",borderRadius:"18px",fontSize:"13px",outline:"none",background:"transparent",color:ye.textPrimary,fontWeight:Wt.weights.body,fontFamily:Wt.fontFamily}}),i.jsx("button",{type:"submit",disabled:ce||!q.trim(),style:{width:"36px",height:"36px",borderRadius:"50%",border:"none",background:ce||!q.trim()?ye.backgroundLevel2:ye.primary,color:"#fff",cursor:ce||!q.trim()?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:aa.default,boxShadow:ce||!q.trim()?"none":"0 2px 6px rgba(0, 0, 0, 0.2)",opacity:ce||!q.trim()?.5:1,fontFamily:Wt.fontFamily},onMouseEnter:H=>{!ce&&q.trim()&&(H.currentTarget.style.transform="scale(1.05)",H.currentTarget.style.background=ye.primaryHover,H.currentTarget.style.boxShadow="0 4px 12px rgba(76, 163, 255, 0.3)")},onMouseLeave:H=>{H.currentTarget.style.transform="scale(1)",H.currentTarget.style.background=ce||!q.trim()?ye.backgroundLevel2:ye.primary,H.currentTarget.style.boxShadow=ce||!q.trim()?"none":"0 2px 6px rgba(0, 0, 0, 0.2)"},children:ce?i.jsx(sn,{size:16,strokeWidth:2}):i.jsx(Gy,{size:16,strokeWidth:1.5})})]});if(t&&!u)return null;if(!u)return e?i.jsx(nn,{}):i.jsx(nn,{});if(e&&n)return i.jsx(nn,{});e?{bottom:Kn.section,right:Kn.section,top:"auto",left:"auto"}:h?{bottom:Kn.section,right:Kn.section,top:"auto",left:"auto"}:{top:`${m.y}px`,left:`${m.x}px`,bottom:"auto",right:"auto"};const cn={position:t?"relative":"fixed",width:t?"100%":`${x.width}px`,height:t?"600px":`${x.height}px`,maxHeight:t?"600px":`${x.height}px`,background:ye.backgroundLevel1,borderRadius:"20px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)",border:`1px solid ${ye.border}`,display:"flex",flexDirection:"column",zIndex:t?1:9999,cursor:e?"default":w?"grabbing":h?"default":"grab",userSelect:w?"none":"auto",overflow:"hidden",transition:"all 200ms ease-out, transform 200ms ease-out",fontFamily:Wt.fontFamily,...t?{marginTop:Kn.element}:{bottom:Kn.section,right:Kn.section,top:"auto",left:"auto",animation:"dropIn 200ms ease-out"}},hn=i.jsxs("div",{ref:Pn,onMouseDown:oi,style:cn,children:[i.jsx("div",{style:{padding:`${Kn.element} ${Kn.section}`,borderBottom:`1px solid ${ye.border}`,background:ye.backgroundLevel1,borderRadius:"20px 20px 0 0",cursor:h?"default":"grab",minHeight:"56px",display:"flex",alignItems:"center"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t&&i.jsx("button",{onClick:qt,style:{width:"32px",height:"32px",borderRadius:"50%",border:`1px solid ${ye.border}`,background:"transparent",color:ye.textSecondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:aa.default,fontFamily:Wt.fontFamily},onMouseEnter:H=>{H.currentTarget.style.background=ye.hover,H.currentTarget.style.borderColor=ye.borderSoft,H.currentTarget.style.color=ye.textPrimary},onMouseLeave:H=>{H.currentTarget.style.background="transparent",H.currentTarget.style.borderColor=ye.border,H.currentTarget.style.color=ye.textSecondary},title:"Close",children:i.jsx(sn,{size:18,strokeWidth:1.5})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:ye.backgroundLevel2,display:"flex",alignItems:"center",justifyContent:"center",border:`1px solid ${ye.border}`,flexShrink:0},children:i.jsx(WE,{size:18,strokeWidth:1.5,color:ye.textSlate})}),i.jsx("div",{style:{fontWeight:Wt.weights.title,fontSize:"17px",color:ye.textPrimary,letterSpacing:"-0.01em",fontFamily:Wt.fontFamily},children:"Code Assistant"})]})]}),i.jsx("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:!t&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:Fr,style:{width:"28px",height:"28px",borderRadius:"8px",border:`1px solid ${ye.border}`,background:ye.backgroundCard,backdropFilter:"blur(10px)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",color:ye.textSecondary,transition:aa.default,fontFamily:Wt.fontFamily},onMouseEnter:H=>{H.currentTarget.style.background=ye.backgroundSoft,H.currentTarget.style.borderColor=ye.sageGreenBorder,H.currentTarget.style.transform="scale(1.05)",H.currentTarget.style.color=ye.textPrimary},onMouseLeave:H=>{H.currentTarget.style.background=ye.backgroundCard,H.currentTarget.style.borderColor=ye.border,H.currentTarget.style.transform="scale(1)",H.currentTarget.style.color=ye.textSecondary},title:h?"Unpin to move":"Pin to bottom right",children:h?"":""}),i.jsx("button",{onClick:qt,style:{width:"28px",height:"28px",borderRadius:"8px",border:`1px solid ${ye.border}`,background:ye.backgroundCard,backdropFilter:"blur(10px)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px",color:ye.textSecondary,transition:aa.default,fontFamily:Wt.fontFamily},onMouseEnter:H=>{H.currentTarget.style.background=ye.backgroundSoft,H.currentTarget.style.borderColor=ye.sageGreenBorder,H.currentTarget.style.transform="scale(1.05)",H.currentTarget.style.color=ye.textPrimary},onMouseLeave:H=>{H.currentTarget.style.background=ye.backgroundCard,H.currentTarget.style.borderColor=ye.border,H.currentTarget.style.transform="scale(1)",H.currentTarget.style.color=ye.textSecondary},title:"Minimize",children:""})]})})]})}),i.jsx("div",{style:{flex:1,overflowY:"auto",padding:`40px ${Kn.section} ${Kn.section} ${Kn.section}`,background:ye.backgroundLevel1,fontFamily:Wt.fontFamily,display:"flex",flexDirection:"column",minHeight:0},children:A.length===0?i.jsxs("div",{style:{textAlign:"center",color:ye.textSecondary,fontSize:"14px",padding:"60px 20px",fontFamily:Wt.fontFamily},children:[i.jsx("div",{style:{fontWeight:Wt.weights.title,fontSize:"24px",marginBottom:"12px",color:ye.textPrimary,fontFamily:Wt.fontFamily,letterSpacing:"-0.02em",lineHeight:"1.3"},children:"How can I help you today?"}),i.jsx("div",{style:{fontSize:"15px",marginBottom:"32px",color:ye.textSecondary,fontFamily:Wt.fontFamily,lineHeight:"1.6"},children:"I can help you understand, debug, and explore your codebase."}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",maxWidth:"480px",margin:"0 auto"},children:[i.jsxs("button",{type:"button",onClick:()=>{te("Show me the upload code"),Ur.current?.focus()},style:{width:"100%",padding:"16px 20px",background:ye.backgroundLevel2,borderRadius:"12px",fontSize:"14px",cursor:"pointer",border:`1px solid ${ye.border}`,transition:aa.default,textAlign:"left",color:ye.textPrimary,fontFamily:Wt.fontFamily,fontWeight:Wt.weights.body,display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:H=>{H.currentTarget.style.background=`linear-gradient(135deg, ${ye.backgroundLevel2} 0%, ${ye.hover} 100%)`,H.currentTarget.style.borderColor=ye.borderSoft,H.currentTarget.style.transform="translateY(-2px)",H.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:H=>{H.currentTarget.style.background=ye.backgroundLevel2,H.currentTarget.style.borderColor=ye.border,H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="none"},children:[i.jsx(y4,{size:20,strokeWidth:1.5,color:ye.textSlate,style:{flexShrink:0}}),i.jsx("span",{children:"Show me the upload code"})]}),i.jsxs("button",{type:"button",onClick:()=>{te("Why did my upload fail?"),Ur.current?.focus()},style:{width:"100%",padding:"16px 20px",background:ye.backgroundLevel2,borderRadius:"12px",fontSize:"14px",cursor:"pointer",border:`1px solid ${ye.border}`,transition:aa.default,textAlign:"left",color:ye.textPrimary,fontFamily:Wt.fontFamily,fontWeight:Wt.weights.body,display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:H=>{H.currentTarget.style.background=`linear-gradient(135deg, ${ye.backgroundLevel2} 0%, ${ye.hover} 100%)`,H.currentTarget.style.borderColor=ye.borderSoft,H.currentTarget.style.transform="translateY(-2px)",H.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:H=>{H.currentTarget.style.background=ye.backgroundLevel2,H.currentTarget.style.borderColor=ye.border,H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="none"},children:[i.jsx(Wa,{size:20,strokeWidth:1.5,color:ye.textSlate,style:{flexShrink:0}}),i.jsx("span",{children:"Why did my upload fail?"})]}),i.jsxs("button",{type:"button",onClick:()=>{te("Find all API endpoints"),Ur.current?.focus()},style:{width:"100%",padding:"16px 20px",background:ye.backgroundLevel2,borderRadius:"12px",fontSize:"14px",cursor:"pointer",border:`1px solid ${ye.border}`,transition:aa.default,textAlign:"left",color:ye.textPrimary,fontFamily:Wt.fontFamily,fontWeight:Wt.weights.body,display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:H=>{H.currentTarget.style.background=`linear-gradient(135deg, ${ye.backgroundLevel2} 0%, ${ye.hover} 100%)`,H.currentTarget.style.borderColor=ye.borderSoft,H.currentTarget.style.transform="translateY(-2px)",H.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:H=>{H.currentTarget.style.background=ye.backgroundLevel2,H.currentTarget.style.borderColor=ye.border,H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="none"},children:[i.jsx(q4,{size:20,strokeWidth:1.5,color:ye.textSlate,style:{flexShrink:0}}),i.jsx("span",{children:"Find all API endpoints"})]})]})]}):i.jsxs(i.Fragment,{children:[A.map((H,Ve)=>i.jsx(x3,{role:H.role,content:H.content,codeReferences:H.codeReferences,error:H.error,retryable:H.retryable,requiresOllama:H.requiresOllama,explorationMode:H.explorationMode,explorationMetadata:H.explorationMetadata,onRetry:H.error&&H.retryable?Ft:void 0},Ve)),ce&&Ce&&i.jsxs("div",{style:{padding:`${Kn.element} ${Kn.section}`,margin:"12px 0",background:"transparent",borderRadius:"6px",fontSize:"14px",color:ye.textSecondary,display:"flex",alignItems:"center",gap:"12px",animation:"fadeIn 0.3s ease-in",fontFamily:Wt.fontFamily},children:[i.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center",flexShrink:0},children:[i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.4)",animation:"pulseDot 1.4s ease-in-out infinite",animationDelay:"0s"}}),i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.4)",animation:"pulseDot 1.4s ease-in-out infinite",animationDelay:"0.2s"}}),i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.4)",animation:"pulseDot 1.4s ease-in-out infinite",animationDelay:"0.4s"}})]}),i.jsx("span",{style:{fontStyle:"italic",animation:"textPulse 2s ease-in-out infinite",color:ye.textSecondary,fontFamily:Wt.fontFamily},children:Xn||"Planning tasks..."})]}),ce&&!Ce&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",padding:Kn.element,background:ye.backgroundCard,backdropFilter:"blur(10px)",borderRadius:"6px",fontSize:"14px",color:ye.textSecondary,border:`1px solid ${ye.border}`,fontFamily:Wt.fontFamily},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"20px",height:"20px",border:`2.5px solid ${ye.sageGreenLight}`,borderTopColor:ye.sageGreen,borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),ie?ie.message:"Thinking..."]}),Ee&&Z.length>0&&Ce&&i.jsx("div",{style:{marginLeft:"32px",marginTop:"12px",marginBottom:"12px",width:"calc(100% - 64px)"},children:i.jsx(b3,{tasks:Z,phaseProgress:me,aliveTs:Q,lastActivityTs:Ae,taskSummary:jt,isCollapsed:!1})}),ie&&!Ce&&i.jsxs("div",{style:{marginLeft:"32px"},children:[i.jsx("div",{style:{width:"100%",height:"6px",background:ye.backgroundCard,borderRadius:"3px",overflow:"hidden",backdropFilter:"blur(10px)"},children:i.jsx("div",{style:{width:`${ie.percentage}%`,height:"100%",background:`linear-gradient(90deg, ${ye.navy}, ${ye.sageGreen})`,borderRadius:"3px",transition:aa.default,boxShadow:`0 0 10px ${ye.sageGreen}40`}})}),i.jsxs("div",{style:{fontSize:"11px",marginTop:"6px",color:ye.textMuted,fontFamily:Wt.fontFamily},children:["Step ",ie.current," of ",ie.total," (",ie.percentage,"%)"]})]})]}),i.jsx("div",{ref:Tt})]})}),i.jsx("form",{onSubmit:Lt,style:{padding:`${Kn.element} ${Kn.section}`,borderTop:`1px solid ${ye.border}`,background:ye.backgroundLevel1,borderRadius:"0 0 20px 20px",position:"relative"},children:i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",position:"relative"},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{type:"button",onClick:H=>{H.preventDefault(),H.stopPropagation(),yt(!Mn)},style:{width:"36px",height:"36px",minWidth:"36px",borderRadius:"50%",border:`1px solid ${ye.border}`,background:ye.backgroundLevel2,color:ye.textSecondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:aa.default,fontFamily:Wt.fontFamily},onMouseEnter:H=>{H.currentTarget.style.background=ye.hover,H.currentTarget.style.borderColor=ye.borderSoft,H.currentTarget.style.color=ye.textPrimary},onMouseLeave:H=>{H.currentTarget.style.background=ye.backgroundLevel2,H.currentTarget.style.borderColor=ye.border,H.currentTarget.style.color=ye.textSecondary},title:"Options",children:i.jsx(Ws,{size:20,strokeWidth:1.5})}),Mn&&i.jsxs("div",{ref:Ca,style:{position:"absolute",bottom:"100%",left:"0",marginBottom:"8px",padding:"8px 12px",background:ye.backgroundMenu,borderRadius:"16px",border:`1px solid ${ye.border}`,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)",minWidth:"220px",zIndex:1e3,animation:"menuFadeIn 0.15s ease-out"},onClick:H=>H.stopPropagation(),children:[i.jsxs("button",{type:"button",onClick:()=>{xe(!J)},style:{width:"100%",display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px",borderRadius:"8px",border:"none",background:J?ye.hover:"transparent",cursor:"pointer",transition:aa.default,fontFamily:Wt.fontFamily,textAlign:"left"},onMouseEnter:H=>{H.currentTarget.style.background=ye.hover},onMouseLeave:H=>{H.currentTarget.style.background=J?ye.hover:"transparent"},children:[i.jsx(Bl,{size:20,strokeWidth:1.5,color:J?ye.primary:ye.textSlate,style:{flexShrink:0,marginTop:"2px"}}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",flex:1},children:[i.jsx("span",{style:{fontSize:"14px",color:ye.textPrimary,fontWeight:Wt.weights.label,lineHeight:"1.4"},children:"Search mode"}),i.jsx("span",{style:{fontSize:"12px",color:ye.textMuted,fontWeight:Wt.weights.body,lineHeight:"1.4"},children:"Ask questions about code"})]})]}),i.jsxs("button",{type:"button",onClick:()=>{$(!Ce)},style:{width:"100%",display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px",borderRadius:"8px",border:"none",background:Ce?ye.hover:"transparent",cursor:"pointer",transition:aa.default,fontFamily:Wt.fontFamily,textAlign:"left"},onMouseEnter:H=>{H.currentTarget.style.background=ye.hover},onMouseLeave:H=>{H.currentTarget.style.background=Ce?ye.hover:"transparent"},children:[i.jsx(YE,{size:20,strokeWidth:1.5,color:Ce?ye.primary:ye.textSlate,style:{flexShrink:0,marginTop:"2px"}}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"2px",flex:1},children:[i.jsx("span",{style:{fontSize:"14px",color:ye.textPrimary,fontWeight:Wt.weights.label,lineHeight:"1.4"},children:"Agent mode"}),i.jsx("span",{style:{fontSize:"12px",color:ye.textMuted,fontWeight:Wt.weights.body,lineHeight:"1.4"},children:"Autonomous problem-solving"})]})]})]})]}),i.jsx("input",{ref:Ur,type:"text",value:q,onChange:Zn,onKeyDown:Vt,placeholder:"Ask anything",disabled:ce,style:{flex:1,height:"44px",padding:"0 16px",border:`1px solid ${ye.border}`,borderRadius:"22px",fontSize:"14px",outline:"none",background:ye.backgroundLevel2,color:ye.textPrimary,transition:aa.default,fontFamily:Wt.fontFamily},onFocus:H=>{H.currentTarget.style.background=ye.hover,H.currentTarget.style.borderColor=ye.borderSoft},onBlur:H=>{H.currentTarget.style.background=ye.backgroundLevel2,H.currentTarget.style.borderColor=ye.border}}),i.jsx("button",{type:ce?"button":"submit",onClick:ce?At:void 0,disabled:!ce&&!q.trim(),style:{width:"36px",height:"36px",minWidth:"36px",borderRadius:"50%",border:"none",background:ce?"rgba(239, 68, 68, 0.9)":q.trim()?ye.primary:ye.backgroundLevel2,color:"#fff",cursor:ce||q.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:aa.default,boxShadow:ce||q.trim()?"0 2px 6px rgba(0, 0, 0, 0.2)":"none",fontFamily:Wt.fontFamily,opacity:!q.trim()&&!ce?.5:1},onMouseEnter:H=>{ce?(H.currentTarget.style.transform="scale(1.05)",H.currentTarget.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.4)",H.currentTarget.style.background="rgba(239, 68, 68, 1)"):q.trim()&&(H.currentTarget.style.transform="scale(1.05)",H.currentTarget.style.background=ye.primaryHover,H.currentTarget.style.boxShadow="0 4px 12px rgba(76, 163, 255, 0.3)")},onMouseLeave:H=>{H.currentTarget.style.transform="scale(1)",H.currentTarget.style.background=ce?"rgba(239, 68, 68, 0.9)":q.trim()?ye.primary:ye.backgroundLevel2,H.currentTarget.style.boxShadow=ce||q.trim()?"0 2px 6px rgba(0, 0, 0, 0.2)":"none"},title:ce?"Stop":"Send",children:ce?i.jsx(sn,{size:16,strokeWidth:2}):i.jsx(Gy,{size:16,strokeWidth:1.5})})]})}),i.jsx("div",{ref:Ln,onMouseDown:qr,style:{position:"absolute",bottom:0,right:0,width:"24px",height:"24px",cursor:"nwse-resize",background:"transparent"},title:"Drag to resize",children:i.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",width:0,height:0,borderLeft:"10px solid transparent",borderBottom:`10px solid ${ye.textMuted}`}})}),i.jsx("style",{children:`
        @keyframes dropIn {
          from {
            opacity: 0;
            transform: translateY(20px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        
        @keyframes pulseDot {
          0%, 60%, 100% {
            transform: scale(1);
            opacity: 0.5;
          }
          30% {
            transform: scale(1.2);
            opacity: 1;
          }
        }
        
        @keyframes textPulse {
          0%, 100% {
            opacity: 0.7;
          }
          50% {
            opacity: 1;
          }
        }
        
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-4px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes menuFadeIn {
          from {
            opacity: 0;
            transform: scale(1) translateY(4px);
          }
          50% {
            transform: scale(1.02) translateY(2px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
        
        @keyframes taskPulse {
          0%, 100% {
            box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
          }
          50% {
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0);
          }
        }
      `})]});return t&&u?hn:e&&n&&u?i.jsx(nn,{}):e&&u?i.jsxs(i.Fragment,{children:[i.jsx(nn,{}),hn]}):hn}function Iu({children:e}){return i.jsx("header",{className:"app-header",children:i.jsxs("div",{className:"app-header-content",children:[i.jsx("div",{className:"app-header-page-content",children:e}),i.jsx("div",{className:"app-header-assistant",children:i.jsx(QE,{compactInputExternal:!0,useSharedState:!0})})]})})}const XE=g.createContext(void 0),Lv={venueId:null,dateRange:"30d",searchQuery:""};function ZE({children:e}){const[t,n]=g.useState(()=>{try{const d=localStorage.getItem("dashboardFilters");if(d)return{...Lv,...JSON.parse(d)}}catch(d){console.warn("Failed to load dashboard filters from localStorage",d)}return Lv});g.useEffect(()=>{try{localStorage.setItem("dashboardFilters",JSON.stringify(t))}catch(d){console.warn("Failed to save dashboard filters to localStorage",d)}},[t]);const r=g.useCallback(d=>{n(h=>({...h,venueId:d}))},[]),l=g.useCallback(d=>{n(h=>({...h,dateRange:d}))},[]),o=g.useCallback(d=>{n(h=>({...h,searchQuery:d}))},[]),u=g.useCallback(()=>{n(Lv)},[]);return i.jsx(XE.Provider,{value:{filters:t,setVenue:r,setDateRange:l,setSearchQuery:o,resetFilters:u},children:e})}function us(){const e=g.useContext(XE);if(!e)throw new Error("useDashboardFilters must be used within DashboardFiltersProvider");return e}async function N3(){const e=await fetch(`${Be}/api/health`);if(!e.ok)throw new Error(`Health check failed: ${e.status} ${e.statusText}`);return e.json()}async function C3(e){const t=await fetch(`${Be}/api/ocr/retry/${e}`,{method:"POST"});if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to retry OCR"}));throw new Error(n.detail||n.message||`Failed to retry OCR: ${t.status}`)}return t.json()}function Un(e){if(e==null)return e;if(Array.isArray(e))return e.map(Un);if(typeof e!="object")return e;const t={};for(const[n,r]of Object.entries(e)){const l=n.replace(/_([a-z])/g,(o,u)=>u.toUpperCase());t[l]=Un(r),l!==n&&(t[n]=r)}return t}function Dl(e){if(!e||typeof e!="object")throw new Error("Invalid invoice data: expected object");const t=[],n=e.line_items||e.items||[];if(Array.isArray(n))for(const l of n)l&&typeof l=="object"&&t.push({id:l.id||0,docId:l.doc_id||e.doc_id||"",invoiceId:l.invoice_id||e.id||0,lineNumber:l.line_number||0,description:l.description||l.desc||"",qty:l.qty||l.quantity||0,unitPrice:l.unit_price||l.price||0,total:l.total||l.line_total||0,uom:l.uom||l.unit||null,sku:l.sku||null,confidence:l.confidence||null,bbox:l.bbox||void 0});let r;if(e.invoice_number)r=String(e.invoice_number);else if(e.invoice_no)r=String(e.invoice_no);else if(e.filename){const l=String(e.filename);l.startsWith("Manual Invoice ")&&(r=l.replace("Manual Invoice ",""))}return{id:e.id||0,docId:e.doc_id||"",supplier:e.supplier||e.supplier_name||"Unknown Supplier",invoiceDate:e.invoice_date||e.date||"",invoiceNumber:r,totalValue:e.total_value||e.value||e.total||0,currency:e.currency||"GBP",confidence:e.confidence||e.ocr_confidence||null,status:e.status||"scanned",venue:e.venue||null,issuesCount:e.issues_count||0,paired:e.paired||!1,pairingStatus:e.pairing_status||null,deliveryNoteId:e.delivery_note_id||null,lineItems:t}}function _3(e){if(!e||typeof e!="object")return e;const t={...e};t.total_value!==void 0&&t.total_value!==null&&(t.total=t.total_value),(t.total===void 0||t.total===null)&&t.value!==void 0&&t.value!==null&&(t.total=t.value),t.invoice_number!==void 0&&t.invoice_number!==null&&(t.invoiceNo=t.invoice_number),t.supplier_name!==void 0&&t.supplier_name!==null&&(t.supplier===void 0||t.supplier===null)&&(t.supplier=t.supplier_name);const n=t.lineItems||t.line_items||t.items||[];return n&&Array.isArray(n)?t.lineItems=n.map(r=>{if(!r||typeof r!="object")return r;const l={...r};return l.quantity!==void 0&&l.quantity!==null&&(l.qty===void 0||l.qty===null)&&(l.qty=l.quantity),l.price!==void 0&&l.price!==null&&(l.unitPrice===void 0||l.unitPrice===null)&&(l.unitPrice=l.price),l.total!==void 0&&l.total!==null&&(l.lineTotal===void 0||l.lineTotal===null)&&(l.lineTotal=l.total),l.line_total!==void 0&&l.line_total!==null&&(l.lineTotal===void 0||l.lineTotal===null)&&(l.lineTotal=l.line_total),l.unit_price!==void 0&&l.unit_price!==null&&(l.unitPrice===void 0||l.unitPrice===null)&&(l.unitPrice=l.unit_price),l}):t.lineItems||(t.lineItems=[]),Un(t)}async function AS(e){const t={supplier:e.supplier,invoice_number:e.invoiceNumber,invoice_date:e.date,venue:e.venue,subtotal:e.subtotal,tax_total:e.vat,grand_total:e.total,line_items:e.lineItems.map(r=>({description:r.description,quantity:r.qty,unit:r.unit,unit_price:r.price,line_total:r.total}))},n=`${Be}/api/manual/invoices`;console.log("[createManualInvoice] Sending request to:",n),console.log("[createManualInvoice] Request data:",t);try{const r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let o=`Failed to create invoice: ${r.status} ${r.statusText}`;try{const u=await r.json();o=u.message||u.detail||o}catch{const d=await r.text().catch(()=>"");d&&(o=`${o}. ${d}`)}throw console.error("[createManualInvoice] Server error:",o),new Error(o)}const l=await r.json();return console.log("[createManualInvoice] Success:",l),Un(l)}catch(r){if(r instanceof TypeError&&(r.message==="Failed to fetch"||r.message.includes("fetch")||r.message.includes("network")||r.message.includes("CORS"))){const o=Be||(typeof window<"u"?window.location.origin:"unknown"),u=`Cannot connect to backend server at ${o}/api/manual/invoices. Please ensure:
1. The backend server is running
2. The backend is accessible at the configured URL
3. If using separate ports, check your API configuration (currently: ${o})`;throw console.error("[createManualInvoice] Network error:",r),console.error("[createManualInvoice] Attempted URL:",`${o}/api/manual/invoices`),new Error(u)}throw r}}async function MS(e){const t=[];e.supervisor&&t.push(`Supervisor: ${e.supervisor}`),e.driver&&t.push(`Driver: ${e.driver}`),e.vehicle&&t.push(`Vehicle: ${e.vehicle}`),e.timeWindow&&t.push(`Time Window: ${e.timeWindow}`);const n={venue:e.venue||"Waterloo",supplier:e.supplier,delivery_note_number:e.noteNumber,delivery_date:e.date,supervisor:e.supervisor,notes:t.length>0?t.join(`
`):void 0,line_items:e.lineItems.map(u=>({description:u.description,quantity:u.qty,unit:u.unit,unit_price:void 0,line_total:void 0,weight:u.weight}))},r=`${Be}/api/manual/delivery-notes`;console.log("[API] Creating delivery note:",{url:r,data:n}),console.log("[API] Backend data details:",{supplier:n.supplier,delivery_note_number:n.delivery_note_number,delivery_date:n.delivery_date,venue:n.venue,line_items_count:n.line_items.length});const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});console.log("[API] Delivery note creation response:",{status:l.status,ok:l.ok});let o;try{o=await l.json()}catch{const d=await l.text();throw console.error("[API] Failed to parse JSON response:",d),new Error(`Failed to parse response: ${d}`)}if(!l.ok)throw console.error("[API] Delivery note creation error:",o),new Error(o.message||o.detail||`Failed to create delivery note: ${l.status}`);return console.log("[API] Delivery note created successfully:",o),console.log("[API] Delivery note created successfully:",o),Un(o)}async function Ks(e,t){const n=await fetch(`${Be}/api/manual/validate-pair`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoice_id:e,delivery_note_id:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to validate pair"}));throw new Error(r.message||`Failed to validate pair: ${n.status}`)}return Un(await n.json())}async function gi(e,t){const n=await fetch(`${Be}/api/manual/match`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoice_id:e,delivery_note_id:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to link delivery note"}));throw new Error(r.message||`Failed to link delivery note: ${n.status}`)}return Un(await n.json())}async function k3(e){const t=await fetch(`${Be}/api/manual/invoices/${e}/unpair`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to unpair delivery note"}));throw new Error(n.message||n.detail||`Failed to unpair delivery note: ${t.status}`)}return Un(await t.json())}async function Yy(e){const t=await fetch(`${Be}/api/delivery-notes/batch/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({delivery_note_ids:e})});if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to delete delivery notes"}));throw new Error(n.message||n.detail||`Failed to delete delivery notes: ${t.status}`)}return Un(await t.json())}async function JE(e,t){const n={venue:t.venue,supplier:t.supplier,invoice_number:t.invoiceNumber,invoice_date:t.date,currency:"GBP",subtotal:t.subtotal,tax_total:t.vat,grand_total:t.total,line_items:t.lineItems.map(o=>({description:o.description,quantity:o.qty,unit:o.unit,unit_price:o.price,line_total:o.total}))},r=`${Be}/api/manual/invoices/${e}`;console.log("[API] Updating invoice:",{url:r,data:n});const l=await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!l.ok){const o=await l.json().catch(()=>({message:"Failed to update invoice",detail:"Unknown error"})),u=o.detail||o.message||`Failed to update invoice: ${l.status}`;throw console.error("[API] Update invoice error:",{status:l.status,error:o,requestData:n}),new Error(u)}return Un(await l.json())}async function Qs(e){const t=await fetch(`${Be}/api/manual/delivery-notes/${e}`);if(!t.ok){if(t.status===404)return null;const n=await t.json().catch(()=>({message:"Failed to fetch delivery note"}));throw new Error(n.message||`Failed to fetch delivery note: ${t.status}`)}return Un(await t.json())}async function a0(){try{const e=await fetch(`${Be}/api/delivery-notes`);if(!e.ok){if(e.status===404)return[];const r=await e.json().catch(()=>({message:"Failed to fetch delivery notes"})),l=r.message||r.detail||`Failed to fetch delivery notes: ${e.status}`;throw console.error("Failed to fetch delivery notes:",l),new Error(l)}const t=await e.json(),n=Un(t);return Array.isArray(n)?n:Array.isArray(n.deliveryNotes)?n.deliveryNotes:Array.isArray(n.delivery_notes)?n.delivery_notes:[]}catch(e){if(e instanceof Error)throw e;const t=e instanceof Error?e.message:"Network error while fetching delivery notes";throw console.error("Error fetching delivery notes:",t,e),new Error(t)}}async function E3(e){try{const t=new URLSearchParams;e?.venue,e?.supplier,e?.from_date,e?.to_date;const n=`${Be}/api/delivery-notes/unpaired${t.toString()?"?"+t.toString():""}`,r=await fetch(n);if(!r.ok){if(r.status===404)return[];const u=await r.json().catch(()=>({message:"Failed to fetch unpaired delivery notes"})),d=u.message||u.detail||`Failed to fetch unpaired delivery notes: ${r.status}`;throw console.error("Failed to fetch unpaired delivery notes:",d),new Error(d)}const l=await r.json(),o=Un(l);return Array.isArray(o)?o:Array.isArray(o.deliveryNotes)?o.deliveryNotes:[]}catch(t){if(t instanceof Error)throw t;const n=t instanceof Error?t.message:"Network error while fetching unpaired delivery notes";throw console.error("Error fetching unpaired delivery notes:",n,t),new Error(n)}}async function iu(e){try{const t=await fetch(`${Be}/api/delivery-notes/${e}/paired-invoices`);if(!t.ok){if(t.status===404)return[];const l=await t.json().catch(()=>({message:"Failed to fetch paired invoices"})),o=l.message||l.detail||`Failed to fetch paired invoices: ${t.status}`;throw console.error("Failed to fetch paired invoices for delivery note:",o),new Error(o)}const n=await t.json(),r=Un(n);return Array.isArray(r)?r:Array.isArray(r.invoices)?r.invoices:Array.isArray(r.pairedInvoices)?r.pairedInvoices:[]}catch(t){if(t instanceof Error)throw t;const n=t instanceof Error?t.message:"Network error while fetching paired invoices";throw console.error("Error fetching paired invoices for delivery note:",n,t),new Error(n)}}async function PS(e){const t=await fetch(`${Be}/api/invoices/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoice_ids:e})});if(!t.ok){const n=await t.json().catch(()=>({message:"Failed to submit invoices"}));throw new Error(n.message||`Failed to submit invoices: ${t.status}`)}return Un(await t.json())}async function D3(e,t){const n=await fetch(`${Be}/api/invoices/${e}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to save note"}));throw new Error(r.message||`Failed to save note: ${n.status}`)}return Un(await n.json())}async function O3(e){const t=await fetch(`${Be}/api/invoices/${e}/pdf`);if(!t.ok){const r=await t.json().catch(()=>({message:"Failed to fetch PDF"}));throw new Error(r.message||`Failed to fetch PDF: ${t.status}`)}const n=await t.blob();return URL.createObjectURL(n)}async function T3(e){const t=await fetch(`${Be}/api/invoices/${e}/ocr-details`);if(!t.ok){if(t.status===404)return{};const n=await t.json().catch(()=>({message:"Failed to fetch OCR details"}));throw new Error(n.message||`Failed to fetch OCR details: ${t.status}`)}return Un(await t.json())}async function A3(e,t="normal"){try{const n=await fetch(`${Be}/api/pairing/invoice/${e}?mode=${t}`);if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to fetch pairing status"})),l=r.message||r.detail||`Failed to fetch pairing status: ${n.status}`;throw new Error(l)}return Un(await n.json())}catch(n){const r=n instanceof Error?n.message:"Network error while fetching pairing status";throw console.error(`Error fetching pairing status for invoice ${e}:`,r,n),new Error(r)}}async function Ji(e){try{const t=await A3(e,"review");return{suggestions:t.candidates.map((r,l)=>({id:`suggestion-${l}`,deliveryNoteId:r.deliveryNoteId,deliveryDate:r.deliveryDate,supplier:r.supplier,totalAmount:r.deliveryTotal,confidence:r.probability,probability:r.probability,valueDelta:r.featuresSummary?.amountDiffPct,dateDeltaDays:r.featuresSummary?.dateDiffDays,reason:t.llmExplanation||void 0,llmExplanation:t.llmExplanation,featuresSummary:r.featuresSummary}))}}catch(t){try{const n=await fetch(`${Be}/api/invoices/${e}/suggestions`);if(!n.ok){if(n.status===404)return{suggestions:[]};const r=await n.json().catch(()=>({message:"Failed to fetch pairing suggestions"})),l=r.message||r.detail||`Failed to fetch pairing suggestions: ${n.status}`;throw new Error(l)}return Un(await n.json())}catch(n){if(n instanceof Error)throw n;const r=t instanceof Error?t.message:"Network error while fetching pairing suggestions";throw console.error(`Error fetching pairing suggestions for invoice ${e}:`,r,t),new Error(r)}}}async function M3(){try{const e=await fetch(`${Be}/api/dashboard/unmatched-dns`);if(!e.ok){if(e.status===404)return[];const r=await e.json().catch(()=>({message:"Failed to fetch unmatched delivery notes"})),l=r.message||r.detail||`Failed to fetch unmatched delivery notes: ${e.status}`;throw console.error("Failed to fetch unmatched delivery notes:",l),new Error(l)}const t=await e.json(),n=Un(t);return Array.isArray(n)?n:Array.isArray(n.deliveryNotes)?n.deliveryNotes:Array.isArray(n.delivery_notes)?n.delivery_notes:[]}catch(e){if(e instanceof Error)throw e;const t=e instanceof Error?e.message:"Network error while fetching unmatched delivery notes";throw console.error("Error fetching unmatched delivery notes:",t,e),new Error(t)}}async function Cl(e){try{const t=await fetch(`${Be}/api/delivery-notes/${e}/suggestions`);if(!t.ok){if(t.status===404)try{const l=await fetch(`${Be}/api/pairs/suggestions?delivery_note_id=${e}`);if(l.ok){const o=await l.json(),u=Un(o);return{suggestions:(Array.isArray(u)?u:u.suggestions||[]).filter(h=>h.deliveryNoteId===e||h.delivery_id===e)}}return{suggestions:[]}}catch{return{suggestions:[]}}const n=await t.json().catch(()=>({message:"Failed to fetch invoice suggestions"})),r=n.message||n.detail||`Failed to fetch invoice suggestions: ${t.status}`;throw console.error("Failed to fetch invoice suggestions for delivery note:",r),new Error(r)}return Un(await t.json())}catch(t){if(t instanceof Error&&t.message!=="Failed to fetch invoice suggestions")throw t;const n=t instanceof Error?t.message:"Network error while fetching invoice suggestions";throw console.error("Error fetching invoice suggestions for delivery note:",n,t),new Error(n)}}async function Eo(e){const t=await fetch(`${Be}/api/invoices/batch/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoice_ids:e})});if(!t.ok){let n=`Failed to delete invoices: ${t.status}`;try{const r=await t.json();n=r.detail||r.message||n}catch{t.status===405?n="Method not allowed. The delete endpoint may not be properly configured.":t.status===403?n="Forbidden. This operation is not allowed.":t.status===404&&(n="Endpoint not found. The delete endpoint may not be available.")}throw new Error(n)}return Un(await t.json())}async function $v(e,t=20){try{const n=new URLSearchParams({q:e||"",limit:t.toString()}),r=await fetch(`${Be}/api/items/suggestions?${n}`);if(!r.ok)throw new Error(`Failed to fetch item suggestions: ${r.status} ${r.statusText}`);return(await r.json()).suggestions||[]}catch(n){return console.error("Error fetching item suggestions:",n),[]}}function P3({currentRole:e}){const{filters:t,setVenue:n,setDateRange:r,setSearchQuery:l}=us(),[o,u]=g.useState(!1),[d,h]=g.useState(!1),[p,m]=g.useState({api:"checking",db:"checking",licenseDays:null}),v=e==="GM"?["All Venues","Royal Oak Hotel","Waterloo","Main Restaurant"]:["Royal Oak Hotel"],x=[{value:"today",label:"Today"},{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"custom",label:"Custom"}];g.useEffect(()=>{let k=!0;async function E(){try{const D=await N3();k&&m(A=>({...A,api:D.status==="ok"?"ok":"error"}))}catch{k&&m(A=>({...A,api:"error"}))}k&&m(D=>({...D,db:"ok"})),k&&m(D=>({...D,licenseDays:30}))}E();const O=setInterval(E,3e4);return()=>{k=!1,clearInterval(O)}},[]);const j=()=>{window.location.href="/invoices?action=upload"},w=()=>{console.log("Export clicked")},N=()=>{window.location.href="/settings"},S=()=>p.api==="ok"&&p.db==="ok"?"green":p.api==="error"||p.db==="error"?"red":"amber",C=()=>p.api==="checking"||p.db==="checking"?"Checking...":p.api==="ok"&&p.db==="ok"?`All Systems OK${p.licenseDays!==null?`  ${p.licenseDays}d left`:""}`:"System Error";return i.jsxs("header",{className:"dashboard-header",children:[i.jsxs("div",{className:"dashboard-header-left",children:[i.jsxs("div",{className:"dashboard-header-dropdown",children:[i.jsxs("button",{className:"dashboard-header-button",onClick:()=>u(!o),"aria-label":"Select venue",children:[i.jsx(zu,{size:16}),i.jsx("span",{children:t.venueId||v[0]}),i.jsx(jn,{size:14})]}),o&&i.jsx("div",{className:"dashboard-header-dropdown-menu",children:v.map(k=>i.jsx("button",{className:"dashboard-header-dropdown-item",onClick:()=>{n(k==="All Venues"?null:k),u(!1)},children:k},k))})]}),i.jsxs("div",{className:"dashboard-header-dropdown",children:[i.jsxs("button",{className:"dashboard-header-button",onClick:()=>h(!d),"aria-label":"Select date range",children:[i.jsx(t0,{size:16}),i.jsx("span",{children:x.find(k=>k.value===t.dateRange)?.label||"30 Days"}),i.jsx(jn,{size:14})]}),d&&i.jsx("div",{className:"dashboard-header-dropdown-menu",children:x.map(k=>i.jsx("button",{className:"dashboard-header-dropdown-item",onClick:()=>{r(k.value),h(!1)},children:k.label},k.value))})]}),i.jsxs("div",{className:"dashboard-header-search",children:[i.jsx(Bl,{size:16}),i.jsx("input",{type:"text",placeholder:"Search invoices, suppliers, items...",value:t.searchQuery,onChange:k=>l(k.target.value),className:"dashboard-header-search-input"})]})]}),i.jsxs("div",{className:"dashboard-header-right",children:[i.jsx("div",{className:"dashboard-header-role-badge",children:e}),i.jsxs("div",{className:`dashboard-header-health-pill dashboard-header-health-pill-${S()}`,children:[i.jsx("div",{className:"dashboard-header-health-pill-dot"}),i.jsx("span",{children:C()})]}),i.jsx("button",{className:"dashboard-header-action-button",onClick:j,"aria-label":"Upload",title:"Upload documents",children:i.jsx(Mp,{size:18})}),i.jsx("button",{className:"dashboard-header-action-button",onClick:w,"aria-label":"Export",title:"Export data",children:i.jsx(n0,{size:18})}),i.jsx("button",{className:"dashboard-header-action-button",onClick:N,"aria-label":"Settings",title:"Settings",children:i.jsx(GE,{size:18})})]})]})}const Ky=new Map,z3=6e4;async function Yo(e,t,n=z3){const r=Ky.get(e);if(r&&Date.now()-r.timestamp<n)return r.data;const l=await t();return Ky.set(e,{data:l,timestamp:Date.now()}),l}function i0(e){Ky.clear()}async function R3(e,t="30d"){const n=new URLSearchParams;e&&n.append("venue_id",e),n.append("date_range",t);const r=`metrics:${e}:${t}`;try{return await Yo(r,async()=>{const l=await fetch(`${Be}/api/dashboard/metrics?${n.toString()}`);if(!l.ok){const u=await l.text();throw console.error(`Failed to fetch metrics: ${l.status} ${u}`),new Error(`Failed to fetch metrics: ${l.statusText}`)}const o=await l.json();return console.log("Fetched metrics:",o),o})}catch(l){return console.error("Error fetching metrics, using fallback:",l),{openIssues:{count:0,severity:{high:0,medium:0,low:0},delta:0},matchRate:{value:0,delta:0,sparkline:[]},spend:{total:0,delta:0,sparkline:[]},priceVolatility:{itemsAboveThreshold:0,delta:0,sparkline:[]}}}}async function I3(e,t){const n=new URLSearchParams;e&&n.append("venue_id",e),t&&n.append("role",t);const r=`actions:${e}:${t}`;try{return await Yo(r,async()=>{const l=await fetch(`${Be}/api/dashboard/actions?${n.toString()}`);if(!l.ok){const u=await l.text();throw console.error(`Failed to fetch actions: ${l.status} ${u}`),new Error(`Failed to fetch actions: ${l.statusText}`)}const o=await l.json();return console.log("Fetched actions:",o),o.actions||[]})}catch(l){return console.error("Error fetching actions, using fallback:",l),[]}}async function L3(e,t="30d"){const n=new URLSearchParams;e&&n.append("venue_id",e),n.append("date_range",t);const r=`suppliers:${e}:${t}`;try{return await Yo(r,async()=>{const l=await fetch(`${Be}/api/dashboard/suppliers?${n.toString()}`);if(!l.ok){const u=await l.text();throw console.error(`Failed to fetch suppliers: ${l.status} ${u}`),new Error(`Failed to fetch suppliers: ${l.statusText}`)}const o=await l.json();return console.log("Fetched suppliers:",o),o.suppliers||[]})}catch(l){return console.error("Error fetching suppliers, using fallback:",l),[]}}async function $3(e,t,n="30d",r){const l=new URLSearchParams;l.append("type",e),t&&l.append("venue_id",t),l.append("date_range",n),r?.supplier&&l.append("supplier",r.supplier),r?.category&&l.append("category",r.category),r?.item&&l.append("item",r.item);const o=`trends:${e}:${t}:${n}:${JSON.stringify(r)}`;try{return await Yo(o,async()=>{const u=await fetch(`${Be}/api/dashboard/trends?${l.toString()}`);if(!u.ok){const h=await u.text();throw console.error(`Failed to fetch trends: ${u.status} ${h}`),new Error(`Failed to fetch trends: ${u.statusText}`)}const d=await u.json();return console.log("Fetched trends:",d),d})}catch(u){console.error("Error fetching trends, using fallback:",u);const d=n==="7d"?7:n==="30d"?30:n==="180d"?180:365,h=[];for(let p=0;p<d;p++){const m=new Date;m.setDate(m.getDate()-(d-p)),h.push({date:m.toISOString().split("T")[0],value:e==="spend"?1e3+Math.random()*500:e==="matchRate"?80+Math.random()*15:Math.random()*20})}return{data:h,forecast:[],unit:e==="spend"?"GBP":"%"}}}async function zS(e){const t=new URLSearchParams;e&&t.append("venue_id",e);const n=`unmatched-dns:${e}`;try{return await Yo(n,async()=>{const r=await fetch(`${Be}/api/dashboard/unmatched-dns?${t.toString()}`);if(!r.ok){const o=await r.text();throw console.error(`Failed to fetch unmatched DNs: ${r.status} ${o}`),new Error(`Failed to fetch unmatched DNs: ${r.statusText}`)}const l=await r.json();return console.log("Fetched unmatched DNs:",l),l.deliveryNotes||[]})}catch(r){return console.error("Error fetching unmatched DNs, using fallback:",r),[]}}async function B3(e,t=20){const n=new URLSearchParams;e&&n.append("venue_id",e),n.append("limit",t.toString());const r=`activity:${e}:${t}`;try{return await Yo(r,async()=>{const l=await fetch(`${Be}/api/dashboard/activity?${n.toString()}`);if(!l.ok){const u=await l.text();throw console.error(`Failed to fetch activity: ${l.status} ${u}`),new Error(`Failed to fetch activity: ${l.statusText}`)}const o=await l.json();return console.log("Fetched activity:",o),o.activities||[]})}catch(l){return console.error("Error fetching activity, using fallback:",l),[]}}async function U3(e,t){const n=await fetch(`${Be}/api/dashboard/actions/${e}/resolve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creditAmount:t})});if(!n.ok)throw new Error(`Failed to resolve mismatch: ${n.statusText}`);i0()}async function eD(e,t){const n=await fetch(`${Be}/api/dashboard/pair`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryNoteId:e,invoiceId:t})});if(!n.ok)throw new Error(`Failed to pair delivery note: ${n.statusText}`);i0()}async function F3(e){const t=await fetch(`${Be}/api/dashboard/submit-batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invoiceIds:e})});if(!t.ok)throw new Error(`Failed to submit batch: ${t.statusText}`);i0()}function uf({id:e,title:t,type:n,expanded:r,onToggle:l}){const{filters:o}=us(),[u,d]=g.useState(null),[h,p]=g.useState(!0);g.useEffect(()=>{let w=!0;async function N(){p(!0);try{const S=await R3(o.venueId||void 0,o.dateRange);if(w){let C={};switch(n){case"issues":C={value:S.openIssues?.count||0,delta:S.openIssues?.delta||0,sparkline:[],severity:S.openIssues?.severity||{high:0,medium:0,low:0}};break;case"matchRate":C={value:S.matchRate?.value||0,delta:S.matchRate?.delta||0,sparkline:S.matchRate?.sparkline||[]};break;case"spend":C={value:S.spend?.total||0,delta:S.spend?.delta||0,sparkline:S.spend?.sparkline||[]};break;case"volatility":C={value:S.priceVolatility?.itemsAboveThreshold||0,delta:S.priceVolatility?.delta||0,sparkline:S.priceVolatility?.sparkline||[]};break}d(C)}}catch(S){console.error(`Failed to load ${n} metric:`,S),w&&d({value:0,delta:0,sparkline:[]})}finally{w&&p(!1)}}return N(),()=>{w=!1}},[n,o.venueId,o.dateRange]);const m=()=>h||!u?"...":n==="spend"?new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(u.value):n==="matchRate"?`${Math.round(u.value)}%`:u.value.toLocaleString(),v=()=>{switch(n){case"issues":return i.jsx(tn,{size:20});case"matchRate":return i.jsx(Kr,{size:20});case"spend":return i.jsx(Ap,{size:20});case"volatility":return i.jsx(Vy,{size:20})}},x=()=>!u||u.delta===0?"neutral":n==="issues"||n==="volatility"?u.delta>0?"negative":"positive":u.delta>0?"positive":"negative",j=()=>{if(!u||!u.sparkline||u.sparkline.length===0)return i.jsx("div",{className:"metric-tile-sparkline-empty",children:"No data"});const w=Math.max(...u.sparkline),N=Math.min(...u.sparkline),S=w-N||1;return i.jsx("svg",{className:"metric-tile-sparkline",viewBox:`0 0 ${u.sparkline.length*4} 20`,children:i.jsx("polyline",{points:u.sparkline.map((C,k)=>`${k*4},${20-(C-N)/S*18}`).join(" "),fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})};return i.jsxs("div",{className:`metric-tile ${r?"metric-tile-expanded":""}`,onClick:l,role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),l())},children:[i.jsxs("div",{className:"metric-tile-header",children:[i.jsx("div",{className:"metric-tile-icon",children:v()}),i.jsxs("div",{className:"metric-tile-content",children:[i.jsx("div",{className:"metric-tile-title",children:t}),i.jsx("div",{className:"metric-tile-value",children:m()})]}),u&&u.delta!==0&&i.jsxs("div",{className:`metric-tile-delta metric-tile-delta-${x()}`,children:[u.delta>0?i.jsx(Go,{size:14}):i.jsx(i3,{size:14}),i.jsxs("span",{children:[Math.abs(u.delta).toFixed(1),"%"]})]})]}),r&&i.jsxs("div",{className:"metric-tile-expanded-content",children:[i.jsx("div",{className:"metric-tile-sparkline-container",children:j()}),n==="issues"&&u?.severity&&i.jsxs("div",{className:"metric-tile-severity-breakdown",children:[i.jsxs("div",{className:"metric-tile-severity-item",children:[i.jsx("span",{className:"metric-tile-severity-dot metric-tile-severity-high"}),"High: ",u.severity.high]}),i.jsxs("div",{className:"metric-tile-severity-item",children:[i.jsx("span",{className:"metric-tile-severity-dot metric-tile-severity-medium"}),"Medium: ",u.severity.medium]}),i.jsxs("div",{className:"metric-tile-severity-item",children:[i.jsx("span",{className:"metric-tile-severity-dot metric-tile-severity-low"}),"Low: ",u.severity.low]})]}),i.jsxs("div",{className:"metric-tile-actions",children:[i.jsx("button",{className:"metric-tile-action-button",children:"View Details"}),i.jsx("button",{className:"metric-tile-action-button",children:"Filter"})]})]})]})}function q3({action:e,onComplete:t,currentRole:n}){const[r,l]=g.useState(!1),[o,u]=g.useState(!1),d=()=>{switch(e.status){case"done":return i.jsx(Kr,{size:16,className:"action-tile-status-icon action-tile-status-done"});case"in_review":return i.jsx(Ru,{size:16,className:"action-tile-status-icon action-tile-status-in-review"});case"blocked":return i.jsx(VE,{size:16,className:"action-tile-status-icon action-tile-status-blocked"});default:return i.jsx(Wa,{size:16,className:"action-tile-status-icon action-tile-status-pending"})}},h=()=>{switch(e.status){case"done":return"green";case"in_review":return"blue";case"blocked":return"red";default:return"amber"}},p=async()=>{if(!(r||e.status==="done")){l(!0);try{switch(e.type){case"resolve_mismatch":await U3(e.id,e.metadata?.suggestedCredit);break;case"pair_dn":e.metadata?.invoiceId&&e.metadata?.deliveryNoteId&&await eD(e.metadata.deliveryNoteId,e.metadata.invoiceId);break;case"submit_batch":e.metadata?.invoiceIds&&await F3(e.metadata.invoiceIds);break;case"review_ocr":break}t(e.id)}catch(v){console.error(`Failed to complete action ${e.id}:`,v),alert(`Failed to complete action: ${v instanceof Error?v.message:"Unknown error"}`)}finally{l(!1)}}},m=()=>!(e.status==="done"||e.status==="blocked"||e.type==="resolve_mismatch"&&n==="ShiftLead"||e.type==="submit_batch"&&n==="ShiftLead");return i.jsxs("div",{className:`action-tile action-tile-${h()}`,style:{animation:"slideInLeft 300ms ease"},children:[i.jsxs("div",{className:"action-tile-header",onClick:()=>u(!o),children:[i.jsx("div",{className:"action-tile-status",children:d()}),i.jsxs("div",{className:"action-tile-content",children:[i.jsx("div",{className:"action-tile-title",children:e.title}),i.jsx("div",{className:"action-tile-description",children:e.description})]}),i.jsxs("div",{className:"action-tile-priority",children:[e.priority==="high"&&i.jsx("span",{className:"action-tile-priority-badge action-tile-priority-high",children:"High"}),e.priority==="medium"&&i.jsx("span",{className:"action-tile-priority-badge action-tile-priority-medium",children:"Med"})]})]}),o&&i.jsxs("div",{className:"action-tile-expanded",children:[e.type==="resolve_mismatch"&&e.metadata?.suggestedCredit&&i.jsxs("div",{className:"action-tile-meta",children:[i.jsx("strong",{children:"Suggested Credit:"})," ",new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e.metadata.suggestedCredit)]}),e.type==="pair_dn"&&e.metadata?.confidence!==void 0&&i.jsxs("div",{className:"action-tile-meta",children:[i.jsx("strong",{children:"Confidence:"})," ",Math.round(e.metadata.confidence*100),"%"]}),e.type==="submit_batch"&&e.metadata?.count&&i.jsxs("div",{className:"action-tile-meta",children:[i.jsx("strong",{children:"Invoices Ready:"})," ",e.metadata.count]}),e.type==="review_ocr"&&e.metadata?.pages&&i.jsxs("div",{className:"action-tile-meta",children:[i.jsx("strong",{children:"Pages with Low Confidence:"})," ",e.metadata.pages]}),i.jsxs("div",{className:"action-tile-actions",children:[m()&&i.jsx("button",{className:"action-tile-action-button action-tile-action-primary",onClick:p,disabled:r,children:r?"Processing...":"Complete"}),e.type==="review_ocr"&&i.jsx("button",{className:"action-tile-action-button",onClick:()=>{e.metadata?.invoiceId&&(window.location.href=`/invoices?id=${e.metadata.invoiceId}`)},children:"Review"})]})]})]})}function tD({title:e,message:t,icon:n="info"}){const r=()=>{switch(n){case"check":return i.jsx(Kr,{size:32,className:"empty-state-icon empty-state-icon-check"});case"alert":return i.jsx(Wa,{size:32,className:"empty-state-icon empty-state-icon-alert"});default:return i.jsx(Po,{size:32,className:"empty-state-icon empty-state-icon-info"})}};return i.jsxs("div",{className:"empty-state",children:[r(),i.jsx("h3",{className:"empty-state-title",children:e}),i.jsx("p",{className:"empty-state-message",children:t})]})}function H3({currentRole:e}){const{filters:t}=us(),[n,r]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(new Set),h=g.useRef(null);g.useEffect(()=>{let v=!0;async function x(){o(!0);try{const w=await I3(t.venueId||void 0,e);v&&r(w.filter(N=>!u.has(N.id)))}catch(w){console.error("Failed to load actions:",w),v&&r([])}finally{v&&o(!1)}}x();const j=setInterval(x,3e4);return()=>{v=!1,clearInterval(j)}},[t.venueId,e,u]);const p=v=>{d(x=>new Set(x).add(v)),setTimeout(()=>{if(r(x=>x.filter(j=>j.id!==v)),h.current&&n.length>1){const x=h.current.querySelector(".action-tile");x&&x.scrollIntoView({behavior:"smooth",block:"nearest"})}},300)},m=n.filter(v=>v.status!=="done");return l?i.jsxs("div",{className:"action-queue",children:[i.jsx("h2",{className:"action-queue-title",children:"Action Queue"}),i.jsx("div",{className:"action-queue-loading",children:"Loading..."})]}):m.length===0?i.jsxs("div",{className:"action-queue",children:[i.jsx("h2",{className:"action-queue-title",children:"Action Queue"}),i.jsx(tD,{title:"All Clear",message:"No actions require your attention right now.",icon:"check"})]}):i.jsxs("div",{className:"action-queue",ref:h,children:[i.jsx("h2",{className:"action-queue-title",children:"Action Queue"}),i.jsx("div",{className:"action-queue-list",children:m.map((v,x)=>i.jsx(q3,{action:v,onComplete:p,currentRole:e},v.id))})]})}function W3({supplier:e,onClick:t,currentRole:n}){const[r,l]=g.useState(!1),o=Mu(),u=()=>{o(`/suppliers?id=${encodeURIComponent(e.id)}`),t(e)},d=p=>{switch(p){case"A":return"green";case"B":return"blue";case"C":return"amber";case"D":return"orange";case"E":return"red";default:return"gray"}},h=p=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(p);return i.jsxs("div",{className:`supplier-widget supplier-widget-score-${d(e.score)}`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:u,role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),u())},children:[i.jsxs("div",{className:"supplier-widget-header",children:[i.jsx(zu,{size:18,className:"supplier-widget-icon"}),i.jsx("div",{className:"supplier-widget-name",children:e.name}),i.jsx("div",{className:`supplier-widget-score supplier-widget-score-${d(e.score)}`,children:e.score})]}),i.jsxs("div",{className:"supplier-widget-metrics",children:[i.jsxs("div",{className:"supplier-widget-metric",children:[i.jsx(tn,{size:14}),i.jsx("span",{className:"supplier-widget-metric-label",children:"Mismatch"}),i.jsxs("span",{className:"supplier-widget-metric-value",children:[e.mismatchRate.toFixed(1),"%"]})]}),i.jsxs("div",{className:"supplier-widget-metric",children:[i.jsx(Ru,{size:14}),i.jsx("span",{className:"supplier-widget-metric-label",children:"Late"}),i.jsx("span",{className:"supplier-widget-metric-value",children:e.lateDeliveries})]}),i.jsxs("div",{className:"supplier-widget-metric",children:[i.jsx(Go,{size:14}),i.jsx("span",{className:"supplier-widget-metric-label",children:"Volatility"}),i.jsxs("span",{className:"supplier-widget-metric-value",children:[e.priceVolatility.toFixed(1),"%"]})]})]}),i.jsx("div",{className:"supplier-widget-footer",children:i.jsx("div",{className:"supplier-widget-spend",children:h(e.totalSpend)})}),r&&i.jsx("div",{className:"supplier-widget-hover-glow"})]})}function V3({supplier:e,currentRole:t,onClose:n}){return g.useEffect(()=>{const r=l=>{l.key==="Escape"&&n()};return document.addEventListener("keydown",r),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",r),document.body.style.overflow=""}},[n]),e?i.jsx("div",{className:"overlay-backdrop",onClick:n,children:i.jsxs("div",{className:"overlay-content",onClick:r=>r.stopPropagation(),children:[i.jsxs("div",{className:"overlay-header",children:[i.jsx("h2",{className:"overlay-title",children:e.name}),i.jsx("button",{className:"overlay-close",onClick:n,"aria-label":"Close",children:i.jsx(sn,{size:20})})]}),i.jsxs("div",{className:"overlay-body",children:[i.jsxs("div",{className:"overlay-section",children:[i.jsx("h3",{className:"overlay-section-title",children:"Risk Score"}),i.jsx("div",{className:`overlay-score overlay-score-${e.score.toLowerCase()}`,children:e.score})]}),i.jsxs("div",{className:"overlay-section",children:[i.jsx("h3",{className:"overlay-section-title",children:"Metrics"}),i.jsxs("div",{className:"overlay-metrics",children:[i.jsxs("div",{className:"overlay-metric",children:[i.jsx("span",{className:"overlay-metric-label",children:"Mismatch Rate"}),i.jsxs("span",{className:"overlay-metric-value",children:[e.mismatchRate.toFixed(1),"%"]})]}),i.jsxs("div",{className:"overlay-metric",children:[i.jsx("span",{className:"overlay-metric-label",children:"Late Deliveries"}),i.jsx("span",{className:"overlay-metric-value",children:e.lateDeliveries})]}),i.jsxs("div",{className:"overlay-metric",children:[i.jsx("span",{className:"overlay-metric-label",children:"Price Volatility"}),i.jsxs("span",{className:"overlay-metric-value",children:[e.priceVolatility.toFixed(1),"%"]})]}),i.jsxs("div",{className:"overlay-metric",children:[i.jsx("span",{className:"overlay-metric-label",children:"Total Spend"}),i.jsx("span",{className:"overlay-metric-value",children:new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(e.totalSpend)})]})]})]}),t==="GM"&&i.jsxs("div",{className:"overlay-section",children:[i.jsx("h3",{className:"overlay-section-title",children:"Actions"}),i.jsxs("div",{className:"overlay-actions",children:[i.jsx("button",{className:"overlay-action-button overlay-action-primary",children:"Escalate"}),i.jsx("button",{className:"overlay-action-button",children:"Schedule Review"})]})]}),t==="Finance"&&i.jsxs("div",{className:"overlay-section",children:[i.jsx("h3",{className:"overlay-section-title",children:"Actions"}),i.jsxs("div",{className:"overlay-actions",children:[i.jsx("button",{className:"overlay-action-button overlay-action-primary",children:"Generate Credit Email"}),i.jsx("button",{className:"overlay-action-button",children:"View History"})]})]})]})]})}):null}function G3({currentRole:e}){const{filters:t}=us(),[n,r]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{let h=!0;async function p(){o(!0);try{const m=await L3(t.venueId||void 0,t.dateRange);if(h){const v=[...m].sort((x,j)=>{const w={A:0,B:1,C:2,D:3,E:4},N=(w[x.score]||5)-(w[j.score]||5);return N!==0?N:j.totalSpend-x.totalSpend});r(v)}}catch(m){console.error("Failed to load suppliers:",m),h&&r([])}finally{h&&o(!1)}}return p(),()=>{h=!1}},[t.venueId,t.dateRange]),l?i.jsxs("div",{className:"supplier-risk-board",children:[i.jsx("h2",{className:"supplier-risk-board-title",children:"Supplier Risk Board"}),i.jsx("div",{className:"supplier-risk-board-loading",children:"Loading..."})]}):n.length===0?i.jsxs("div",{className:"supplier-risk-board",children:[i.jsx("h2",{className:"supplier-risk-board-title",children:"Supplier Risk Board"}),i.jsx(tD,{title:"No Suppliers",message:"No supplier data available for the selected period.",icon:"info"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"supplier-risk-board",children:[i.jsx("h2",{className:"supplier-risk-board-title",children:"Supplier Risk Board"}),i.jsx("div",{className:"supplier-risk-board-grid",children:n.map(h=>i.jsx(W3,{supplier:h,onClick:d,currentRole:e},h.id))})]}),u&&i.jsx(V3,{supplier:u,currentRole:e,onClose:()=>d(null)})]})}function nD(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=nD(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function yn(){for(var e,t,n=0,r="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=nD(e))&&(r&&(r+=" "),r+=t);return r}var Y3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function s0(e){if(typeof e!="string")return!1;var t=Y3;return t.includes(e)}var K3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Q3=new Set(K3);function rD(e){return typeof e!="string"?!1:Q3.has(e)}function aD(e){return typeof e=="string"&&e.startsWith("data-")}function Ua(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(rD(n)||aD(n))&&(t[n]=e[n]);return t}function Pp(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ua(t)}return typeof e=="object"&&!Array.isArray(e)?Ua(e):null}function Lr(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(rD(n)||aD(n)||s0(n))&&(t[n]=e[n]);return t}function X3(e){return e==null?null:g.isValidElement(e)?Lr(e.props):typeof e=="object"&&!Array.isArray(e)?Lr(e):null}var Z3=["children","width","height","viewBox","className","style","title","desc"];function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qy.apply(null,arguments)}function J3(e,t){if(e==null)return{};var n,r,l=e6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function e6(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var iD=g.forwardRef((e,t)=>{var{children:n,width:r,height:l,viewBox:o,className:u,style:d,title:h,desc:p}=e,m=J3(e,Z3),v=o||{width:r,height:l,x:0,y:0},x=yn("recharts-surface",u);return g.createElement("svg",Qy({},Lr(m),{className:x,width:r,height:l,style:d,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),g.createElement("title",null,h),g.createElement("desc",null,p),n)}),t6=["children","className"];function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xy.apply(null,arguments)}function n6(e,t){if(e==null)return{};var n,r,l=r6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function r6(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Fa=g.forwardRef((e,t)=>{var{children:n,className:r}=e,l=n6(e,t6),o=yn("recharts-layer",r);return g.createElement("g",Xy({className:o},Lr(l),{ref:t}),n)}),a6=g.createContext(null);function En(e){return function(){return e}}const sD=Math.cos,$f=Math.sin,li=Math.sqrt,Bf=Math.PI,zp=2*Bf,Zy=Math.PI,Jy=2*Zy,wl=1e-6,i6=Jy-wl;function lD(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function s6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return lD;const n=10**t;return function(r){this._+=r[0];for(let l=1,o=r.length;l<o;++l)this._+=Math.round(arguments[l]*n)/n+r[l]}}class l6{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?lD:s6(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,l){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+l}`}bezierCurveTo(t,n,r,l,o,u){this._append`C${+t},${+n},${+r},${+l},${this._x1=+o},${this._y1=+u}`}arcTo(t,n,r,l,o){if(t=+t,n=+n,r=+r,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let u=this._x1,d=this._y1,h=r-t,p=l-n,m=u-t,v=d-n,x=m*m+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(x>wl)if(!(Math.abs(v*h-p*m)>wl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let j=r-u,w=l-d,N=h*h+p*p,S=j*j+w*w,C=Math.sqrt(N),k=Math.sqrt(x),E=o*Math.tan((Zy-Math.acos((N+x-S)/(2*C*k)))/2),O=E/k,D=E/C;Math.abs(O-1)>wl&&this._append`L${t+O*m},${n+O*v}`,this._append`A${o},${o},0,0,${+(v*j>m*w)},${this._x1=t+D*h},${this._y1=n+D*p}`}}arc(t,n,r,l,o,u){if(t=+t,n=+n,r=+r,u=!!u,r<0)throw new Error(`negative radius: ${r}`);let d=r*Math.cos(l),h=r*Math.sin(l),p=t+d,m=n+h,v=1^u,x=u?l-o:o-l;this._x1===null?this._append`M${p},${m}`:(Math.abs(this._x1-p)>wl||Math.abs(this._y1-m)>wl)&&this._append`L${p},${m}`,r&&(x<0&&(x=x%Jy+Jy),x>i6?this._append`A${r},${r},0,1,${v},${t-d},${n-h}A${r},${r},0,1,${v},${this._x1=p},${this._y1=m}`:x>wl&&this._append`A${r},${r},0,${+(x>=Zy)},${v},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+l}h${-r}Z`}toString(){return this._}}function l0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new l6(t)}function o0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oD(e){this._context=e}oD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Rp(e){return new oD(e)}function cD(e){return e[0]}function uD(e){return e[1]}function dD(e,t){var n=En(!0),r=null,l=Rp,o=null,u=l0(d);e=typeof e=="function"?e:e===void 0?cD:En(e),t=typeof t=="function"?t:t===void 0?uD:En(t);function d(h){var p,m=(h=o0(h)).length,v,x=!1,j;for(r==null&&(o=l(j=u())),p=0;p<=m;++p)!(p<m&&n(v=h[p],p,h))===x&&((x=!x)?o.lineStart():o.lineEnd()),x&&o.point(+e(v,p,h),+t(v,p,h));if(j)return o=null,j+""||null}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:En(+h),d):e},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:En(+h),d):t},d.defined=function(h){return arguments.length?(n=typeof h=="function"?h:En(!!h),d):n},d.curve=function(h){return arguments.length?(l=h,r!=null&&(o=l(r)),d):l},d.context=function(h){return arguments.length?(h==null?r=o=null:o=l(r=h),d):r},d}function df(e,t,n){var r=null,l=En(!0),o=null,u=Rp,d=null,h=l0(p);e=typeof e=="function"?e:e===void 0?cD:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?uD:En(+n);function p(v){var x,j,w,N=(v=o0(v)).length,S,C=!1,k,E=new Array(N),O=new Array(N);for(o==null&&(d=u(k=h())),x=0;x<=N;++x){if(!(x<N&&l(S=v[x],x,v))===C)if(C=!C)j=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),w=x-1;w>=j;--w)d.point(E[w],O[w]);d.lineEnd(),d.areaEnd()}C&&(E[x]=+e(S,x,v),O[x]=+t(S,x,v),d.point(r?+r(S,x,v):E[x],n?+n(S,x,v):O[x]))}if(k)return d=null,k+""||null}function m(){return dD().defined(l).curve(u).context(o)}return p.x=function(v){return arguments.length?(e=typeof v=="function"?v:En(+v),r=null,p):e},p.x0=function(v){return arguments.length?(e=typeof v=="function"?v:En(+v),p):e},p.x1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:En(+v),p):r},p.y=function(v){return arguments.length?(t=typeof v=="function"?v:En(+v),n=null,p):t},p.y0=function(v){return arguments.length?(t=typeof v=="function"?v:En(+v),p):t},p.y1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:En(+v),p):n},p.lineX0=p.lineY0=function(){return m().x(e).y(t)},p.lineY1=function(){return m().x(e).y(n)},p.lineX1=function(){return m().x(r).y(t)},p.defined=function(v){return arguments.length?(l=typeof v=="function"?v:En(!!v),p):l},p.curve=function(v){return arguments.length?(u=v,o!=null&&(d=u(o)),p):u},p.context=function(v){return arguments.length?(v==null?o=d=null:d=u(o=v),p):o},p}class fD{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function o6(e){return new fD(e,!0)}function c6(e){return new fD(e,!1)}const c0={draw(e,t){const n=li(t/Bf);e.moveTo(n,0),e.arc(0,0,n,0,zp)}},u6={draw(e,t){const n=li(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},pD=li(1/3),d6=pD*2,f6={draw(e,t){const n=li(t/d6),r=n*pD;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},p6={draw(e,t){const n=li(t),r=-n/2;e.rect(r,r,n,n)}},h6=.8908130915292852,hD=$f(Bf/10)/$f(7*Bf/10),m6=$f(zp/10)*hD,v6=-sD(zp/10)*hD,g6={draw(e,t){const n=li(t*h6),r=m6*n,l=v6*n;e.moveTo(0,-n),e.lineTo(r,l);for(let o=1;o<5;++o){const u=zp*o/5,d=sD(u),h=$f(u);e.lineTo(h*n,-d*n),e.lineTo(d*r-h*l,h*r+d*l)}e.closePath()}},Bv=li(3),y6={draw(e,t){const n=-li(t/(Bv*3));e.moveTo(0,n*2),e.lineTo(-Bv*n,-n),e.lineTo(Bv*n,-n),e.closePath()}},Ra=-.5,Ia=li(3)/2,ex=1/li(12),x6=(ex/2+1)*3,b6={draw(e,t){const n=li(t/x6),r=n/2,l=n*ex,o=r,u=n*ex+n,d=-o,h=u;e.moveTo(r,l),e.lineTo(o,u),e.lineTo(d,h),e.lineTo(Ra*r-Ia*l,Ia*r+Ra*l),e.lineTo(Ra*o-Ia*u,Ia*o+Ra*u),e.lineTo(Ra*d-Ia*h,Ia*d+Ra*h),e.lineTo(Ra*r+Ia*l,Ra*l-Ia*r),e.lineTo(Ra*o+Ia*u,Ra*u-Ia*o),e.lineTo(Ra*d+Ia*h,Ra*h-Ia*d),e.closePath()}};function j6(e,t){let n=null,r=l0(l);e=typeof e=="function"?e:En(e||c0),t=typeof t=="function"?t:En(t===void 0?64:+t);function l(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:En(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:En(+o),l):t},l.context=function(o){return arguments.length?(n=o??null,l):n},l}function Uf(){}function Ff(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function mD(e){this._context=e}mD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ff(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ff(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w6(e){return new mD(e)}function vD(e){this._context=e}vD.prototype={areaStart:Uf,areaEnd:Uf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ff(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S6(e){return new vD(e)}function gD(e){this._context=e}gD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ff(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function N6(e){return new gD(e)}function yD(e){this._context=e}yD.prototype={areaStart:Uf,areaEnd:Uf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function C6(e){return new yD(e)}function RS(e){return e<0?-1:1}function IS(e,t,n){var r=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(r||l<0&&-0),u=(n-e._y1)/(l||r<0&&-0),d=(o*l+u*r)/(r+l);return(RS(o)+RS(u))*Math.min(Math.abs(o),Math.abs(u),.5*Math.abs(d))||0}function LS(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Uv(e,t,n){var r=e._x0,l=e._y0,o=e._x1,u=e._y1,d=(o-r)/3;e._context.bezierCurveTo(r+d,l+d*t,o-d,u-d*n,o,u)}function qf(e){this._context=e}qf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Uv(this,this._t0,LS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Uv(this,LS(this,n=IS(this,e,t)),n);break;default:Uv(this,this._t0,n=IS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function xD(e){this._context=new bD(e)}(xD.prototype=Object.create(qf.prototype)).point=function(e,t){qf.prototype.point.call(this,t,e)};function bD(e){this._context=e}bD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,l,o){this._context.bezierCurveTo(t,e,r,n,o,l)}};function _6(e){return new qf(e)}function k6(e){return new xD(e)}function jD(e){this._context=e}jD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=$S(e),l=$S(t),o=0,u=1;u<n;++o,++u)this._context.bezierCurveTo(r[0][o],l[0][o],r[1][o],l[1][o],e[u],t[u]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $S(e){var t,n=e.length-1,r,l=new Array(n),o=new Array(n),u=new Array(n);for(l[0]=0,o[0]=2,u[0]=e[0]+2*e[1],t=1;t<n-1;++t)l[t]=1,o[t]=4,u[t]=4*e[t]+2*e[t+1];for(l[n-1]=2,o[n-1]=7,u[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=l[t]/o[t-1],o[t]-=r,u[t]-=r*u[t-1];for(l[n-1]=u[n-1]/o[n-1],t=n-2;t>=0;--t)l[t]=(u[t]-l[t+1])/o[t];for(o[n-1]=(e[n]+l[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function E6(e){return new jD(e)}function Ip(e,t){this._context=e,this._t=t}Ip.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function D6(e){return new Ip(e,.5)}function O6(e){return new Ip(e,0)}function T6(e){return new Ip(e,1)}function zo(e,t){if((u=e.length)>1)for(var n=1,r,l,o=e[t[0]],u,d=o.length;n<u;++n)for(l=o,o=e[t[n]],r=0;r<d;++r)o[r][1]+=o[r][0]=isNaN(l[r][1])?l[r][0]:l[r][1]}function tx(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function A6(e,t){return e[t]}function M6(e){const t=[];return t.key=e,t}function P6(){var e=En([]),t=tx,n=zo,r=A6;function l(o){var u=Array.from(e.apply(this,arguments),M6),d,h=u.length,p=-1,m;for(const v of o)for(d=0,++p;d<h;++d)(u[d][p]=[0,+r(v,u[d].key,p,o)]).data=v;for(d=0,m=o0(t(u));d<h;++d)u[m[d]].index=d;return n(u,m),u}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:En(Array.from(o)),l):e},l.value=function(o){return arguments.length?(r=typeof o=="function"?o:En(+o),l):r},l.order=function(o){return arguments.length?(t=o==null?tx:typeof o=="function"?o:En(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(n=o??zo,l):n},l}function z6(e,t){if((r=e.length)>0){for(var n,r,l=0,o=e[0].length,u;l<o;++l){for(u=n=0;n<r;++n)u+=e[n][l][1]||0;if(u)for(n=0;n<r;++n)e[n][l][1]/=u}zo(e,t)}}function R6(e,t){if((l=e.length)>0){for(var n=0,r=e[t[0]],l,o=r.length;n<o;++n){for(var u=0,d=0;u<l;++u)d+=e[u][n][1]||0;r[n][1]+=r[n][0]=-d/2}zo(e,t)}}function I6(e,t){if(!(!((u=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var n=0,r=1,l,o,u;r<o;++r){for(var d=0,h=0,p=0;d<u;++d){for(var m=e[t[d]],v=m[r][1]||0,x=m[r-1][1]||0,j=(v-x)/2,w=0;w<d;++w){var N=e[t[w]],S=N[r][1]||0,C=N[r-1][1]||0;j+=S-C}h+=v,p+=j*v}l[r-1][1]+=l[r-1][0]=n,h&&(n-=p/h)}l[r-1][1]+=l[r-1][0]=n,zo(e,t)}}var Fv={},qv={},BS;function L6(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(qv)),qv}var Hv={},US;function wD(){return US||(US=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Hv)),Hv}var Wv={},FS;function u0(){return FS||(FS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Wv)),Wv}var Vv={},Gv={},qS;function $6(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}e.toString=t})(Gv)),Gv}var HS;function d0(){return HS||(HS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$6(),n=u0();function r(l){if(Array.isArray(l))return l.map(n.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],u=l.length;if(u===0)return o;let d=0,h="",p="",m=!1;for(l.charCodeAt(0)===46&&(o.push(""),d++);d<u;){const v=l[d];p?v==="\\"&&d+1<u?(d++,h+=l[d]):v===p?p="":h+=v:m?v==='"'||v==="'"?p=v:v==="]"?(m=!1,o.push(h),h=""):h+=v:v==="["?(m=!0,h&&(o.push(h),h="")):v==="."?h&&(o.push(h),h=""):h+=v,d++}return h&&o.push(h),o}e.toPath=r})(Vv)),Vv}var WS;function f0(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L6(),n=wD(),r=u0(),l=d0();function o(d,h,p){if(d==null)return p;switch(typeof h){case"string":{if(t.isUnsafeProperty(h))return p;const m=d[h];return m===void 0?n.isDeepKey(h)?o(d,l.toPath(h),p):p:m}case"number":case"symbol":{typeof h=="number"&&(h=r.toKey(h));const m=d[h];return m===void 0?p:m}default:{if(Array.isArray(h))return u(d,h,p);if(Object.is(h?.valueOf(),-0)?h="-0":h=String(h),t.isUnsafeProperty(h))return p;const m=d[h];return m===void 0?p:m}}}function u(d,h,p){if(h.length===0)return p;let m=d;for(let v=0;v<h.length;v++){if(m==null||t.isUnsafeProperty(h[v]))return p;m=m[h[v]]}return m===void 0?p:m}e.get=o})(Fv)),Fv}var Yv,VS;function B6(){return VS||(VS=1,Yv=f0().get),Yv}var U6=B6();const Lp=si(U6);var $a=e=>e===0?0:e>0?1:-1,ii=e=>typeof e=="number"&&e!=+e,rs=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,We=e=>(typeof e=="number"||e instanceof Number)&&!ii(e),bi=e=>We(e)||typeof e=="string",F6=0,hu=e=>{var t=++F6;return"".concat(e||"").concat(t)},Xs=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(t)&&typeof t!="string")return r;var o;if(rs(t)){if(n==null)return r;var u=t.indexOf("%");o=n*parseFloat(t.slice(0,u))/100}else o=+t;return ii(o)&&(o=r),l&&n!=null&&o>n&&(o=n),o},SD=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1};function lr(e,t,n){return We(e)&&We(t)?e+n*(t-e):t}function ND(e,t,n){if(!(!e||!e.length))return e.find(r=>r&&(typeof t=="function"?t(r):Lp(r,t))===n)}var fr=e=>e===null||typeof e>"u",Lu=e=>fr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function q6(e){return e!=null}function $u(){}var H6=["type","size","sizeType"];function nx(){return nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nx.apply(null,arguments)}function GS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function YS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(n),!0).forEach(function(r){W6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W6(e,t,n){return(t=V6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V6(e){var t=G6(e,"string");return typeof t=="symbol"?t:t+""}function G6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y6(e,t){if(e==null)return{};var n,r,l=K6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function K6(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var CD={symbolCircle:c0,symbolCross:u6,symbolDiamond:f6,symbolSquare:p6,symbolStar:g6,symbolTriangle:y6,symbolWye:b6},Q6=Math.PI/180,X6=e=>{var t="symbol".concat(Lu(e));return CD[t]||c0},Z6=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Q6;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},J6=(e,t)=>{CD["symbol".concat(Lu(e))]=t},_D=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,l=Y6(e,H6),o=YS(YS({},l),{},{type:t,size:n,sizeType:r}),u="circle";typeof t=="string"&&(u=t);var d=()=>{var x=X6(u),j=j6().type(x).size(Z6(n,r,u)),w=j();if(w!==null)return w},{className:h,cx:p,cy:m}=o,v=Lr(o);return We(p)&&We(m)&&We(n)?g.createElement("path",nx({},v,{className:yn("recharts-symbols",h),transform:"translate(".concat(p,", ").concat(m,")"),d:d()})):null};_D.registerSymbol=J6;var kD=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,p0=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(l=>{s0(l)&&(r[l]=(o=>n[l](n,o)))}),r},eR=(e,t,n)=>r=>(e(t,n,r),null),tR=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var r=null;return Object.keys(e).forEach(l=>{var o=e[l];s0(l)&&typeof o=="function"&&(r||(r={}),r[l]=eR(o,t,n))}),r};function KS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function nR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KS(Object(n),!0).forEach(function(r){rR(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rR(e,t,n){return(t=aR(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aR(e){var t=iR(e,"string");return typeof t=="symbol"?t:t+""}function iR(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $r(e,t){var n=nR({},e),r=t,l=Object.keys(t),o=l.reduce((u,d)=>(u[d]===void 0&&r[d]!==void 0&&(u[d]=r[d]),u),n);return o}var Kv={},Qv={},QS;function sR(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){const l=new Map;for(let o=0;o<n.length;o++){const u=n[o],d=r(u);l.has(d)||l.set(d,u)}return Array.from(l.values())}e.uniqBy=t})(Qv)),Qv}var Xv={},XS;function ED(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Xv)),Xv}var Zv={},Jv={},eg={},ZS;function lR(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(eg)),eg}var JS;function h0(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lR();function n(r){return r!=null&&typeof r!="function"&&t.isLength(r.length)}e.isArrayLike=n})(Jv)),Jv}var tg={},eN;function oR(){return eN||(eN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(tg)),tg}var tN;function cR(){return tN||(tN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h0(),n=oR();function r(l){return n.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=r})(Zv)),Zv}var ng={},rg={},nN;function uR(){return nN||(nN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=f0();function n(r){return function(l){return t.get(l,r)}}e.property=n})(rg)),rg}var ag={},ig={},sg={},lg={},rN;function DD(){return rN||(rN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(lg)),lg}var og={},aN;function OD(){return aN||(aN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(og)),og}var cg={},iN;function TD(){return iN||(iN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}e.eq=t})(cg)),cg}var sN;function dR(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DD(),n=OD(),r=TD();function l(m,v,x){return typeof x!="function"?l(m,v,()=>{}):o(m,v,function j(w,N,S,C,k,E){const O=x(w,N,S,C,k,E);return O!==void 0?!!O:o(w,N,j,E)},new Map)}function o(m,v,x,j){if(v===m)return!0;switch(typeof v){case"object":return u(m,v,x,j);case"function":return Object.keys(v).length>0?o(m,{...v},x,j):r.eq(m,v);default:return t.isObject(m)?typeof v=="string"?v==="":!0:r.eq(m,v)}}function u(m,v,x,j){if(v==null)return!0;if(Array.isArray(v))return h(m,v,x,j);if(v instanceof Map)return d(m,v,x,j);if(v instanceof Set)return p(m,v,x,j);const w=Object.keys(v);if(m==null)return w.length===0;if(w.length===0)return!0;if(j?.has(v))return j.get(v)===m;j?.set(v,m);try{for(let N=0;N<w.length;N++){const S=w[N];if(!n.isPrimitive(m)&&!(S in m)||v[S]===void 0&&m[S]!==void 0||v[S]===null&&m[S]!==null||!x(m[S],v[S],S,m,v,j))return!1}return!0}finally{j?.delete(v)}}function d(m,v,x,j){if(v.size===0)return!0;if(!(m instanceof Map))return!1;for(const[w,N]of v.entries()){const S=m.get(w);if(x(S,N,w,m,v,j)===!1)return!1}return!0}function h(m,v,x,j){if(v.length===0)return!0;if(!Array.isArray(m))return!1;const w=new Set;for(let N=0;N<v.length;N++){const S=v[N];let C=!1;for(let k=0;k<m.length;k++){if(w.has(k))continue;const E=m[k];let O=!1;if(x(E,S,N,m,v,j)&&(O=!0),O){w.add(k),C=!0;break}}if(!C)return!1}return!0}function p(m,v,x,j){return v.size===0?!0:m instanceof Set?h([...m],[...v],x,j):!1}e.isMatchWith=l,e.isSetMatch=p})(sg)),sg}var lN;function AD(){return lN||(lN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dR();function n(r,l){return t.isMatchWith(r,l,()=>{})}e.isMatch=n})(ig)),ig}var ug={},dg={},fg={},oN;function fR(){return oN||(oN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}e.getSymbols=t})(fg)),fg}var pg={},cN;function MD(){return cN||(cN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(pg)),pg}var hg={},uN;function PD(){return uN||(uN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",r="[object Number]",l="[object Boolean]",o="[object Arguments]",u="[object Symbol]",d="[object Date]",h="[object Map]",p="[object Set]",m="[object Array]",v="[object Function]",x="[object ArrayBuffer]",j="[object Object]",w="[object Error]",N="[object DataView]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",k="[object Uint16Array]",E="[object Uint32Array]",O="[object BigUint64Array]",D="[object Int8Array]",A="[object Int16Array]",M="[object Int32Array]",q="[object BigInt64Array]",te="[object Float32Array]",ce="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=x,e.arrayTag=m,e.bigInt64ArrayTag=q,e.bigUint64ArrayTag=O,e.booleanTag=l,e.dataViewTag=N,e.dateTag=d,e.errorTag=w,e.float32ArrayTag=te,e.float64ArrayTag=ce,e.functionTag=v,e.int16ArrayTag=A,e.int32ArrayTag=M,e.int8ArrayTag=D,e.mapTag=h,e.numberTag=r,e.objectTag=j,e.regexpTag=t,e.setTag=p,e.stringTag=n,e.symbolTag=u,e.uint16ArrayTag=k,e.uint32ArrayTag=E,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=C})(hg)),hg}var mg={},dN;function pR(){return dN||(dN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(mg)),mg}var fN;function zD(){return fN||(fN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fR(),n=MD(),r=PD(),l=OD(),o=pR();function u(m,v){return d(m,void 0,m,new Map,v)}function d(m,v,x,j=new Map,w=void 0){const N=w?.(m,v,x,j);if(N!==void 0)return N;if(l.isPrimitive(m))return m;if(j.has(m))return j.get(m);if(Array.isArray(m)){const S=new Array(m.length);j.set(m,S);for(let C=0;C<m.length;C++)S[C]=d(m[C],C,x,j,w);return Object.hasOwn(m,"index")&&(S.index=m.index),Object.hasOwn(m,"input")&&(S.input=m.input),S}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const S=new RegExp(m.source,m.flags);return S.lastIndex=m.lastIndex,S}if(m instanceof Map){const S=new Map;j.set(m,S);for(const[C,k]of m)S.set(C,d(k,C,x,j,w));return S}if(m instanceof Set){const S=new Set;j.set(m,S);for(const C of m)S.add(d(C,void 0,x,j,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(o.isTypedArray(m)){const S=new(Object.getPrototypeOf(m)).constructor(m.length);j.set(m,S);for(let C=0;C<m.length;C++)S[C]=d(m[C],C,x,j,w);return S}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const S=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return j.set(m,S),h(S,m,x,j,w),S}if(typeof File<"u"&&m instanceof File){const S=new File([m],m.name,{type:m.type});return j.set(m,S),h(S,m,x,j,w),S}if(typeof Blob<"u"&&m instanceof Blob){const S=new Blob([m],{type:m.type});return j.set(m,S),h(S,m,x,j,w),S}if(m instanceof Error){const S=new m.constructor;return j.set(m,S),S.message=m.message,S.name=m.name,S.stack=m.stack,S.cause=m.cause,h(S,m,x,j,w),S}if(m instanceof Boolean){const S=new Boolean(m.valueOf());return j.set(m,S),h(S,m,x,j,w),S}if(m instanceof Number){const S=new Number(m.valueOf());return j.set(m,S),h(S,m,x,j,w),S}if(m instanceof String){const S=new String(m.valueOf());return j.set(m,S),h(S,m,x,j,w),S}if(typeof m=="object"&&p(m)){const S=Object.create(Object.getPrototypeOf(m));return j.set(m,S),h(S,m,x,j,w),S}return m}function h(m,v,x=m,j,w){const N=[...Object.keys(v),...t.getSymbols(v)];for(let S=0;S<N.length;S++){const C=N[S],k=Object.getOwnPropertyDescriptor(m,C);(k==null||k.writable)&&(m[C]=d(v[C],C,x,j,w))}}function p(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=u,e.cloneDeepWithImpl=d,e.copyProperties=h})(dg)),dg}var pN;function hR(){return pN||(pN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zD();function n(r){return t.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}e.cloneDeep=n})(ug)),ug}var hN;function mR(){return hN||(hN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AD(),n=hR();function r(l){return l=n.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=r})(ag)),ag}var vg={},gg={},yg={},mN;function vR(){return mN||(mN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zD(),n=PD();function r(l,o){return t.cloneDeepWith(l,(u,d,h,p)=>{const m=o?.(u,d,h,p);if(m!==void 0)return m;if(typeof l=="object")switch(Object.prototype.toString.call(l)){case n.numberTag:case n.stringTag:case n.booleanTag:{const v=new l.constructor(l?.valueOf());return t.copyProperties(v,l),v}case n.argumentsTag:{const v={};return t.copyProperties(v,l),v.length=l.length,v[Symbol.iterator]=l[Symbol.iterator],v}default:return}})}e.cloneDeepWith=r})(yg)),yg}var vN;function gR(){return vN||(vN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vR();function n(r){return t.cloneDeepWith(r)}e.cloneDeep=n})(gg)),gg}var xg={},bg={},gN;function RD(){return gN||(gN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(r,l=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<l;case"symbol":return!1;case"string":return t.test(r)}}e.isIndex=n})(bg)),bg}var jg={},yN;function yR(){return yN||(yN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MD();function n(r){return r!==null&&typeof r=="object"&&t.getTag(r)==="[object Arguments]"}e.isArguments=n})(jg)),jg}var xN;function xR(){return xN||(xN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wD(),n=RD(),r=yR(),l=d0();function o(u,d){let h;if(Array.isArray(d)?h=d:typeof d=="string"&&t.isDeepKey(d)&&u?.[d]==null?h=l.toPath(d):h=[d],h.length===0)return!1;let p=u;for(let m=0;m<h.length;m++){const v=h[m];if((p==null||!Object.hasOwn(p,v))&&!((Array.isArray(p)||r.isArguments(p))&&n.isIndex(v)&&v<p.length))return!1;p=p[v]}return!0}e.has=o})(xg)),xg}var bN;function bR(){return bN||(bN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AD(),n=u0(),r=gR(),l=f0(),o=xR();function u(d,h){switch(typeof d){case"object":{Object.is(d?.valueOf(),-0)&&(d="-0");break}case"number":{d=n.toKey(d);break}}return h=r.cloneDeep(h),function(p){const m=l.get(p,d);return m===void 0?o.has(p,d):h===void 0?m===void 0:t.isMatch(m,h)}}e.matchesProperty=u})(vg)),vg}var jN;function jR(){return jN||(jN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ED(),n=uR(),r=mR(),l=bR();function o(u){if(u==null)return t.identity;switch(typeof u){case"function":return u;case"object":return Array.isArray(u)&&u.length===2?l.matchesProperty(u[0],u[1]):r.matches(u);case"string":case"symbol":case"number":return n.property(u)}}e.iteratee=o})(ng)),ng}var wN;function wR(){return wN||(wN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sR(),n=ED(),r=cR(),l=jR();function o(u,d=n.identity){return r.isArrayLikeObject(u)?t.uniqBy(Array.from(u),l.iteratee(d)):[]}e.uniqBy=o})(Kv)),Kv}var wg,SN;function SR(){return SN||(SN=1,wg=wR().uniqBy),wg}var NR=SR();const NN=si(NR);function CR(e,t,n){return t===!0?NN(e,n):typeof t=="function"?NN(e,t):e}var Sg={exports:{}},Ng={},Cg={exports:{}},_g={};var CN;function _R(){if(CN)return _g;CN=1;var e=qo();function t(v,x){return v===x&&(v!==0||1/v===1/x)||v!==v&&x!==x}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,l=e.useEffect,o=e.useLayoutEffect,u=e.useDebugValue;function d(v,x){var j=x(),w=r({inst:{value:j,getSnapshot:x}}),N=w[0].inst,S=w[1];return o(function(){N.value=j,N.getSnapshot=x,h(N)&&S({inst:N})},[v,j,x]),l(function(){return h(N)&&S({inst:N}),v(function(){h(N)&&S({inst:N})})},[v]),u(j),j}function h(v){var x=v.getSnapshot;v=v.value;try{var j=x();return!n(v,j)}catch{return!0}}function p(v,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return _g.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,_g}var _N;function kR(){return _N||(_N=1,Cg.exports=_R()),Cg.exports}var kN;function ER(){if(kN)return Ng;kN=1;var e=qo(),t=kR();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var r=typeof Object.is=="function"?Object.is:n,l=t.useSyncExternalStore,o=e.useRef,u=e.useEffect,d=e.useMemo,h=e.useDebugValue;return Ng.useSyncExternalStoreWithSelector=function(p,m,v,x,j){var w=o(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=d(function(){function C(A){if(!k){if(k=!0,E=A,A=x(A),j!==void 0&&N.hasValue){var M=N.value;if(j(M,A))return O=M}return O=A}if(M=O,r(E,A))return M;var q=x(A);return j!==void 0&&j(M,q)?(E=A,M):(E=A,O=q)}var k=!1,E,O,D=v===void 0?null:v;return[function(){return C(m())},D===null?void 0:function(){return C(D())}]},[m,v,x,j]);var S=l(p,w[0],w[1]);return u(function(){N.hasValue=!0,N.value=S},[S]),h(S),S},Ng}var EN;function DR(){return EN||(EN=1,Sg.exports=ER()),Sg.exports}var OR=DR(),m0=g.createContext(null),TR=e=>e,Nr=()=>{var e=g.useContext(m0);return e?e.store.dispatch:TR},Af=()=>{},AR=()=>Af,MR=(e,t)=>e===t;function Je(e){var t=g.useContext(m0);return OR.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:AR,t?t.store.getState:Af,t?t.store.getState:Af,t?e:Af,MR)}function PR(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function zR(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function RR(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var DN=e=>Array.isArray(e)?e:[e];function IR(e){const t=Array.isArray(e[0])?e[0]:e;return RR(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function LR(e,t){const n=[],{length:r}=e;for(let l=0;l<r;l++)n.push(e[l].apply(null,t));return n}var $R=class{constructor(e){this.value=e}deref(){return this.value}},BR=typeof WeakRef<"u"?WeakRef:$R,UR=0,ON=1;function ff(){return{s:UR,v:void 0,o:null,p:null}}function ID(e,t={}){let n=ff();const{resultEqualityCheck:r}=t;let l,o=0;function u(){let d=n;const{length:h}=arguments;for(let v=0,x=h;v<x;v++){const j=arguments[v];if(typeof j=="function"||typeof j=="object"&&j!==null){let w=d.o;w===null&&(d.o=w=new WeakMap);const N=w.get(j);N===void 0?(d=ff(),w.set(j,d)):d=N}else{let w=d.p;w===null&&(d.p=w=new Map);const N=w.get(j);N===void 0?(d=ff(),w.set(j,d)):d=N}}const p=d;let m;if(d.s===ON)m=d.v;else if(m=e.apply(null,arguments),o++,r){const v=l?.deref?.()??l;v!=null&&r(v,m)&&(m=v,o!==0&&o--),l=typeof m=="object"&&m!==null||typeof m=="function"?new BR(m):m}return p.s=ON,p.v=m,m}return u.clearCache=()=>{n=ff(),u.resetResultsCount()},u.resultsCount=()=>o,u.resetResultsCount=()=>{o=0},u}function FR(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...l)=>{let o=0,u=0,d,h={},p=l.pop();typeof p=="object"&&(h=p,p=l.pop()),PR(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const m={...n,...h},{memoize:v,memoizeOptions:x=[],argsMemoize:j=ID,argsMemoizeOptions:w=[]}=m,N=DN(x),S=DN(w),C=IR(l),k=v(function(){return o++,p.apply(null,arguments)},...N),E=j(function(){u++;const D=LR(C,arguments);return d=k.apply(null,D),d},...S);return Object.assign(E,{resultFunc:p,memoizedResultFunc:k,dependencies:C,dependencyRecomputations:()=>u,resetDependencyRecomputations:()=>{u=0},lastResult:()=>d,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:v,argsMemoize:j})};return Object.assign(r,{withTypes:()=>r}),r}var pe=FR(ID),qR=Object.assign((e,t=pe)=>{zR(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((u,d,h)=>(u[n[h]]=d,u),{}))},{withTypes:()=>qR}),kg={},Eg={},Dg={},TN;function HR(){return TN||(TN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,l,o)=>{if(r!==l){const u=t(r),d=t(l);if(u===d&&u===0){if(r<l)return o==="desc"?1:-1;if(r>l)return o==="desc"?-1:1}return o==="desc"?d-u:u-d}return 0};e.compareValues=n})(Dg)),Dg}var Og={},Tg={},AN;function LD(){return AN||(AN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(Tg)),Tg}var MN;function WR(){return MN||(MN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LD(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function l(o,u){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||u!=null&&Object.hasOwn(u,o)}e.isKey=l})(Og)),Og}var PN;function VR(){return PN||(PN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HR(),n=WR(),r=d0();function l(o,u,d,h){if(o==null)return[];d=h?void 0:d,Array.isArray(o)||(o=Object.values(o)),Array.isArray(u)||(u=u==null?[null]:[u]),u.length===0&&(u=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(j=>String(j));const p=(j,w)=>{let N=j;for(let S=0;S<w.length&&N!=null;++S)N=N[w[S]];return N},m=(j,w)=>w==null||j==null?w:typeof j=="object"&&"key"in j?Object.hasOwn(w,j.key)?w[j.key]:p(w,j.path):typeof j=="function"?j(w):Array.isArray(j)?p(w,j):typeof w=="object"?w[j]:w,v=u.map(j=>(Array.isArray(j)&&j.length===1&&(j=j[0]),j==null||typeof j=="function"||Array.isArray(j)||n.isKey(j)?j:{key:j,path:r.toPath(j)}));return o.map(j=>({original:j,criteria:v.map(w=>m(w,j))})).slice().sort((j,w)=>{for(let N=0;N<v.length;N++){const S=t.compareValues(j.criteria[N],w.criteria[N],d[N]);if(S!==0)return S}return 0}).map(j=>j.original)}e.orderBy=l})(Eg)),Eg}var Ag={},zN;function GR(){return zN||(zN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r=1){const l=[],o=Math.floor(r),u=(d,h)=>{for(let p=0;p<d.length;p++){const m=d[p];Array.isArray(m)&&h<o?u(m,h+1):l.push(m)}};return u(n,0),l}e.flatten=t})(Ag)),Ag}var Mg={},RN;function $D(){return RN||(RN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RD(),n=h0(),r=DD(),l=TD();function o(u,d,h){return r.isObject(h)&&(typeof d=="number"&&n.isArrayLike(h)&&t.isIndex(d)&&d<h.length||typeof d=="string"&&d in h)?l.eq(h[d],u):!1}e.isIterateeCall=o})(Mg)),Mg}var IN;function YR(){return IN||(IN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VR(),n=GR(),r=$D();function l(o,...u){const d=u.length;return d>1&&r.isIterateeCall(o,u[0],u[1])?u=[]:d>2&&r.isIterateeCall(u[0],u[1],u[2])&&(u=[u[0]]),t.orderBy(o,n.flatten(u),["asc"])}e.sortBy=l})(kg)),kg}var Pg,LN;function KR(){return LN||(LN=1,Pg=YR().sortBy),Pg}var QR=KR();const $p=si(QR);var BD=e=>e.legend.settings,XR=e=>e.legend.size,ZR=e=>e.legend.payload;pe([ZR,BD],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?$p(r,n):r});var pf=1;function JR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=g.useState({height:0,left:0,top:0,width:0}),r=g.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),u={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(u.height-t.height)>pf||Math.abs(u.left-t.left)>pf||Math.abs(u.top-t.top)>pf||Math.abs(u.width-t.width)>pf)&&n({height:u.height,left:u.left,top:u.top,width:u.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}function Or(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var eI=typeof Symbol=="function"&&Symbol.observable||"@@observable",$N=eI,zg=()=>Math.random().toString(36).substring(7).split("").join("."),tI={INIT:`@@redux/INIT${zg()}`,REPLACE:`@@redux/REPLACE${zg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${zg()}`},Hf=tI;function v0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function UD(e,t,n){if(typeof e!="function")throw new Error(Or(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Or(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Or(1));return n(UD)(e,t)}let r=e,l=t,o=new Map,u=o,d=0,h=!1;function p(){u===o&&(u=new Map,o.forEach((S,C)=>{u.set(C,S)}))}function m(){if(h)throw new Error(Or(3));return l}function v(S){if(typeof S!="function")throw new Error(Or(4));if(h)throw new Error(Or(5));let C=!0;p();const k=d++;return u.set(k,S),function(){if(C){if(h)throw new Error(Or(6));C=!1,p(),u.delete(k),o=null}}}function x(S){if(!v0(S))throw new Error(Or(7));if(typeof S.type>"u")throw new Error(Or(8));if(typeof S.type!="string")throw new Error(Or(17));if(h)throw new Error(Or(9));try{h=!0,l=r(l,S)}finally{h=!1}return(o=u).forEach(k=>{k()}),S}function j(S){if(typeof S!="function")throw new Error(Or(10));r=S,x({type:Hf.REPLACE})}function w(){const S=v;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Or(11));function k(){const O=C;O.next&&O.next(m())}return k(),{unsubscribe:S(k)}},[$N](){return this}}}return x({type:Hf.INIT}),{dispatch:x,subscribe:v,getState:m,replaceReducer:j,[$N]:w}}function nI(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Hf.INIT})>"u")throw new Error(Or(12));if(typeof n(void 0,{type:Hf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Or(13))})}function FD(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const u=t[o];typeof e[u]=="function"&&(n[u]=e[u])}const r=Object.keys(n);let l;try{nI(n)}catch(o){l=o}return function(u={},d){if(l)throw l;let h=!1;const p={};for(let m=0;m<r.length;m++){const v=r[m],x=n[v],j=u[v],w=x(j,d);if(typeof w>"u")throw d&&d.type,new Error(Or(14));p[v]=w,h=h||w!==j}return h=h||r.length!==Object.keys(u).length,h?p:u}}function Wf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function rI(...e){return t=>(n,r)=>{const l=t(n,r);let o=()=>{throw new Error(Or(15))};const u={getState:l.getState,dispatch:(h,...p)=>o(h,...p)},d=e.map(h=>h(u));return o=Wf(...d)(l.dispatch),{...l,dispatch:o}}}function qD(e){return v0(e)&&"type"in e&&typeof e.type=="string"}var HD=Symbol.for("immer-nothing"),BN=Symbol.for("immer-draftable"),Qr=Symbol.for("immer-state");function Ja(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var wa=Object,Ro=wa.getPrototypeOf,Vf="constructor",Bp="prototype",rx="configurable",Gf="enumerable",Mf="writable",mu="value",as=e=>!!e&&!!e[Qr];function ji(e){return e?WD(e)||Up(e)||!!e[BN]||!!e[Vf]?.[BN]||Fp(e)||qp(e):!1}var aI=wa[Bp][Vf].toString(),UN=new WeakMap;function WD(e){if(!e||!g0(e))return!1;const t=Ro(e);if(t===null||t===wa[Bp])return!0;const n=wa.hasOwnProperty.call(t,Vf)&&t[Vf];if(n===Object)return!0;if(!ko(n))return!1;let r=UN.get(n);return r===void 0&&(r=Function.toString.call(n),UN.set(n,r)),r===aI}function Bu(e,t,n=!0){Uu(e)===0?(n?Reflect.ownKeys(e):wa.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((r,l)=>t(l,r,e))}function Uu(e){const t=e[Qr];return t?t.type_:Up(e)?1:Fp(e)?2:qp(e)?3:0}var FN=(e,t,n=Uu(e))=>n===2?e.has(t):wa[Bp].hasOwnProperty.call(e,t),ax=(e,t,n=Uu(e))=>n===2?e.get(t):e[t],Yf=(e,t,n,r=Uu(e))=>{r===2?e.set(t,n):r===3?e.add(n):e[t]=n};function iI(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Up=Array.isArray,Fp=e=>e instanceof Map,qp=e=>e instanceof Set,g0=e=>typeof e=="object",ko=e=>typeof e=="function",Rg=e=>typeof e=="boolean",Wi=e=>e.copy_||e.base_,y0=e=>e.modified_?e.copy_:e.base_;function ix(e,t){if(Fp(e))return new Map(e);if(qp(e))return new Set(e);if(Up(e))return Array[Bp].slice.call(e);const n=WD(e);if(t===!0||t==="class_only"&&!n){const r=wa.getOwnPropertyDescriptors(e);delete r[Qr];let l=Reflect.ownKeys(r);for(let o=0;o<l.length;o++){const u=l[o],d=r[u];d[Mf]===!1&&(d[Mf]=!0,d[rx]=!0),(d.get||d.set)&&(r[u]={[rx]:!0,[Mf]:!0,[Gf]:d[Gf],[mu]:e[u]})}return wa.create(Ro(e),r)}else{const r=Ro(e);if(r!==null&&n)return{...e};const l=wa.create(r);return wa.assign(l,e)}}function x0(e,t=!1){return Hp(e)||as(e)||(Uu(e)>1&&wa.defineProperties(e,{set:hf,add:hf,clear:hf,delete:hf}),wa.freeze(e),t&&Bu(e,(n,r)=>{x0(r,!0)},!1)),e}function sI(){Ja(2)}var hf={[mu]:sI};function Hp(e){return e===null||!g0(e)?!0:wa.isFrozen(e)}var Kf="MapSet",sx="Patches",VD={};function Io(e){const t=VD[e];return t||Ja(0,e),t}var lI=e=>!!VD[e],vu,GD=()=>vu,oI=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:lI(Kf)?Io(Kf):void 0});function qN(e,t){t&&(e.patchPlugin_=Io(sx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function lx(e){ox(e),e.drafts_.forEach(cI),e.drafts_=null}function ox(e){e===vu&&(vu=e.parent_)}var HN=e=>vu=oI(vu,e);function cI(e){const t=e[Qr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function WN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Qr].modified_&&(lx(t),Ja(4)),ji(e)&&(e=VN(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(n[Qr].base_,e,t)}else e=VN(t,n);return uI(t,e,!0),lx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==HD?e:void 0}function VN(e,t){if(Hp(t))return t;const n=t[Qr];if(!n)return b0(t,e.handledSet_,e);if(!Wp(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(e);QD(n,e)}return n.copy_}function uI(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&x0(t,n)}function YD(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Wp=(e,t)=>e.scope_===t,dI=[];function KD(e,t,n,r){const l=Wi(e),o=e.type_;if(r!==void 0&&ax(l,r,o)===t){Yf(l,r,n,o);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;Bu(l,(h,p)=>{if(as(p)){const m=d.get(p)||[];m.push(h),d.set(p,m)}})}const u=e.draftLocations_.get(t)??dI;for(const d of u)Yf(l,d,n,o)}function fI(e,t,n){e.callbacks_.push(function(l){const o=t;if(!o||!Wp(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const u=y0(o);KD(e,o.draft_??o,u,n),QD(o,l)})}function QD(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const l=r.getPath(e);l&&r.generatePatches_(e,l,t)}YD(e)}}function pI(e,t,n){const{scope_:r}=e;if(as(n)){const l=n[Qr];Wp(l,r)&&l.callbacks_.push(function(){Pf(e);const u=y0(l);KD(e,n,u,t)})}else ji(n)&&e.callbacks_.push(function(){const o=Wi(e);ax(o,t,e.type_)===n&&r.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&b0(ax(e.copy_,t,e.type_),r.handledSet_,r)})}function b0(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||as(e)||t.has(e)||!ji(e)||Hp(e)||(t.add(e),Bu(e,(r,l)=>{if(as(l)){const o=l[Qr];if(Wp(o,n)){const u=y0(o);Yf(e,r,u,e.type_),YD(o)}}else ji(l)&&b0(l,t,n)})),e}function hI(e,t){const n=Up(e),r={type_:n?1:0,scope_:t?t.scope_:GD(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=r,o=j0;n&&(l=[r],o=gu);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return r.draft_=d,r.revoke_=u,[d,r]}var j0={get(e,t){if(t===Qr)return e;const n=Wi(e);if(!FN(n,t,e.type_))return mI(e,n,t);const r=n[t];if(e.finalized_||!ji(r))return r;if(r===Ig(e.base_,t)){Pf(e);const l=e.type_===1?+t:t,o=ux(e.scope_,r,e,l);return e.copy_[l]=o}return r},has(e,t){return t in Wi(e)},ownKeys(e){return Reflect.ownKeys(Wi(e))},set(e,t,n){const r=XD(Wi(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const l=Ig(Wi(e),t),o=l?.[Qr];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(iI(n,l)&&(n!==void 0||FN(e.base_,t,e.type_)))return!0;Pf(e),cx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),pI(e,t,n)),!0},deleteProperty(e,t){return Pf(e),Ig(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),cx(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Wi(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{[Mf]:!0,[rx]:e.type_!==1||t!=="length",[Gf]:r[Gf],[mu]:n[t]}},defineProperty(){Ja(11)},getPrototypeOf(e){return Ro(e.base_)},setPrototypeOf(){Ja(12)}},gu={};Bu(j0,(e,t)=>{gu[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});gu.deleteProperty=function(e,t){return gu.set.call(this,e,t,void 0)};gu.set=function(e,t,n){return j0.set.call(this,e[0],t,n,e[0])};function Ig(e,t){const n=e[Qr];return(n?Wi(n):e)[t]}function mI(e,t,n){const r=XD(t,n);return r?mu in r?r[mu]:r.get?.call(e.draft_):void 0}function XD(e,t){if(!(t in e))return;let n=Ro(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Ro(n)}}function cx(e){e.modified_||(e.modified_=!0,e.parent_&&cx(e.parent_))}function Pf(e){e.copy_||(e.assigned_=new Map,e.copy_=ix(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vI=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,l)=>{if(ko(n)&&!ko(r)){const u=r;r=n;const d=this;return function(p=u,...m){return d.produce(p,v=>r.call(this,v,...m))}}ko(r)||Ja(6),l!==void 0&&!ko(l)&&Ja(7);let o;if(ji(n)){const u=HN(this),d=ux(u,n,void 0);let h=!0;try{o=r(d),h=!1}finally{h?lx(u):ox(u)}return qN(u,l),WN(o,u)}else if(!n||!g0(n)){if(o=r(n),o===void 0&&(o=n),o===HD&&(o=void 0),this.autoFreeze_&&x0(o,!0),l){const u=[],d=[];Io(sx).generateReplacementPatches_(n,o,{patches_:u,inversePatches_:d}),l(u,d)}return o}else Ja(1,n)},this.produceWithPatches=(n,r)=>{if(ko(n))return(d,...h)=>this.produceWithPatches(d,p=>n(p,...h));let l,o;return[this.produce(n,r,(d,h)=>{l=d,o=h}),l,o]},Rg(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Rg(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Rg(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ji(t)||Ja(8),as(t)&&(t=ri(t));const n=HN(this),r=ux(n,t,void 0);return r[Qr].isManual_=!0,ox(n),r}finishDraft(t,n){const r=t&&t[Qr];(!r||!r.isManual_)&&Ja(9);const{scope_:l}=r;return qN(l,n),WN(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let r;for(r=n.length-1;r>=0;r--){const o=n[r];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}r>-1&&(n=n.slice(r+1));const l=Io(sx).applyPatches_;return as(t)?l(t,n):this.produce(t,o=>l(o,n))}};function ux(e,t,n,r){const[l,o]=Fp(t)?Io(Kf).proxyMap_(t,n):qp(t)?Io(Kf).proxySet_(t,n):hI(t,n);return(n?.scope_??GD()).drafts_.push(l),o.callbacks_=n?.callbacks_??[],o.key_=r,n&&r!==void 0?fI(n,o,r):o.callbacks_.push(function(h){h.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:p}=h;o.modified_&&p&&p.generatePatches_(o,[],h)}),l}function ri(e){return as(e)||Ja(10,e),ZD(e)}function ZD(e){if(!ji(e)||Hp(e))return e;const t=e[Qr];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ix(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=ix(e,!0);return Bu(n,(l,o)=>{Yf(n,l,ZD(o))},r),t&&(t.finalized_=!1),n}var gI=new vI,JD=gI.produce;function eO(e){return({dispatch:n,getState:r})=>l=>o=>typeof o=="function"?o(n,r,e):l(o)}var yI=eO(),xI=eO,bI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Wf:Wf.apply(null,arguments)};function qa(e,t){function n(...r){if(t){let l=t(...r);if(!l)throw new Error(Sa(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>qD(r)&&r.type===e,n}var tO=class su extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,su.prototype)}static get[Symbol.species](){return su}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new su(...t[0].concat(this)):new su(...t.concat(this))}};function GN(e){return ji(e)?JD(e,()=>{}):e}function mf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function jI(e){return typeof e=="boolean"}var wI=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let u=new tO;return n&&(jI(n)?u.push(yI):u.push(xI(n.extraArgument))),u},nO="RTK_autoBatch",Rn=()=>e=>({payload:e,meta:{[nO]:!0}}),YN=e=>t=>{setTimeout(t,e)},rO=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let l=!0,o=!1,u=!1;const d=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:YN(10):e.type==="callback"?e.queueNotification:YN(e.timeout),p=()=>{u=!1,o&&(o=!1,d.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const v=()=>l&&m(),x=r.subscribe(v);return d.add(m),()=>{x(),d.delete(m)}},dispatch(m){try{return l=!m?.meta?.[nO],o=!l,o&&(u||(u=!0,h(p))),r.dispatch(m)}finally{l=!0}}})},SI=e=>function(n){const{autoBatch:r=!0}=n??{};let l=new tO(e);return r&&l.push(rO(typeof r=="object"?r:void 0)),l};function NI(e){const t=wI(),{reducer:n=void 0,middleware:r,devTools:l=!0,preloadedState:o=void 0,enhancers:u=void 0}=e||{};let d;if(typeof n=="function")d=n;else if(v0(n))d=FD(n);else throw new Error(Sa(1));let h;typeof r=="function"?h=r(t):h=t();let p=Wf;l&&(p=bI({trace:!1,...typeof l=="object"&&l}));const m=rI(...h),v=SI(m);let x=typeof u=="function"?u(v):v();const j=p(...x);return UD(d,o,j)}function aO(e){const t={},n=[];let r;const l={addCase(o,u){const d=typeof o=="string"?o:o.type;if(!d)throw new Error(Sa(28));if(d in t)throw new Error(Sa(29));return t[d]=u,l},addAsyncThunk(o,u){return u.pending&&(t[o.pending.type]=u.pending),u.rejected&&(t[o.rejected.type]=u.rejected),u.fulfilled&&(t[o.fulfilled.type]=u.fulfilled),u.settled&&n.push({matcher:o.settled,reducer:u.settled}),l},addMatcher(o,u){return n.push({matcher:o,reducer:u}),l},addDefaultCase(o){return r=o,l}};return e(l),[t,n,r]}function CI(e){return typeof e=="function"}function _I(e,t){let[n,r,l]=aO(t),o;if(CI(e))o=()=>GN(e());else{const d=GN(e);o=()=>d}function u(d=o(),h){let p=[n[h.type],...r.filter(({matcher:m})=>m(h)).map(({reducer:m})=>m)];return p.filter(m=>!!m).length===0&&(p=[l]),p.reduce((m,v)=>{if(v)if(as(m)){const j=v(m,h);return j===void 0?m:j}else{if(ji(m))return JD(m,x=>v(x,h));{const x=v(m,h);if(x===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return m},d)}return u.getInitialState=o,u}var kI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",EI=(e=21)=>{let t="",n=e;for(;n--;)t+=kI[Math.random()*64|0];return t},DI=Symbol.for("rtk-slice-createasyncthunk");function OI(e,t){return`${e}/${t}`}function TI({creators:e}={}){const t=e?.asyncThunk?.[DI];return function(r){const{name:l,reducerPath:o=l}=r;if(!l)throw new Error(Sa(11));const u=(typeof r.reducers=="function"?r.reducers(MI()):r.reducers)||{},d=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(E,O){const D=typeof E=="string"?E:E.type;if(!D)throw new Error(Sa(12));if(D in h.sliceCaseReducersByType)throw new Error(Sa(13));return h.sliceCaseReducersByType[D]=O,p},addMatcher(E,O){return h.sliceMatchers.push({matcher:E,reducer:O}),p},exposeAction(E,O){return h.actionCreators[E]=O,p},exposeCaseReducer(E,O){return h.sliceCaseReducersByName[E]=O,p}};d.forEach(E=>{const O=u[E],D={reducerName:E,type:OI(l,E),createNotation:typeof r.reducers=="function"};zI(O)?II(D,O,p,t):PI(D,O,p)});function m(){const[E={},O=[],D=void 0]=typeof r.extraReducers=="function"?aO(r.extraReducers):[r.extraReducers],A={...E,...h.sliceCaseReducersByType};return _I(r.initialState,M=>{for(let q in A)M.addCase(q,A[q]);for(let q of h.sliceMatchers)M.addMatcher(q.matcher,q.reducer);for(let q of O)M.addMatcher(q.matcher,q.reducer);D&&M.addDefaultCase(D)})}const v=E=>E,x=new Map,j=new WeakMap;let w;function N(E,O){return w||(w=m()),w(E,O)}function S(){return w||(w=m()),w.getInitialState()}function C(E,O=!1){function D(M){let q=M[E];return typeof q>"u"&&O&&(q=mf(j,D,S)),q}function A(M=v){const q=mf(x,O,()=>new WeakMap);return mf(q,M,()=>{const te={};for(const[ce,G]of Object.entries(r.selectors??{}))te[ce]=AI(G,M,()=>mf(j,M,S),O);return te})}return{reducerPath:E,getSelectors:A,get selectors(){return A(D)},selectSlice:D}}const k={name:l,reducer:N,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:S,...C(o),injectInto(E,{reducerPath:O,...D}={}){const A=O??o;return E.inject({reducerPath:A,reducer:N},D),{...k,...C(A,!0)}}};return k}}function AI(e,t,n,r){function l(o,...u){let d=t(o);return typeof d>"u"&&r&&(d=n()),e(d,...u)}return l.unwrapped=e,l}var oa=TI();function MI(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function PI({type:e,reducerName:t,createNotation:n},r,l){let o,u;if("reducer"in r){if(n&&!RI(r))throw new Error(Sa(17));o=r.reducer,u=r.prepare}else o=r;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,u?qa(e,u):qa(e))}function zI(e){return e._reducerDefinitionType==="asyncThunk"}function RI(e){return e._reducerDefinitionType==="reducerWithPrepare"}function II({type:e,reducerName:t},n,r,l){if(!l)throw new Error(Sa(18));const{payloadCreator:o,fulfilled:u,pending:d,rejected:h,settled:p,options:m}=n,v=l(e,o,m);r.exposeAction(t,v),u&&r.addCase(v.fulfilled,u),d&&r.addCase(v.pending,d),h&&r.addCase(v.rejected,h),p&&r.addMatcher(v.settled,p),r.exposeCaseReducer(t,{fulfilled:u||vf,pending:d||vf,rejected:h||vf,settled:p||vf})}function vf(){}var LI="task",iO="listener",sO="completed",w0="cancelled",$I=`task-${w0}`,BI=`task-${sO}`,dx=`${iO}-${w0}`,UI=`${iO}-${sO}`,Vp=class{constructor(e){this.code=e,this.message=`${LI} ${w0} (reason: ${e})`}name="TaskAbortError";message},S0=(e,t)=>{if(typeof e!="function")throw new TypeError(Sa(32))},Qf=()=>{},lO=(e,t=Qf)=>(e.catch(t),e),oO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ol=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Tl=e=>{if(e.aborted){const{reason:t}=e;throw new Vp(t)}};function cO(e,t){let n=Qf;return new Promise((r,l)=>{const o=()=>l(new Vp(e.reason));if(e.aborted){o();return}n=oO(e,o),t.finally(()=>n()).then(r,l)}).finally(()=>{n=Qf})}var FI=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Vp?"cancelled":"rejected",error:n}}finally{t?.()}},Xf=e=>t=>lO(cO(e,t).then(n=>(Tl(e),n))),uO=e=>{const t=Xf(e);return n=>t(new Promise(r=>setTimeout(r,n)))},{assign:Ao}=Object,KN={},Gp="listenerMiddleware",qI=(e,t)=>{const n=r=>oO(e,()=>Ol(r,e.reason));return(r,l)=>{S0(r);const o=new AbortController;n(o);const u=FI(async()=>{Tl(e),Tl(o.signal);const d=await r({pause:Xf(o.signal),delay:uO(o.signal),signal:o.signal});return Tl(o.signal),d},()=>Ol(o,BI));return l?.autoJoin&&t.push(u.catch(Qf)),{result:Xf(e)(u),cancel(){Ol(o,$I)}}}},HI=(e,t)=>{const n=async(r,l)=>{Tl(t);let o=()=>{};const d=[new Promise((h,p)=>{let m=e({predicate:r,effect:(v,x)=>{x.unsubscribe(),h([v,x.getState(),x.getOriginalState()])}});o=()=>{m(),p()}})];l!=null&&d.push(new Promise(h=>setTimeout(h,l,null)));try{const h=await cO(t,Promise.race(d));return Tl(t),h}finally{o()}};return(r,l)=>lO(n(r,l))},dO=e=>{let{type:t,actionCreator:n,matcher:r,predicate:l,effect:o}=e;if(t)l=qa(t).match;else if(n)t=n.type,l=n.match;else if(r)l=r;else if(!l)throw new Error(Sa(21));return S0(o),{predicate:l,type:t,effect:o}},fO=Ao(e=>{const{type:t,predicate:n,effect:r}=dO(e);return{id:EI(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Sa(22))}}},{withTypes:()=>fO}),QN=(e,t)=>{const{type:n,effect:r,predicate:l}=dO(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===l)&&o.effect===r)},fx=e=>{e.pending.forEach(t=>{Ol(t,dx)})},WI=(e,t)=>()=>{for(const n of t.keys())fx(n);e.clear()},XN=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},pO=Ao(qa(`${Gp}/add`),{withTypes:()=>pO}),VI=qa(`${Gp}/removeAll`),hO=Ao(qa(`${Gp}/remove`),{withTypes:()=>hO}),GI=(...e)=>{console.error(`${Gp}/error`,...e)},Fu=(e={})=>{const t=new Map,n=new Map,r=j=>{const w=n.get(j)??0;n.set(j,w+1)},l=j=>{const w=n.get(j)??1;w===1?n.delete(j):n.set(j,w-1)},{extra:o,onError:u=GI}=e;S0(u);const d=j=>(j.unsubscribe=()=>t.delete(j.id),t.set(j.id,j),w=>{j.unsubscribe(),w?.cancelActive&&fx(j)}),h=j=>{const w=QN(t,j)??fO(j);return d(w)};Ao(h,{withTypes:()=>h});const p=j=>{const w=QN(t,j);return w&&(w.unsubscribe(),j.cancelActive&&fx(w)),!!w};Ao(p,{withTypes:()=>p});const m=async(j,w,N,S)=>{const C=new AbortController,k=HI(h,C.signal),E=[];try{j.pending.add(C),r(j),await Promise.resolve(j.effect(w,Ao({},N,{getOriginalState:S,condition:(O,D)=>k(O,D).then(Boolean),take:k,delay:uO(C.signal),pause:Xf(C.signal),extra:o,signal:C.signal,fork:qI(C.signal,E),unsubscribe:j.unsubscribe,subscribe:()=>{t.set(j.id,j)},cancelActiveListeners:()=>{j.pending.forEach((O,D,A)=>{O!==C&&(Ol(O,dx),A.delete(O))})},cancel:()=>{Ol(C,dx),j.pending.delete(C)},throwIfCancelled:()=>{Tl(C.signal)}})))}catch(O){O instanceof Vp||XN(u,O,{raisedBy:"effect"})}finally{await Promise.all(E),Ol(C,UI),l(j),j.pending.delete(C)}},v=WI(t,n);return{middleware:j=>w=>N=>{if(!qD(N))return w(N);if(pO.match(N))return h(N.payload);if(VI.match(N)){v();return}if(hO.match(N))return p(N.payload);let S=j.getState();const C=()=>{if(S===KN)throw new Error(Sa(23));return S};let k;try{if(k=w(N),t.size>0){const E=j.getState(),O=Array.from(t.values());for(const D of O){let A=!1;try{A=D.predicate(N,E,S)}catch(M){A=!1,XN(u,M,{raisedBy:"predicate"})}A&&m(D,N,j,C)}}}finally{S=KN}return k},startListening:h,stopListening:p,clearListeners:v}};function Sa(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var YI={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},mO=oa({name:"chartLayout",initialState:YI,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,l,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(r=t.payload.right)!==null&&r!==void 0?r:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:KI,setLayout:QI,setChartSize:XI,setScale:ZI}=mO.actions,JI=mO.reducer;function vO(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function ZN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZN(Object(n),!0).forEach(function(r){eL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eL(e,t,n){return(t=tL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tL(e){var t=nL(e,"string");return typeof t=="symbol"?t:t+""}function nL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sr(e,t,n){return fr(e)||fr(t)?n:bi(t)?Lp(e,t,n):typeof t=="function"?t(e):n}var rL=(e,t,n)=>{if(t&&n){var{width:r,height:l}=n,{align:o,verticalAlign:u,layout:d}=t;if((d==="vertical"||d==="horizontal"&&u==="middle")&&o!=="center"&&We(e[o]))return Do(Do({},e),{},{[o]:e[o]+(r||0)});if((d==="horizontal"||d==="vertical"&&o==="center")&&u!=="middle"&&We(e[u]))return Do(Do({},e),{},{[u]:e[u]+(l||0)})}return e},_i=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",gO=(e,t,n,r)=>{if(r)return e.map(d=>d.coordinate);var l,o,u=e.map(d=>(d.coordinate===t&&(l=!0),d.coordinate===n&&(o=!0),d.coordinate));return l||u.push(t),o||u.push(n),u},yO=(e,t,n)=>{if(!e)return null;var{duplicateDomain:r,type:l,range:o,scale:u,realScaleType:d,isCategorical:h,categoricalDomain:p,tickCount:m,ticks:v,niceTicks:x,axisType:j}=e;if(!u)return null;var w=d==="scaleBand"&&u.bandwidth?u.bandwidth()/2:2,N=l==="category"&&u.bandwidth?u.bandwidth()/w:0;if(N=j==="angleAxis"&&o&&o.length>=2?$a(o[0]-o[1])*2*N:N,v||x){var S=(v||x||[]).map((C,k)=>{var E=r?r.indexOf(C):C;return{coordinate:u(E)+N,value:C,offset:N,index:k}});return S.filter(C=>!ii(C.coordinate))}return h&&p?p.map((C,k)=>({coordinate:u(C)+N,value:C,index:k,offset:N})):u.ticks&&m!=null?u.ticks(m).map((C,k)=>({coordinate:u(C)+N,value:C,offset:N,index:k})):u.domain().map((C,k)=>({coordinate:u(C)+N,value:r?r[C]:C,index:k,offset:N}))},JN=1e-4,aL=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),l=Math.min(r[0],r[1])-JN,o=Math.max(r[0],r[1])+JN,u=e(t[0]),d=e(t[n-1]);(u<l||u>o||d<l||d>o)&&e.domain([t[0],t[n-1]])}},iL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var l=0,o=0,u=0;u<t;++u){var d=ii(e[u][n][1])?e[u][n][0]:e[u][n][1];d>=0?(e[u][n][0]=l,e[u][n][1]=l+d,l=e[u][n][1]):(e[u][n][0]=o,e[u][n][1]=o+d,o=e[u][n][1])}},sL=e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var l=0,o=0;o<t;++o){var u=ii(e[o][n][1])?e[o][n][0]:e[o][n][1];u>=0?(e[o][n][0]=l,e[o][n][1]=l+u,l=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},lL={sign:iL,expand:z6,none:zo,silhouette:R6,wiggle:I6,positive:sL},oL=(e,t,n)=>{var r=lL[n],l=P6().keys(t).value((o,u)=>Number(Sr(o,u,0))).order(tx).offset(r);return l(e)};function cL(e){return e==null?void 0:String(e)}function Zf(e){var{axis:t,ticks:n,bandSize:r,entry:l,index:o,dataKey:u}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!fr(l[t.dataKey])){var d=ND(n,"value",l[t.dataKey]);if(d)return d.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var h=Sr(l,fr(u)?t.dataKey:u);return fr(h)?null:t.scale(h)}var uL=e=>{var t=e.flat(2).filter(We);return[Math.min(...t),Math.max(...t)]},dL=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],fL=(e,t,n)=>{if(e!=null)return dL(Object.keys(e).reduce((r,l)=>{var o=e[l],{stackedData:u}=o,d=u.reduce((h,p)=>{var m=vO(p,t,n),v=uL(m);return[Math.min(h[0],v[0]),Math.max(h[1],v[1])]},[1/0,-1/0]);return[Math.min(d[0],r[0]),Math.max(d[1],r[1])]},[1/0,-1/0]))},eC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lo=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var l=$p(t,m=>m.coordinate),o=1/0,u=1,d=l.length;u<d;u++){var h=l[u],p=l[u-1];o=Math.min((h.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function nC(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:l,name:o}=e;return Do(Do({},t),{},{dataKey:n,payload:r,value:l,name:o})}function Yp(e,t){if(e)return String(e);if(typeof t=="string")return t}var pL=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},hL=(e,t)=>t==="centric"?e.angle:e.radius,ds=e=>e.layout.width,fs=e=>e.layout.height,mL=e=>e.layout.scale,xO=e=>e.layout.margin,Kp=pe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Qp=pe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),vL="data-recharts-item-index",gL="data-recharts-item-data-key",qu=60;function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function gf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(r){yL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yL(e,t,n){return(t=xL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xL(e){var t=bL(e,"string");return typeof t=="symbol"?t:t+""}function bL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jL=e=>e.brush.height;function wL(e){var t=Qp(e);return t.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var l=typeof r.width=="number"?r.width:qu;return n+l}return n},0)}function SL(e){var t=Qp(e);return t.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var l=typeof r.width=="number"?r.width:qu;return n+l}return n},0)}function NL(e){var t=Kp(e);return t.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function CL(e){var t=Kp(e);return t.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Ar=pe([ds,fs,xO,jL,wL,SL,NL,CL,BD,XR],(e,t,n,r,l,o,u,d,h,p)=>{var m={left:(n.left||0)+l,right:(n.right||0)+o},v={top:(n.top||0)+u,bottom:(n.bottom||0)+d},x=gf(gf({},v),m),j=x.bottom;x.bottom+=r,x=rL(x,h,p);var w=e-x.left-x.right,N=t-x.top-x.bottom;return gf(gf({brushBottom:j},x),{},{width:Math.max(w,0),height:Math.max(N,0)})}),_L=pe(Ar,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),bO=pe(ds,fs,(e,t)=>({x:0,y:0,width:e,height:t})),kL=g.createContext(null),Br=()=>g.useContext(kL)!=null,Xp=e=>e.brush,Zp=pe([Xp,Ar,xO],(e,t,n)=>({height:e.height,x:We(e.x)?e.x:t.left,y:We(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:We(e.width)?e.width:t.width})),Lg={},$g={},Bg={},aC;function EL(){return aC||(aC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,r,{signal:l,edges:o}={}){let u,d=null;const h=o!=null&&o.includes("leading"),p=o==null||o.includes("trailing"),m=()=>{d!==null&&(n.apply(u,d),u=void 0,d=null)},v=()=>{p&&m(),N()};let x=null;const j=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,v()},r)},w=()=>{x!==null&&(clearTimeout(x),x=null)},N=()=>{w(),u=void 0,d=null},S=()=>{m()},C=function(...k){if(l?.aborted)return;u=this,d=k;const E=x==null;j(),h&&E&&m()};return C.schedule=j,C.cancel=N,C.flush=S,l?.addEventListener("abort",N,{once:!0}),C}e.debounce=t})(Bg)),Bg}var iC;function DL(){return iC||(iC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EL();function n(r,l=0,o={}){typeof o!="object"&&(o={});const{leading:u=!1,trailing:d=!0,maxWait:h}=o,p=Array(2);u&&(p[0]="leading"),d&&(p[1]="trailing");let m,v=null;const x=t.debounce(function(...N){m=r.apply(this,N),v=null},l,{edges:p}),j=function(...N){return h!=null&&(v===null&&(v=Date.now()),Date.now()-v>=h)?(m=r.apply(this,N),v=Date.now(),x.cancel(),x.schedule(),m):(x.apply(this,N),m)},w=()=>(x.flush(),m);return j.cancel=x.cancel,j.flush=w,j}e.debounce=n})($g)),$g}var sC;function OL(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DL();function n(r,l=0,o={}){const{leading:u=!0,trailing:d=!0}=o;return t.debounce(r,l,{leading:u,maxWait:l,trailing:d})}e.throttle=n})(Lg)),Lg}var Ug,lC;function TL(){return lC||(lC=1,Ug=OL().throttle),Ug}var AL=TL();const ML=si(AL);var Jf=function(t,n){for(var r=arguments.length,l=new Array(r>2?r-2:0),o=2;o<r;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=0;console.warn(n.replace(/%s/g,()=>l[u++]))}},jO=(e,t,n)=>{var{width:r="100%",height:l="100%",aspect:o,maxHeight:u}=n,d=rs(r)?e:Number(r),h=rs(l)?t:Number(l);return o&&o>0&&(d?h=d/o:h&&(d=h*o),u&&h!=null&&h>u&&(h=u)),{calculatedWidth:d,calculatedHeight:h}},PL={width:0,height:0,overflow:"visible"},zL={width:0,overflowX:"visible"},RL={height:0,overflowY:"visible"},IL={},LL=e=>{var{width:t,height:n}=e,r=rs(t),l=rs(n);return r&&l?PL:r?zL:l?RL:IL};function $L(e){var{width:t,height:n,aspect:r}=e,l=t,o=n;return l===void 0&&o===void 0?(l="100%",o="100%"):l===void 0?l=r&&r>0?void 0:"100%":o===void 0&&(o=r&&r>0?void 0:"100%"),{width:l,height:o}}function Hn(e){return Number.isFinite(e)}function wi(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},px.apply(null,arguments)}function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function cC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(n),!0).forEach(function(r){BL(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BL(e,t,n){return(t=UL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UL(e){var t=FL(e,"string");return typeof t=="symbol"?t:t+""}function FL(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wO=g.createContext({width:-1,height:-1});function qL(e){return wi(e.width)&&wi(e.height)}function SO(e){var{children:t,width:n,height:r}=e,l=g.useMemo(()=>({width:n,height:r}),[n,r]);return qL(l)?g.createElement(wO.Provider,{value:l},t):null}var N0=()=>g.useContext(wO),HL=g.forwardRef((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:l,height:o,minWidth:u=0,minHeight:d,maxHeight:h,children:p,debounce:m=0,id:v,className:x,onResize:j,style:w={}}=e,N=g.useRef(null),S=g.useRef();S.current=j,g.useImperativeHandle(t,()=>N.current);var[C,k]=g.useState({containerWidth:r.width,containerHeight:r.height}),E=g.useCallback((q,te)=>{k(ce=>{var G=Math.round(q),R=Math.round(te);return ce.containerWidth===G&&ce.containerHeight===R?ce:{containerWidth:G,containerHeight:R}})},[]);g.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return $u;var q=R=>{var F,{width:he,height:ee}=R[0].contentRect;E(he,ee),(F=S.current)===null||F===void 0||F.call(S,he,ee)};m>0&&(q=ML(q,m,{trailing:!0,leading:!1}));var te=new ResizeObserver(q),{width:ce,height:G}=N.current.getBoundingClientRect();return E(ce,G),te.observe(N.current),()=>{te.disconnect()}},[E,m]);var{containerWidth:O,containerHeight:D}=C;Jf(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:A,calculatedHeight:M}=jO(O,D,{width:l,height:o,aspect:n,maxHeight:h});return Jf(A!=null&&A>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,M,l,o,u,d,n),g.createElement("div",{id:v?"".concat(v):void 0,className:yn("recharts-responsive-container",x),style:cC(cC({},w),{},{width:l,height:o,minWidth:u,minHeight:d,maxHeight:h}),ref:N},g.createElement("div",{style:LL({width:l,height:o})},g.createElement(SO,{width:A,height:M},p)))}),C0=g.forwardRef((e,t)=>{var n=N0();if(wi(n.width)&&wi(n.height))return e.children;var{width:r,height:l}=$L({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:u}=jO(void 0,void 0,{width:r,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return We(o)&&We(u)?g.createElement(SO,{width:o,height:u},e.children):g.createElement(HL,px({},e,{width:r,height:l,ref:t}))});function NO(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Jp=()=>{var e,t=Br(),n=Je(_L),r=Je(Zp),l=(e=Je(Xp))===null||e===void 0?void 0:e.padding;return!t||!r||!l?n:{width:r.width-l.left-l.right,height:r.height-l.top-l.bottom,x:l.left,y:l.top}},WL={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},CO=()=>{var e;return(e=Je(Ar))!==null&&e!==void 0?e:WL},_O=()=>Je(ds),kO=()=>Je(fs),xn=e=>e.layout.layoutType,Ko=()=>Je(xn),VL=()=>{var e=Ko();if(e==="horizontal"||e==="vertical")return e},GL=()=>{var e=Ko();return e!==void 0},eh=e=>{var t=Nr(),n=Br(),{width:r,height:l}=e,o=N0(),u=r,d=l;return o&&(u=o.width>0?o.width:r,d=o.height>0?o.height:l),g.useEffect(()=>{!n&&wi(u)&&wi(d)&&t(XI({width:u,height:d}))},[t,n,u,d]),null},EO=Symbol.for("immer-nothing"),uC=Symbol.for("immer-draftable"),Na=Symbol.for("immer-state");function ei(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var yu=Object.getPrototypeOf;function $o(e){return!!e&&!!e[Na]}function zl(e){return e?DO(e)||Array.isArray(e)||!!e[uC]||!!e.constructor?.[uC]||Hu(e)||nh(e):!1}var YL=Object.prototype.constructor.toString(),dC=new WeakMap;function DO(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=dC.get(n);return r===void 0&&(r=Function.toString.call(n),dC.set(n,r)),r===YL}function ep(e,t,n=!0){th(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((r,l)=>t(l,r,e))}function th(e){const t=e[Na];return t?t.type_:Array.isArray(e)?1:Hu(e)?2:nh(e)?3:0}function hx(e,t){return th(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function OO(e,t,n){const r=th(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function KL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Hu(e){return e instanceof Map}function nh(e){return e instanceof Set}function Sl(e){return e.copy_||e.base_}function mx(e,t){if(Hu(e))return new Map(e);if(nh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=DO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Na];let l=Reflect.ownKeys(r);for(let o=0;o<l.length;o++){const u=l[o],d=r[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(r[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(yu(e),r)}else{const r=yu(e);if(r!==null&&n)return{...e};const l=Object.create(r);return Object.assign(l,e)}}function _0(e,t=!1){return rh(e)||$o(e)||!zl(e)||(th(e)>1&&Object.defineProperties(e,{set:yf,add:yf,clear:yf,delete:yf}),Object.freeze(e),t&&Object.values(e).forEach(n=>_0(n,!0))),e}function QL(){ei(2)}var yf={value:QL};function rh(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var XL={};function Rl(e){const t=XL[e];return t||ei(0,e),t}var xu;function TO(){return xu}function ZL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fC(e,t){t&&(Rl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function vx(e){gx(e),e.drafts_.forEach(JL),e.drafts_=null}function gx(e){e===xu&&(xu=e.parent_)}function pC(e){return xu=ZL(xu,e)}function JL(e){const t=e[Na];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Na].modified_&&(vx(t),ei(4)),zl(e)&&(e=tp(t,e),t.parent_||np(t,e)),t.patches_&&Rl("Patches").generateReplacementPatches_(n[Na].base_,e,t.patches_,t.inversePatches_)):e=tp(t,n,[]),vx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==EO?e:void 0}function tp(e,t,n){if(rh(t))return t;const r=e.immer_.shouldUseStrictIteration(),l=t[Na];if(!l)return ep(t,(o,u)=>mC(e,l,t,o,u,n),r),t;if(l.scope_!==e)return t;if(!l.modified_)return np(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let u=o,d=!1;l.type_===3&&(u=new Set(o),o.clear(),d=!0),ep(u,(h,p)=>mC(e,l,o,h,p,n,d),r),np(e,o,!1),n&&e.patches_&&Rl("Patches").generatePatches_(l,n,e.patches_,e.inversePatches_)}return l.copy_}function mC(e,t,n,r,l,o,u){if(l==null||typeof l!="object"&&!u)return;const d=rh(l);if(!(d&&!u)){if($o(l)){const h=o&&t&&t.type_!==3&&!hx(t.assigned_,r)?o.concat(r):void 0,p=tp(e,l,h);if(OO(n,r,p),$o(p))e.canAutoFreeze_=!1;else return}else u&&n.add(l);if(zl(l)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===l&&d)return;tp(e,l),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(Hu(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&np(e,l)}}}function np(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&_0(t,n)}function e$(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:TO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=r,o=k0;n&&(l=[r],o=bu);const{revoke:u,proxy:d}=Proxy.revocable(l,o);return r.draft_=d,r.revoke_=u,d}var k0={get(e,t){if(t===Na)return e;const n=Sl(e);if(!hx(n,t))return t$(e,n,t);const r=n[t];return e.finalized_||!zl(r)?r:r===Fg(e.base_,t)?(qg(e),e.copy_[t]=xx(r,e)):r},has(e,t){return t in Sl(e)},ownKeys(e){return Reflect.ownKeys(Sl(e))},set(e,t,n){const r=AO(Sl(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const l=Fg(Sl(e),t),o=l?.[Na];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(KL(n,l)&&(n!==void 0||hx(e.base_,t)))return!0;qg(e),yx(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Fg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,qg(e),yx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Sl(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ei(11)},getPrototypeOf(e){return yu(e.base_)},setPrototypeOf(){ei(12)}},bu={};ep(k0,(e,t)=>{bu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});bu.deleteProperty=function(e,t){return bu.set.call(this,e,t,void 0)};bu.set=function(e,t,n){return k0.set.call(this,e[0],t,n,e[0])};function Fg(e,t){const n=e[Na];return(n?Sl(n):e)[t]}function t$(e,t,n){const r=AO(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function AO(e,t){if(!(t in e))return;let n=yu(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=yu(n)}}function yx(e){e.modified_||(e.modified_=!0,e.parent_&&yx(e.parent_))}function qg(e){e.copy_||(e.copy_=mx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var n$=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const u=this;return function(h=o,...p){return u.produce(h,m=>n.call(this,m,...p))}}typeof n!="function"&&ei(6),r!==void 0&&typeof r!="function"&&ei(7);let l;if(zl(t)){const o=pC(this),u=xx(t,void 0);let d=!0;try{l=n(u),d=!1}finally{d?vx(o):gx(o)}return fC(o,r),hC(l,o)}else if(!t||typeof t!="object"){if(l=n(t),l===void 0&&(l=t),l===EO&&(l=void 0),this.autoFreeze_&&_0(l,!0),r){const o=[],u=[];Rl("Patches").generateReplacementPatches_(t,l,o,u),r(o,u)}return l}else ei(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(u,...d)=>this.produceWithPatches(u,h=>t(h,...d));let r,l;return[this.produce(t,n,(u,d)=>{r=u,l=d}),r,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){zl(e)||ei(8),$o(e)&&(e=r$(e));const t=pC(this),n=xx(e,void 0);return n[Na].isManual_=!0,gx(t),n}finishDraft(e,t){const n=e&&e[Na];(!n||!n.isManual_)&&ei(9);const{scope_:r}=n;return fC(r,t),hC(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const l=t[n];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}n>-1&&(t=t.slice(n+1));const r=Rl("Patches").applyPatches_;return $o(e)?r(e,t):this.produce(e,l=>r(l,t))}};function xx(e,t){const n=Hu(e)?Rl("MapSet").proxyMap_(e,t):nh(e)?Rl("MapSet").proxySet_(e,t):e$(e,t);return(t?t.scope_:TO()).drafts_.push(n),n}function r$(e){return $o(e)||ei(10,e),MO(e)}function MO(e){if(!zl(e)||rh(e))return e;const t=e[Na];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=mx(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=mx(e,!0);return ep(n,(l,o)=>{OO(n,l,MO(o))},r),t&&(t.finalized_=!1),n}var a$=new n$;a$.produce;var i$={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},PO=oa({name:"legend",initialState:i$,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Rn()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:r}=t.payload,l=ri(e).payload.indexOf(n);l>-1&&(e.payload[l]=r)},prepare:Rn()},removeLegendPayload:{reducer(e,t){var n=ri(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Rn()}}}),{setLegendSize:IX,setLegendSettings:LX,addLegendPayload:s$,replaceLegendPayload:l$,removeLegendPayload:o$}=PO.actions,c$=PO.reducer;function bx(){return bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bx.apply(null,arguments)}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Hg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(r){u$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u$(e,t,n){return(t=d$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d$(e){var t=f$(e,"string");return typeof t=="symbol"?t:t+""}function f$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p$(e){return Array.isArray(e)&&bi(e[0])&&bi(e[1])?e.join(" ~ "):e}var h$=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:l={},payload:o,formatter:u,itemSorter:d,wrapperClassName:h,labelClassName:p,label:m,labelFormatter:v,accessibilityLayer:x=!1}=e,j=()=>{if(o&&o.length){var D={padding:0,margin:0},A=(d?$p(o,d):o).map((M,q)=>{if(M.type==="none")return null;var te=M.formatter||u||p$,{value:ce,name:G}=M,R=ce,F=G;if(te){var he=te(ce,G,M,q,o);if(Array.isArray(he))[R,F]=he;else if(he!=null)R=he;else return null}var ee=Hg({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},r);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:ee},bi(F)?g.createElement("span",{className:"recharts-tooltip-item-name"},F):null,bi(F)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},R),g.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:D},A)}return null},w=Hg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),N=Hg({margin:0},l),S=!fr(m),C=S?m:"",k=yn("recharts-default-tooltip",h),E=yn("recharts-tooltip-label",p);S&&v&&o!==void 0&&o!==null&&(C=v(m,o));var O=x?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",bx({className:k,style:w},O),g.createElement("p",{className:E,style:N},g.isValidElement(C)?C:"".concat(C)),j())},Qc="recharts-tooltip-wrapper",m$={visibility:"hidden"};function v$(e){var{coordinate:t,translateX:n,translateY:r}=e;return yn(Qc,{["".concat(Qc,"-right")]:We(n)&&t&&We(t.x)&&n>=t.x,["".concat(Qc,"-left")]:We(n)&&t&&We(t.x)&&n<t.x,["".concat(Qc,"-bottom")]:We(r)&&t&&We(t.y)&&r>=t.y,["".concat(Qc,"-top")]:We(r)&&t&&We(t.y)&&r<t.y})}function gC(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:l,position:o,reverseDirection:u,tooltipDimension:d,viewBox:h,viewBoxDimension:p}=e;if(o&&We(o[r]))return o[r];var m=n[r]-d-(l>0?l:0),v=n[r]+l;if(t[r])return u[r]?m:v;var x=h[r];if(x==null)return 0;if(u[r]){var j=m,w=x;return j<w?Math.max(v,x):Math.max(m,x)}if(p==null)return 0;var N=v+d,S=x+p;return N>S?Math.max(m,x):Math.max(v,x)}function g$(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function y$(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:r,position:l,reverseDirection:o,tooltipBox:u,useTranslate3d:d,viewBox:h}=e,p,m,v;return u.height>0&&u.width>0&&n?(m=gC({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:l,reverseDirection:o,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),v=gC({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:l,reverseDirection:o,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),p=g$({translateX:m,translateY:v,useTranslate3d:d})):p=m$,{cssProperties:p,cssClasses:v$({translateX:m,translateY:v,coordinate:n})}}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function xf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(r){jx(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jx(e,t,n){return(t=x$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x$(e){var t=b$(e,"string");return typeof t=="symbol"?t:t+""}function b$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class j$ extends g.PureComponent{constructor(){super(...arguments),jx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),jx(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,r,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:r,animationEasing:l,children:o,coordinate:u,hasPayload:d,isAnimationActive:h,offset:p,position:m,reverseDirection:v,useTranslate3d:x,viewBox:j,wrapperStyle:w,lastBoundingBox:N,innerRef:S,hasPortalFromProps:C}=this.props,{cssClasses:k,cssProperties:E}=y$({allowEscapeViewBox:n,coordinate:u,offsetTopLeft:p,position:m,reverseDirection:v,tooltipBox:{height:N.height,width:N.width},useTranslate3d:x,viewBox:j}),O=C?{}:xf(xf({transition:h&&t?"transform ".concat(r,"ms ").concat(l):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),D=xf(xf({},O),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},w);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:D,ref:S},o)}}var w$=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ul={devToolsEnabled:!1,isSsr:w$()},zO=()=>{var e;return(e=Je(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wx.apply(null,arguments)}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function bC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(r){S$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function S$(e,t,n){return(t=N$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N$(e){var t=C$(e,"string");return typeof t=="symbol"?t:t+""}function C$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jC={curveBasisClosed:S6,curveBasisOpen:N6,curveBasis:w6,curveBumpX:o6,curveBumpY:c6,curveLinearClosed:C6,curveLinear:Rp,curveMonotoneX:_6,curveMonotoneY:k6,curveNatural:E6,curveStep:D6,curveStepAfter:T6,curveStepBefore:O6},rp=e=>Hn(e.x)&&Hn(e.y),wC=e=>e.base!=null&&rp(e.base)&&rp(e),Xc=e=>e.x,Zc=e=>e.y,_$=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Lu(e));return(n==="curveMonotone"||n==="curveBump")&&t?jC["".concat(n).concat(t==="vertical"?"Y":"X")]:jC[n]||Rp},k$=e=>{var{type:t="linear",points:n=[],baseLine:r,layout:l,connectNulls:o=!1}=e,u=_$(t,l),d=o?n.filter(rp):n,h;if(Array.isArray(r)){var p=n.map((j,w)=>bC(bC({},j),{},{base:r[w]}));l==="vertical"?h=df().y(Zc).x1(Xc).x0(j=>j.base.x):h=df().x(Xc).y1(Zc).y0(j=>j.base.y);var m=h.defined(wC).curve(u),v=o?p.filter(wC):p;return m(v)}l==="vertical"&&We(r)?h=df().y(Zc).x1(Xc).x0(r):We(r)?h=df().x(Xc).y1(Zc).y0(r):h=dD().x(Xc).y(Zc);var x=h.defined(rp).curve(u);return x(d)},ou=e=>{var{className:t,points:n,path:r,pathRef:l}=e;if((!n||!n.length)&&!r)return null;var o=n&&n.length?k$(e):r;return g.createElement("path",wx({},Ua(e),p0(e),{className:yn("recharts-curve",t),d:o===null?void 0:o,ref:l}))},E$=["x","y","top","left","width","height","className"];function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sx.apply(null,arguments)}function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function D$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(r){O$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O$(e,t,n){return(t=T$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T$(e){var t=A$(e,"string");return typeof t=="symbol"?t:t+""}function A$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M$(e,t){if(e==null)return{};var n,r,l=P$(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function P$(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var z$=(e,t,n,r,l,o)=>"M".concat(e,",").concat(l,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n),R$=e=>{var{x:t=0,y:n=0,top:r=0,left:l=0,width:o=0,height:u=0,className:d}=e,h=M$(e,E$),p=D$({x:t,y:n,top:r,left:l,width:o,height:u},h);return!We(t)||!We(n)||!We(o)||!We(u)||!We(r)||!We(l)?null:g.createElement("path",Sx({},Lr(p),{className:yn("recharts-cross",d),d:z$(t,n,o,u,r,l)}))};function I$(e,t,n,r){var l=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-l,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function NC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function CC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(n),!0).forEach(function(r){L$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L$(e,t,n){return(t=$$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $$(e){var t=B$(e,"string");return typeof t=="symbol"?t:t+""}function B$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U$=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),RO=(e,t,n)=>e.map(r=>"".concat(U$(r)," ").concat(t,"ms ").concat(n)).join(","),F$=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,r)=>n.filter(l=>r.includes(l))),ju=(e,t)=>Object.keys(t).reduce((n,r)=>CC(CC({},n),{},{[r]:e(r,t[r])}),{});function _C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(n),!0).forEach(function(r){q$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_C(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q$(e,t,n){return(t=H$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H$(e){var t=W$(e,"string");return typeof t=="symbol"?t:t+""}function W$(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ap=(e,t,n)=>e+(t-e)*n,Nx=e=>{var{from:t,to:n}=e;return t!==n},IO=(e,t,n)=>{var r=ju((l,o)=>{if(Nx(o)){var[u,d]=e(o.from,o.to,o.velocity);return dr(dr({},o),{},{from:u,velocity:d})}return o},t);return n<1?ju((l,o)=>Nx(o)?dr(dr({},o),{},{velocity:ap(o.velocity,r[l].velocity,n),from:ap(o.from,r[l].from,n)}):o,t):IO(e,r,n-1)};function V$(e,t,n,r,l,o){var u,d=r.reduce((x,j)=>dr(dr({},x),{},{[j]:{from:e[j],velocity:0,to:t[j]}}),{}),h=()=>ju((x,j)=>j.from,d),p=()=>!Object.values(d).filter(Nx).length,m=null,v=x=>{u||(u=x);var j=x-u,w=j/n.dt;d=IO(n,d,w),l(dr(dr(dr({},e),t),h())),u=x,p()||(m=o.setTimeout(v))};return()=>(m=o.setTimeout(v),()=>{var x;(x=m)===null||x===void 0||x()})}function G$(e,t,n,r,l,o,u){var d=null,h=l.reduce((v,x)=>dr(dr({},v),{},{[x]:[e[x],t[x]]}),{}),p,m=v=>{p||(p=v);var x=(v-p)/r,j=ju((N,S)=>ap(...S,n(x)),h);if(o(dr(dr(dr({},e),t),j)),x<1)d=u.setTimeout(m);else{var w=ju((N,S)=>ap(...S,n(1)),h);o(dr(dr(dr({},e),t),w))}};return()=>(d=u.setTimeout(m),()=>{var v;(v=d)===null||v===void 0||v()})}const Y$=(e,t,n,r,l,o)=>{var u=F$(e,t);return n==null?()=>(l(dr(dr({},e),t)),()=>{}):n.isStepper===!0?V$(e,t,n,u,l,o):G$(e,t,n,r,u,l,o)};var ip=1e-4,LO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],$O=(e,t)=>e.map((n,r)=>n*t**r).reduce((n,r)=>n+r),kC=(e,t)=>n=>{var r=LO(e,t);return $O(r,n)},K$=(e,t)=>n=>{var r=LO(e,t),l=[...r.map((o,u)=>o*u).slice(1),0];return $O(l,n)},Q$=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l,o=n[0].split("(");if(o[0]==="cubic-bezier"&&((l=o[1])===null||l===void 0?void 0:l.split(")")[0].split(",").length)===4){var u=o[1].split(")")[0].split(",").map(d=>parseFloat(d));return[u[0],u[1],u[2],u[3]]}}}return n.length===4?n:[0,0,1,1]},X$=(e,t,n,r)=>{var l=kC(e,n),o=kC(t,r),u=K$(e,n),d=p=>p>1?1:p<0?0:p,h=p=>{for(var m=p>1?1:p,v=m,x=0;x<8;++x){var j=l(v)-m,w=u(v);if(Math.abs(j-m)<ip||w<ip)return o(v);v=d(v-j/w)}return o(v)};return h.isStepper=!1,h},EC=function(){return X$(...Q$(...arguments))},Z$=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:l=17}=t,o=(u,d,h)=>{var p=-(u-d)*n,m=h*r,v=h+(p-m)*l/1e3,x=h*l/1e3+u;return Math.abs(x-d)<ip&&Math.abs(v)<ip?[d,0]:[x,v]};return o.isStepper=!0,o.dt=l,o},J$=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return EC(e);case"spring":return Z$();default:if(e.split("(")[0]==="cubic-bezier")return EC(e)}return typeof e=="function"?e:null};function e8(e){var t,n=()=>null,r=!1,l=null,o=u=>{if(!r){if(Array.isArray(u)){if(!u.length)return;var d=u,[h,...p]=d;if(typeof h=="number"){l=e.setTimeout(o.bind(null,p),h);return}o(h),l=e.setTimeout(o.bind(null,p));return}typeof u=="string"&&(t=u,n(t)),typeof u=="object"&&(t=u,n(t)),typeof u=="function"&&u()}};return{stop:()=>{r=!0},start:u=>{r=!1,l&&(l(),l=null),o(u)},subscribe:u=>(n=u,()=>{n=()=>null}),getTimeoutController:()=>e}}class t8{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),l=null,o=u=>{u-r>=n?t(u):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function n8(){return e8(new t8)}var r8=g.createContext(n8);function a8(e,t){var n=g.useContext(r8);return g.useMemo(()=>t??n(e),[e,t,n])}var i8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},DC={t:0},Wg={t:1};function ah(e){var t=$r(e,i8),{isActive:n,canBegin:r,duration:l,easing:o,begin:u,onAnimationEnd:d,onAnimationStart:h,children:p}=t,m=n==="auto"?!Ul.isSsr:n,v=a8(t.animationId,t.animationManager),[x,j]=g.useState(m?DC:Wg),w=g.useRef(null);return g.useEffect(()=>{m||j(Wg)},[m]),g.useEffect(()=>{if(!m||!r)return $u;var N=Y$(DC,Wg,J$(o),l,j,v.getTimeoutController()),S=()=>{w.current=N()};return v.start([h,u,S,l,d]),()=>{v.stop(),w.current&&w.current(),d()}},[m,r,l,o,u,h,d,v]),p(x.t)}function ih(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=g.useRef(hu(t)),r=g.useRef(e);return r.current!==e&&(n.current=hu(t),r.current=e),n.current}var s8=["radius"],l8=["radius"];function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function TC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(n),!0).forEach(function(r){o8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o8(e,t,n){return(t=c8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c8(e){var t=u8(e,"string");return typeof t=="symbol"?t:t+""}function u8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sp.apply(null,arguments)}function AC(e,t){if(e==null)return{};var n,r,l=d8(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function d8(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var MC=(e,t,n,r,l)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),u=r>=0?1:-1,d=n>=0?1:-1,h=r>=0&&n>=0||r<0&&n<0?1:0,p;if(o>0&&l instanceof Array){for(var m=[0,0,0,0],v=0,x=4;v<x;v++)m[v]=l[v]>o?o:l[v];p="M".concat(e,",").concat(t+u*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(t)),p+="L ".concat(e+n-d*m[1],",").concat(t),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(t+u*m[1])),p+="L ".concat(e+n,",").concat(t+r-u*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(t+r)),p+="L ".concat(e+d*m[3],",").concat(t+r),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(t+r-u*m[3])),p+="Z"}else if(o>0&&l===+l&&l>0){var j=Math.min(o,l);p="M ".concat(e,",").concat(t+u*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(e+d*j,",").concat(t,`
            L `).concat(e+n-d*j,",").concat(t,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(e+n,",").concat(t+u*j,`
            L `).concat(e+n,",").concat(t+r-u*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(e+n-d*j,",").concat(t+r,`
            L `).concat(e+d*j,",").concat(t+r,`
            A `).concat(j,",").concat(j,",0,0,").concat(h,",").concat(e,",").concat(t+r-u*j," Z")}else p="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return p},PC={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BO=e=>{var t=$r(e,PC),n=g.useRef(null),[r,l]=g.useState(-1);g.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ne=n.current.getTotalLength();ne&&l(ne)}catch{}},[]);var{x:o,y:u,width:d,height:h,radius:p,className:m}=t,{animationEasing:v,animationDuration:x,animationBegin:j,isAnimationActive:w,isUpdateAnimationActive:N}=t,S=g.useRef(d),C=g.useRef(h),k=g.useRef(o),E=g.useRef(u),O=g.useMemo(()=>({x:o,y:u,width:d,height:h,radius:p}),[o,u,d,h,p]),D=ih(O,"rectangle-");if(o!==+o||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var A=yn("recharts-rectangle",m);if(!N){var M=Lr(t),{radius:q}=M,te=AC(M,s8);return g.createElement("path",sp({},te,{radius:typeof p=="number"?p:void 0,className:A,d:MC(o,u,d,h,p)}))}var ce=S.current,G=C.current,R=k.current,F=E.current,he="0px ".concat(r===-1?1:r,"px"),ee="".concat(r,"px 0px"),U=RO(["strokeDasharray"],x,typeof v=="string"?v:PC.animationEasing);return g.createElement(ah,{animationId:D,key:D,canBegin:r>0,duration:x,easing:v,isActive:N,begin:j},ne=>{var J=lr(ce,d,ne),xe=lr(G,h,ne),Ce=lr(R,o,ne),$=lr(F,u,ne);n.current&&(S.current=J,C.current=xe,k.current=Ce,E.current=$);var ie;w?ne>0?ie={transition:U,strokeDasharray:ee}:ie={strokeDasharray:he}:ie={strokeDasharray:ee};var we=Lr(t),{radius:Z}=we,K=AC(we,l8);return g.createElement("path",sp({},K,{radius:typeof p=="number"?p:void 0,className:A,d:MC(Ce,$,J,xe,p),ref:n,style:TC(TC({},ie),t.style)}))})};function zC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function RC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(n),!0).forEach(function(r){f8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f8(e,t,n){return(t=p8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p8(e){var t=h8(e,"string");return typeof t=="symbol"?t:t+""}function h8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lp=Math.PI/180,m8=e=>e*180/Math.PI,Tr=(e,t,n,r)=>({x:e+Math.cos(-lp*r)*n,y:t+Math.sin(-lp*r)*n}),v8=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},g8=(e,t)=>{var{x:n,y:r}=e,{x:l,y:o}=t;return Math.sqrt((n-l)**2+(r-o)**2)},y8=(e,t)=>{var{x:n,y:r}=e,{cx:l,cy:o}=t,u=g8({x:n,y:r},{x:l,y:o});if(u<=0)return{radius:u,angle:0};var d=(n-l)/u,h=Math.acos(d);return r>o&&(h=2*Math.PI-h),{radius:u,angle:m8(h),angleInRadian:h}},x8=e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),l=Math.floor(n/360),o=Math.min(r,l);return{startAngle:t-o*360,endAngle:n-o*360}},b8=(e,t)=>{var{startAngle:n,endAngle:r}=t,l=Math.floor(n/360),o=Math.floor(r/360),u=Math.min(l,o);return e+u*360},j8=(e,t)=>{var{chartX:n,chartY:r}=e,{radius:l,angle:o}=y8({x:n,y:r},t),{innerRadius:u,outerRadius:d}=t;if(l<u||l>d||l===0)return null;var{startAngle:h,endAngle:p}=x8(t),m=o,v;if(h<=p){for(;m>p;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=p}else{for(;m>h;)m-=360;for(;m<p;)m+=360;v=m>=p&&m<=h}return v?RC(RC({},t),{},{radius:l,angle:b8(m,t)}):null};function UO(e){var{cx:t,cy:n,radius:r,startAngle:l,endAngle:o}=e,u=Tr(t,n,r,l),d=Tr(t,n,r,o);return{points:[u,d],cx:t,cy:n,radius:r,startAngle:l,endAngle:o}}function Cx(){return Cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cx.apply(null,arguments)}var w8=(e,t)=>{var n=$a(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},bf=e=>{var{cx:t,cy:n,radius:r,angle:l,sign:o,isExternal:u,cornerRadius:d,cornerIsExternal:h}=e,p=d*(u?1:-1)+r,m=Math.asin(d/p)/lp,v=h?l:l+o*m,x=Tr(t,n,p,v),j=Tr(t,n,r,v),w=h?l-o*m:l,N=Tr(t,n,p*Math.cos(m*lp),w);return{center:x,circleTangency:j,lineTangency:N,theta:m}},FO=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:l,startAngle:o,endAngle:u}=e,d=w8(o,u),h=o+d,p=Tr(t,n,l,o),m=Tr(t,n,l,h),v="M ".concat(p.x,",").concat(p.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(r>0){var x=Tr(t,n,r,o),j=Tr(t,n,r,h);v+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(x.x,",").concat(x.y," Z")}else v+="L ".concat(t,",").concat(n," Z");return v},S8=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:l,cornerRadius:o,forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:p}=e,m=$a(p-h),{circleTangency:v,lineTangency:x,theta:j}=bf({cx:t,cy:n,radius:l,angle:h,sign:m,cornerRadius:o,cornerIsExternal:d}),{circleTangency:w,lineTangency:N,theta:S}=bf({cx:t,cy:n,radius:l,angle:p,sign:-m,cornerRadius:o,cornerIsExternal:d}),C=d?Math.abs(h-p):Math.abs(h-p)-j-S;if(C<0)return u?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):FO({cx:t,cy:n,innerRadius:r,outerRadius:l,startAngle:h,endAngle:p});var k="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(C>180),",").concat(+(m<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(N.x,",").concat(N.y,`
  `);if(r>0){var{circleTangency:E,lineTangency:O,theta:D}=bf({cx:t,cy:n,radius:r,angle:h,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),{circleTangency:A,lineTangency:M,theta:q}=bf({cx:t,cy:n,radius:r,angle:p,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),te=d?Math.abs(h-p):Math.abs(h-p)-D-q;if(te<0&&o===0)return"".concat(k,"L").concat(t,",").concat(n,"Z");k+="L".concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(te>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,"Z")}else k+="L".concat(t,",").concat(n,"Z");return k},N8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},qO=e=>{var t=$r(e,N8),{cx:n,cy:r,innerRadius:l,outerRadius:o,cornerRadius:u,forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m,className:v}=t;if(o<l||p===m)return null;var x=yn("recharts-sector",v),j=o-l,w=Xs(u,j,0,!0),N;return w>0&&Math.abs(p-m)<360?N=S8({cx:n,cy:r,innerRadius:l,outerRadius:o,cornerRadius:Math.min(w,j/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):N=FO({cx:n,cy:r,innerRadius:l,outerRadius:o,startAngle:p,endAngle:m}),g.createElement("path",Cx({},Lr(t),{className:x,d:N}))};function C8(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(kD(t)){if(e==="centric"){var{cx:r,cy:l,innerRadius:o,outerRadius:u,angle:d}=t,h=Tr(r,l,o,d),p=Tr(r,l,u,d);return[{x:h.x,y:h.y},{x:p.x,y:p.y}]}return UO(t)}}var Vg={},Gg={},Yg={},IC;function _8(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LD();function n(r){return t.isSymbol(r)?NaN:Number(r)}e.toNumber=n})(Yg)),Yg}var LC;function k8(){return LC||(LC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_8();function n(r){return r?(r=t.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}e.toFinite=n})(Gg)),Gg}var $C;function E8(){return $C||($C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$D(),n=k8();function r(l,o,u){u&&typeof u!="number"&&t.isIterateeCall(l,o,u)&&(o=u=void 0),l=n.toFinite(l),o===void 0?(o=l,l=0):o=n.toFinite(o),u=u===void 0?l<o?1:-1:n.toFinite(u);const d=Math.max(Math.ceil((o-l)/(u||1)),0),h=new Array(d);for(let p=0;p<d;p++)h[p]=l,l+=u;return h}e.range=r})(Vg)),Vg}var Kg,BC;function D8(){return BC||(BC=1,Kg=E8().range),Kg}var O8=D8();const HO=si(O8);function Vs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function T8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function E0(e){let t,n,r;e.length!==2?(t=Vs,n=(d,h)=>Vs(e(d),h),r=(d,h)=>e(d)-h):(t=e===Vs||e===T8?e:A8,n=e,r=e);function l(d,h,p=0,m=d.length){if(p<m){if(t(h,h)!==0)return m;do{const v=p+m>>>1;n(d[v],h)<0?p=v+1:m=v}while(p<m)}return p}function o(d,h,p=0,m=d.length){if(p<m){if(t(h,h)!==0)return m;do{const v=p+m>>>1;n(d[v],h)<=0?p=v+1:m=v}while(p<m)}return p}function u(d,h,p=0,m=d.length){const v=l(d,h,p,m-1);return v>p&&r(d[v-1],h)>-r(d[v],h)?v-1:v}return{left:l,center:u,right:o}}function A8(){return 0}function WO(e){return e===null?NaN:+e}function*M8(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const P8=E0(Vs),Wu=P8.right;E0(WO).center;class UC extends Map{constructor(t,n=I8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,l]of t)this.set(r,l)}get(t){return super.get(FC(this,t))}has(t){return super.has(FC(this,t))}set(t,n){return super.set(z8(this,t),n)}delete(t){return super.delete(R8(this,t))}}function FC({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function z8({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function R8({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function I8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function L8(e=Vs){if(e===Vs)return VO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function VO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $8=Math.sqrt(50),B8=Math.sqrt(10),U8=Math.sqrt(2);function op(e,t,n){const r=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(r)),o=r/Math.pow(10,l),u=o>=$8?10:o>=B8?5:o>=U8?2:1;let d,h,p;return l<0?(p=Math.pow(10,-l)/u,d=Math.round(e*p),h=Math.round(t*p),d/p<e&&++d,h/p>t&&--h,p=-p):(p=Math.pow(10,l)*u,d=Math.round(e/p),h=Math.round(t/p),d*p<e&&++d,h*p>t&&--h),h<d&&.5<=n&&n<2?op(e,t,n*2):[d,h,p]}function _x(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[l,o,u]=r?op(t,e,n):op(e,t,n);if(!(o>=l))return[];const d=o-l+1,h=new Array(d);if(r)if(u<0)for(let p=0;p<d;++p)h[p]=(o-p)/-u;else for(let p=0;p<d;++p)h[p]=(o-p)*u;else if(u<0)for(let p=0;p<d;++p)h[p]=(l+p)/-u;else for(let p=0;p<d;++p)h[p]=(l+p)*u;return h}function kx(e,t,n){return t=+t,e=+e,n=+n,op(e,t,n)[2]}function Ex(e,t,n){t=+t,e=+e,n=+n;const r=t<e,l=r?kx(t,e,n):kx(e,t,n);return(r?-1:1)*(l<0?1/-l:l)}function qC(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function HC(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function GO(e,t,n=0,r=1/0,l){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(l=l===void 0?VO:L8(l);r>n;){if(r-n>600){const h=r-n+1,p=t-n+1,m=Math.log(h),v=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*v*(h-v)/h)*(p-h/2<0?-1:1),j=Math.max(n,Math.floor(t-p*v/h+x)),w=Math.min(r,Math.floor(t+(h-p)*v/h+x));GO(e,t,j,w,l)}const o=e[t];let u=n,d=r;for(Jc(e,n,t),l(e[r],o)>0&&Jc(e,n,r);u<d;){for(Jc(e,u,d),++u,--d;l(e[u],o)<0;)++u;for(;l(e[d],o)>0;)--d}l(e[n],o)===0?Jc(e,n,d):(++d,Jc(e,d,r)),d<=t&&(n=d+1),t<=d&&(r=d-1)}return e}function Jc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function F8(e,t,n){if(e=Float64Array.from(M8(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return HC(e);if(t>=1)return qC(e);var r,l=(r-1)*t,o=Math.floor(l),u=qC(GO(e,o).subarray(0,o+1)),d=HC(e.subarray(o+1));return u+(d-u)*(l-o)}}function q8(e,t,n=WO){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,l=(r-1)*t,o=Math.floor(l),u=+n(e[o],o,e),d=+n(e[o+1],o+1,e);return u+(d-u)*(l-o)}}function H8(e,t,n){e=+e,t=+t,n=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+n;for(var r=-1,l=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(l);++r<l;)o[r]=e+r*n;return o}function Va(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ps(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Dx=Symbol("implicit");function D0(){var e=new UC,t=[],n=[],r=Dx;function l(o){let u=e.get(o);if(u===void 0){if(r!==Dx)return r;e.set(o,u=t.push(o)-1)}return n[u%n.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new UC;for(const u of o)e.has(u)||e.set(u,t.push(u)-1);return l},l.range=function(o){return arguments.length?(n=Array.from(o),l):n.slice()},l.unknown=function(o){return arguments.length?(r=o,l):r},l.copy=function(){return D0(t,n).unknown(r)},Va.apply(l,arguments),l}function O0(){var e=D0().unknown(void 0),t=e.domain,n=e.range,r=0,l=1,o,u,d=!1,h=0,p=0,m=.5;delete e.unknown;function v(){var x=t().length,j=l<r,w=j?l:r,N=j?r:l;o=(N-w)/Math.max(1,x-h+p*2),d&&(o=Math.floor(o)),w+=(N-w-o*(x-h))*m,u=o*(1-h),d&&(w=Math.round(w),u=Math.round(u));var S=H8(x).map(function(C){return w+o*C});return n(j?S.reverse():S)}return e.domain=function(x){return arguments.length?(t(x),v()):t()},e.range=function(x){return arguments.length?([r,l]=x,r=+r,l=+l,v()):[r,l]},e.rangeRound=function(x){return[r,l]=x,r=+r,l=+l,d=!0,v()},e.bandwidth=function(){return u},e.step=function(){return o},e.round=function(x){return arguments.length?(d=!!x,v()):d},e.padding=function(x){return arguments.length?(h=Math.min(1,p=+x),v()):h},e.paddingInner=function(x){return arguments.length?(h=Math.min(1,x),v()):h},e.paddingOuter=function(x){return arguments.length?(p=+x,v()):p},e.align=function(x){return arguments.length?(m=Math.max(0,Math.min(1,x)),v()):m},e.copy=function(){return O0(t(),[r,l]).round(d).paddingInner(h).paddingOuter(p).align(m)},Va.apply(v(),arguments)}function YO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return YO(t())},e}function W8(){return YO(O0.apply(null,arguments).paddingInner(1))}function T0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function KO(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Vu(){}var wu=.7,cp=1/wu,Mo="\\s*([+-]?\\d+)\\s*",Su="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",V8=/^#([0-9a-f]{3,8})$/,G8=new RegExp(`^rgb\\(${Mo},${Mo},${Mo}\\)$`),Y8=new RegExp(`^rgb\\(${xi},${xi},${xi}\\)$`),K8=new RegExp(`^rgba\\(${Mo},${Mo},${Mo},${Su}\\)$`),Q8=new RegExp(`^rgba\\(${xi},${xi},${xi},${Su}\\)$`),X8=new RegExp(`^hsl\\(${Su},${xi},${xi}\\)$`),Z8=new RegExp(`^hsla\\(${Su},${xi},${xi},${Su}\\)$`),WC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};T0(Vu,Nu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:VC,formatHex:VC,formatHex8:J8,formatHsl:eB,formatRgb:GC,toString:GC});function VC(){return this.rgb().formatHex()}function J8(){return this.rgb().formatHex8()}function eB(){return QO(this).formatHsl()}function GC(){return this.rgb().formatRgb()}function Nu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=V8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?YC(t):n===3?new la(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=G8.exec(e))?new la(t[1],t[2],t[3],1):(t=Y8.exec(e))?new la(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=K8.exec(e))?jf(t[1],t[2],t[3],t[4]):(t=Q8.exec(e))?jf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=X8.exec(e))?XC(t[1],t[2]/100,t[3]/100,1):(t=Z8.exec(e))?XC(t[1],t[2]/100,t[3]/100,t[4]):WC.hasOwnProperty(e)?YC(WC[e]):e==="transparent"?new la(NaN,NaN,NaN,0):null}function YC(e){return new la(e>>16&255,e>>8&255,e&255,1)}function jf(e,t,n,r){return r<=0&&(e=t=n=NaN),new la(e,t,n,r)}function tB(e){return e instanceof Vu||(e=Nu(e)),e?(e=e.rgb(),new la(e.r,e.g,e.b,e.opacity)):new la}function Ox(e,t,n,r){return arguments.length===1?tB(e):new la(e,t,n,r??1)}function la(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}T0(la,Ox,KO(Vu,{brighter(e){return e=e==null?cp:Math.pow(cp,e),new la(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wu:Math.pow(wu,e),new la(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new la(Al(this.r),Al(this.g),Al(this.b),up(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KC,formatHex:KC,formatHex8:nB,formatRgb:QC,toString:QC}));function KC(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function nB(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function QC(){const e=up(this.opacity);return`${e===1?"rgb(":"rgba("}${Al(this.r)}, ${Al(this.g)}, ${Al(this.b)}${e===1?")":`, ${e})`}`}function up(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Al(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _l(e){return e=Al(e),(e<16?"0":"")+e.toString(16)}function XC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ti(e,t,n,r)}function QO(e){if(e instanceof ti)return new ti(e.h,e.s,e.l,e.opacity);if(e instanceof Vu||(e=Nu(e)),!e)return new ti;if(e instanceof ti)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,l=Math.min(t,n,r),o=Math.max(t,n,r),u=NaN,d=o-l,h=(o+l)/2;return d?(t===o?u=(n-r)/d+(n<r)*6:n===o?u=(r-t)/d+2:u=(t-n)/d+4,d/=h<.5?o+l:2-o-l,u*=60):d=h>0&&h<1?0:u,new ti(u,d,h,e.opacity)}function rB(e,t,n,r){return arguments.length===1?QO(e):new ti(e,t,n,r??1)}function ti(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}T0(ti,rB,KO(Vu,{brighter(e){return e=e==null?cp:Math.pow(cp,e),new ti(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wu:Math.pow(wu,e),new ti(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,l=2*n-r;return new la(Qg(e>=240?e-240:e+120,l,r),Qg(e,l,r),Qg(e<120?e+240:e-120,l,r),this.opacity)},clamp(){return new ti(ZC(this.h),wf(this.s),wf(this.l),up(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=up(this.opacity);return`${e===1?"hsl(":"hsla("}${ZC(this.h)}, ${wf(this.s)*100}%, ${wf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ZC(e){return e=(e||0)%360,e<0?e+360:e}function wf(e){return Math.max(0,Math.min(1,e||0))}function Qg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const A0=e=>()=>e;function aB(e,t){return function(n){return e+n*t}}function iB(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function sB(e){return(e=+e)==1?XO:function(t,n){return n-t?iB(t,n,e):A0(isNaN(t)?n:t)}}function XO(e,t){var n=t-e;return n?aB(e,n):A0(isNaN(e)?t:e)}const JC=(function e(t){var n=sB(t);function r(l,o){var u=n((l=Ox(l)).r,(o=Ox(o)).r),d=n(l.g,o.g),h=n(l.b,o.b),p=XO(l.opacity,o.opacity);return function(m){return l.r=u(m),l.g=d(m),l.b=h(m),l.opacity=p(m),l+""}}return r.gamma=e,r})(1);function lB(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),l;return function(o){for(l=0;l<n;++l)r[l]=e[l]*(1-o)+t[l]*o;return r}}function oB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cB(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,l=new Array(r),o=new Array(n),u;for(u=0;u<r;++u)l[u]=Qo(e[u],t[u]);for(;u<n;++u)o[u]=t[u];return function(d){for(u=0;u<r;++u)o[u]=l[u](d);return o}}function uB(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function dp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function dB(e,t){var n={},r={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?n[l]=Qo(e[l],t[l]):r[l]=t[l];return function(o){for(l in n)r[l]=n[l](o);return r}}var Tx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xg=new RegExp(Tx.source,"g");function fB(e){return function(){return e}}function pB(e){return function(t){return e(t)+""}}function hB(e,t){var n=Tx.lastIndex=Xg.lastIndex=0,r,l,o,u=-1,d=[],h=[];for(e=e+"",t=t+"";(r=Tx.exec(e))&&(l=Xg.exec(t));)(o=l.index)>n&&(o=t.slice(n,o),d[u]?d[u]+=o:d[++u]=o),(r=r[0])===(l=l[0])?d[u]?d[u]+=l:d[++u]=l:(d[++u]=null,h.push({i:u,x:dp(r,l)})),n=Xg.lastIndex;return n<t.length&&(o=t.slice(n),d[u]?d[u]+=o:d[++u]=o),d.length<2?h[0]?pB(h[0].x):fB(t):(t=h.length,function(p){for(var m=0,v;m<t;++m)d[(v=h[m]).i]=v.x(p);return d.join("")})}function Qo(e,t){var n=typeof t,r;return t==null||n==="boolean"?A0(t):(n==="number"?dp:n==="string"?(r=Nu(t))?(t=r,JC):hB:t instanceof Nu?JC:t instanceof Date?uB:oB(t)?lB:Array.isArray(t)?cB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dB:dp)(e,t)}function M0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function mB(e,t){t===void 0&&(t=e,e=Qo);for(var n=0,r=t.length-1,l=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(l,l=t[++n]);return function(u){var d=Math.max(0,Math.min(r-1,Math.floor(u*=r)));return o[d](u-d)}}function vB(e){return function(){return e}}function fp(e){return+e}var e_=[0,1];function Yr(e){return e}function Ax(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:vB(isNaN(t)?NaN:.5)}function gB(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function yB(e,t,n){var r=e[0],l=e[1],o=t[0],u=t[1];return l<r?(r=Ax(l,r),o=n(u,o)):(r=Ax(r,l),o=n(o,u)),function(d){return o(r(d))}}function xB(e,t,n){var r=Math.min(e.length,t.length)-1,l=new Array(r),o=new Array(r),u=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<r;)l[u]=Ax(e[u],e[u+1]),o[u]=n(t[u],t[u+1]);return function(d){var h=Wu(e,d,1,r)-1;return o[h](l[h](d))}}function Gu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function sh(){var e=e_,t=e_,n=Qo,r,l,o,u=Yr,d,h,p;function m(){var x=Math.min(e.length,t.length);return u!==Yr&&(u=gB(e[0],e[x-1])),d=x>2?xB:yB,h=p=null,v}function v(x){return x==null||isNaN(x=+x)?o:(h||(h=d(e.map(r),t,n)))(r(u(x)))}return v.invert=function(x){return u(l((p||(p=d(t,e.map(r),dp)))(x)))},v.domain=function(x){return arguments.length?(e=Array.from(x,fp),m()):e.slice()},v.range=function(x){return arguments.length?(t=Array.from(x),m()):t.slice()},v.rangeRound=function(x){return t=Array.from(x),n=M0,m()},v.clamp=function(x){return arguments.length?(u=x?!0:Yr,m()):u!==Yr},v.interpolate=function(x){return arguments.length?(n=x,m()):n},v.unknown=function(x){return arguments.length?(o=x,v):o},function(x,j){return r=x,l=j,m()}}function P0(){return sh()(Yr,Yr)}function bB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Bo(e){return e=pp(Math.abs(e)),e?e[1]:NaN}function jB(e,t){return function(n,r){for(var l=n.length,o=[],u=0,d=e[0],h=0;l>0&&d>0&&(h+d+1>r&&(d=Math.max(1,r-h)),o.push(n.substring(l-=d,l+d)),!((h+=d+1)>r));)d=e[u=(u+1)%e.length];return o.reverse().join(t)}}function wB(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var SB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cu(e){if(!(t=SB.exec(e)))throw new Error("invalid format: "+e);var t;return new z0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Cu.prototype=z0.prototype;function z0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}z0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NB(e){e:for(var t=e.length,n=1,r=-1,l;n<t;++n)switch(e[n]){case".":r=l=n;break;case"0":r===0&&(r=n),l=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(l+1):e}var ZO;function CB(e,t){var n=pp(e,t);if(!n)return e+"";var r=n[0],l=n[1],o=l-(ZO=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+pp(e,Math.max(0,t+o-1))[0]}function t_(e,t){var n=pp(e,t);if(!n)return e+"";var r=n[0],l=n[1];return l<0?"0."+new Array(-l).join("0")+r:r.length>l+1?r.slice(0,l+1)+"."+r.slice(l+1):r+new Array(l-r.length+2).join("0")}const n_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>t_(e*100,t),r:t_,s:CB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function r_(e){return e}var a_=Array.prototype.map,i_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _B(e){var t=e.grouping===void 0||e.thousands===void 0?r_:jB(a_.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?r_:wB(a_.call(e.numerals,String)),u=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function p(v){v=Cu(v);var x=v.fill,j=v.align,w=v.sign,N=v.symbol,S=v.zero,C=v.width,k=v.comma,E=v.precision,O=v.trim,D=v.type;D==="n"?(k=!0,D="g"):n_[D]||(E===void 0&&(E=12),O=!0,D="g"),(S||x==="0"&&j==="=")&&(S=!0,x="0",j="=");var A=N==="$"?n:N==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",M=N==="$"?r:/[%p]/.test(D)?u:"",q=n_[D],te=/[defgprs%]/.test(D);E=E===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function ce(G){var R=A,F=M,he,ee,U;if(D==="c")F=q(G)+F,G="";else{G=+G;var ne=G<0||1/G<0;if(G=isNaN(G)?h:q(Math.abs(G),E),O&&(G=NB(G)),ne&&+G==0&&w!=="+"&&(ne=!1),R=(ne?w==="("?w:d:w==="-"||w==="("?"":w)+R,F=(D==="s"?i_[8+ZO/3]:"")+F+(ne&&w==="("?")":""),te){for(he=-1,ee=G.length;++he<ee;)if(U=G.charCodeAt(he),48>U||U>57){F=(U===46?l+G.slice(he+1):G.slice(he))+F,G=G.slice(0,he);break}}}k&&!S&&(G=t(G,1/0));var J=R.length+G.length+F.length,xe=J<C?new Array(C-J+1).join(x):"";switch(k&&S&&(G=t(xe+G,xe.length?C-F.length:1/0),xe=""),j){case"<":G=R+G+F+xe;break;case"=":G=R+xe+G+F;break;case"^":G=xe.slice(0,J=xe.length>>1)+R+G+F+xe.slice(J);break;default:G=xe+R+G+F;break}return o(G)}return ce.toString=function(){return v+""},ce}function m(v,x){var j=p((v=Cu(v),v.type="f",v)),w=Math.max(-8,Math.min(8,Math.floor(Bo(x)/3)))*3,N=Math.pow(10,-w),S=i_[8+w/3];return function(C){return j(N*C)+S}}return{format:p,formatPrefix:m}}var Sf,R0,JO;kB({thousands:",",grouping:[3],currency:["$",""]});function kB(e){return Sf=_B(e),R0=Sf.format,JO=Sf.formatPrefix,Sf}function EB(e){return Math.max(0,-Bo(Math.abs(e)))}function DB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bo(t)/3)))*3-Bo(Math.abs(e)))}function OB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bo(t)-Bo(e))+1}function eT(e,t,n,r){var l=Ex(e,t,n),o;switch(r=Cu(r??",f"),r.type){case"s":{var u=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=DB(l,u))&&(r.precision=o),JO(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=OB(l,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=EB(l))&&(r.precision=o-(r.type==="%")*2);break}}return R0(r)}function el(e){var t=e.domain;return e.ticks=function(n){var r=t();return _x(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var l=t();return eT(l[0],l[l.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),l=0,o=r.length-1,u=r[l],d=r[o],h,p,m=10;for(d<u&&(p=u,u=d,d=p,p=l,l=o,o=p);m-- >0;){if(p=kx(u,d,n),p===h)return r[l]=u,r[o]=d,t(r);if(p>0)u=Math.floor(u/p)*p,d=Math.ceil(d/p)*p;else if(p<0)u=Math.ceil(u*p)/p,d=Math.floor(d*p)/p;else break;h=p}return e},e}function tT(){var e=P0();return e.copy=function(){return Gu(e,tT())},Va.apply(e,arguments),el(e)}function nT(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,fp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return nT(e).unknown(t)},e=arguments.length?Array.from(e,fp):[0,1],el(n)}function rT(e,t){e=e.slice();var n=0,r=e.length-1,l=e[n],o=e[r],u;return o<l&&(u=n,n=r,r=u,u=l,l=o,o=u),e[n]=t.floor(l),e[r]=t.ceil(o),e}function s_(e){return Math.log(e)}function l_(e){return Math.exp(e)}function TB(e){return-Math.log(-e)}function AB(e){return-Math.exp(-e)}function MB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function PB(e){return e===10?MB:e===Math.E?Math.exp:t=>Math.pow(e,t)}function zB(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function o_(e){return(t,n)=>-e(-t,n)}function I0(e){const t=e(s_,l_),n=t.domain;let r=10,l,o;function u(){return l=zB(r),o=PB(r),n()[0]<0?(l=o_(l),o=o_(o),e(TB,AB)):e(s_,l_),t}return t.base=function(d){return arguments.length?(r=+d,u()):r},t.domain=function(d){return arguments.length?(n(d),u()):n()},t.ticks=d=>{const h=n();let p=h[0],m=h[h.length-1];const v=m<p;v&&([p,m]=[m,p]);let x=l(p),j=l(m),w,N;const S=d==null?10:+d;let C=[];if(!(r%1)&&j-x<S){if(x=Math.floor(x),j=Math.ceil(j),p>0){for(;x<=j;++x)for(w=1;w<r;++w)if(N=x<0?w/o(-x):w*o(x),!(N<p)){if(N>m)break;C.push(N)}}else for(;x<=j;++x)for(w=r-1;w>=1;--w)if(N=x>0?w/o(-x):w*o(x),!(N<p)){if(N>m)break;C.push(N)}C.length*2<S&&(C=_x(p,m,S))}else C=_x(x,j,Math.min(j-x,S)).map(o);return v?C.reverse():C},t.tickFormat=(d,h)=>{if(d==null&&(d=10),h==null&&(h=r===10?"s":","),typeof h!="function"&&(!(r%1)&&(h=Cu(h)).precision==null&&(h.trim=!0),h=R0(h)),d===1/0)return h;const p=Math.max(1,r*d/t.ticks().length);return m=>{let v=m/o(Math.round(l(m)));return v*r<r-.5&&(v*=r),v<=p?h(m):""}},t.nice=()=>n(rT(n(),{floor:d=>o(Math.floor(l(d))),ceil:d=>o(Math.ceil(l(d)))})),t}function aT(){const e=I0(sh()).domain([1,10]);return e.copy=()=>Gu(e,aT()).base(e.base()),Va.apply(e,arguments),e}function c_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function u_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function L0(e){var t=1,n=e(c_(t),u_(t));return n.constant=function(r){return arguments.length?e(c_(t=+r),u_(t)):t},el(n)}function iT(){var e=L0(sh());return e.copy=function(){return Gu(e,iT()).constant(e.constant())},Va.apply(e,arguments)}function d_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function RB(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function IB(e){return e<0?-e*e:e*e}function $0(e){var t=e(Yr,Yr),n=1;function r(){return n===1?e(Yr,Yr):n===.5?e(RB,IB):e(d_(n),d_(1/n))}return t.exponent=function(l){return arguments.length?(n=+l,r()):n},el(t)}function B0(){var e=$0(sh());return e.copy=function(){return Gu(e,B0()).exponent(e.exponent())},Va.apply(e,arguments),e}function LB(){return B0.apply(null,arguments).exponent(.5)}function f_(e){return Math.sign(e)*e*e}function $B(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function sT(){var e=P0(),t=[0,1],n=!1,r;function l(o){var u=$B(e(o));return isNaN(u)?r:n?Math.round(u):u}return l.invert=function(o){return e.invert(f_(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,fp)).map(f_)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(n=!!o,l):n},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(r=o,l):r},l.copy=function(){return sT(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Va.apply(l,arguments),el(l)}function lT(){var e=[],t=[],n=[],r;function l(){var u=0,d=Math.max(1,t.length);for(n=new Array(d-1);++u<d;)n[u-1]=q8(e,u/d);return o}function o(u){return u==null||isNaN(u=+u)?r:t[Wu(n,u)]}return o.invertExtent=function(u){var d=t.indexOf(u);return d<0?[NaN,NaN]:[d>0?n[d-1]:e[0],d<n.length?n[d]:e[e.length-1]]},o.domain=function(u){if(!arguments.length)return e.slice();e=[];for(let d of u)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Vs),l()},o.range=function(u){return arguments.length?(t=Array.from(u),l()):t.slice()},o.unknown=function(u){return arguments.length?(r=u,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return lT().domain(e).range(t).unknown(r)},Va.apply(o,arguments)}function oT(){var e=0,t=1,n=1,r=[.5],l=[0,1],o;function u(h){return h!=null&&h<=h?l[Wu(r,h,0,n)]:o}function d(){var h=-1;for(r=new Array(n);++h<n;)r[h]=((h+1)*t-(h-n)*e)/(n+1);return u}return u.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,d()):[e,t]},u.range=function(h){return arguments.length?(n=(l=Array.from(h)).length-1,d()):l.slice()},u.invertExtent=function(h){var p=l.indexOf(h);return p<0?[NaN,NaN]:p<1?[e,r[0]]:p>=n?[r[n-1],t]:[r[p-1],r[p]]},u.unknown=function(h){return arguments.length&&(o=h),u},u.thresholds=function(){return r.slice()},u.copy=function(){return oT().domain([e,t]).range(l).unknown(o)},Va.apply(el(u),arguments)}function cT(){var e=[.5],t=[0,1],n,r=1;function l(o){return o!=null&&o<=o?t[Wu(e,o,0,r)]:n}return l.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var u=t.indexOf(o);return[e[u-1],e[u]]},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return cT().domain(e).range(t).unknown(n)},Va.apply(l,arguments)}const Zg=new Date,Jg=new Date;function pr(e,t,n,r){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const u=l(o),d=l.ceil(o);return o-u<d-o?u:d},l.offset=(o,u)=>(t(o=new Date(+o),u==null?1:Math.floor(u)),o),l.range=(o,u,d)=>{const h=[];if(o=l.ceil(o),d=d==null?1:Math.floor(d),!(o<u)||!(d>0))return h;let p;do h.push(p=new Date(+o)),t(o,d),e(o);while(p<o&&o<u);return h},l.filter=o=>pr(u=>{if(u>=u)for(;e(u),!o(u);)u.setTime(u-1)},(u,d)=>{if(u>=u)if(d<0)for(;++d<=0;)for(;t(u,-1),!o(u););else for(;--d>=0;)for(;t(u,1),!o(u););}),n&&(l.count=(o,u)=>(Zg.setTime(+o),Jg.setTime(+u),e(Zg),e(Jg),Math.floor(n(Zg,Jg))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(r?u=>r(u)%o===0:u=>l.count(0,u)%o===0):l)),l}const hp=pr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);hp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):hp);hp.range;const Ki=1e3,Ba=Ki*60,Qi=Ba*60,is=Qi*24,U0=is*7,p_=is*30,ey=is*365,kl=pr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ki)},(e,t)=>(t-e)/Ki,e=>e.getUTCSeconds());kl.range;const F0=pr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ki)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getMinutes());F0.range;const q0=pr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCMinutes());q0.range;const H0=pr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ki-e.getMinutes()*Ba)},(e,t)=>{e.setTime(+e+t*Qi)},(e,t)=>(t-e)/Qi,e=>e.getHours());H0.range;const W0=pr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qi)},(e,t)=>(t-e)/Qi,e=>e.getUTCHours());W0.range;const Yu=pr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ba)/is,e=>e.getDate()-1);Yu.range;const lh=pr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/is,e=>e.getUTCDate()-1);lh.range;const uT=pr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/is,e=>Math.floor(e/is));uT.range;function Fl(e){return pr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ba)/U0)}const oh=Fl(0),mp=Fl(1),BB=Fl(2),UB=Fl(3),Uo=Fl(4),FB=Fl(5),qB=Fl(6);oh.range;mp.range;BB.range;UB.range;Uo.range;FB.range;qB.range;function ql(e){return pr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/U0)}const ch=ql(0),vp=ql(1),HB=ql(2),WB=ql(3),Fo=ql(4),VB=ql(5),GB=ql(6);ch.range;vp.range;HB.range;WB.range;Fo.range;VB.range;GB.range;const V0=pr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());V0.range;const G0=pr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());G0.range;const ss=pr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ss.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ss.range;const ls=pr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ls.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ls.range;function dT(e,t,n,r,l,o){const u=[[kl,1,Ki],[kl,5,5*Ki],[kl,15,15*Ki],[kl,30,30*Ki],[o,1,Ba],[o,5,5*Ba],[o,15,15*Ba],[o,30,30*Ba],[l,1,Qi],[l,3,3*Qi],[l,6,6*Qi],[l,12,12*Qi],[r,1,is],[r,2,2*is],[n,1,U0],[t,1,p_],[t,3,3*p_],[e,1,ey]];function d(p,m,v){const x=m<p;x&&([p,m]=[m,p]);const j=v&&typeof v.range=="function"?v:h(p,m,v),w=j?j.range(p,+m+1):[];return x?w.reverse():w}function h(p,m,v){const x=Math.abs(m-p)/v,j=E0(([,,S])=>S).right(u,x);if(j===u.length)return e.every(Ex(p/ey,m/ey,v));if(j===0)return hp.every(Math.max(Ex(p,m,v),1));const[w,N]=u[x/u[j-1][2]<u[j][2]/x?j-1:j];return w.every(N)}return[d,h]}const[YB,KB]=dT(ls,G0,ch,uT,W0,q0),[QB,XB]=dT(ss,V0,oh,Yu,H0,F0);function ty(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ny(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function eu(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function ZB(e){var t=e.dateTime,n=e.date,r=e.time,l=e.periods,o=e.days,u=e.shortDays,d=e.months,h=e.shortMonths,p=tu(l),m=nu(l),v=tu(o),x=nu(o),j=tu(u),w=nu(u),N=tu(d),S=nu(d),C=tu(h),k=nu(h),E={a:ne,A:J,b:xe,B:Ce,c:null,d:x_,e:x_,f:jU,g:TU,G:MU,H:yU,I:xU,j:bU,L:fT,m:wU,M:SU,p:$,q:ie,Q:w_,s:S_,S:NU,u:CU,U:_U,V:kU,w:EU,W:DU,x:null,X:null,y:OU,Y:AU,Z:PU,"%":j_},O={a:we,A:Z,b:K,B:Ee,c:null,d:b_,e:b_,f:LU,g:YU,G:QU,H:zU,I:RU,j:IU,L:hT,m:$U,M:BU,p:de,q:Se,Q:w_,s:S_,S:UU,u:FU,U:qU,V:HU,w:WU,W:VU,x:null,X:null,y:GU,Y:KU,Z:XU,"%":j_},D={a:ce,A:G,b:R,B:F,c:he,d:g_,e:g_,f:hU,g:v_,G:m_,H:y_,I:y_,j:uU,L:pU,m:cU,M:dU,p:te,q:oU,Q:vU,s:gU,S:fU,u:rU,U:aU,V:iU,w:nU,W:sU,x:ee,X:U,y:v_,Y:m_,Z:lU,"%":mU};E.x=A(n,E),E.X=A(r,E),E.c=A(t,E),O.x=A(n,O),O.X=A(r,O),O.c=A(t,O);function A(W,me){return function(Me){var Q=[],$e=-1,Ae=0,vt=W.length,jt,gt,Xn;for(Me instanceof Date||(Me=new Date(+Me));++$e<vt;)W.charCodeAt($e)===37&&(Q.push(W.slice(Ae,$e)),(gt=h_[jt=W.charAt(++$e)])!=null?jt=W.charAt(++$e):gt=jt==="e"?" ":"0",(Xn=me[jt])&&(jt=Xn(Me,gt)),Q.push(jt),Ae=$e+1);return Q.push(W.slice(Ae,$e)),Q.join("")}}function M(W,me){return function(Me){var Q=eu(1900,void 0,1),$e=q(Q,W,Me+="",0),Ae,vt;if($e!=Me.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(me&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(Ae=ny(eu(Q.y,0,1)),vt=Ae.getUTCDay(),Ae=vt>4||vt===0?vp.ceil(Ae):vp(Ae),Ae=lh.offset(Ae,(Q.V-1)*7),Q.y=Ae.getUTCFullYear(),Q.m=Ae.getUTCMonth(),Q.d=Ae.getUTCDate()+(Q.w+6)%7):(Ae=ty(eu(Q.y,0,1)),vt=Ae.getDay(),Ae=vt>4||vt===0?mp.ceil(Ae):mp(Ae),Ae=Yu.offset(Ae,(Q.V-1)*7),Q.y=Ae.getFullYear(),Q.m=Ae.getMonth(),Q.d=Ae.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),vt="Z"in Q?ny(eu(Q.y,0,1)).getUTCDay():ty(eu(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(vt+5)%7:Q.w+Q.U*7-(vt+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,ny(Q)):ty(Q)}}function q(W,me,Me,Q){for(var $e=0,Ae=me.length,vt=Me.length,jt,gt;$e<Ae;){if(Q>=vt)return-1;if(jt=me.charCodeAt($e++),jt===37){if(jt=me.charAt($e++),gt=D[jt in h_?me.charAt($e++):jt],!gt||(Q=gt(W,Me,Q))<0)return-1}else if(jt!=Me.charCodeAt(Q++))return-1}return Q}function te(W,me,Me){var Q=p.exec(me.slice(Me));return Q?(W.p=m.get(Q[0].toLowerCase()),Me+Q[0].length):-1}function ce(W,me,Me){var Q=j.exec(me.slice(Me));return Q?(W.w=w.get(Q[0].toLowerCase()),Me+Q[0].length):-1}function G(W,me,Me){var Q=v.exec(me.slice(Me));return Q?(W.w=x.get(Q[0].toLowerCase()),Me+Q[0].length):-1}function R(W,me,Me){var Q=C.exec(me.slice(Me));return Q?(W.m=k.get(Q[0].toLowerCase()),Me+Q[0].length):-1}function F(W,me,Me){var Q=N.exec(me.slice(Me));return Q?(W.m=S.get(Q[0].toLowerCase()),Me+Q[0].length):-1}function he(W,me,Me){return q(W,t,me,Me)}function ee(W,me,Me){return q(W,n,me,Me)}function U(W,me,Me){return q(W,r,me,Me)}function ne(W){return u[W.getDay()]}function J(W){return o[W.getDay()]}function xe(W){return h[W.getMonth()]}function Ce(W){return d[W.getMonth()]}function $(W){return l[+(W.getHours()>=12)]}function ie(W){return 1+~~(W.getMonth()/3)}function we(W){return u[W.getUTCDay()]}function Z(W){return o[W.getUTCDay()]}function K(W){return h[W.getUTCMonth()]}function Ee(W){return d[W.getUTCMonth()]}function de(W){return l[+(W.getUTCHours()>=12)]}function Se(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var me=A(W+="",E);return me.toString=function(){return W},me},parse:function(W){var me=M(W+="",!1);return me.toString=function(){return W},me},utcFormat:function(W){var me=A(W+="",O);return me.toString=function(){return W},me},utcParse:function(W){var me=M(W+="",!0);return me.toString=function(){return W},me}}}var h_={"-":"",_:" ",0:"0"},Cr=/^\s*\d+/,JB=/^%/,eU=/[\\^$*+?|[\]().{}]/g;function Jt(e,t,n){var r=e<0?"-":"",l=(r?-e:e)+"",o=l.length;return r+(o<n?new Array(n-o+1).join(t)+l:l)}function tU(e){return e.replace(eU,"\\$&")}function tu(e){return new RegExp("^(?:"+e.map(tU).join("|")+")","i")}function nu(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function nU(e,t,n){var r=Cr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function rU(e,t,n){var r=Cr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function aU(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function iU(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function sU(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function m_(e,t,n){var r=Cr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function v_(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lU(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function oU(e,t,n){var r=Cr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function cU(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function g_(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function uU(e,t,n){var r=Cr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function y_(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function dU(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function fU(e,t,n){var r=Cr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function pU(e,t,n){var r=Cr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function hU(e,t,n){var r=Cr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function mU(e,t,n){var r=JB.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function vU(e,t,n){var r=Cr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function gU(e,t,n){var r=Cr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function x_(e,t){return Jt(e.getDate(),t,2)}function yU(e,t){return Jt(e.getHours(),t,2)}function xU(e,t){return Jt(e.getHours()%12||12,t,2)}function bU(e,t){return Jt(1+Yu.count(ss(e),e),t,3)}function fT(e,t){return Jt(e.getMilliseconds(),t,3)}function jU(e,t){return fT(e,t)+"000"}function wU(e,t){return Jt(e.getMonth()+1,t,2)}function SU(e,t){return Jt(e.getMinutes(),t,2)}function NU(e,t){return Jt(e.getSeconds(),t,2)}function CU(e){var t=e.getDay();return t===0?7:t}function _U(e,t){return Jt(oh.count(ss(e)-1,e),t,2)}function pT(e){var t=e.getDay();return t>=4||t===0?Uo(e):Uo.ceil(e)}function kU(e,t){return e=pT(e),Jt(Uo.count(ss(e),e)+(ss(e).getDay()===4),t,2)}function EU(e){return e.getDay()}function DU(e,t){return Jt(mp.count(ss(e)-1,e),t,2)}function OU(e,t){return Jt(e.getFullYear()%100,t,2)}function TU(e,t){return e=pT(e),Jt(e.getFullYear()%100,t,2)}function AU(e,t){return Jt(e.getFullYear()%1e4,t,4)}function MU(e,t){var n=e.getDay();return e=n>=4||n===0?Uo(e):Uo.ceil(e),Jt(e.getFullYear()%1e4,t,4)}function PU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jt(t/60|0,"0",2)+Jt(t%60,"0",2)}function b_(e,t){return Jt(e.getUTCDate(),t,2)}function zU(e,t){return Jt(e.getUTCHours(),t,2)}function RU(e,t){return Jt(e.getUTCHours()%12||12,t,2)}function IU(e,t){return Jt(1+lh.count(ls(e),e),t,3)}function hT(e,t){return Jt(e.getUTCMilliseconds(),t,3)}function LU(e,t){return hT(e,t)+"000"}function $U(e,t){return Jt(e.getUTCMonth()+1,t,2)}function BU(e,t){return Jt(e.getUTCMinutes(),t,2)}function UU(e,t){return Jt(e.getUTCSeconds(),t,2)}function FU(e){var t=e.getUTCDay();return t===0?7:t}function qU(e,t){return Jt(ch.count(ls(e)-1,e),t,2)}function mT(e){var t=e.getUTCDay();return t>=4||t===0?Fo(e):Fo.ceil(e)}function HU(e,t){return e=mT(e),Jt(Fo.count(ls(e),e)+(ls(e).getUTCDay()===4),t,2)}function WU(e){return e.getUTCDay()}function VU(e,t){return Jt(vp.count(ls(e)-1,e),t,2)}function GU(e,t){return Jt(e.getUTCFullYear()%100,t,2)}function YU(e,t){return e=mT(e),Jt(e.getUTCFullYear()%100,t,2)}function KU(e,t){return Jt(e.getUTCFullYear()%1e4,t,4)}function QU(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Fo(e):Fo.ceil(e),Jt(e.getUTCFullYear()%1e4,t,4)}function XU(){return"+0000"}function j_(){return"%"}function w_(e){return+e}function S_(e){return Math.floor(+e/1e3)}var So,vT,gT;ZU({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ZU(e){return So=ZB(e),vT=So.format,So.parse,gT=So.utcFormat,So.utcParse,So}function JU(e){return new Date(e)}function eF(e){return e instanceof Date?+e:+new Date(+e)}function Y0(e,t,n,r,l,o,u,d,h,p){var m=P0(),v=m.invert,x=m.domain,j=p(".%L"),w=p(":%S"),N=p("%I:%M"),S=p("%I %p"),C=p("%a %d"),k=p("%b %d"),E=p("%B"),O=p("%Y");function D(A){return(h(A)<A?j:d(A)<A?w:u(A)<A?N:o(A)<A?S:r(A)<A?l(A)<A?C:k:n(A)<A?E:O)(A)}return m.invert=function(A){return new Date(v(A))},m.domain=function(A){return arguments.length?x(Array.from(A,eF)):x().map(JU)},m.ticks=function(A){var M=x();return e(M[0],M[M.length-1],A??10)},m.tickFormat=function(A,M){return M==null?D:p(M)},m.nice=function(A){var M=x();return(!A||typeof A.range!="function")&&(A=t(M[0],M[M.length-1],A??10)),A?x(rT(M,A)):m},m.copy=function(){return Gu(m,Y0(e,t,n,r,l,o,u,d,h,p))},m}function tF(){return Va.apply(Y0(QB,XB,ss,V0,oh,Yu,H0,F0,kl,vT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nF(){return Va.apply(Y0(YB,KB,ls,G0,ch,lh,W0,q0,kl,gT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uh(){var e=0,t=1,n,r,l,o,u=Yr,d=!1,h;function p(v){return v==null||isNaN(v=+v)?h:u(l===0?.5:(v=(o(v)-n)*l,d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t]=v,n=o(e=+e),r=o(t=+t),l=n===r?0:1/(r-n),p):[e,t]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function m(v){return function(x){var j,w;return arguments.length?([j,w]=x,u=v(j,w),p):[u(0),u(1)]}}return p.range=m(Qo),p.rangeRound=m(M0),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return o=v,n=v(e),r=v(t),l=n===r?0:1/(r-n),p}}function tl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yT(){var e=el(uh()(Yr));return e.copy=function(){return tl(e,yT())},ps.apply(e,arguments)}function xT(){var e=I0(uh()).domain([1,10]);return e.copy=function(){return tl(e,xT()).base(e.base())},ps.apply(e,arguments)}function bT(){var e=L0(uh());return e.copy=function(){return tl(e,bT()).constant(e.constant())},ps.apply(e,arguments)}function K0(){var e=$0(uh());return e.copy=function(){return tl(e,K0()).exponent(e.exponent())},ps.apply(e,arguments)}function rF(){return K0.apply(null,arguments).exponent(.5)}function jT(){var e=[],t=Yr;function n(r){if(r!=null&&!isNaN(r=+r))return t((Wu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let l of r)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Vs),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,l)=>t(l/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(l,o)=>F8(e,o/r))},n.copy=function(){return jT(t).domain(e)},ps.apply(n,arguments)}function dh(){var e=0,t=.5,n=1,r=1,l,o,u,d,h,p=Yr,m,v=!1,x;function j(N){return isNaN(N=+N)?x:(N=.5+((N=+m(N))-o)*(r*N<r*o?d:h),p(v?Math.max(0,Math.min(1,N)):N))}j.domain=function(N){return arguments.length?([e,t,n]=N,l=m(e=+e),o=m(t=+t),u=m(n=+n),d=l===o?0:.5/(o-l),h=o===u?0:.5/(u-o),r=o<l?-1:1,j):[e,t,n]},j.clamp=function(N){return arguments.length?(v=!!N,j):v},j.interpolator=function(N){return arguments.length?(p=N,j):p};function w(N){return function(S){var C,k,E;return arguments.length?([C,k,E]=S,p=mB(N,[C,k,E]),j):[p(0),p(.5),p(1)]}}return j.range=w(Qo),j.rangeRound=w(M0),j.unknown=function(N){return arguments.length?(x=N,j):x},function(N){return m=N,l=N(e),o=N(t),u=N(n),d=l===o?0:.5/(o-l),h=o===u?0:.5/(u-o),r=o<l?-1:1,j}}function wT(){var e=el(dh()(Yr));return e.copy=function(){return tl(e,wT())},ps.apply(e,arguments)}function ST(){var e=I0(dh()).domain([.1,1,10]);return e.copy=function(){return tl(e,ST()).base(e.base())},ps.apply(e,arguments)}function NT(){var e=L0(dh());return e.copy=function(){return tl(e,NT()).constant(e.constant())},ps.apply(e,arguments)}function Q0(){var e=$0(dh());return e.copy=function(){return tl(e,Q0()).exponent(e.exponent())},ps.apply(e,arguments)}function aF(){return Q0.apply(null,arguments).exponent(.5)}const lu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:O0,scaleDiverging:wT,scaleDivergingLog:ST,scaleDivergingPow:Q0,scaleDivergingSqrt:aF,scaleDivergingSymlog:NT,scaleIdentity:nT,scaleImplicit:Dx,scaleLinear:tT,scaleLog:aT,scaleOrdinal:D0,scalePoint:W8,scalePow:B0,scaleQuantile:lT,scaleQuantize:oT,scaleRadial:sT,scaleSequential:yT,scaleSequentialLog:xT,scaleSequentialPow:K0,scaleSequentialQuantile:jT,scaleSequentialSqrt:rF,scaleSequentialSymlog:bT,scaleSqrt:LB,scaleSymlog:iT,scaleThreshold:cT,scaleTime:tF,scaleUtc:nF,tickFormat:eT},Symbol.toStringTag,{value:"Module"}));var nl=e=>e.chartData,iF=pe([nl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),fh=(e,t,n,r)=>r?iF(e):nl(e);function Zs(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(Hn(t)&&Hn(n))return!0}return!1}function N_(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function CT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,r]=e,l,o;if(Hn(n))l=n;else if(typeof n=="function")return;if(Hn(r))o=r;else if(typeof r=="function")return;var u=[l,o];if(Zs(u))return u}}function sF(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var r=e(t,n);if(Zs(r))return N_(r,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,u,d;if(l==="auto")t!=null&&(u=Math.min(...t));else if(We(l))u=l;else if(typeof l=="function")try{t!=null&&(u=l(t?.[0]))}catch{}else if(typeof l=="string"&&eC.test(l)){var h=eC.exec(l);if(h==null||t==null)u=void 0;else{var p=+h[1];u=t[0]-p}}else u=t?.[0];if(o==="auto")t!=null&&(d=Math.max(...t));else if(We(o))d=o;else if(typeof o=="function")try{t!=null&&(d=o(t?.[1]))}catch{}else if(typeof o=="string"&&tC.test(o)){var m=tC.exec(o);if(m==null||t==null)d=void 0;else{var v=+m[1];d=t[1]+v}}else d=t?.[1];var x=[u,d];if(Zs(x))return t==null?x:N_(x,t,n)}}}var Xo=1e9,lF={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Z0,In=!0,Ha="[DecimalError] ",Ml=Ha+"Invalid argument: ",X0=Ha+"Exponent out of range: ",Zo=Math.floor,Nl=Math.pow,oF=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ja,wr=1e7,An=7,_T=9007199254740991,gp=Zo(_T/An),Ue={};Ue.absoluteValue=Ue.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ue.comparedTo=Ue.cmp=function(e){var t,n,r,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(r=o.d.length,l=e.d.length,t=0,n=r<l?r:l;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===l?0:r>l^o.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*An;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(e){return es(this,new this.constructor(e))};Ue.dividedToIntegerBy=Ue.idiv=function(e){var t=this,n=t.constructor;return wn(es(t,new n(e),0,1),n.precision)};Ue.equals=Ue.eq=function(e){return!this.cmp(e)};Ue.exponent=function(){return or(this)};Ue.greaterThan=Ue.gt=function(e){return this.cmp(e)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(e){return this.cmp(e)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(e){return this.cmp(e)<0};Ue.lessThanOrEqualTo=Ue.lte=function(e){return this.cmp(e)<1};Ue.logarithm=Ue.log=function(e){var t,n=this,r=n.constructor,l=r.precision,o=l+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(ja))throw Error(Ha+"NaN");if(n.s<1)throw Error(Ha+(n.s?"NaN":"-Infinity"));return n.eq(ja)?new r(0):(In=!1,t=es(_u(n,o),_u(e,o),o),In=!0,wn(t,l))};Ue.minus=Ue.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DT(t,e):kT(t,(e.s=-e.s,e))};Ue.modulo=Ue.mod=function(e){var t,n=this,r=n.constructor,l=r.precision;if(e=new r(e),!e.s)throw Error(Ha+"NaN");return n.s?(In=!1,t=es(n,e,0,1).times(e),In=!0,n.minus(t)):wn(new r(n),l)};Ue.naturalExponential=Ue.exp=function(){return ET(this)};Ue.naturalLogarithm=Ue.ln=function(){return _u(this)};Ue.negated=Ue.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ue.plus=Ue.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?kT(t,e):DT(t,(e.s=-e.s,e))};Ue.precision=Ue.sd=function(e){var t,n,r,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ml+e);if(t=or(l)+1,r=l.d.length-1,n=r*An+1,r=l.d[r],r){for(;r%10==0;r/=10)n--;for(r=l.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Ue.squareRoot=Ue.sqrt=function(){var e,t,n,r,l,o,u,d=this,h=d.constructor;if(d.s<1){if(!d.s)return new h(0);throw Error(Ha+"NaN")}for(e=or(d),In=!1,l=Math.sqrt(+d),l==0||l==1/0?(t=yi(d.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=Zo((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new h(t)):r=new h(l.toString()),n=h.precision,l=u=n+3;;)if(o=r,r=o.plus(es(d,o,u+2)).times(.5),yi(o.d).slice(0,u)===(t=yi(r.d)).slice(0,u)){if(t=t.slice(u-3,u+1),l==u&&t=="4999"){if(wn(o,n+1,0),o.times(o).eq(d)){r=o;break}}else if(t!="9999")break;u+=4}return In=!0,wn(r,n)};Ue.times=Ue.mul=function(e){var t,n,r,l,o,u,d,h,p,m=this,v=m.constructor,x=m.d,j=(e=new v(e)).d;if(!m.s||!e.s)return new v(0);for(e.s*=m.s,n=m.e+e.e,h=x.length,p=j.length,h<p&&(o=x,x=j,j=o,u=h,h=p,p=u),o=[],u=h+p,r=u;r--;)o.push(0);for(r=p;--r>=0;){for(t=0,l=h+r;l>r;)d=o[l]+j[r]*x[l-r-1]+t,o[l--]=d%wr|0,t=d/wr|0;o[l]=(o[l]+t)%wr|0}for(;!o[--u];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,In?wn(e,v.precision):e};Ue.toDecimalPlaces=Ue.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Si(e,0,Xo),t===void 0?t=r.rounding:Si(t,0,8),wn(n,e+or(n)+1,t))};Ue.toExponential=function(e,t){var n,r=this,l=r.constructor;return e===void 0?n=Il(r,!0):(Si(e,0,Xo),t===void 0?t=l.rounding:Si(t,0,8),r=wn(new l(r),e+1,t),n=Il(r,!0,e+1)),n};Ue.toFixed=function(e,t){var n,r,l=this,o=l.constructor;return e===void 0?Il(l):(Si(e,0,Xo),t===void 0?t=o.rounding:Si(t,0,8),r=wn(new o(l),e+or(l)+1,t),n=Il(r.abs(),!1,e+or(r)+1),l.isneg()&&!l.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var e=this,t=e.constructor;return wn(new t(e),or(e)+1,t.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(e){var t,n,r,l,o,u,d=this,h=d.constructor,p=12,m=+(e=new h(e));if(!e.s)return new h(ja);if(d=new h(d),!d.s){if(e.s<1)throw Error(Ha+"Infinity");return d}if(d.eq(ja))return d;if(r=h.precision,e.eq(ja))return wn(d,r);if(t=e.e,n=e.d.length-1,u=t>=n,o=d.s,u){if((n=m<0?-m:m)<=_T){for(l=new h(ja),t=Math.ceil(r/An+4),In=!1;n%2&&(l=l.times(d),__(l.d,t)),n=Zo(n/2),n!==0;)d=d.times(d),__(d.d,t);return In=!0,e.s<0?new h(ja).div(l):wn(l,r)}}else if(o<0)throw Error(Ha+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,d.s=1,In=!1,l=e.times(_u(d,r+p)),In=!0,l=ET(l),l.s=o,l};Ue.toPrecision=function(e,t){var n,r,l=this,o=l.constructor;return e===void 0?(n=or(l),r=Il(l,n<=o.toExpNeg||n>=o.toExpPos)):(Si(e,1,Xo),t===void 0?t=o.rounding:Si(t,0,8),l=wn(new o(l),e,t),n=or(l),r=Il(l,e<=n||n<=o.toExpNeg,e)),r};Ue.toSignificantDigits=Ue.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Si(e,1,Xo),t===void 0?t=r.rounding:Si(t,0,8)),wn(new r(n),e,t)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=or(e),n=e.constructor;return Il(e,t<=n.toExpNeg||t>=n.toExpPos)};function kT(e,t){var n,r,l,o,u,d,h,p,m=e.constructor,v=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),In?wn(t,v):t;if(h=e.d,p=t.d,u=e.e,l=t.e,h=h.slice(),o=u-l,o){for(o<0?(r=h,o=-o,d=p.length):(r=p,l=u,d=h.length),u=Math.ceil(v/An),d=u>d?u+1:d+1,o>d&&(o=d,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(d=h.length,o=p.length,d-o<0&&(o=d,r=p,p=h,h=r),n=0;o;)n=(h[--o]=h[o]+p[o]+n)/wr|0,h[o]%=wr;for(n&&(h.unshift(n),++l),d=h.length;h[--d]==0;)h.pop();return t.d=h,t.e=l,In?wn(t,v):t}function Si(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ml+e)}function yi(e){var t,n,r,l=e.length-1,o="",u=e[0];if(l>0){for(o+=u,t=1;t<l;t++)r=e[t]+"",n=An-r.length,n&&(o+=Fs(n)),o+=r;u=e[t],r=u+"",n=An-r.length,n&&(o+=Fs(n))}else if(u===0)return"0";for(;u%10===0;)u/=10;return o+u}var es=(function(){function e(r,l){var o,u=0,d=r.length;for(r=r.slice();d--;)o=r[d]*l+u,r[d]=o%wr|0,u=o/wr|0;return u&&r.unshift(u),r}function t(r,l,o,u){var d,h;if(o!=u)h=o>u?1:-1;else for(d=h=0;d<o;d++)if(r[d]!=l[d]){h=r[d]>l[d]?1:-1;break}return h}function n(r,l,o){for(var u=0;o--;)r[o]-=u,u=r[o]<l[o]?1:0,r[o]=u*wr+r[o]-l[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,l,o,u){var d,h,p,m,v,x,j,w,N,S,C,k,E,O,D,A,M,q,te=r.constructor,ce=r.s==l.s?1:-1,G=r.d,R=l.d;if(!r.s)return new te(r);if(!l.s)throw Error(Ha+"Division by zero");for(h=r.e-l.e,M=R.length,D=G.length,j=new te(ce),w=j.d=[],p=0;R[p]==(G[p]||0);)++p;if(R[p]>(G[p]||0)&&--h,o==null?k=o=te.precision:u?k=o+(or(r)-or(l))+1:k=o,k<0)return new te(0);if(k=k/An+2|0,p=0,M==1)for(m=0,R=R[0],k++;(p<D||m)&&k--;p++)E=m*wr+(G[p]||0),w[p]=E/R|0,m=E%R|0;else{for(m=wr/(R[0]+1)|0,m>1&&(R=e(R,m),G=e(G,m),M=R.length,D=G.length),O=M,N=G.slice(0,M),S=N.length;S<M;)N[S++]=0;q=R.slice(),q.unshift(0),A=R[0],R[1]>=wr/2&&++A;do m=0,d=t(R,N,M,S),d<0?(C=N[0],M!=S&&(C=C*wr+(N[1]||0)),m=C/A|0,m>1?(m>=wr&&(m=wr-1),v=e(R,m),x=v.length,S=N.length,d=t(v,N,x,S),d==1&&(m--,n(v,M<x?q:R,x))):(m==0&&(d=m=1),v=R.slice()),x=v.length,x<S&&v.unshift(0),n(N,v,S),d==-1&&(S=N.length,d=t(R,N,M,S),d<1&&(m++,n(N,M<S?q:R,S))),S=N.length):d===0&&(m++,N=[0]),w[p++]=m,d&&N[0]?N[S++]=G[O]||0:(N=[G[O]],S=1);while((O++<D||N[0]!==void 0)&&k--)}return w[0]||w.shift(),j.e=h,wn(j,u?o+or(j)+1:o)}})();function ET(e,t){var n,r,l,o,u,d,h=0,p=0,m=e.constructor,v=m.precision;if(or(e)>16)throw Error(X0+or(e));if(!e.s)return new m(ja);for(In=!1,d=v,u=new m(.03125);e.abs().gte(.1);)e=e.times(u),p+=5;for(r=Math.log(Nl(2,p))/Math.LN10*2+5|0,d+=r,n=l=o=new m(ja),m.precision=d;;){if(l=wn(l.times(e),d),n=n.times(++h),u=o.plus(es(l,n,d)),yi(u.d).slice(0,d)===yi(o.d).slice(0,d)){for(;p--;)o=wn(o.times(o),d);return m.precision=v,t==null?(In=!0,wn(o,v)):o}o=u}}function or(e){for(var t=e.e*An,n=e.d[0];n>=10;n/=10)t++;return t}function ry(e,t,n){if(t>e.LN10.sd())throw In=!0,n&&(e.precision=n),Error(Ha+"LN10 precision limit exceeded");return wn(new e(e.LN10),t)}function Fs(e){for(var t="";e--;)t+="0";return t}function _u(e,t){var n,r,l,o,u,d,h,p,m,v=1,x=10,j=e,w=j.d,N=j.constructor,S=N.precision;if(j.s<1)throw Error(Ha+(j.s?"NaN":"-Infinity"));if(j.eq(ja))return new N(0);if(t==null?(In=!1,p=S):p=t,j.eq(10))return t==null&&(In=!0),ry(N,p);if(p+=x,N.precision=p,n=yi(w),r=n.charAt(0),o=or(j),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)j=j.times(e),n=yi(j.d),r=n.charAt(0),v++;o=or(j),r>1?(j=new N("0."+n),o++):j=new N(r+"."+n.slice(1))}else return h=ry(N,p+2,S).times(o+""),j=_u(new N(r+"."+n.slice(1)),p-x).plus(h),N.precision=S,t==null?(In=!0,wn(j,S)):j;for(d=u=j=es(j.minus(ja),j.plus(ja),p),m=wn(j.times(j),p),l=3;;){if(u=wn(u.times(m),p),h=d.plus(es(u,new N(l),p)),yi(h.d).slice(0,p)===yi(d.d).slice(0,p))return d=d.times(2),o!==0&&(d=d.plus(ry(N,p+2,S).times(o+""))),d=es(d,new N(v),p),N.precision=S,t==null?(In=!0,wn(d,S)):d;d=h,l+=2}}function C_(e,t){var n,r,l;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(r,l),t){if(l-=r,n=n-r-1,e.e=Zo(n/An),e.d=[],r=(n+1)%An,n<0&&(r+=An),r<l){for(r&&e.d.push(+t.slice(0,r)),l-=An;r<l;)e.d.push(+t.slice(r,r+=An));t=t.slice(r),r=An-t.length}else r-=l;for(;r--;)t+="0";if(e.d.push(+t),In&&(e.e>gp||e.e<-gp))throw Error(X0+n)}else e.s=0,e.e=0,e.d=[0];return e}function wn(e,t,n){var r,l,o,u,d,h,p,m,v=e.d;for(u=1,o=v[0];o>=10;o/=10)u++;if(r=t-u,r<0)r+=An,l=t,p=v[m=0];else{if(m=Math.ceil((r+1)/An),o=v.length,m>=o)return e;for(p=o=v[m],u=1;o>=10;o/=10)u++;r%=An,l=r-An+u}if(n!==void 0&&(o=Nl(10,u-l-1),d=p/o%10|0,h=t<0||v[m+1]!==void 0||p%o,h=n<4?(d||h)&&(n==0||n==(e.s<0?3:2)):d>5||d==5&&(n==4||h||n==6&&(r>0?l>0?p/Nl(10,u-l):0:v[m-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return h?(o=or(e),v.length=1,t=t-o-1,v[0]=Nl(10,(An-t%An)%An),e.e=Zo(-t/An)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(r==0?(v.length=m,o=1,m--):(v.length=m+1,o=Nl(10,An-r),v[m]=l>0?(p/Nl(10,u-l)%Nl(10,l)|0)*o:0),h)for(;;)if(m==0){(v[0]+=o)==wr&&(v[0]=1,++e.e);break}else{if(v[m]+=o,v[m]!=wr)break;v[m--]=0,o=1}for(r=v.length;v[--r]===0;)v.pop();if(In&&(e.e>gp||e.e<-gp))throw Error(X0+or(e));return e}function DT(e,t){var n,r,l,o,u,d,h,p,m,v,x=e.constructor,j=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),In?wn(t,j):t;if(h=e.d,v=t.d,r=t.e,p=e.e,h=h.slice(),u=p-r,u){for(m=u<0,m?(n=h,u=-u,d=v.length):(n=v,r=p,d=h.length),l=Math.max(Math.ceil(j/An),d)+2,u>l&&(u=l,n.length=1),n.reverse(),l=u;l--;)n.push(0);n.reverse()}else{for(l=h.length,d=v.length,m=l<d,m&&(d=l),l=0;l<d;l++)if(h[l]!=v[l]){m=h[l]<v[l];break}u=0}for(m&&(n=h,h=v,v=n,t.s=-t.s),d=h.length,l=v.length-d;l>0;--l)h[d++]=0;for(l=v.length;l>u;){if(h[--l]<v[l]){for(o=l;o&&h[--o]===0;)h[o]=wr-1;--h[o],h[l]+=wr}h[l]-=v[l]}for(;h[--d]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(t.d=h,t.e=r,In?wn(t,j):t):new x(0)}function Il(e,t,n){var r,l=or(e),o=yi(e.d),u=o.length;return t?(n&&(r=n-u)>0?o=o.charAt(0)+"."+o.slice(1)+Fs(r):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+Fs(-l-1)+o,n&&(r=n-u)>0&&(o+=Fs(r))):l>=u?(o+=Fs(l+1-u),n&&(r=n-l-1)>0&&(o=o+"."+Fs(r))):((r=l+1)<u&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-u)>0&&(l+1===u&&(o+="."),o+=Fs(r))),e.s<0?"-"+o:o}function __(e,t){if(e.length>t)return e.length=t,!0}function OT(e){var t,n,r;function l(o){var u=this;if(!(u instanceof l))return new l(o);if(u.constructor=l,o instanceof l){u.s=o.s,u.e=o.e,u.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ml+o);if(o>0)u.s=1;else if(o<0)o=-o,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(o===~~o&&o<1e7){u.e=0,u.d=[o];return}return C_(u,o.toString())}else if(typeof o!="string")throw Error(Ml+o);if(o.charCodeAt(0)===45?(o=o.slice(1),u.s=-1):u.s=1,oF.test(o))C_(u,o);else throw Error(Ml+o)}if(l.prototype=Ue,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=OT,l.config=l.set=cF,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return l.config(e),l}function cF(e){if(!e||typeof e!="object")throw Error(Ha+"Object expected");var t,n,r,l=["precision",1,Xo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((r=e[n=l[t]])!==void 0)if(Zo(r)===r&&r>=l[t+1]&&r<=l[t+2])this[n]=r;else throw Error(Ml+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ml+n+": "+r);return this}var Z0=OT(lF);ja=new Z0(1);const fn=Z0;var uF=e=>e,TT={},AT=e=>e===TT,k_=e=>function t(){return arguments.length===0||arguments.length===1&&AT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},MT=(e,t)=>e===1?t:k_(function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];var o=r.filter(u=>u!==TT).length;return o>=e?t(...r):MT(e-o,k_(function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var p=r.map(m=>AT(m)?d.shift():m);return t(...p,...d)}))}),dF=e=>MT(e.length,e),Mx=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},fF=dF((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),pF=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return uF;var l=n.reverse(),o=l[0],u=l.slice(1);return function(){return u.reduce((d,h)=>h(d),o(...arguments))}},Px=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function PT(e){var t;return e===0?t=1:t=Math.floor(new fn(e).abs().log(10).toNumber())+1,t}function zT(e,t,n){for(var r=new fn(e),l=0,o=[];r.lt(t)&&l<1e5;)o.push(r.toNumber()),r=r.add(n),l++;return o}var RT=e=>{var[t,n]=e,[r,l]=[t,n];return t>n&&([r,l]=[n,t]),[r,l]},IT=(e,t,n)=>{if(e.lte(0))return new fn(0);var r=PT(e.toNumber()),l=new fn(10).pow(r),o=e.div(l),u=r!==1?.05:.1,d=new fn(Math.ceil(o.div(u).toNumber())).add(n).mul(u),h=d.mul(l);return t?new fn(h.toNumber()):new fn(Math.ceil(h.toNumber()))},hF=(e,t,n)=>{var r=new fn(1),l=new fn(e);if(!l.isint()&&n){var o=Math.abs(e);o<1?(r=new fn(10).pow(PT(e)-1),l=new fn(Math.floor(l.div(r).toNumber())).mul(r)):o>1&&(l=new fn(Math.floor(e)))}else e===0?l=new fn(Math.floor((t-1)/2)):n||(l=new fn(Math.floor(e)));var u=Math.floor((t-1)/2),d=pF(fF(h=>l.add(new fn(h-u).mul(r)).toNumber()),Mx);return d(0,t)},LT=function(t,n,r,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(r-1)))return{step:new fn(0),tickMin:new fn(0),tickMax:new fn(0)};var u=IT(new fn(n).sub(t).div(r-1),l,o),d;t<=0&&n>=0?d=new fn(0):(d=new fn(t).add(n).div(2),d=d.sub(new fn(d).mod(u)));var h=Math.ceil(d.sub(t).div(u).toNumber()),p=Math.ceil(new fn(n).sub(d).div(u).toNumber()),m=h+p+1;return m>r?LT(t,n,r,l,o+1):(m<r&&(p=n>0?p+(r-m):p,h=n>0?h:h+(r-m)),{step:u,tickMin:d.sub(new fn(h).mul(u)),tickMax:d.add(new fn(p).mul(u))})},mF=function(t){var[n,r]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(l,2),[d,h]=RT([n,r]);if(d===-1/0||h===1/0){var p=h===1/0?[d,...Mx(0,l-1).map(()=>1/0)]:[...Mx(0,l-1).map(()=>-1/0),h];return n>r?Px(p):p}if(d===h)return hF(d,l,o);var{step:m,tickMin:v,tickMax:x}=LT(d,h,u,o,0),j=zT(v,x.add(new fn(.1).mul(m)),m);return n>r?Px(j):j},vF=function(t,n){var[r,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[u,d]=RT([r,l]);if(u===-1/0||d===1/0)return[r,l];if(u===d)return[u];var h=Math.max(n,2),p=IT(new fn(d).sub(u).div(h-1),o,0),m=[...zT(new fn(u),new fn(d),p),d];return o===!1&&(m=m.map(v=>Math.round(v))),r>l?Px(m):m},gF=e=>e.rootProps.barCategoryGap,ph=e=>e.rootProps.stackOffset,$T=e=>e.rootProps.reverseStackOrder,J0=e=>e.options.chartName,eb=e=>e.rootProps.syncId,BT=e=>e.rootProps.syncMethod,tb=e=>e.options.eventEmitter,yF=e=>e.rootProps.baseValue,Ir={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Vi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ba={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},hh=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},xF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Vi.angleAxisId,includeHidden:!1,name:void 0,reversed:Vi.reversed,scale:Vi.scale,tick:Vi.tick,tickCount:void 0,ticks:void 0,type:Vi.type,unit:void 0},bF={allowDataOverflow:ba.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ba.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ba.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ba.scale,tick:ba.tick,tickCount:ba.tickCount,ticks:void 0,type:ba.type,unit:void 0},jF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Vi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vi.scale,tick:Vi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},wF={allowDataOverflow:ba.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ba.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ba.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ba.scale,tick:ba.tick,tickCount:ba.tickCount,ticks:void 0,type:"category",unit:void 0},nb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?jF:xF,rb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?wF:bF,mh=e=>e.polarOptions,ab=pe([ds,fs,Ar],v8),UT=pe([mh,ab],(e,t)=>{if(e!=null)return Xs(e.innerRadius,t,0)}),FT=pe([mh,ab],(e,t)=>{if(e!=null)return Xs(e.outerRadius,t,t*.8)}),SF=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},qT=pe([mh],SF);pe([nb,qT],hh);var HT=pe([ab,UT,FT],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});pe([rb,HT],hh);var WT=pe([xn,mh,UT,FT,ds,fs],(e,t,n,r,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||r==null)){var{cx:u,cy:d,startAngle:h,endAngle:p}=t;return{cx:Xs(u,l,l/2),cy:Xs(d,o,o/2),innerRadius:n,outerRadius:r,startAngle:h,endAngle:p,clockWise:!1}}}),hr=(e,t)=>t,vh=(e,t,n)=>n;function ib(e){return e?.id}function VT(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=n,u=new Map;return e.forEach(d=>{var h,p=(h=d.data)!==null&&h!==void 0?h:r;if(!(p==null||p.length===0)){var m=ib(d);p.forEach((v,x)=>{var j=o==null||l?x:String(Sr(v,o,null)),w=Sr(v,d.dataKey,0),N;u.has(j)?N=u.get(j):N={},Object.assign(N,{[m]:w}),u.set(j,N)})}}),Array.from(u.values())}function sb(e){return e.stackId!=null&&e.dataKey!=null}var gh=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function yh(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function NF(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var mr=e=>{var t=xn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Jo=e=>e.tooltip.settings.axisId;function E_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function yp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E_(Object(n),!0).forEach(function(r){CF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CF(e,t,n){return(t=_F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _F(e){var t=kF(e,"string");return typeof t=="symbol"?t:t+""}function kF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zx=[0,"auto"],br={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},GT=(e,t)=>e.cartesianAxis.xAxis[t],hs=(e,t)=>{var n=GT(e,t);return n??br},jr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:zx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:qu},YT=(e,t)=>e.cartesianAxis.yAxis[t],ms=(e,t)=>{var n=YT(e,t);return n??jr},EF={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},lb=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??EF},Xr=(e,t,n)=>{switch(t){case"xAxis":return hs(e,n);case"yAxis":return ms(e,n);case"zAxis":return lb(e,n);case"angleAxis":return nb(e,n);case"radiusAxis":return rb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},DF=(e,t,n)=>{switch(t){case"xAxis":return hs(e,n);case"yAxis":return ms(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ku=(e,t,n)=>{switch(t){case"xAxis":return hs(e,n);case"yAxis":return ms(e,n);case"angleAxis":return nb(e,n);case"radiusAxis":return rb(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},KT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function QT(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var ob=e=>e.graphicalItems.cartesianItems,OF=pe([hr,vh],QT),XT=(e,t,n)=>e.filter(n).filter(r=>t?.includeHidden===!0?!0:!r.hide),Qu=pe([ob,Xr,OF],XT,{memoizeOptions:{resultEqualityCheck:yh}}),ZT=pe([Qu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(sb)),JT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),TF=pe([Qu],JT),eA=e=>e.map(t=>t.data).filter(Boolean).flat(1),AF=pe([Qu],eA,{memoizeOptions:{resultEqualityCheck:yh}}),tA=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:l}=t;return e.length>0?e:n.slice(r,l+1)},cb=pe([AF,fh],tA),nA=(e,t,n)=>t?.dataKey!=null?e.map(r=>({value:Sr(r,t.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>e.map(l=>({value:Sr(l,r)}))):e.map(r=>({value:r})),xh=pe([cb,Xr,Qu],nA);function rA(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function zf(e){if(bi(e)||e instanceof Date){var t=Number(e);if(Hn(t))return t}}function D_(e){if(Array.isArray(e)){var t=[zf(e[0]),zf(e[1])];return Zs(t)?t:void 0}var n=zf(e);if(n!=null)return[n,n]}function os(e){return e.map(zf).filter(q6)}function MF(e,t,n){return!n||typeof t!="number"||ii(t)?[]:n.length?os(n.flatMap(r=>{var l=Sr(e,r.dataKey),o,u;if(Array.isArray(l)?[o,u]=l:o=u=l,!(!Hn(o)||!Hn(u)))return[t-o,t+u]})):[]}var vr=e=>{var t=mr(e),n=Jo(e);return Ku(e,t,n)},Xu=pe([vr],e=>e?.dataKey),PF=pe([ZT,fh,vr],VT),aA=(e,t,n,r)=>{var l={},o=t.reduce((u,d)=>(d.stackId==null||(u[d.stackId]==null&&(u[d.stackId]=[]),u[d.stackId].push(d)),u),l);return Object.fromEntries(Object.entries(o).map(u=>{var[d,h]=u,p=r?[...h].reverse():h,m=p.map(ib);return[d,{stackedData:oL(e,m,n),graphicalItems:p}]}))},Rx=pe([PF,ZT,ph,$T],aA),iA=(e,t,n,r)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(r==null&&n!=="zAxis"){var u=fL(e,l,o);if(!(u!=null&&u[0]===0&&u[1]===0))return u}},zF=pe([Xr],e=>e.allowDataOverflow),ub=e=>{var t;if(e==null||!("domain"in e))return zx;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=os(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:zx},sA=pe([Xr],ub),lA=pe([sA,zF],CT),RF=pe([Rx,nl,hr,lA],iA,{memoizeOptions:{resultEqualityCheck:gh}}),db=e=>e.errorBars,IF=(e,t,n)=>e.flatMap(r=>t[r.id]).filter(Boolean).filter(r=>rA(n,r)),xp=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var l=n.filter(Boolean);if(l.length!==0){var o=l.flat(),u=Math.min(...o),d=Math.max(...o);return[u,d]}},oA=(e,t,n,r,l)=>{var o,u;if(n.length>0&&e.forEach(d=>{n.forEach(h=>{var p,m,v=(p=r[h.id])===null||p===void 0?void 0:p.filter(C=>rA(l,C)),x=Sr(d,(m=t.dataKey)!==null&&m!==void 0?m:h.dataKey),j=MF(d,x,v);if(j.length>=2){var w=Math.min(...j),N=Math.max(...j);(o==null||w<o)&&(o=w),(u==null||N>u)&&(u=N)}var S=D_(x);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),u=u==null?S[1]:Math.max(u,S[1]))})}),t?.dataKey!=null&&e.forEach(d=>{var h=D_(Sr(d,t.dataKey));h!=null&&(o=o==null?h[0]:Math.min(o,h[0]),u=u==null?h[1]:Math.max(u,h[1]))}),Hn(o)&&Hn(u))return[o,u]},LF=pe([cb,Xr,TF,db,hr],oA,{memoizeOptions:{resultEqualityCheck:gh}});function $F(e){var{value:t}=e;if(bi(t)||t instanceof Date)return t}var BF=(e,t,n)=>{var r=e.map($F).filter(l=>l!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&SD(r))?HO(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))},cA=e=>e.referenceElements.dots,ec=(e,t,n)=>e.filter(r=>r.ifOverflow==="extendDomain").filter(r=>t==="xAxis"?r.xAxisId===n:r.yAxisId===n),UF=pe([cA,hr,vh],ec),uA=e=>e.referenceElements.areas,FF=pe([uA,hr,vh],ec),dA=e=>e.referenceElements.lines,qF=pe([dA,hr,vh],ec),fA=(e,t)=>{var n=os(e.map(r=>t==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},HF=pe(UF,hr,fA),pA=(e,t)=>{var n=os(e.flatMap(r=>[t==="xAxis"?r.x1:r.y1,t==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},WF=pe([FF,hr],pA);function VF(e){var t;if(e.x!=null)return os([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.x);return n==null||n.length===0?[]:os(n)}function GF(e){var t;if(e.y!=null)return os([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(r=>r.y);return n==null||n.length===0?[]:os(n)}var hA=(e,t)=>{var n=e.flatMap(r=>t==="xAxis"?VF(r):GF(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},YF=pe([qF,hr],hA),KF=pe(HF,YF,WF,(e,t,n)=>xp(e,n,t)),mA=(e,t,n,r,l,o,u,d)=>{if(n!=null)return n;var h=u==="vertical"&&d==="xAxis"||u==="horizontal"&&d==="yAxis",p=h?xp(r,o,l):xp(o,l);return sF(t,p,e.allowDataOverflow)},QF=pe([Xr,sA,lA,RF,LF,KF,xn,hr],mA,{memoizeOptions:{resultEqualityCheck:gh}}),XF=[0,1],vA=(e,t,n,r,l,o,u)=>{if(!((e==null||n==null||n.length===0)&&u===void 0)){var{dataKey:d,type:h}=e,p=_i(t,o);if(p&&d==null){var m;return HO(0,(m=n?.length)!==null&&m!==void 0?m:0)}return h==="category"?BF(r,e,p):l==="expand"?XF:u}},fb=pe([Xr,xn,cb,xh,ph,hr,QF],vA),gA=(e,t,n,r,l)=>{if(e!=null){var{scale:o,type:u}=e;if(o==="auto")return t==="radial"&&l==="radiusAxis"?"band":t==="radial"&&l==="angleAxis"?"linear":u==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":u==="category"?"band":"linear";if(typeof o=="string"){var d="scale".concat(Lu(o));return d in lu?d:"point"}}},Zu=pe([Xr,xn,KT,J0,hr],gA);function ZF(e){if(e!=null){if(e in lu)return lu[e]();var t="scale".concat(Lu(e));if(t in lu)return lu[t]()}}function pb(e,t,n,r){if(!(n==null||r==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(r);var l=ZF(t);if(l!=null){var o=l.domain(n).range(r);return aL(o),o}}}var yA=(e,t,n)=>{var r=ub(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Zs(e))return mF(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Zs(e))return vF(e,t.tickCount,t.allowDecimals)}},hb=pe([fb,Ku,Zu],yA),xA=(e,t,n,r)=>{if(r!=="angleAxis"&&e?.type==="number"&&Zs(t)&&Array.isArray(n)&&n.length>0){var l=t[0],o=n[0],u=t[1],d=n[n.length-1];return[Math.min(l,o),Math.max(u,d)]}return t},JF=pe([Xr,fb,hb,hr],xA),eq=pe(xh,Xr,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,r=Array.from(os(e.map(d=>d.value))).sort((d,h)=>d-h);if(r.length<2)return 1/0;var l=r[r.length-1]-r[0];if(l===0)return 1/0;for(var o=0;o<r.length-1;o++){var u=r[o+1]-r[o];n=Math.min(n,u)}return n/l}}),bA=pe(eq,xn,gF,Ar,(e,t,n,r)=>r,(e,t,n,r,l)=>{if(!Hn(e))return 0;var o=t==="vertical"?r.height:r.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var u=Xs(n,e*o),d=e*o/2;return d-u-(d-u)/o*u}return 0}),tq=(e,t)=>{var n=hs(e,t);return n==null||typeof n.padding!="string"?0:bA(e,"xAxis",t,n.padding)},nq=(e,t)=>{var n=ms(e,t);return n==null||typeof n.padding!="string"?0:bA(e,"yAxis",t,n.padding)},rq=pe(hs,tq,(e,t)=>{var n,r;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((n=l.left)!==null&&n!==void 0?n:0)+t,right:((r=l.right)!==null&&r!==void 0?r:0)+t}}),aq=pe(ms,nq,(e,t)=>{var n,r;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((n=l.top)!==null&&n!==void 0?n:0)+t,bottom:((r=l.bottom)!==null&&r!==void 0?r:0)+t}}),iq=pe([Ar,rq,Zp,Xp,(e,t,n)=>n],(e,t,n,r,l)=>{var{padding:o}=r;return l?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),sq=pe([Ar,xn,aq,Zp,Xp,(e,t,n)=>n],(e,t,n,r,l,o)=>{var{padding:u}=l;return o?[r.height-u.bottom,u.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Ju=(e,t,n,r)=>{var l;switch(t){case"xAxis":return iq(e,n,r);case"yAxis":return sq(e,n,r);case"zAxis":return(l=lb(e,n))===null||l===void 0?void 0:l.range;case"angleAxis":return qT(e);case"radiusAxis":return HT(e,n);default:return}},jA=pe([Xr,Ju],hh),tc=pe([Xr,Zu,JF,jA],pb);pe([Qu,db,hr],IF);function wA(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var bh=(e,t)=>t,jh=(e,t,n)=>n,lq=pe(Kp,bh,jh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(wA)),oq=pe(Qp,bh,jh,(e,t,n)=>e.filter(r=>r.orientation===t).filter(r=>r.mirror===n).sort(wA)),SA=(e,t)=>({width:e.width,height:t.height}),cq=(e,t)=>{var n=typeof t.width=="number"?t.width:qu;return{width:n,height:e.height}},uq=pe(Ar,hs,SA),dq=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},fq=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},pq=pe(fs,Ar,lq,bh,jh,(e,t,n,r,l)=>{var o={},u;return n.forEach(d=>{var h=SA(t,d);u==null&&(u=dq(t,r,e));var p=r==="top"&&!l||r==="bottom"&&l;o[d.id]=u-Number(p)*h.height,u+=(p?-1:1)*h.height}),o}),hq=pe(ds,Ar,oq,bh,jh,(e,t,n,r,l)=>{var o={},u;return n.forEach(d=>{var h=cq(t,d);u==null&&(u=fq(t,r,e));var p=r==="left"&&!l||r==="right"&&l;o[d.id]=u-Number(p)*h.width,u+=(p?-1:1)*h.width}),o}),mq=(e,t)=>{var n=hs(e,t);if(n!=null)return pq(e,n.orientation,n.mirror)},vq=pe([Ar,hs,mq,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var l=n?.[r];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),gq=(e,t)=>{var n=ms(e,t);if(n!=null)return hq(e,n.orientation,n.mirror)},yq=pe([Ar,ms,gq,(e,t)=>t],(e,t,n,r)=>{if(t!=null){var l=n?.[r];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),xq=pe(Ar,ms,(e,t)=>{var n=typeof t.width=="number"?t.width:qu;return{width:n,height:e.height}}),NA=(e,t,n,r)=>{if(n!=null){var{allowDuplicatedCategory:l,type:o,dataKey:u}=n,d=_i(e,r),h=t.map(p=>p.value);if(u&&d&&o==="category"&&l&&SD(h))return h}},mb=pe([xn,xh,Xr,hr],NA),CA=(e,t,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:l,scale:o}=n,u=_i(e,r);if(u&&(l==="number"||o!=="auto"))return t.map(d=>d.value)}},vb=pe([xn,xh,Ku,hr],CA),O_=pe([xn,DF,Zu,tc,mb,vb,Ju,hb,hr],(e,t,n,r,l,o,u,d,h)=>{if(t!=null){var p=_i(e,h);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:h,categoricalDomain:o,duplicateDomain:l,isCategorical:p,niceTicks:d,range:u,realScaleType:n,scale:r}}}),bq=(e,t,n,r,l,o,u,d,h)=>{if(!(t==null||r==null)){var p=_i(e,h),{type:m,ticks:v,tickCount:x}=t,j=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,w=m==="category"&&r.bandwidth?r.bandwidth()/j:0;w=h==="angleAxis"&&o!=null&&o.length>=2?$a(o[0]-o[1])*2*w:w;var N=v||l;if(N){var S=N.map((C,k)=>{var E=u?u.indexOf(C):C;return{index:k,coordinate:r(E)+w,value:C,offset:w}});return S.filter(C=>Hn(C.coordinate))}return p&&d?d.map((C,k)=>({coordinate:r(C)+w,value:C,index:k,offset:w})).filter(C=>Hn(C.coordinate)):r.ticks?r.ticks(x).map(C=>({coordinate:r(C)+w,value:C,offset:w})):r.domain().map((C,k)=>({coordinate:r(C)+w,value:u?u[C]:C,index:k,offset:w}))}},_A=pe([xn,Ku,Zu,tc,hb,Ju,mb,vb,hr],bq),jq=(e,t,n,r,l,o,u)=>{if(!(t==null||n==null||r==null||r[0]===r[1])){var d=_i(e,u),{tickCount:h}=t,p=0;return p=u==="angleAxis"&&r?.length>=2?$a(r[0]-r[1])*2*p:p,d&&o?o.map((m,v)=>({coordinate:n(m)+p,value:m,index:v,offset:p})):n.ticks?n.ticks(h).map(m=>({coordinate:n(m)+p,value:m,offset:p})):n.domain().map((m,v)=>({coordinate:n(m)+p,value:l?l[m]:m,index:v,offset:p}))}},wh=pe([xn,Ku,tc,Ju,mb,vb,hr],jq),Sh=pe(Xr,tc,(e,t)=>{if(!(e==null||t==null))return yp(yp({},e),{},{scale:t})}),wq=pe([Xr,Zu,fb,jA],pb);pe((e,t,n)=>lb(e,n),wq,(e,t)=>{if(!(e==null||t==null))return yp(yp({},e),{},{scale:t})});var Sq=pe([xn,Kp,Qp],(e,t,n)=>{switch(e){case"horizontal":return t.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),kA=e=>e.options.defaultTooltipEventType,EA=e=>e.options.validateTooltipEventTypes;function DA(e,t,n){if(e==null)return t;var r=e?"axis":"item";return n==null?t:n.includes(r)?r:t}function gb(e,t){var n=kA(e),r=EA(e);return DA(t,n,r)}function Nq(e){return Je(t=>gb(t,e))}var OA=(e,t)=>{var n,r=Number(t);if(!(ii(r)||t==null))return r>=0?e==null||(n=e[r])===null||n===void 0?void 0:n.value:void 0},Cq=e=>e.tooltip.settings,Hs={active:!1,index:null,dataKey:void 0,coordinate:void 0},_q={itemInteraction:{click:Hs,hover:Hs},axisInteraction:{click:Hs,hover:Hs},keyboardInteraction:Hs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},TA=oa({name:"tooltip",initialState:_q,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Rn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:r}=t.payload,l=ri(e).tooltipItemPayloads.indexOf(n);l>-1&&(e.tooltipItemPayloads[l]=r)},prepare:Rn()},removeTooltipEntrySettings:{reducer(e,t){var n=ri(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Rn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:kq,replaceTooltipEntrySettings:Eq,removeTooltipEntrySettings:Dq,setTooltipSettingsState:Oq,setActiveMouseOverItemIndex:Tq,mouseLeaveItem:$X,mouseLeaveChart:AA,setActiveClickItemIndex:BX,setMouseOverAxisIndex:MA,setMouseClickAxisIndex:Aq,setSyncInteraction:Ix,setKeyboardInteraction:Lx}=TA.actions,Mq=TA.reducer;function T_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Nf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T_(Object(n),!0).forEach(function(r){Pq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pq(e,t,n){return(t=zq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zq(e){var t=Rq(e,"string");return typeof t=="symbol"?t:t+""}function Rq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iq(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Lq(e){return e.index!=null}var PA=(e,t,n,r)=>{if(t==null)return Hs;var l=Iq(e,t,n);if(l==null)return Hs;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(Lq(l)){if(o)return Nf(Nf({},l),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Nf(Nf({},Hs),{},{coordinate:l.coordinate})};function $q(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function Bq(e,t){var n=$q(e),r=t[0],l=t[1];if(n===void 0)return!1;var o=Math.min(r,l),u=Math.max(r,l);return n>=o&&n<=u}function Uq(e,t,n){if(n==null||t==null)return!0;var r=Sr(e,t);return r==null||!Zs(n)?!0:Bq(r,n)}var yb=(e,t,n,r)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!Hn(o))return l;var u=0,d=1/0;t.length>0&&(d=t.length-1);var h=Math.max(u,Math.min(o,d)),p=t[h];return p==null||Uq(p,n,r)?String(h):null},zA=(e,t,n,r,l,o,u,d)=>{if(!(o==null||d==null)){var h=u[0],p=h==null?void 0:d(h.positions,o);if(p!=null)return p;var m=l?.[Number(o)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+t)/2};default:return{x:(r.left+e)/2,y:m.coordinate}}}},RA=(e,t,n,r)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;return n==="hover"?l=e.itemInteraction.hover.dataKey:l=e.itemInteraction.click.dataKey,l==null&&r!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var u;return((u=o.settings)===null||u===void 0?void 0:u.dataKey)===l})},ed=e=>e.options.tooltipPayloadSearcher,nc=e=>e.tooltip;function A_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function M_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A_(Object(n),!0).forEach(function(r){Fq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fq(e,t,n){return(t=qq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e){var t=Hq(e,"string");return typeof t=="symbol"?t:t+""}function Hq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wq(e,t){return e??t}var IA=(e,t,n,r,l,o,u)=>{if(!(t==null||o==null)){var{chartData:d,computedData:h,dataStartIndex:p,dataEndIndex:m}=n,v=[];return e.reduce((x,j)=>{var w,{dataDefinedOnItem:N,settings:S}=j,C=Wq(N,d),k=Array.isArray(C)?vO(C,p,m):C,E=(w=S?.dataKey)!==null&&w!==void 0?w:r,O=S?.nameKey,D;if(r&&Array.isArray(k)&&!Array.isArray(k[0])&&u==="axis"?D=ND(k,r,l):D=o(k,t,h,O),Array.isArray(D))D.forEach(M=>{var q=M_(M_({},S),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});x.push(nC({tooltipEntrySettings:q,dataKey:M.dataKey,payload:M.payload,value:Sr(M.payload,M.dataKey),name:M.name}))});else{var A;x.push(nC({tooltipEntrySettings:S,dataKey:E,payload:D,value:Sr(D,E),name:(A=Sr(D,O))!==null&&A!==void 0?A:S?.name}))}return x},v)}},xb=pe([vr,xn,KT,J0,mr],gA),Vq=pe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Gq=pe([mr,Jo],QT),td=pe([Vq,vr,Gq],XT,{memoizeOptions:{resultEqualityCheck:yh}}),Yq=pe([td],e=>e.filter(sb)),Kq=pe([td],eA,{memoizeOptions:{resultEqualityCheck:yh}}),rc=pe([Kq,nl],tA),Qq=pe([Yq,nl,vr],VT),bb=pe([rc,vr,td],nA),LA=pe([vr],ub),Xq=pe([vr],e=>e.allowDataOverflow),$A=pe([LA,Xq],CT),Zq=pe([td],e=>e.filter(sb)),Jq=pe([Qq,Zq,ph,$T],aA),e9=pe([Jq,nl,mr,$A],iA),t9=pe([td],JT),n9=pe([rc,vr,t9,db,mr],oA,{memoizeOptions:{resultEqualityCheck:gh}}),r9=pe([cA,mr,Jo],ec),a9=pe([r9,mr],fA),i9=pe([uA,mr,Jo],ec),s9=pe([i9,mr],pA),l9=pe([dA,mr,Jo],ec),o9=pe([l9,mr],hA),c9=pe([a9,o9,s9],xp),u9=pe([vr,LA,$A,e9,n9,c9,xn,mr],mA),nd=pe([vr,xn,rc,bb,ph,mr,u9],vA),d9=pe([nd,vr,xb],yA),f9=pe([vr,nd,d9,mr],xA),BA=e=>{var t=mr(e),n=Jo(e),r=!1;return Ju(e,t,n,r)},UA=pe([vr,BA],hh),FA=pe([vr,xb,f9,UA],pb),p9=pe([xn,bb,vr,mr],NA),h9=pe([xn,bb,vr,mr],CA),m9=(e,t,n,r,l,o,u,d)=>{if(t){var{type:h}=t,p=_i(e,d);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,v=h==="category"&&r.bandwidth?r.bandwidth()/m:0;return v=d==="angleAxis"&&l!=null&&l?.length>=2?$a(l[0]-l[1])*2*v:v,p&&u?u.map((x,j)=>({coordinate:r(x)+v,value:x,index:j,offset:v})):r.domain().map((x,j)=>({coordinate:r(x)+v,value:o?o[x]:x,index:j,offset:v}))}}},vs=pe([xn,vr,xb,FA,BA,p9,h9,mr],m9),jb=pe([kA,EA,Cq],(e,t,n)=>DA(n.shared,e,t)),qA=e=>e.tooltip.settings.trigger,wb=e=>e.tooltip.settings.defaultIndex,Nh=pe([nc,jb,qA,wb],PA),ku=pe([Nh,rc,Xu,nd],yb),HA=pe([vs,ku],OA),v9=pe([Nh],e=>{if(e)return e.dataKey}),WA=pe([nc,jb,qA,wb],RA),g9=pe([ds,fs,xn,Ar,vs,wb,WA,ed],zA),y9=pe([Nh,g9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),x9=pe([Nh],e=>e.active),b9=pe([WA,ku,nl,Xu,HA,ed,jb],IA),j9=pe([b9],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function P_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function z_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(n),!0).forEach(function(r){w9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w9(e,t,n){return(t=S9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S9(e){var t=N9(e,"string");return typeof t=="symbol"?t:t+""}function N9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C9=()=>Je(vr),_9=()=>{var e=C9(),t=Je(vs),n=Je(FA);return Lo(!e||!n?void 0:z_(z_({},e),{},{scale:n}),t)};function R_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R_(Object(n),!0).forEach(function(r){k9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k9(e,t,n){return(t=E9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E9(e){var t=D9(e,"string");return typeof t=="symbol"?t:t+""}function D9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O9=(e,t,n,r)=>{var l=t.find(o=>o&&o.index===n);if(l){if(e==="horizontal")return{x:l.coordinate,y:r.chartY};if(e==="vertical")return{x:r.chartX,y:l.coordinate}}return{x:0,y:0}},T9=(e,t,n,r)=>{var l=t.find(p=>p&&p.index===n);if(l){if(e==="centric"){var o=l.coordinate,{radius:u}=r;return No(No(No({},r),Tr(r.cx,r.cy,u,o)),{},{angle:o,radius:u})}var d=l.coordinate,{angle:h}=r;return No(No(No({},r),Tr(r.cx,r.cy,d,h)),{},{angle:h,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function A9(e,t){var{chartX:n,chartY:r}=e;return n>=t.left&&n<=t.left+t.width&&r>=t.top&&r<=t.top+t.height}var VA=(e,t,n,r,l)=>{var o,u=-1,d=(o=t?.length)!==null&&o!==void 0?o:0;if(d<=1||e==null)return 0;if(r==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var h=0;h<d;h++){var p=h>0?n[h-1].coordinate:n[d-1].coordinate,m=n[h].coordinate,v=h>=d-1?n[0].coordinate:n[h+1].coordinate,x=void 0;if($a(m-p)!==$a(v-m)){var j=[];if($a(v-m)===$a(l[1]-l[0])){x=v;var w=m+l[1]-l[0];j[0]=Math.min(w,(w+p)/2),j[1]=Math.max(w,(w+p)/2)}else{x=p;var N=v+l[1]-l[0];j[0]=Math.min(m,(N+m)/2),j[1]=Math.max(m,(N+m)/2)}var S=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(e>S[0]&&e<=S[1]||e>=j[0]&&e<=j[1]){({index:u}=n[h]);break}}else{var C=Math.min(p,v),k=Math.max(p,v);if(e>(C+m)/2&&e<=(k+m)/2){({index:u}=n[h]);break}}}else if(t){for(var E=0;E<d;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<d-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===d-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:u}=t[E]);break}}return u},GA=()=>Je(J0),Sb=(e,t)=>t,YA=(e,t,n)=>n,Nb=(e,t,n,r)=>r,M9=pe(vs,e=>$p(e,t=>t.coordinate)),Cb=pe([nc,Sb,YA,Nb],PA),_b=pe([Cb,rc,Xu,nd],yb),P9=(e,t,n)=>{if(t!=null){var r=nc(e);return t==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},KA=pe([nc,Sb,YA,Nb],RA),bp=pe([ds,fs,xn,Ar,vs,Nb,KA,ed],zA),z9=pe([Cb,bp],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),QA=pe([vs,_b],OA),R9=pe([KA,_b,nl,Xu,QA,ed,Sb],IA),I9=pe([Cb,_b],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),L9=(e,t,n,r,l,o,u)=>{if(!(!e||!n||!r||!l)&&A9(e,u)){var d=pL(e,t),h=VA(d,o,l,n,r),p=O9(t,l,h,e);return{activeIndex:String(h),activeCoordinate:p}}},$9=(e,t,n,r,l,o,u)=>{if(!(!e||!r||!l||!o||!n)){var d=j8(e,n);if(d){var h=hL(d,t),p=VA(h,u,o,r,l),m=T9(t,o,p,d);return{activeIndex:String(p),activeCoordinate:m}}}},B9=(e,t,n,r,l,o,u,d)=>{if(!(!e||!t||!r||!l||!o))return t==="horizontal"||t==="vertical"?L9(e,t,r,l,o,u,d):$9(e,t,n,r,l,o,u)},U9=pe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var r=e[t];if(r!=null)return n?r.panoramaElementId:r.elementId}}),F9=pe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(r=>parseInt(r,10)).concat(Object.values(Ir)),n=Array.from(new Set(t));return n.sort((r,l)=>r-l)},{memoizeOptions:{resultEqualityCheck:NF}});function I_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function L_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I_(Object(n),!0).forEach(function(r){q9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q9(e,t,n){return(t=H9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H9(e){var t=W9(e,"string");return typeof t=="symbol"?t:t+""}function W9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V9={},G9={zIndexMap:Object.values(Ir).reduce((e,t)=>L_(L_({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),V9)},Y9=new Set(Object.values(Ir));function K9(e){return Y9.has(e)}var XA=oa({name:"zIndex",initialState:G9,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Rn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!K9(n)&&delete e.zIndexMap[n])},prepare:Rn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n,elementId:r,isPanorama:l}=t.payload;e.zIndexMap[n]?l?e.zIndexMap[n].panoramaElementId=r:e.zIndexMap[n].elementId=r:e.zIndexMap[n]={consumers:0,elementId:l?void 0:r,panoramaElementId:l?r:void 0}},prepare:Rn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElementId=void 0:e.zIndexMap[n].elementId=void 0)},prepare:Rn()}}}),{registerZIndexPortal:Q9,unregisterZIndexPortal:X9,registerZIndexPortalId:Z9,unregisterZIndexPortalId:J9}=XA.actions,e7=XA.reducer;function ki(e){var{zIndex:t,children:n}=e,r=GL(),l=r&&t!==void 0&&t!==0,o=Br(),u=Nr();g.useLayoutEffect(()=>l?(u(Q9({zIndex:t})),()=>{u(X9({zIndex:t}))}):$u,[u,t,l]);var d=Je(p=>U9(p,t,o));if(!l)return n;if(!d)return null;var h=document.getElementById(d);return h?FE.createPortal(n,h):null}function $x(){return $x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$x.apply(null,arguments)}function $_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Cf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$_(Object(n),!0).forEach(function(r){t7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t7(e,t,n){return(t=n7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n7(e){var t=r7(e,"string");return typeof t=="symbol"?t:t+""}function r7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a7(e){var{cursor:t,cursorComp:n,cursorProps:r}=e;return g.isValidElement(t)?g.cloneElement(t,r):g.createElement(n,r)}function i7(e){var t,{coordinate:n,payload:r,index:l,offset:o,tooltipAxisBandSize:u,layout:d,cursor:h,tooltipEventType:p,chartName:m}=e,v=n,x=r,j=l;if(!h||!v||m!=="ScatterChart"&&p!=="axis")return null;var w,N,S;if(m==="ScatterChart")w=v,N=R$,S=Ir.cursorLine;else if(m==="BarChart")w=I$(d,v,o,u),N=BO,S=Ir.cursorRectangle;else if(d==="radial"&&kD(v)){var{cx:C,cy:k,radius:E,startAngle:O,endAngle:D}=UO(v);w={cx:C,cy:k,startAngle:O,endAngle:D,innerRadius:E,outerRadius:E},N=qO,S=Ir.cursorLine}else w={points:C8(d,v,o)},N=ou,S=Ir.cursorLine;var A=typeof h=="object"&&"className"in h?h.className:void 0,M=Cf(Cf(Cf(Cf({stroke:"#ccc",pointerEvents:"none"},o),w),Pp(h)),{},{payload:x,payloadIndex:j,className:yn("recharts-tooltip-cursor",A)});return g.createElement(ki,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},g.createElement(a7,{cursor:h,cursorComp:N,cursorProps:M}))}function s7(e){var t=_9(),n=CO(),r=Ko(),l=GA();return t==null||n==null||r==null||l==null?null:g.createElement(i7,$x({},e,{offset:n,layout:r,tooltipAxisBandSize:t,chartName:l}))}var ZA=g.createContext(null),l7=()=>g.useContext(ZA),ay={exports:{}},B_;function o7(){return B_||(B_=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function l(h,p,m){this.fn=h,this.context=p,this.once=m||!1}function o(h,p,m,v,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var j=new l(m,v||h,x),w=n?n+p:p;return h._events[w]?h._events[w].fn?h._events[w]=[h._events[w],j]:h._events[w].push(j):(h._events[w]=j,h._eventsCount++),h}function u(h,p){--h._eventsCount===0?h._events=new r:delete h._events[p]}function d(){this._events=new r,this._eventsCount=0}d.prototype.eventNames=function(){var p=[],m,v;if(this._eventsCount===0)return p;for(v in m=this._events)t.call(m,v)&&p.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},d.prototype.listeners=function(p){var m=n?n+p:p,v=this._events[m];if(!v)return[];if(v.fn)return[v.fn];for(var x=0,j=v.length,w=new Array(j);x<j;x++)w[x]=v[x].fn;return w},d.prototype.listenerCount=function(p){var m=n?n+p:p,v=this._events[m];return v?v.fn?1:v.length:0},d.prototype.emit=function(p,m,v,x,j,w){var N=n?n+p:p;if(!this._events[N])return!1;var S=this._events[N],C=arguments.length,k,E;if(S.fn){switch(S.once&&this.removeListener(p,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,v),!0;case 4:return S.fn.call(S.context,m,v,x),!0;case 5:return S.fn.call(S.context,m,v,x,j),!0;case 6:return S.fn.call(S.context,m,v,x,j,w),!0}for(E=1,k=new Array(C-1);E<C;E++)k[E-1]=arguments[E];S.fn.apply(S.context,k)}else{var O=S.length,D;for(E=0;E<O;E++)switch(S[E].once&&this.removeListener(p,S[E].fn,void 0,!0),C){case 1:S[E].fn.call(S[E].context);break;case 2:S[E].fn.call(S[E].context,m);break;case 3:S[E].fn.call(S[E].context,m,v);break;case 4:S[E].fn.call(S[E].context,m,v,x);break;default:if(!k)for(D=1,k=new Array(C-1);D<C;D++)k[D-1]=arguments[D];S[E].fn.apply(S[E].context,k)}}return!0},d.prototype.on=function(p,m,v){return o(this,p,m,v,!1)},d.prototype.once=function(p,m,v){return o(this,p,m,v,!0)},d.prototype.removeListener=function(p,m,v,x){var j=n?n+p:p;if(!this._events[j])return this;if(!m)return u(this,j),this;var w=this._events[j];if(w.fn)w.fn===m&&(!x||w.once)&&(!v||w.context===v)&&u(this,j);else{for(var N=0,S=[],C=w.length;N<C;N++)(w[N].fn!==m||x&&!w[N].once||v&&w[N].context!==v)&&S.push(w[N]);S.length?this._events[j]=S.length===1?S[0]:S:u(this,j)}return this},d.prototype.removeAllListeners=function(p){var m;return p?(m=n?n+p:p,this._events[m]&&u(this,m)):(this._events=new r,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d})(ay)),ay.exports}var c7=o7();const u7=si(c7);var Eu=new u7,Bx="recharts.syncEvent.tooltip",U_="recharts.syncEvent.brush";function d7(e,t){if(t){var n=Number.parseInt(t,10);if(!ii(n))return e?.[n]}}var f7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},JA=oa({name:"options",initialState:f7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),p7=JA.reducer,{createEventEmitter:h7}=JA.actions;function m7(e){return e.tooltip.syncInteraction}var v7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},eM=oa({name:"chartData",initialState:v7,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;n!=null&&(e.dataStartIndex=n),r!=null&&(e.dataEndIndex=r)}}}),{setChartData:F_,setDataStartEndIndexes:g7,setComputedData:UX}=eM.actions,y7=eM.reducer,x7=["x","y"];function q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(n),!0).forEach(function(r){b7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b7(e,t,n){return(t=j7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j7(e){var t=w7(e,"string");return typeof t=="symbol"?t:t+""}function w7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S7(e,t){if(e==null)return{};var n,r,l=N7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function N7(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function C7(){var e=Je(eb),t=Je(tb),n=Nr(),r=Je(BT),l=Je(vs),o=Ko(),u=Jp(),d=Je(h=>h.rootProps.className);g.useEffect(()=>{if(e==null)return $u;var h=(p,m,v)=>{if(t!==v&&e===p){if(r==="index"){var x;if(u&&m!==null&&m!==void 0&&(x=m.payload)!==null&&x!==void 0&&x.coordinate&&m.payload.sourceViewBox){var j=m.payload.coordinate,{x:w,y:N}=j,S=S7(j,x7),{x:C,y:k,width:E,height:O}=m.payload.sourceViewBox,D=Co(Co({},S),{},{x:u.x+(E?(w-C)/E:0)*u.width,y:u.y+(O?(N-k)/O:0)*u.height});n(Co(Co({},m),{},{payload:Co(Co({},m.payload),{},{coordinate:D})}))}else n(m);return}if(l!=null){var A;if(typeof r=="function"){var M={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},q=r(l,M);A=l[q]}else r==="value"&&(A=l.find(U=>String(U.value)===m.payload.label));var{coordinate:te}=m.payload;if(A==null||m.payload.active===!1||te==null||u==null){n(Ix({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:ce,y:G}=te,R=Math.min(ce,u.x+u.width),F=Math.min(G,u.y+u.height),he={x:o==="horizontal"?A.coordinate:R,y:o==="horizontal"?F:A.coordinate},ee=Ix({active:m.payload.active,coordinate:he,dataKey:m.payload.dataKey,index:String(A.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox});n(ee)}}};return Eu.on(Bx,h),()=>{Eu.off(Bx,h)}},[d,n,t,e,r,l,o,u])}function _7(){var e=Je(eb),t=Je(tb),n=Nr();g.useEffect(()=>{if(e==null)return $u;var r=(l,o,u)=>{t!==u&&e===l&&n(g7(o))};return Eu.on(U_,r),()=>{Eu.off(U_,r)}},[n,t,e])}function k7(){var e=Nr();g.useEffect(()=>{e(h7())},[e]),C7(),_7()}function E7(e,t,n,r,l,o){var u=Je(j=>P9(j,e,t)),d=Je(tb),h=Je(eb),p=Je(BT),m=Je(m7),v=m?.active,x=Jp();g.useEffect(()=>{if(!v&&h!=null&&d!=null){var j=Ix({active:o,coordinate:n,dataKey:u,index:l,label:typeof r=="number"?String(r):r,sourceViewBox:x});Eu.emit(Bx,h,j,d)}},[v,n,u,l,r,d,h,p,o,x])}function H_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function W_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H_(Object(n),!0).forEach(function(r){D7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D7(e,t,n){return(t=O7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O7(e){var t=T7(e,"string");return typeof t=="symbol"?t:t+""}function T7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A7(e){return e.dataKey}function M7(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(h$,t)}var V_=[],P7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ul.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function kb(e){var t,n,r=$r(e,P7),{active:l,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:h,filterNull:p,isAnimationActive:m,offset:v,payloadUniqBy:x,position:j,reverseDirection:w,useTranslate3d:N,wrapperStyle:S,cursor:C,shared:k,trigger:E,defaultIndex:O,portal:D,axisId:A}=r,M=Nr(),q=typeof O=="number"?String(O):O;g.useEffect(()=>{M(Oq({shared:k,trigger:E,axisId:A,active:l,defaultIndex:q}))},[M,k,E,A,l,q]);var te=Jp(),ce=zO(),G=Nq(k),{activeIndex:R,isActive:F}=(t=Je(de=>I9(de,G,E,q)))!==null&&t!==void 0?t:{},he=Je(de=>R9(de,G,E,q)),ee=Je(de=>QA(de,G,E,q)),U=Je(de=>z9(de,G,E,q)),ne=he,J=l7(),xe=(n=l??F)!==null&&n!==void 0?n:!1,[Ce,$]=JR([ne,xe]),ie=G==="axis"?ee:void 0;E7(G,E,U,ie,R,xe);var we=D??J;if(we==null||te==null||G==null)return null;var Z=ne??V_;xe||(Z=V_),p&&Z.length&&(Z=CR(Z.filter(de=>de.value!=null&&(de.hide!==!0||r.includeHidden)),x,A7));var K=Z.length>0,Ee=g.createElement(j$,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:m,active:xe,coordinate:U,hasPayload:K,offset:v,position:j,reverseDirection:w,useTranslate3d:N,viewBox:te,wrapperStyle:S,lastBoundingBox:Ce,innerRef:$,hasPortalFromProps:!!D},M7(h,W_(W_({},r),{},{payload:Z,label:ie,active:xe,activeIndex:R,coordinate:U,accessibilityLayer:ce})));return g.createElement(g.Fragment,null,FE.createPortal(Ee,we),xe&&g.createElement(s7,{cursor:C,tooltipEventType:G,coordinate:U,payload:Z,index:R}))}function z7(e,t,n){return(t=R7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R7(e){var t=I7(e,"string");return typeof t=="symbol"?t:t+""}function I7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class L7{constructor(t){z7(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function G_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function $7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(n),!0).forEach(function(r){B7(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function B7(e,t,n){return(t=U7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U7(e){var t=F7(e,"string");return typeof t=="symbol"?t:t+""}function F7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q7={cacheSize:2e3,enableCache:!0},tM=$7({},q7),Y_=new L7(tM.cacheSize),H7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},K_="recharts_measurement_span";function W7(e,t){var n=t.fontSize||"",r=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",u=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(l,"|").concat(o,"|").concat(u,"|").concat(d)}var Q_=(e,t)=>{try{var n=document.getElementById(K_);n||(n=document.createElement("span"),n.setAttribute("id",K_),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,H7,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},cu=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ul.isSsr)return{width:0,height:0};if(!tM.enableCache)return Q_(t,n);var r=W7(t,n),l=Y_.get(r);if(l)return l;var o=Q_(t,n);return Y_.set(r,o),o},X_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Z_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,V7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,G7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Y7=Object.keys(nM),Oo="NaN";function K7(e,t){return e*nM[t]}class ia{static parse(t){var n,[,r,l]=(n=G7.exec(t))!==null&&n!==void 0?n:[];return new ia(parseFloat(r),l??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,ii(t)&&(this.unit=""),n!==""&&!V7.test(n)&&(this.num=NaN,this.unit=""),Y7.includes(n)&&(this.num=K7(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new ia(NaN,""):new ia(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ia(NaN,""):new ia(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ia(NaN,""):new ia(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ia(NaN,""):new ia(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ii(this.num)}}function rM(e){if(e.includes(Oo))return Oo;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,l,o]=(n=X_.exec(t))!==null&&n!==void 0?n:[],u=ia.parse(r??""),d=ia.parse(o??""),h=l==="*"?u.multiply(d):u.divide(d);if(h.isNaN())return Oo;t=t.replace(X_,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var p,[,m,v,x]=(p=Z_.exec(t))!==null&&p!==void 0?p:[],j=ia.parse(m??""),w=ia.parse(x??""),N=v==="+"?j.add(w):j.subtract(w);if(N.isNaN())return Oo;t=t.replace(Z_,N.toString())}return t}var J_=/\(([^()]*)\)/;function Q7(e){for(var t=e,n;(n=J_.exec(t))!=null;){var[,r]=n;t=t.replace(J_,rM(r))}return t}function X7(e){var t=e.replace(/\s+/g,"");return t=Q7(t),t=rM(t),t}function Z7(e){try{return X7(e)}catch{return Oo}}function iy(e){var t=Z7(e.slice(5,-1));return t===Oo?"":t}var J7=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],eH=["dx","dy","angle","className","breakAll"];function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ux.apply(null,arguments)}function ek(e,t){if(e==null)return{};var n,r,l=tH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function tH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var aM=/[ \f\n\r\t\v\u2028\u2029]+/,iM=e=>{var{children:t,breakAll:n,style:r}=e;try{var l=[];fr(t)||(n?l=t.toString().split(""):l=t.toString().split(aM));var o=l.map(d=>({word:d,width:cu(d,r).width})),u=n?0:cu("",r).width;return{wordsWithComputedWidth:o,spaceWidth:u}}catch{return null}};function nH(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var sM=(e,t,n,r)=>e.reduce((l,o)=>{var{word:u,width:d}=o,h=l[l.length-1];if(h&&d!=null&&(t==null||r||h.width+d+n<Number(t)))h.words.push(u),h.width+=d+n;else{var p={words:[u],width:d};l.push(p)}return l},[]),lM=e=>e.reduce((t,n)=>t.width>n.width?t:n),rH="",tk=(e,t,n,r,l,o,u,d)=>{var h=e.slice(0,t),p=iM({breakAll:n,style:r,children:h+rH});if(!p)return[!1,[]];var m=sM(p.wordsWithComputedWidth,o,u,d),v=m.length>l||lM(m).width>Number(o);return[v,m]},aH=(e,t,n,r,l)=>{var{maxLines:o,children:u,style:d,breakAll:h}=e,p=We(o),m=String(u),v=sM(t,r,n,l);if(!p||l)return v;var x=v.length>o||lM(v).width>Number(r);if(!x)return v;for(var j=0,w=m.length-1,N=0,S;j<=w&&N<=m.length-1;){var C=Math.floor((j+w)/2),k=C-1,[E,O]=tk(m,k,h,d,o,r,n,l),[D]=tk(m,C,h,d,o,r,n,l);if(!E&&!D&&(j=C+1),E&&D&&(w=C-1),!E&&D){S=O;break}N++}return S||v},nk=e=>{var t=fr(e)?[]:e.toString().split(aM);return[{words:t,width:void 0}]},iH=e=>{var{width:t,scaleToFit:n,children:r,style:l,breakAll:o,maxLines:u}=e;if((t||n)&&!Ul.isSsr){var d,h,p=iM({breakAll:o,children:r,style:l});if(p){var{wordsWithComputedWidth:m,spaceWidth:v}=p;d=m,h=v}else return nk(r);return aH({breakAll:o,children:r,maxLines:u,style:l},d,h,t,!!n)}return nk(r)},oM="#808080",sH={angle:0,breakAll:!1,capHeight:"0.71em",fill:oM,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Eb=g.forwardRef((e,t)=>{var n=$r(e,sH),{x:r,y:l,lineHeight:o,capHeight:u,fill:d,scaleToFit:h,textAnchor:p,verticalAnchor:m}=n,v=ek(n,J7),x=g.useMemo(()=>iH({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:h,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,h,v.style,v.width]),{dx:j,dy:w,angle:N,className:S,breakAll:C}=v,k=ek(v,eH);if(!bi(r)||!bi(l)||x.length===0)return null;var E=Number(r)+(We(j)?j:0),O=Number(l)+(We(w)?w:0);if(!Hn(E)||!Hn(O))return null;var D;switch(m){case"start":D=iy("calc(".concat(u,")"));break;case"middle":D=iy("calc(".concat((x.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:D=iy("calc(".concat(x.length-1," * -").concat(o,")"));break}var A=[];if(h){var M=x[0].width,{width:q}=v;A.push("scale(".concat(We(q)&&We(M)?q/M:1,")"))}return N&&A.push("rotate(".concat(N,", ").concat(E,", ").concat(O,")")),A.length&&(k.transform=A.join(" ")),g.createElement("text",Ux({},Lr(k),{ref:t,x:E,y:O,className:yn("recharts-text",S),textAnchor:p,fill:d.includes("url")?oM:d}),x.map((te,ce)=>{var G=te.words.join(C?"":" ");return g.createElement("tspan",{x:E,dy:ce===0?D:o,key:"".concat(G,"-").concat(ce)},G)}))});Eb.displayName="Text";var lH=["labelRef"];function oH(e,t){if(e==null)return{};var n,r,l=cH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function cH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rk(Object(n),!0).forEach(function(r){uH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uH(e,t,n){return(t=dH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dH(e){var t=fH(e,"string");return typeof t=="symbol"?t:t+""}function fH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gi.apply(null,arguments)}var cM=g.createContext(null),pH=e=>{var{x:t,y:n,upperWidth:r,lowerWidth:l,width:o,height:u,children:d}=e,h=g.useMemo(()=>({x:t,y:n,upperWidth:r,lowerWidth:l,width:o,height:u}),[t,n,r,l,o,u]);return g.createElement(cM.Provider,{value:h},d)},uM=()=>{var e=g.useContext(cM),t=Jp();return e||NO(t)},hH=g.createContext(null),mH=()=>{var e=g.useContext(hH),t=Je(WT);return e||t},vH=e=>{var{value:t,formatter:n}=e,r=fr(e.children)?t:e.children;return typeof n=="function"?n(r):r},Db=e=>e!=null&&typeof e=="function",gH=(e,t)=>{var n=$a(t-e),r=Math.min(Math.abs(t-e),360);return n*r},yH=(e,t,n,r,l)=>{var{offset:o,className:u}=e,{cx:d,cy:h,innerRadius:p,outerRadius:m,startAngle:v,endAngle:x,clockWise:j}=l,w=(p+m)/2,N=gH(v,x),S=N>=0?1:-1,C,k;switch(t){case"insideStart":C=v+S*o,k=j;break;case"insideEnd":C=x-S*o,k=!j;break;case"end":C=x+S*o,k=j;break;default:throw new Error("Unsupported position ".concat(t))}k=N<=0?k:!k;var E=Tr(d,h,w,C),O=Tr(d,h,w,C+(k?1:-1)*359),D="M".concat(E.x,",").concat(E.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(k?0:1,`,
    `).concat(O.x,",").concat(O.y),A=fr(e.id)?hu("recharts-radial-line-"):e.id;return g.createElement("text",Gi({},r,{dominantBaseline:"central",className:yn("recharts-radial-bar-label",u)}),g.createElement("defs",null,g.createElement("path",{id:A,d:D})),g.createElement("textPath",{xlinkHref:"#".concat(A)},n))},xH=(e,t,n)=>{var{cx:r,cy:l,innerRadius:o,outerRadius:u,startAngle:d,endAngle:h}=e,p=(d+h)/2;if(n==="outside"){var{x:m,y:v}=Tr(r,l,u+t,p);return{x:m,y:v,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(o+u)/2,{x:j,y:w}=Tr(r,l,x,p);return{x:j,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Fx=e=>"cx"in e&&We(e.cx),bH=(e,t)=>{var{parentViewBox:n,offset:r,position:l}=e,o;n!=null&&!Fx(n)&&(o=n);var{x:u,y:d,upperWidth:h,lowerWidth:p,height:m}=t,v=u,x=u+(h-p)/2,j=(v+x)/2,w=(h+p)/2,N=v+h/2,S=m>=0?1:-1,C=S*r,k=S>0?"end":"start",E=S>0?"start":"end",O=h>=0?1:-1,D=O*r,A=O>0?"end":"start",M=O>0?"start":"end";if(l==="top"){var q={x:v+h/2,y:d-C,textAnchor:"middle",verticalAnchor:k};return Qn(Qn({},q),o?{height:Math.max(d-o.y,0),width:h}:{})}if(l==="bottom"){var te={x:x+p/2,y:d+m+C,textAnchor:"middle",verticalAnchor:E};return Qn(Qn({},te),o?{height:Math.max(o.y+o.height-(d+m),0),width:p}:{})}if(l==="left"){var ce={x:j-D,y:d+m/2,textAnchor:A,verticalAnchor:"middle"};return Qn(Qn({},ce),o?{width:Math.max(ce.x-o.x,0),height:m}:{})}if(l==="right"){var G={x:j+w+D,y:d+m/2,textAnchor:M,verticalAnchor:"middle"};return Qn(Qn({},G),o?{width:Math.max(o.x+o.width-G.x,0),height:m}:{})}var R=o?{width:w,height:m}:{};return l==="insideLeft"?Qn({x:j+D,y:d+m/2,textAnchor:M,verticalAnchor:"middle"},R):l==="insideRight"?Qn({x:j+w-D,y:d+m/2,textAnchor:A,verticalAnchor:"middle"},R):l==="insideTop"?Qn({x:v+h/2,y:d+C,textAnchor:"middle",verticalAnchor:E},R):l==="insideBottom"?Qn({x:x+p/2,y:d+m-C,textAnchor:"middle",verticalAnchor:k},R):l==="insideTopLeft"?Qn({x:v+D,y:d+C,textAnchor:M,verticalAnchor:E},R):l==="insideTopRight"?Qn({x:v+h-D,y:d+C,textAnchor:A,verticalAnchor:E},R):l==="insideBottomLeft"?Qn({x:x+D,y:d+m-C,textAnchor:M,verticalAnchor:k},R):l==="insideBottomRight"?Qn({x:x+p-D,y:d+m-C,textAnchor:A,verticalAnchor:k},R):l&&typeof l=="object"&&(We(l.x)||rs(l.x))&&(We(l.y)||rs(l.y))?Qn({x:u+Xs(l.x,w),y:d+Xs(l.y,m),textAnchor:"end",verticalAnchor:"end"},R):Qn({x:N,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},R)},jH={angle:0,offset:5,zIndex:Ir.label,position:"middle",textBreakAll:!1};function qs(e){var t=$r(e,jH),{viewBox:n,position:r,value:l,children:o,content:u,className:d="",textBreakAll:h,labelRef:p}=t,m=mH(),v=uM(),x=r==="center"?v:m??v,j,w,N;if(n==null?j=x:Fx(n)?j=n:j=NO(n),!j||fr(l)&&fr(o)&&!g.isValidElement(u)&&typeof u!="function")return null;var S=Qn(Qn({},t),{},{viewBox:j});if(g.isValidElement(u)){var{labelRef:C}=S,k=oH(S,lH);return g.cloneElement(u,k)}if(typeof u=="function"){if(w=g.createElement(u,S),g.isValidElement(w))return w}else w=vH(t);var E=Lr(t);if(Fx(j)){if(r==="insideStart"||r==="insideEnd"||r==="end")return yH(t,r,w,E,j);N=xH(j,t.offset,t.position)}else N=bH(t,j);return g.createElement(ki,{zIndex:t.zIndex},g.createElement(Eb,Gi({ref:p,className:yn("recharts-label",d)},E,N,{textAnchor:nH(E.textAnchor)?E.textAnchor:N.textAnchor,breakAll:h}),w))}qs.displayName="Label";var wH=(e,t,n)=>{if(!e)return null;var r={viewBox:t,labelRef:n};return e===!0?g.createElement(qs,Gi({key:"label-implicit"},r)):bi(e)?g.createElement(qs,Gi({key:"label-implicit",value:e},r)):g.isValidElement(e)?e.type===qs?g.cloneElement(e,Qn({key:"label-implicit"},r)):g.createElement(qs,Gi({key:"label-implicit",content:e},r)):Db(e)?g.createElement(qs,Gi({key:"label-implicit",content:e},r)):e&&typeof e=="object"?g.createElement(qs,Gi({},e,{key:"label-implicit"},r)):null};function SH(e){var{label:t,labelRef:n}=e,r=uM();return wH(t,r,n)||null}var sy={},ly={},ak;function NH(){return ak||(ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(ly)),ly}var oy={},ik;function CH(){return ik||(ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(oy)),oy}var sk;function _H(){return sk||(sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NH(),n=CH(),r=h0();function l(o){if(r.isArrayLike(o))return t.last(n.toArray(o))}e.last=l})(sy)),sy}var cy,lk;function kH(){return lk||(lk=1,cy=_H().last),cy}var EH=kH();const DH=si(EH);var OH=["valueAccessor"],TH=["dataKey","clockWise","id","textBreakAll","zIndex"];function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jp.apply(null,arguments)}function ok(e,t){if(e==null)return{};var n,r,l=AH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function AH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var MH=e=>Array.isArray(e.value)?DH(e.value):e.value,dM=g.createContext(void 0),fM=dM.Provider,pM=g.createContext(void 0);pM.Provider;function PH(){return g.useContext(dM)}function zH(){return g.useContext(pM)}function Rf(e){var{valueAccessor:t=MH}=e,n=ok(e,OH),{dataKey:r,clockWise:l,id:o,textBreakAll:u,zIndex:d}=n,h=ok(n,TH),p=PH(),m=zH(),v=p||m;return!v||!v.length?null:g.createElement(ki,{zIndex:d??Ir.label},g.createElement(Fa,{className:"recharts-label-list"},v.map((x,j)=>{var w,N=fr(r)?t(x,j):Sr(x&&x.payload,r),S=fr(o)?{}:{id:"".concat(o,"-").concat(j)};return g.createElement(qs,jp({key:"label-".concat(j)},Lr(x),h,S,{fill:(w=n.fill)!==null&&w!==void 0?w:x.fill,parentViewBox:x.parentViewBox,value:N,textBreakAll:u,viewBox:x.viewBox,index:j,zIndex:0}))})))}Rf.displayName="LabelList";function hM(e){var{label:t}=e;return t?t===!0?g.createElement(Rf,{key:"labelList-implicit"}):g.isValidElement(t)||Db(t)?g.createElement(Rf,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(Rf,jp({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qx.apply(null,arguments)}var mM=e=>{var{cx:t,cy:n,r,className:l}=e,o=yn("recharts-dot",l);return We(t)&&We(n)&&We(r)?g.createElement("circle",qx({},Ua(e),p0(e),{className:o,cx:t,cy:n,r})):null},RH={radiusAxis:{},angleAxis:{}},vM=oa({name:"polarAxis",initialState:RH,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:FX,removeRadiusAxis:qX,addAngleAxis:HX,removeAngleAxis:WX}=vM.actions,IH=vM.reducer,Ob=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,uy={},ck;function LH(){return ck||(ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const l=n[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${l}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}e.isPlainObject=t})(uy)),uy}var dy,uk;function $H(){return uk||(uk=1,dy=LH().isPlainObject),dy}var BH=$H();const UH=si(BH);function dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function fk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(n),!0).forEach(function(r){FH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FH(e,t,n){return(t=qH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qH(e){var t=HH(e,"string");return typeof t=="symbol"?t:t+""}function HH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wp.apply(null,arguments)}var pk=(e,t,n,r,l)=>{var o=n-r,u;return u="M ".concat(e,",").concat(t),u+="L ".concat(e+n,",").concat(t),u+="L ".concat(e+n-o/2,",").concat(t+l),u+="L ".concat(e+n-o/2-r,",").concat(t+l),u+="L ".concat(e,",").concat(t," Z"),u},WH={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VH=e=>{var t=$r(e,WH),{x:n,y:r,upperWidth:l,lowerWidth:o,height:u,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:m,isUpdateAnimationActive:v}=t,x=g.useRef(null),[j,w]=g.useState(-1),N=g.useRef(l),S=g.useRef(o),C=g.useRef(u),k=g.useRef(n),E=g.useRef(r),O=ih(e,"trapezoid-");if(g.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var he=x.current.getTotalLength();he&&w(he)}catch{}},[]),n!==+n||r!==+r||l!==+l||o!==+o||u!==+u||l===0&&o===0||u===0)return null;var D=yn("recharts-trapezoid",d);if(!v)return g.createElement("g",null,g.createElement("path",wp({},Lr(t),{className:D,d:pk(n,r,l,o,u)})));var A=N.current,M=S.current,q=C.current,te=k.current,ce=E.current,G="0px ".concat(j===-1?1:j,"px"),R="".concat(j,"px 0px"),F=RO(["strokeDasharray"],p,h);return g.createElement(ah,{animationId:O,key:O,canBegin:j>0,duration:p,easing:h,isActive:v,begin:m},he=>{var ee=lr(A,l,he),U=lr(M,o,he),ne=lr(q,u,he),J=lr(te,n,he),xe=lr(ce,r,he);x.current&&(N.current=ee,S.current=U,C.current=ne,k.current=J,E.current=xe);var Ce=he>0?{transition:F,strokeDasharray:R}:{strokeDasharray:G};return g.createElement("path",wp({},Lr(t),{className:D,d:pk(J,xe,ee,U,ne),ref:x,style:fk(fk({},Ce),t.style)}))})},GH=["option","shapeType","propTransformer","activeClassName"];function YH(e,t){if(e==null)return{};var n,r,l=KH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function KH(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function hk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Sp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hk(Object(n),!0).forEach(function(r){QH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QH(e,t,n){return(t=XH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XH(e){var t=ZH(e,"string");return typeof t=="symbol"?t:t+""}function ZH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JH(e,t){return Sp(Sp({},t),e)}function eW(e,t){return e==="symbols"}function mk(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return g.createElement(BO,n);case"trapezoid":return g.createElement(VH,n);case"sector":return g.createElement(qO,n);case"symbols":if(eW(t))return g.createElement(_D,n);break;case"curve":return g.createElement(ou,n);default:return null}}function tW(e){return g.isValidElement(e)?e.props:e}function nW(e){var{option:t,shapeType:n,propTransformer:r=JH,activeClassName:l="recharts-active-shape"}=e,o=YH(e,GH),u;if(g.isValidElement(t))u=g.cloneElement(t,Sp(Sp({},o),tW(t)));else if(typeof t=="function")u=t(o);else if(UH(t)&&typeof t!="boolean"){var d=r(t,o);u=g.createElement(mk,{shapeType:n,elementProps:d})}else{var h=o;u=g.createElement(mk,{shapeType:n,elementProps:h})}return o.isActive?g.createElement(Fa,{className:l},u):u}function gM(e){var{tooltipEntrySettings:t}=e,n=Nr(),r=Br(),l=g.useRef(null);return g.useLayoutEffect(()=>{r||(l.current===null?n(kq(t)):l.current!==t&&n(Eq({prev:l.current,next:t})),l.current=t)},[t,n,r]),g.useLayoutEffect(()=>()=>{l.current&&(n(Dq(l.current)),l.current=null)},[n]),null}function yM(e){var{legendPayload:t}=e,n=Nr(),r=Br(),l=g.useRef(null);return g.useLayoutEffect(()=>{r||(l.current===null?n(s$(t)):l.current!==t&&n(l$({prev:l.current,next:t})),l.current=t)},[n,r,t]),g.useLayoutEffect(()=>()=>{l.current&&(n(o$(l.current)),l.current=null)},[n]),null}var fy,rW=()=>{var[e]=g.useState(()=>hu("uid-"));return e},aW=(fy=lP.useId)!==null&&fy!==void 0?fy:rW;function xM(e,t){var n=aW();return t||(e?"".concat(e,"-").concat(n):n)}var iW=g.createContext(void 0),bM=e=>{var{id:t,type:n,children:r}=e,l=xM("recharts-".concat(n),t);return g.createElement(iW.Provider,{value:l},r(l))},sW={cartesianItems:[],polarItems:[]},jM=oa({name:"graphicalItems",initialState:sW,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Rn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:r}=t.payload,l=ri(e).cartesianItems.indexOf(n);l>-1&&(e.cartesianItems[l]=r)},prepare:Rn()},removeCartesianGraphicalItem:{reducer(e,t){var n=ri(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Rn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Rn()},removePolarGraphicalItem:{reducer(e,t){var n=ri(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Rn()}}}),{addCartesianGraphicalItem:lW,replaceCartesianGraphicalItem:oW,removeCartesianGraphicalItem:cW,addPolarGraphicalItem:VX,removePolarGraphicalItem:GX}=jM.actions,uW=jM.reducer,dW=e=>{var t=Nr(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(lW(e)):n.current!==e&&t(oW({prev:n.current,next:e})),n.current=e},[t,e]),g.useLayoutEffect(()=>()=>{n.current&&(t(cW(n.current)),n.current=null)},[t]),null},wM=g.memo(dW),fW=["points"];function vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function py(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(n),!0).forEach(function(r){pW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pW(e,t,n){return(t=hW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hW(e){var t=mW(e,"string");return typeof t=="symbol"?t:t+""}function mW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Np.apply(null,arguments)}function vW(e,t){if(e==null)return{};var n,r,l=gW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function gW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yW(e){var{option:t,dotProps:n,className:r}=e;if(g.isValidElement(t))return g.cloneElement(t,n);if(typeof t=="function")return t(n);var l=yn(r,typeof t!="boolean"?t.className:""),o=n??{},{points:u}=o,d=vW(o,fW);return g.createElement(mM,Np({},d,{className:l}))}function xW(e,t){return e==null?!1:t?!0:e.length===1}function SM(e){var{points:t,dot:n,className:r,dotClassName:l,dataKey:o,baseProps:u,needClip:d,clipPathId:h,zIndex:p=Ir.scatter}=e;if(!xW(t,n))return null;var m=Ob(n),v=X3(n),x=t.map((w,N)=>{var S,C,k=py(py(py({r:3},u),v),{},{index:N,cx:(S=w.x)!==null&&S!==void 0?S:void 0,cy:(C=w.y)!==null&&C!==void 0?C:void 0,dataKey:o,value:w.value,payload:w.payload,points:t});return g.createElement(yW,{key:"dot-".concat(N),option:n,dotProps:k,className:l})}),j={};return d&&h!=null&&(j.clipPath="url(#clipPath-".concat(m?"":"dots-").concat(h,")")),g.createElement(ki,{zIndex:p},g.createElement(Fa,Np({className:r},j),x))}function gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function yk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gk(Object(n),!0).forEach(function(r){bW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bW(e,t,n){return(t=jW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jW(e){var t=wW(e,"string");return typeof t=="symbol"?t:t+""}function wW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SW={xAxis:{},yAxis:{},zAxis:{}},NM=oa({name:"cartesianAxis",initialState:SW,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Rn()},replaceXAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.xAxis[n.id],e.xAxis[r.id]=r)},prepare:Rn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Rn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Rn()},replaceYAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.yAxis[n.id],e.yAxis[r.id]=r)},prepare:Rn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Rn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Rn()},replaceZAxis:{reducer(e,t){var{prev:n,next:r}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete e.zAxis[n.id],e.zAxis[r.id]=r)},prepare:Rn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Rn()},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload,l=e.yAxis[n];if(l){var o=l.widthHistory||[];if(o.length===3&&o[0]===o[2]&&r===o[1]&&r!==l.width&&Math.abs(r-o[0])<=1)return;var u=[...o,r].slice(-3);e.yAxis[n]=yk(yk({},e.yAxis[n]),{},{width:r,widthHistory:u})}}}}),{addXAxis:NW,replaceXAxis:CW,removeXAxis:_W,addYAxis:kW,replaceYAxis:EW,removeYAxis:DW,addZAxis:YX,replaceZAxis:KX,removeZAxis:QX,updateYAxisWidth:OW}=NM.actions,TW=NM.reducer,AW=pe([Ar],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),MW=pe([AW,ds,fs],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Ch=()=>Je(MW),PW=()=>Je(j9);function xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function hy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xk(Object(n),!0).forEach(function(r){zW(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zW(e,t,n){return(t=RW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RW(e){var t=IW(e,"string");return typeof t=="symbol"?t:t+""}function IW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LW=e=>{var{point:t,childIndex:n,mainColor:r,activeDot:l,dataKey:o,clipPath:u}=e;if(l===!1||t.x==null||t.y==null)return null;var d={index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},h=hy(hy(hy({},d),Pp(l)),p0(l)),p;return g.isValidElement(l)?p=g.cloneElement(l,h):typeof l=="function"?p=l(h):p=g.createElement(mM,h),g.createElement(Fa,{className:"recharts-active-dot",clipPath:u},p)};function Hx(e){var{points:t,mainColor:n,activeDot:r,itemDataKey:l,clipPath:o,zIndex:u=Ir.activeDot}=e,d=Je(ku),h=PW();if(t==null||h==null)return null;var p=t.find(m=>h.includes(m.payload));return fr(p)?null:g.createElement(ki,{zIndex:u},g.createElement(LW,{point:p,childIndex:Number(d),mainColor:n,dataKey:l,activeDot:r,clipPath:o}))}var $W={},CM=oa({name:"errorBars",initialState:$W,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:l}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(l=>l.dataKey!==r.dataKey||l.direction!==r.direction))}}}),{addErrorBar:XX,replaceErrorBar:ZX,removeErrorBar:JX}=CM.actions,BW=CM.reducer,UW=["children"];function FW(e,t){if(e==null)return{};var n,r,l=qW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function qW(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var HW={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},WW=g.createContext(HW);function VW(e){var{children:t}=e,n=FW(e,UW);return g.createElement(WW.Provider,{value:n},t)}function Tb(e,t){var n,r,l=Je(p=>hs(p,e)),o=Je(p=>ms(p,t)),u=(n=l?.allowDataOverflow)!==null&&n!==void 0?n:br.allowDataOverflow,d=(r=o?.allowDataOverflow)!==null&&r!==void 0?r:jr.allowDataOverflow,h=u||d;return{needClip:h,needClipX:u,needClipY:d}}function _M(e){var{xAxisId:t,yAxisId:n,clipPathId:r}=e,l=Ch(),{needClipX:o,needClipY:u,needClip:d}=Tb(t,n);if(!d||!l)return null;var{x:h,y:p,width:m,height:v}=l;return g.createElement("clipPath",{id:"clipPath-".concat(r)},g.createElement("rect",{x:o?h:h-m/2,y:u?p:p-v/2,width:o?m:m*2,height:u?v:v*2}))}var my={exports:{}},vy={};var bk;function GW(){if(bk)return vy;bk=1;var e=qo();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,u=e.useMemo,d=e.useDebugValue;return vy.useSyncExternalStoreWithSelector=function(h,p,m,v,x){var j=l(null);if(j.current===null){var w={hasValue:!1,value:null};j.current=w}else w=j.current;j=u(function(){function S(D){if(!C){if(C=!0,k=D,D=v(D),x!==void 0&&w.hasValue){var A=w.value;if(x(A,D))return E=A}return E=D}if(A=E,n(k,D))return A;var M=v(D);return x!==void 0&&x(A,M)?(k=D,A):(k=D,E=M)}var C=!1,k,E,O=m===void 0?null:m;return[function(){return S(p())},O===null?void 0:function(){return S(O())}]},[p,m,v,x]);var N=r(h,j[0],j[1]);return o(function(){w.hasValue=!0,w.value=N},[N]),d(N),N},vy}var jk;function YW(){return jk||(jk=1,my.exports=GW()),my.exports}YW();function KW(e){e()}function QW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){KW(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const l=t={callback:n,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!r||e===null||(r=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var wk={notify(){},get:()=>[]};function XW(e,t){let n,r=wk,l=0,o=!1;function u(N){m();const S=r.subscribe(N);let C=!1;return()=>{C||(C=!0,S(),v())}}function d(){r.notify()}function h(){w.onStateChange&&w.onStateChange()}function p(){return o}function m(){l++,n||(n=e.subscribe(h),r=QW())}function v(){l--,n&&l===0&&(n(),n=void 0,r.clear(),r=wk)}function x(){o||(o=!0,m())}function j(){o&&(o=!1,v())}const w={addNestedSub:u,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:p,trySubscribe:x,tryUnsubscribe:j,getListeners:()=>r};return w}var ZW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JW=ZW(),eV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tV=eV(),nV=()=>JW||tV?g.useLayoutEffect:g.useEffect,rV=nV();function Sk(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function aV(e,t){if(Sk(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(!Object.prototype.hasOwnProperty.call(t,n[l])||!Sk(e[n[l]],t[n[l]]))return!1;return!0}var iV=Symbol.for("react-redux-context"),sV=typeof globalThis<"u"?globalThis:{};function lV(){if(!g.createContext)return{};const e=sV[iV]??=new Map;let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var oV=lV();function cV(e){const{children:t,context:n,serverState:r,store:l}=e,o=g.useMemo(()=>{const h=XW(l);return{store:l,subscription:h,getServerState:r?()=>r:void 0}},[l,r]),u=g.useMemo(()=>l.getState(),[l]);rV(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),u!==l.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,u]);const d=n||oV;return g.createElement(d.Provider,{value:o},t)}var uV=cV,dV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function fV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function _h(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var r of n)if(dV.has(r)){if(e[r]==null&&t[r]==null)continue;if(!aV(e[r],t[r]))return!1}else if(!fV(e[r],t[r]))return!1;return!0}var pV=e=>{var{chartData:t}=e,n=Nr(),r=Br();return g.useEffect(()=>r?()=>{}:(n(F_(t)),()=>{n(F_(void 0))}),[t,n,r]),null},Nk={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},kM=oa({name:"brush",initialState:Nk,reducers:{setBrushSettings(e,t){return t.payload==null?Nk:t.payload}}}),{setBrushSettings:eZ}=kM.actions,hV=kM.reducer;function mV(e,t,n){return(t=vV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vV(e){var t=gV(e,"string");return typeof t=="symbol"?t:t+""}function gV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ab{static create(t){return new Ab(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(r)switch(r){case"start":return this.scale(t);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(t)+o}default:return this.scale(t)}if(n){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+u}return this.scale(t)}}isInRange(t){var n=this.range(),r=n[0],l=n[n.length-1];return r<=l?t>=r&&t<=l:t>=l&&t<=r}}mV(Ab,"EPS",1e-4);function yV(e){return(e%180+180)%180}var xV=function(t){var{width:n,height:r}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=yV(l),u=o*Math.PI/180,d=Math.atan(r/n),h=u>d&&u<Math.PI-d?r/Math.sin(u):n/Math.cos(u);return Math.abs(h)},bV={dots:[],areas:[],lines:[]},EM=oa({name:"referenceElements",initialState:bV,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ri(e).dots.findIndex(r=>r===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ri(e).areas.findIndex(r=>r===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ri(e).lines.findIndex(r=>r===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:tZ,removeDot:nZ,addArea:rZ,removeArea:aZ,addLine:iZ,removeLine:sZ}=EM.actions,jV=EM.reducer,wV=g.createContext(void 0),SV=e=>{var{children:t}=e,[n]=g.useState("".concat(hu("recharts"),"-clip")),r=Ch();if(r==null)return null;var{x:l,y:o,width:u,height:d}=r;return g.createElement(wV.Provider,{value:n},g.createElement("defs",null,g.createElement("clipPath",{id:n},g.createElement("rect",{x:l,y:o,height:d,width:u}))),t)};function DM(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n}function NV(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return xV(r,n)}function CV(e,t,n){var r=n==="width",{x:l,y:o,width:u,height:d}=e;return t===1?{start:r?l:o,end:r?l+u:o+d}:{start:r?l+u:o+d,end:r?l:o}}function Cp(e,t,n,r,l){if(e*t<e*r||e*t>e*l)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-l)<=0}function _V(e,t){return DM(e,t+1)}function kV(e,t,n,r,l){for(var o=(r||[]).slice(),{start:u,end:d}=t,h=0,p=1,m=u,v=function(){var w=r?.[h];if(w===void 0)return{v:DM(r,p)};var N=h,S,C=()=>(S===void 0&&(S=n(w,N)),S),k=w.coordinate,E=h===0||Cp(e,k,C,m,d);E||(h=0,m=u,p+=1),E&&(m=k+e*(C()/2+l),h+=p)},x;p<=o.length;)if(x=v(),x)return x.v;return[]}function Ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(n),!0).forEach(function(r){EV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EV(e,t,n){return(t=DV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DV(e){var t=OV(e,"string");return typeof t=="symbol"?t:t+""}function OV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TV(e,t,n,r,l){for(var o=(r||[]).slice(),u=o.length,{start:d}=t,{end:h}=t,p=function(x){var j=o[x],w,N=()=>(w===void 0&&(w=n(j,x)),w);if(x===u-1){var S=e*(j.coordinate+e*N()/2-h);o[x]=j=zr(zr({},j),{},{tickCoord:S>0?j.coordinate-S*e:j.coordinate})}else o[x]=j=zr(zr({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var C=Cp(e,j.tickCoord,N,d,h);C&&(h=j.tickCoord-e*(N()/2+l),o[x]=zr(zr({},j),{},{isShow:!0}))}},m=u-1;m>=0;m--)p(m);return o}function AV(e,t,n,r,l,o){var u=(r||[]).slice(),d=u.length,{start:h,end:p}=t;if(o){var m=r[d-1],v=n(m,d-1),x=e*(m.coordinate+e*v/2-p);if(u[d-1]=m=zr(zr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate}),m.tickCoord!=null){var j=Cp(e,m.tickCoord,()=>v,h,p);j&&(p=m.tickCoord-e*(v/2+l),u[d-1]=zr(zr({},m),{},{isShow:!0}))}}for(var w=o?d-1:d,N=function(k){var E=u[k],O,D=()=>(O===void 0&&(O=n(E,k)),O);if(k===0){var A=e*(E.coordinate-e*D()/2-h);u[k]=E=zr(zr({},E),{},{tickCoord:A<0?E.coordinate-A*e:E.coordinate})}else u[k]=E=zr(zr({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var M=Cp(e,E.tickCoord,D,h,p);M&&(h=E.tickCoord+e*(D()/2+l),u[k]=zr(zr({},E),{},{isShow:!0}))}},S=0;S<w;S++)N(S);return u}function Mb(e,t,n){var{tick:r,ticks:l,viewBox:o,minTickGap:u,orientation:d,interval:h,tickFormatter:p,unit:m,angle:v}=e;if(!l||!l.length||!r)return[];if(We(h)||Ul.isSsr){var x;return(x=_V(l,We(h)?h:0))!==null&&x!==void 0?x:[]}var j=[],w=d==="top"||d==="bottom"?"width":"height",N=m&&w==="width"?cu(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(E,O)=>{var D=typeof p=="function"?p(E.value,O):E.value;return w==="width"?NV(cu(D,{fontSize:t,letterSpacing:n}),N,v):cu(D,{fontSize:t,letterSpacing:n})[w]},C=l.length>=2?$a(l[1].coordinate-l[0].coordinate):1,k=CV(o,C,w);return h==="equidistantPreserveStart"?kV(C,k,S,l,u):(h==="preserveStart"||h==="preserveStartEnd"?j=AV(C,k,S,l,u,h==="preserveStartEnd"):j=TV(C,k,S,l,u),j.filter(E=>E.isShow))}var MV=e=>{var{ticks:t,label:n,labelGapWithTick:r=5,tickSize:l=0,tickMargin:o=0}=e,u=0;if(t){Array.from(t).forEach(m=>{if(m){var v=m.getBoundingClientRect();v.width>u&&(u=v.width)}});var d=n?n.getBoundingClientRect().width:0,h=l+o,p=u+h+d+(n?r:0);return Math.round(p)}return 0},PV=["axisLine","width","height","className","hide","ticks","axisType"];function zV(e,t){if(e==null)return{};var n,r,l=RV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function RV(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ll.apply(null,arguments)}function _k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_k(Object(n),!0).forEach(function(r){IV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function IV(e,t,n){return(t=LV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LV(e){var t=$V(e,"string");return typeof t=="symbol"?t:t+""}function $V(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ts={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ir.axis};function BV(e){var{x:t,y:n,width:r,height:l,orientation:o,mirror:u,axisLine:d,otherSvgProps:h}=e;if(!d)return null;var p=sr(sr(sr({},h),Ua(d)),{},{fill:"none"});if(o==="top"||o==="bottom"){var m=+(o==="top"&&!u||o==="bottom"&&u);p=sr(sr({},p),{},{x1:t,y1:n+m*l,x2:t+r,y2:n+m*l})}else{var v=+(o==="left"&&!u||o==="right"&&u);p=sr(sr({},p),{},{x1:t+v*r,y1:n,x2:t+v*r,y2:n+l})}return g.createElement("line",Ll({},p,{className:yn("recharts-cartesian-axis-line",Lp(d,"className"))}))}function UV(e,t,n,r,l,o,u,d,h){var p,m,v,x,j,w,N=d?-1:1,S=e.tickSize||u,C=We(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":p=m=e.coordinate,x=n+ +!d*l,v=x-N*S,w=v-N*h,j=C;break;case"left":v=x=e.coordinate,m=t+ +!d*r,p=m-N*S,j=p-N*h,w=C;break;case"right":v=x=e.coordinate,m=t+ +d*r,p=m+N*S,j=p+N*h,w=C;break;default:p=m=e.coordinate,x=n+ +d*l,v=x+N*S,w=v+N*h,j=C;break}return{line:{x1:p,y1:v,x2:m,y2:x},tick:{x:j,y:w}}}function FV(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function qV(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function HV(e){var{option:t,tickProps:n,value:r}=e,l,o=yn(n.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))l=g.cloneElement(t,sr(sr({},n),{},{className:o}));else if(typeof t=="function")l=t(sr(sr({},n),{},{className:o}));else{var u="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(u=yn(u,t?.className)),l=g.createElement(Eb,Ll({},n,{className:u}),r)}return l}var WV=g.forwardRef((e,t)=>{var{ticks:n=[],tick:r,tickLine:l,stroke:o,tickFormatter:u,unit:d,padding:h,tickTextProps:p,orientation:m,mirror:v,x,y:j,width:w,height:N,tickSize:S,tickMargin:C,fontSize:k,letterSpacing:E,getTicksConfig:O,events:D,axisType:A}=e,M=Mb(sr(sr({},O),{},{ticks:n}),k,E),q=FV(m,v),te=qV(m,v),ce=Ua(O),G=Pp(r),R={};typeof l=="object"&&(R=l);var F=sr(sr({},ce),{},{fill:"none"},R),he=M.map(ne=>sr({entry:ne},UV(ne,x,j,w,N,m,S,v,C))),ee=he.map(ne=>{var{entry:J,line:xe}=ne;return g.createElement(Fa,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},l&&g.createElement("line",Ll({},F,xe,{className:yn("recharts-cartesian-axis-tick-line",Lp(l,"className"))})))}),U=he.map((ne,J)=>{var{entry:xe,tick:Ce}=ne,$=sr(sr(sr(sr({textAnchor:q,verticalAnchor:te},ce),{},{stroke:"none",fill:o},G),Ce),{},{index:J,payload:xe,visibleTicksCount:M.length,tickFormatter:u,padding:h},p);return g.createElement(Fa,Ll({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(xe.value,"-").concat(xe.coordinate,"-").concat(xe.tickCoord)},tR(D,xe,J)),r&&g.createElement(HV,{option:r,tickProps:$,value:"".concat(typeof u=="function"?u(xe.value,J):xe.value).concat(d||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},U.length>0&&g.createElement(ki,{zIndex:Ir.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:t},U)),ee.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},ee))}),VV=g.forwardRef((e,t)=>{var{axisLine:n,width:r,height:l,className:o,hide:u,ticks:d,axisType:h}=e,p=zV(e,PV),[m,v]=g.useState(""),[x,j]=g.useState(""),w=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return MV({ticks:w.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=g.useCallback(S=>{if(S){var C=S.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=C;var k=C[0];if(k){var E=window.getComputedStyle(k),O=E.fontSize,D=E.letterSpacing;(O!==m||D!==x)&&(v(O),j(D))}}},[m,x]);return u||r!=null&&r<=0||l!=null&&l<=0?null:g.createElement(ki,{zIndex:e.zIndex},g.createElement(Fa,{className:yn("recharts-cartesian-axis",o)},g.createElement(BV,{x:e.x,y:e.y,width:r,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Ua(e)}),g.createElement(WV,{ref:N,axisType:h,events:p,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:x,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(pH,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(SH,{label:e.label,labelRef:e.labelRef}),e.children)))}),Pb=g.forwardRef((e,t)=>{var n=$r(e,ts);return g.createElement(VV,Ll({},n,{ref:t}))});Pb.displayName="CartesianAxis";var GV=["x1","y1","x2","y2","key"],YV=["offset"],KV=["xAxisId","yAxisId"],QV=["xAxisId","yAxisId"];function kk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(n),!0).forEach(function(r){XV(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XV(e,t,n){return(t=ZV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZV(e){var t=JV(e,"string");return typeof t=="symbol"?t:t+""}function JV(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function El(){return El=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},El.apply(null,arguments)}function _p(e,t){if(e==null)return{};var n,r,l=eG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function eG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tG=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:r,y:l,width:o,height:u,ry:d}=e;return g.createElement("rect",{x:r,y:l,ry:d,width:o,height:u,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function OM(e){var{option:t,lineItemProps:n}=e,r;if(g.isValidElement(t))r=g.cloneElement(t,n);else if(typeof t=="function")r=t(n);else{var l,{x1:o,y1:u,x2:d,y2:h,key:p}=n,m=_p(n,GV),v=(l=Ua(m))!==null&&l!==void 0?l:{},{offset:x}=v,j=_p(v,YV);r=g.createElement("line",El({},j,{x1:o,y1:u,x2:d,y2:h,fill:"none",key:p}))}return r}function nG(e){var{x:t,width:n,horizontal:r=!0,horizontalPoints:l}=e;if(!r||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=_p(e,KV),h=l.map((p,m)=>{var v=Rr(Rr({},d),{},{x1:t,y1:p,x2:t+n,y2:p,key:"line-".concat(m),index:m});return g.createElement(OM,{key:"line-".concat(m),option:r,lineItemProps:v})});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function rG(e){var{y:t,height:n,vertical:r=!0,verticalPoints:l}=e;if(!r||!l||!l.length)return null;var{xAxisId:o,yAxisId:u}=e,d=_p(e,QV),h=l.map((p,m)=>{var v=Rr(Rr({},d),{},{x1:p,y1:t,x2:p,y2:t+n,key:"line-".concat(m),index:m});return g.createElement(OM,{option:r,lineItemProps:v,key:"line-".concat(m)})});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function aG(e){var{horizontalFill:t,fillOpacity:n,x:r,y:l,width:o,height:u,horizontalPoints:d,horizontal:h=!0}=e;if(!h||!t||!t.length||d==null)return null;var p=d.map(v=>Math.round(v+l-l)).sort((v,x)=>v-x);l!==p[0]&&p.unshift(0);var m=p.map((v,x)=>{var j=!p[x+1],w=j?l+u-v:p[x+1]-v;if(w<=0)return null;var N=x%t.length;return g.createElement("rect",{key:"react-".concat(x),y:v,x:r,height:w,width:o,stroke:"none",fill:t[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function iG(e){var{vertical:t=!0,verticalFill:n,fillOpacity:r,x:l,y:o,width:u,height:d,verticalPoints:h}=e;if(!t||!n||!n.length)return null;var p=h.map(v=>Math.round(v+l-l)).sort((v,x)=>v-x);l!==p[0]&&p.unshift(0);var m=p.map((v,x)=>{var j=!p[x+1],w=j?l+u-v:p[x+1]-v;if(w<=0)return null;var N=x%n.length;return g.createElement("rect",{key:"react-".concat(x),x:v,y:o,width:w,height:d,stroke:"none",fill:n[N],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var sG=(e,t)=>{var{xAxis:n,width:r,height:l,offset:o}=e;return gO(Mb(Rr(Rr(Rr({},ts),n),{},{ticks:yO(n),viewBox:{x:0,y:0,width:r,height:l}})),o.left,o.left+o.width,t)},lG=(e,t)=>{var{yAxis:n,width:r,height:l,offset:o}=e;return gO(Mb(Rr(Rr(Rr({},ts),n),{},{ticks:yO(n),viewBox:{x:0,y:0,width:r,height:l}})),o.top,o.top+o.height,t)},oG={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ir.grid};function kh(e){var t=_O(),n=kO(),r=CO(),l=Rr(Rr({},$r(e,oG)),{},{x:We(e.x)?e.x:r.left,y:We(e.y)?e.y:r.top,width:We(e.width)?e.width:r.width,height:We(e.height)?e.height:r.height}),{xAxisId:o,yAxisId:u,x:d,y:h,width:p,height:m,syncWithTicks:v,horizontalValues:x,verticalValues:j}=l,w=Br(),N=Je(te=>O_(te,"xAxis",o,w)),S=Je(te=>O_(te,"yAxis",u,w));if(!wi(p)||!wi(m)||!We(d)||!We(h))return null;var C=l.verticalCoordinatesGenerator||sG,k=l.horizontalCoordinatesGenerator||lG,{horizontalPoints:E,verticalPoints:O}=l;if((!E||!E.length)&&typeof k=="function"){var D=x&&x.length,A=k({yAxis:S?Rr(Rr({},S),{},{ticks:D?x:S.ticks}):void 0,width:t??p,height:n??m,offset:r},D?!0:v);Jf(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(E=A)}if((!O||!O.length)&&typeof C=="function"){var M=j&&j.length,q=C({xAxis:N?Rr(Rr({},N),{},{ticks:M?j:N.ticks}):void 0,width:t??p,height:n??m,offset:r},M?!0:v);Jf(Array.isArray(q),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof q,"]")),Array.isArray(q)&&(O=q)}return g.createElement(ki,{zIndex:l.zIndex},g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(tG,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),g.createElement(aG,El({},l,{horizontalPoints:E})),g.createElement(iG,El({},l,{verticalPoints:O})),g.createElement(nG,El({},l,{offset:r,horizontalPoints:E,xAxis:N,yAxis:S})),g.createElement(rG,El({},l,{offset:r,verticalPoints:O,xAxis:N,yAxis:S}))))}kh.displayName="CartesianGrid";var TM=(e,t,n,r)=>Sh(e,"xAxis",t,r),AM=(e,t,n,r)=>wh(e,"xAxis",t,r),MM=(e,t,n,r)=>Sh(e,"yAxis",n,r),PM=(e,t,n,r)=>wh(e,"yAxis",n,r),cG=pe([xn,TM,MM,AM,PM],(e,t,n,r,l)=>_i(e,"xAxis")?Lo(t,r,!1):Lo(n,l,!1)),uG=(e,t,n,r,l)=>l;function dG(e){return e.type==="line"}var fG=pe([ob,uG],(e,t)=>e.filter(dG).find(n=>n.id===t)),pG=pe([xn,TM,MM,AM,PM,fG,cG,fh],(e,t,n,r,l,o,u,d)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:m}=d;if(!(o==null||t==null||n==null||r==null||l==null||r.length===0||l.length===0||u==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:x}=o,j;if(x!=null&&x.length>0?j=x:j=h?.slice(p,m+1),j!=null)return MG({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:l,dataKey:v,bandSize:u,displayedData:j})}});function zM(e){var t=Pp(e),n=3,r=2;if(t!=null){var{r:l,strokeWidth:o}=t,u=Number(l),d=Number(o);return(Number.isNaN(u)||u<0)&&(u=n),(Number.isNaN(d)||d<0)&&(d=r),{r:u,strokeWidth:d}}return{r:n,strokeWidth:r}}var hG=["id"],mG=["type","layout","connectNulls","needClip","shape"],vG=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Du(){return Du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Du.apply(null,arguments)}function Ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ek(Object(n),!0).forEach(function(r){gG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gG(e,t,n){return(t=yG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yG(e){var t=xG(e,"string");return typeof t=="symbol"?t:t+""}function xG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zb(e,t){if(e==null)return{};var n,r,l=bG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function bG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var jG=e=>{var{dataKey:t,name:n,stroke:r,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:r,value:Yp(n,t),payload:e}]},wG=g.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:l,fill:o,name:u,hide:d,unit:h,tooltipType:p}=e,m={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:Yp(u,t),hide:d,type:p,color:r,unit:h}};return g.createElement(gM,{tooltipEntrySettings:m})}),RM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function SG(e,t){for(var n=e.length%2!==0?[...e,0]:e,r=[],l=0;l<t;++l)r=[...r,...n];return r}var NG=(e,t,n)=>{var r=n.reduce((v,x)=>v+x);if(!r)return RM(t,e);for(var l=Math.floor(e/r),o=e%r,u=t-e,d=[],h=0,p=0;h<n.length;p+=n[h],++h)if(p+n[h]>o){d=[...n.slice(0,h),o-p];break}var m=d.length%2===0?[0,u]:[u];return[...SG(n,l),...d,...m].map(v=>"".concat(v,"px")).join(", ")};function CG(e){var{clipPathId:t,points:n,props:r}=e,{dot:l,dataKey:o,needClip:u}=r,{id:d}=r,h=zb(r,hG),p=Ua(h);return g.createElement(SM,{points:n,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:p,needClip:u,clipPathId:t})}function _G(e){var{showLabels:t,children:n,points:r}=e,l=g.useMemo(()=>r?.map(o=>{var u,d,h={x:(u=o.x)!==null&&u!==void 0?u:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return mi(mi({},h),{},{value:o.value,payload:o.payload,viewBox:h,parentViewBox:void 0,fill:void 0})}),[r]);return g.createElement(fM,{value:t?l:void 0},n)}function Dk(e){var{clipPathId:t,pathRef:n,points:r,strokeDasharray:l,props:o}=e,{type:u,layout:d,connectNulls:h,needClip:p,shape:m}=o,v=zb(o,mG),x=mi(mi({},Lr(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(t,")"):void 0,points:r,type:u,layout:d,connectNulls:h,strokeDasharray:l??o.strokeDasharray});return g.createElement(g.Fragment,null,r?.length>1&&g.createElement(nW,Du({shapeType:"curve",option:m},x,{pathRef:n})),g.createElement(CG,{points:r,clipPathId:t,props:o}))}function kG(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function EG(e){var{clipPathId:t,props:n,pathRef:r,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:u,strokeDasharray:d,isAnimationActive:h,animationBegin:p,animationDuration:m,animationEasing:v,animateNewValues:x,width:j,height:w,onAnimationEnd:N,onAnimationStart:S}=n,C=l.current,k=ih(u,"recharts-line-"),E=g.useRef(k),[O,D]=g.useState(!1),A=!O,M=g.useCallback(()=>{typeof N=="function"&&N(),D(!1)},[N]),q=g.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),te=kG(r.current),ce=g.useRef(0);E.current!==k&&(ce.current=o.current,E.current=k);var G=ce.current;return g.createElement(_G,{points:u,showLabels:A},n.children,g.createElement(ah,{animationId:k,begin:p,duration:m,isActive:h,easing:v,onAnimationEnd:M,onAnimationStart:q,key:k},R=>{var F=lr(G,te+G,R),he=Math.min(F,te),ee;if(h)if(d){var U="".concat(d).split(/[,\s]+/gim).map(xe=>parseFloat(xe));ee=NG(he,te,U)}else ee=RM(te,he);else ee=d==null?void 0:String(d);if(R>0&&te>0&&(l.current=u,o.current=Math.max(o.current,he)),C){var ne=C.length/u.length,J=R===1?u:u.map((xe,Ce)=>{var $=Math.floor(Ce*ne);if(C[$]){var ie=C[$];return mi(mi({},xe),{},{x:lr(ie.x,xe.x,R),y:lr(ie.y,xe.y,R)})}return x?mi(mi({},xe),{},{x:lr(j*2,xe.x,R),y:lr(w/2,xe.y,R)}):mi(mi({},xe),{},{x:xe.x,y:xe.y})});return l.current=J,g.createElement(Dk,{props:n,points:J,clipPathId:t,pathRef:r,strokeDasharray:ee})}return g.createElement(Dk,{props:n,points:u,clipPathId:t,pathRef:r,strokeDasharray:ee})}),g.createElement(hM,{label:n.label}))}function DG(e){var{clipPathId:t,props:n}=e,r=g.useRef(null),l=g.useRef(0),o=g.useRef(null);return g.createElement(EG,{props:n,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:l,pathRef:o})}var OG=(e,t)=>{var n,r;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(r=e.y)!==null&&r!==void 0?r:void 0,value:e.value,errorVal:Sr(e.payload,t)}};class TG extends g.Component{render(){var{hide:t,dot:n,points:r,className:l,xAxisId:o,yAxisId:u,top:d,left:h,width:p,height:m,id:v,needClip:x,zIndex:j}=this.props;if(t)return null;var w=yn("recharts-line",l),N=v,{r:S,strokeWidth:C}=zM(n),k=Ob(n),E=S*2+C,O=x?"url(#clipPath-".concat(k?"":"dots-").concat(N,")"):void 0;return g.createElement(ki,{zIndex:j},g.createElement(Fa,{className:w},x&&g.createElement("defs",null,g.createElement(_M,{clipPathId:N,xAxisId:o,yAxisId:u}),!k&&g.createElement("clipPath",{id:"clipPath-dots-".concat(N)},g.createElement("rect",{x:h-E/2,y:d-E/2,width:p+E,height:m+E}))),g.createElement(VW,{xAxisId:o,yAxisId:u,data:r,dataPointFormatter:OG,errorBarOffset:0},g.createElement(DG,{props:this.props,clipPathId:N}))),g.createElement(Hx,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:O}))}}var IM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ir.line,type:"linear"};function AG(e){var t=$r(e,IM),{activeDot:n,animateNewValues:r,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:d,dot:h,hide:p,isAnimationActive:m,label:v,legendType:x,xAxisId:j,yAxisId:w,id:N}=t,S=zb(t,vG),{needClip:C}=Tb(j,w),k=Ch(),E=Ko(),O=Br(),D=Je(ce=>pG(ce,j,w,O,N));if(E!=="horizontal"&&E!=="vertical"||D==null||k==null)return null;var{height:A,width:M,x:q,y:te}=k;return g.createElement(TG,Du({},S,{id:N,connectNulls:d,dot:h,activeDot:n,animateNewValues:r,animationBegin:l,animationDuration:o,animationEasing:u,isAnimationActive:m,hide:p,label:v,legendType:x,xAxisId:j,yAxisId:w,points:D,layout:E,height:A,width:M,left:q,top:te,needClip:C}))}function MG(e){var{layout:t,xAxis:n,yAxis:r,xAxisTicks:l,yAxisTicks:o,dataKey:u,bandSize:d,displayedData:h}=e;return h.map((p,m)=>{var v=Sr(p,u);if(t==="horizontal"){var x=Zf({axis:n,ticks:l,bandSize:d,entry:p,index:m}),j=fr(v)?null:r.scale(v);return{x,y:j,value:v,payload:p}}var w=fr(v)?null:n.scale(v),N=Zf({axis:r,ticks:o,bandSize:d,entry:p,index:m});return w==null||N==null?null:{x:w,y:N,value:v,payload:p}}).filter(Boolean)}function PG(e){var t=$r(e,IM),n=Br();return g.createElement(bM,{id:t.id,type:"line"},r=>g.createElement(g.Fragment,null,g.createElement(yM,{legendPayload:jG(t)}),g.createElement(wG,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),g.createElement(wM,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),g.createElement(AG,Du({},t,{id:r}))))}var Rb=g.memo(PG,_h);Rb.displayName="Line";var LM=(e,t,n,r)=>Sh(e,"xAxis",t,r),$M=(e,t,n,r)=>wh(e,"xAxis",t,r),BM=(e,t,n,r)=>Sh(e,"yAxis",n,r),UM=(e,t,n,r)=>wh(e,"yAxis",n,r),zG=pe([xn,LM,BM,$M,UM],(e,t,n,r,l)=>_i(e,"xAxis")?Lo(t,r,!1):Lo(n,l,!1)),RG=(e,t,n,r,l)=>l,FM=pe([ob,RG],(e,t)=>e.filter(n=>n.type==="area").find(n=>n.id===t)),IG=(e,t,n,r,l)=>{var o,u=FM(e,t,n,r,l);if(u!=null){var d=xn(e),h=_i(d,"xAxis"),p;if(h?p=Rx(e,"yAxis",n,r):p=Rx(e,"xAxis",t,r),p!=null){var{stackId:m}=u,v=ib(u);if(!(m==null||v==null)){var x=(o=p[m])===null||o===void 0?void 0:o.stackedData;return x?.find(j=>j.key===v)}}}},LG=pe([xn,LM,BM,$M,UM,IG,fh,zG,FM,yF],(e,t,n,r,l,o,u,d,h,p)=>{var{chartData:m,dataStartIndex:v,dataEndIndex:x}=u;if(!(h==null||e!=="horizontal"&&e!=="vertical"||t==null||n==null||r==null||l==null||r.length===0||l.length===0||d==null)){var{data:j}=h,w;if(j&&j.length>0?w=j:w=m?.slice(v,x+1),w!=null)return rY({layout:e,xAxis:t,yAxis:n,xAxisTicks:r,yAxisTicks:l,dataStartIndex:v,areaSettings:h,stackedData:o,displayedData:w,chartBaseValue:p,bandSize:d})}}),$G=["id"],BG=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Pl(){return Pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pl.apply(null,arguments)}function qM(e,t){if(e==null)return{};var n,r,l=UG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function UG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ok(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(n),!0).forEach(function(r){FG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FG(e,t,n){return(t=qG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qG(e){var t=HG(e,"string");return typeof t=="symbol"?t:t+""}function HG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kp(e,t){return e&&e!=="none"?e:t}var WG=e=>{var{dataKey:t,name:n,stroke:r,fill:l,legendType:o,hide:u}=e;return[{inactive:u,dataKey:t,type:o,color:kp(r,l),value:Yp(n,t),payload:e}]},VG=g.memo(e=>{var{dataKey:t,data:n,stroke:r,strokeWidth:l,fill:o,name:u,hide:d,unit:h,tooltipType:p}=e,m={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:Yp(u,t),hide:d,type:p,color:kp(r,o),unit:h}};return g.createElement(gM,{tooltipEntrySettings:m})});function GG(e){var{clipPathId:t,points:n,props:r}=e,{needClip:l,dot:o,dataKey:u}=r,d=Ua(r);return g.createElement(SM,{points:n,dot:o,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:u,baseProps:d,needClip:l,clipPathId:t})}function YG(e){var{showLabels:t,children:n,points:r}=e,l=r.map(o=>{var u,d,h={x:(u=o.x)!==null&&u!==void 0?u:0,y:(d=o.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return To(To({},h),{},{value:o.value,payload:o.payload,parentViewBox:void 0,viewBox:h,fill:void 0})});return g.createElement(fM,{value:t?l:void 0},n)}function Tk(e){var{points:t,baseLine:n,needClip:r,clipPathId:l,props:o}=e,{layout:u,type:d,stroke:h,connectNulls:p,isRange:m}=o,{id:v}=o,x=qM(o,$G),j=Ua(x),w=Lr(x);return g.createElement(g.Fragment,null,t?.length>1&&g.createElement(Fa,{clipPath:r?"url(#clipPath-".concat(l,")"):void 0},g.createElement(ou,Pl({},w,{id:v,points:t,connectNulls:p,type:d,baseLine:n,layout:u,stroke:"none",className:"recharts-area-area"})),h!=="none"&&g.createElement(ou,Pl({},j,{className:"recharts-area-curve",layout:u,type:d,connectNulls:p,fill:"none",points:t})),h!=="none"&&m&&g.createElement(ou,Pl({},j,{className:"recharts-area-curve",layout:u,type:d,connectNulls:p,fill:"none",points:n}))),g.createElement(GG,{points:t,props:x,clipPathId:l}))}function KG(e){var{alpha:t,baseLine:n,points:r,strokeWidth:l}=e,o=r[0].y,u=r[r.length-1].y;if(!Hn(o)||!Hn(u))return null;var d=t*Math.abs(o-u),h=Math.max(...r.map(p=>p.x||0));return We(n)?h=Math.max(n,h):n&&Array.isArray(n)&&n.length&&(h=Math.max(...n.map(p=>p.x||0),h)),We(h)?g.createElement("rect",{x:0,y:o<u?o:o-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}function QG(e){var{alpha:t,baseLine:n,points:r,strokeWidth:l}=e,o=r[0].x,u=r[r.length-1].x;if(!Hn(o)||!Hn(u))return null;var d=t*Math.abs(o-u),h=Math.max(...r.map(p=>p.y||0));return We(n)?h=Math.max(n,h):n&&Array.isArray(n)&&n.length&&(h=Math.max(...n.map(p=>p.y||0),h)),We(h)?g.createElement("rect",{x:o<u?o:o-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}function XG(e){var{alpha:t,layout:n,points:r,baseLine:l,strokeWidth:o}=e;return n==="vertical"?g.createElement(KG,{alpha:t,points:r,baseLine:l,strokeWidth:o}):g.createElement(QG,{alpha:t,points:r,baseLine:l,strokeWidth:o})}function ZG(e){var{needClip:t,clipPathId:n,props:r,previousPointsRef:l,previousBaselineRef:o}=e,{points:u,baseLine:d,isAnimationActive:h,animationBegin:p,animationDuration:m,animationEasing:v,onAnimationStart:x,onAnimationEnd:j}=r,w=g.useMemo(()=>({points:u,baseLine:d}),[u,d]),N=ih(w,"recharts-area-"),S=VL(),[C,k]=g.useState(!1),E=!C,O=g.useCallback(()=>{typeof j=="function"&&j(),k(!1)},[j]),D=g.useCallback(()=>{typeof x=="function"&&x(),k(!0)},[x]);if(S==null)return null;var A=l.current,M=o.current;return g.createElement(YG,{showLabels:E,points:u},r.children,g.createElement(ah,{animationId:N,begin:p,duration:m,isActive:h,easing:v,onAnimationEnd:O,onAnimationStart:D,key:N},q=>{if(A){var te=A.length/u.length,ce=q===1?u:u.map((R,F)=>{var he=Math.floor(F*te);if(A[he]){var ee=A[he];return To(To({},R),{},{x:lr(ee.x,R.x,q),y:lr(ee.y,R.y,q)})}return R}),G;return We(d)?G=lr(M,d,q):fr(d)||ii(d)?G=lr(M,0,q):G=d.map((R,F)=>{var he=Math.floor(F*te);if(Array.isArray(M)&&M[he]){var ee=M[he];return To(To({},R),{},{x:lr(ee.x,R.x,q),y:lr(ee.y,R.y,q)})}return R}),q>0&&(l.current=ce,o.current=G),g.createElement(Tk,{points:ce,baseLine:G,needClip:t,clipPathId:n,props:r})}return q>0&&(l.current=u,o.current=d),g.createElement(Fa,null,h&&g.createElement("defs",null,g.createElement("clipPath",{id:"animationClipPath-".concat(n)},g.createElement(XG,{alpha:q,points:u,baseLine:d,layout:S,strokeWidth:r.strokeWidth}))),g.createElement(Fa,{clipPath:"url(#animationClipPath-".concat(n,")")},g.createElement(Tk,{points:u,baseLine:d,needClip:t,clipPathId:n,props:r})))}),g.createElement(hM,{label:r.label}))}function JG(e){var{needClip:t,clipPathId:n,props:r}=e,l=g.useRef(null),o=g.useRef();return g.createElement(ZG,{needClip:t,clipPathId:n,props:r,previousPointsRef:l,previousBaselineRef:o})}class eY extends g.PureComponent{render(){var{hide:t,dot:n,points:r,className:l,top:o,left:u,needClip:d,xAxisId:h,yAxisId:p,width:m,height:v,id:x,baseLine:j,zIndex:w}=this.props;if(t)return null;var N=yn("recharts-area",l),S=x,{r:C,strokeWidth:k}=zM(n),E=Ob(n),O=C*2+k,D=d?"url(#clipPath-".concat(E?"":"dots-").concat(S,")"):void 0;return g.createElement(ki,{zIndex:w},g.createElement(Fa,{className:N},d&&g.createElement("defs",null,g.createElement(_M,{clipPathId:S,xAxisId:h,yAxisId:p}),!E&&g.createElement("clipPath",{id:"clipPath-dots-".concat(S)},g.createElement("rect",{x:u-O/2,y:o-O/2,width:m+O,height:v+O}))),g.createElement(JG,{needClip:d,clipPathId:S,props:this.props})),g.createElement(Hx,{points:r,mainColor:kp(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}),this.props.isRange&&Array.isArray(j)&&g.createElement(Hx,{points:j,mainColor:kp(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}))}}var HM={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Ir.area};function tY(e){var t,n=$r(e,HM),{activeDot:r,animationBegin:l,animationDuration:o,animationEasing:u,connectNulls:d,dot:h,fill:p,fillOpacity:m,hide:v,isAnimationActive:x,legendType:j,stroke:w,xAxisId:N,yAxisId:S}=n,C=qM(n,BG),k=Ko(),E=GA(),{needClip:O}=Tb(N,S),D=Br(),{points:A,isRange:M,baseLine:q}=(t=Je(he=>LG(he,N,S,D,e.id)))!==null&&t!==void 0?t:{},te=Ch();if(k!=="horizontal"&&k!=="vertical"||te==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:ce,width:G,x:R,y:F}=te;return!A||!A.length?null:g.createElement(eY,Pl({},C,{activeDot:r,animationBegin:l,animationDuration:o,animationEasing:u,baseLine:q,connectNulls:d,dot:h,fill:p,fillOpacity:m,height:ce,hide:v,layout:k,isAnimationActive:x==="auto"?!Ul.isSsr:x,isRange:M,legendType:j,needClip:O,points:A,stroke:w,width:G,left:R,top:F,xAxisId:N,yAxisId:S}))}var nY=(e,t,n,r,l)=>{var o=n??t;if(We(o))return o;var u=e==="horizontal"?l:r,d=u.scale.domain();if(u.type==="number"){var h=Math.max(d[0],d[1]),p=Math.min(d[0],d[1]);return o==="dataMin"?p:o==="dataMax"||h<0?h:Math.max(Math.min(d[0],d[1]),0)}return o==="dataMin"?d[0]:o==="dataMax"?d[1]:d[0]};function rY(e){var{areaSettings:{connectNulls:t,baseValue:n,dataKey:r},stackedData:l,layout:o,chartBaseValue:u,xAxis:d,yAxis:h,displayedData:p,dataStartIndex:m,xAxisTicks:v,yAxisTicks:x,bandSize:j}=e,w=l&&l.length,N=nY(o,u,n,d,h),S=o==="horizontal",C=!1,k=p.map((O,D)=>{var A;w?A=l[m+D]:(A=Sr(O,r),Array.isArray(A)?C=!0:A=[N,A]);var M=A[1]==null||w&&!t&&Sr(O,r)==null;return S?{x:Zf({axis:d,ticks:v,bandSize:j,entry:O,index:D}),y:M?null:h.scale(A[1]),value:A,payload:O}:{x:M?null:d.scale(A[1]),y:Zf({axis:h,ticks:x,bandSize:j,entry:O,index:D}),value:A,payload:O}}),E;return w||C?E=k.map(O=>{var D=Array.isArray(O.value)?O.value[0]:null;return S?{x:O.x,y:D!=null&&O.y!=null?h.scale(D):null,payload:O.payload}:{x:D!=null?d.scale(D):null,y:O.y,payload:O.payload}}):E=S?h.scale(N):d.scale(N),{points:k,baseLine:E,isRange:C}}function aY(e){var t=$r(e,HM),n=Br();return g.createElement(bM,{id:t.id,type:"area"},r=>g.createElement(g.Fragment,null,g.createElement(yM,{legendPayload:WG(t)}),g.createElement(VG,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),g.createElement(wM,{type:"area",id:r,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:cL(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:n,connectNulls:t.connectNulls}),g.createElement(tY,Pl({},t,{id:r}))))}var Eh=g.memo(aY,_h);Eh.displayName="Area";var iY=["domain","range"],sY=["domain","range"];function Ak(e,t){if(e==null)return{};var n,r,l=lY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function lY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Mk(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function WM(e,t){if(e===t)return!0;var{domain:n,range:r}=e,l=Ak(e,iY),{domain:o,range:u}=t,d=Ak(t,sY);return!Mk(n,o)||!Mk(r,u)?!1:_h(l,d)}var oY=["dangerouslySetInnerHTML","ticks"],cY=["id"];function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wx.apply(null,arguments)}function Pk(e,t){if(e==null)return{};var n,r,l=uY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function uY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function dY(e){var t=Nr(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(NW(e)):n.current!==e&&t(CW({prev:n.current,next:e})),n.current=e},[e,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(_W(n.current)),n.current=null)},[t]),null}var fY=e=>{var{xAxisId:t,className:n}=e,r=Je(bO),l=Br(),o="xAxis",u=Je(S=>tc(S,o,t,l)),d=Je(S=>_A(S,o,t,l)),h=Je(S=>uq(S,t)),p=Je(S=>vq(S,t)),m=Je(S=>GT(S,t));if(h==null||p==null||m==null)return null;var{dangerouslySetInnerHTML:v,ticks:x}=e,j=Pk(e,oY),{id:w}=m,N=Pk(m,cY);return g.createElement(Pb,Wx({},j,N,{scale:u,x:p.x,y:p.y,width:h.width,height:h.height,className:yn("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:d,axisType:o}))},pY={allowDataOverflow:br.allowDataOverflow,allowDecimals:br.allowDecimals,allowDuplicatedCategory:br.allowDuplicatedCategory,angle:br.angle,axisLine:ts.axisLine,height:br.height,hide:!1,includeHidden:br.includeHidden,interval:br.interval,minTickGap:br.minTickGap,mirror:br.mirror,orientation:br.orientation,padding:br.padding,reversed:br.reversed,scale:br.scale,tick:br.tick,tickCount:br.tickCount,tickLine:ts.tickLine,tickSize:ts.tickSize,type:br.type,xAxisId:0},hY=e=>{var t=$r(e,pY);return g.createElement(g.Fragment,null,g.createElement(dY,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),g.createElement(fY,t))},Dh=g.memo(hY,WM);Dh.displayName="XAxis";var mY=["dangerouslySetInnerHTML","ticks"],vY=["id"];function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vx.apply(null,arguments)}function zk(e,t){if(e==null)return{};var n,r,l=gY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function gY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function yY(e){var t=Nr(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(kW(e)):n.current!==e&&t(EW({prev:n.current,next:e})),n.current=e},[e,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(DW(n.current)),n.current=null)},[t]),null}var xY=e=>{var{yAxisId:t,className:n,width:r,label:l}=e,o=g.useRef(null),u=g.useRef(null),d=Je(bO),h=Br(),p=Nr(),m="yAxis",v=Je(D=>tc(D,m,t,h)),x=Je(D=>xq(D,t)),j=Je(D=>yq(D,t)),w=Je(D=>_A(D,m,t,h)),N=Je(D=>YT(D,t));if(g.useLayoutEffect(()=>{if(!(r!=="auto"||!x||Db(l)||g.isValidElement(l)||N==null)){var D=o.current;if(D){var A=D.getCalculatedWidth();Math.round(x.width)!==Math.round(A)&&p(OW({id:t,width:A}))}}},[w,x,p,l,t,r,N]),x==null||j==null||N==null)return null;var{dangerouslySetInnerHTML:S,ticks:C}=e,k=zk(e,mY),{id:E}=N,O=zk(N,vY);return g.createElement(Pb,Vx({},k,O,{ref:o,labelRef:u,scale:v,x:j.x,y:j.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:x.width,height:x.height,className:yn("recharts-".concat(m," ").concat(m),n),viewBox:d,ticks:w,axisType:m}))},bY={allowDataOverflow:jr.allowDataOverflow,allowDecimals:jr.allowDecimals,allowDuplicatedCategory:jr.allowDuplicatedCategory,angle:jr.angle,axisLine:ts.axisLine,hide:!1,includeHidden:jr.includeHidden,interval:jr.interval,minTickGap:jr.minTickGap,mirror:jr.mirror,orientation:jr.orientation,padding:jr.padding,reversed:jr.reversed,scale:jr.scale,tick:jr.tick,tickCount:jr.tickCount,tickLine:ts.tickLine,tickSize:ts.tickSize,type:jr.type,width:jr.width,yAxisId:0},jY=e=>{var t=$r(e,bY);return g.createElement(g.Fragment,null,g.createElement(yY,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),g.createElement(xY,t))},Oh=g.memo(jY,WM);Oh.displayName="YAxis";var wY=(e,t)=>t,Ib=pe([wY,xn,WT,mr,UA,vs,M9,Ar],B9),Lb=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},VM=qa("mouseClick"),GM=Fu();GM.startListening({actionCreator:VM,effect:(e,t)=>{var n=e.payload,r=Ib(t.getState(),Lb(n));r?.activeIndex!=null&&t.dispatch(Aq({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Gx=qa("mouseMove"),YM=Fu(),_f=null;YM.startListening({actionCreator:Gx,effect:(e,t)=>{var n=e.payload;_f!==null&&cancelAnimationFrame(_f);var r=Lb(n);_f=requestAnimationFrame(()=>{var l=t.getState(),o=gb(l,l.tooltip.settings.shared);if(o==="axis"){var u=Ib(l,r);u?.activeIndex!=null?t.dispatch(MA({activeIndex:u.activeIndex,activeDataKey:void 0,activeCoordinate:u.activeCoordinate})):t.dispatch(AA())}_f=null})}});var Rk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},KM=oa({name:"rootProps",initialState:Rk,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:Rk.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),SY=KM.reducer,{updateOptions:NY}=KM.actions,QM=oa({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:lZ}=QM.actions,CY=QM.reducer,XM=qa("keyDown"),ZM=qa("focus"),$b=Fu();$b.startListening({actionCreator:XM,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:l}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var u=yb(l,rc(n),Xu(n),nd(n)),d=u==null?-1:Number(u);if(!(!Number.isFinite(d)||d<0)){var h=vs(n);if(o==="Enter"){var p=bp(n,"axis","hover",String(l.index));t.dispatch(Lx({active:!l.active,activeIndex:l.index,activeDataKey:l.dataKey,activeCoordinate:p}));return}var m=Sq(n),v=m==="left-to-right"?1:-1,x=o==="ArrowRight"?1:-1,j=d+x*v;if(!(h==null||j>=h.length||j<0)){var w=bp(n,"axis","hover",String(j));t.dispatch(Lx({active:!0,activeIndex:j.toString(),activeDataKey:void 0,activeCoordinate:w}))}}}}}});$b.startListening({actionCreator:ZM,effect:(e,t)=>{var n=t.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:l}=n.tooltip;if(!l.active&&l.index==null){var o="0",u=bp(n,"axis","hover",String(o));t.dispatch(Lx({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:u}))}}}});var La=qa("externalEvent"),JM=Fu(),gy=new Map;JM.startListening({actionCreator:La,effect:(e,t)=>{var{handler:n,reactEvent:r}=e.payload;if(n!=null){r.persist();var l=r.type,o=gy.get(l);o!==void 0&&cancelAnimationFrame(o);var u=requestAnimationFrame(()=>{try{var d=t.getState(),h={activeCoordinate:y9(d),activeDataKey:v9(d),activeIndex:ku(d),activeLabel:HA(d),activeTooltipIndex:ku(d),isTooltipActive:x9(d)};n(h,r)}finally{gy.delete(l)}});gy.set(l,u)}}});var _Y=pe([nc],e=>e.tooltipItemPayloads),kY=pe([_Y,ed,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var l=e.find(d=>d.settings.dataKey===r);if(l!=null){var{positions:o}=l;if(o!=null){var u=t(o,n);return u}}}),e2=qa("touchMove"),t2=Fu();t2.startListening({actionCreator:e2,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var r=t.getState(),l=gb(r,r.tooltip.settings.shared);if(l==="axis"){var o=Ib(r,Lb({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&t.dispatch(MA({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(l==="item"){var u,d=n.touches[0];if(document.elementFromPoint==null)return;var h=document.elementFromPoint(d.clientX,d.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(vL),m=(u=h.getAttribute(gL))!==null&&u!==void 0?u:void 0,v=kY(t.getState(),p,m);t.dispatch(Tq({activeDataKey:m,activeIndex:p,activeCoordinate:v}))}}}});var EY=FD({brush:hV,cartesianAxis:TW,chartData:y7,errorBars:BW,graphicalItems:uW,layout:JI,legend:c$,options:p7,polarAxis:IH,polarOptions:CY,referenceElements:jV,rootProps:SY,tooltip:Mq,zIndex:e7}),DY=function(t){return NI({reducer:EY,preloadedState:t,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([GM.middleware,YM.middleware,$b.middleware,JM.middleware,t2.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(rO({type:"raf"}))},devTools:Ul.devToolsEnabled})};function OY(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,l=Br(),o=g.useRef(null);if(l)return n;o.current==null&&(o.current=DY(t));var u=m0;return g.createElement(uV,{context:u,store:o.current},n)}function TY(e){var{layout:t,margin:n}=e,r=Nr(),l=Br();return g.useEffect(()=>{l||(r(QI(t)),r(KI(n)))},[r,l,t,n]),null}var AY=g.memo(TY,_h);function MY(e){var t=Nr();return g.useEffect(()=>{t(NY(e))},[t,e]),null}function Ik(e){var{zIndex:t,isPanorama:n}=e,r=n?"recharts-zindex-panorama-":"recharts-zindex-",l=xM("".concat(r).concat(t)),o=Nr();return g.useLayoutEffect(()=>(o(Z9({zIndex:t,elementId:l,isPanorama:n})),()=>{o(J9({zIndex:t,isPanorama:n}))}),[o,t,l,n]),g.createElement("g",{id:l})}function Lk(e){var{children:t,isPanorama:n}=e,r=Je(F9);if(!r||r.length===0)return t;var l=r.filter(u=>u<0),o=r.filter(u=>u>0);return g.createElement(g.Fragment,null,l.map(u=>g.createElement(Ik,{key:u,zIndex:u,isPanorama:n})),t,o.map(u=>g.createElement(Ik,{key:u,zIndex:u,isPanorama:n})))}var PY=["children"];function zY(e,t){if(e==null)return{};var n,r,l=RY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function RY(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ep.apply(null,arguments)}var IY={width:"100%",height:"100%",display:"block"},LY=g.forwardRef((e,t)=>{var n=_O(),r=kO(),l=zO();if(!wi(n)||!wi(r))return null;var{children:o,otherAttributes:u,title:d,desc:h}=e,p,m;return u!=null&&(typeof u.tabIndex=="number"?p=u.tabIndex:p=l?0:void 0,typeof u.role=="string"?m=u.role:m=l?"application":void 0),g.createElement(iD,Ep({},u,{title:d,desc:h,role:m,tabIndex:p,width:n,height:r,style:IY,ref:t}),o)}),$Y=e=>{var{children:t}=e,n=Je(Zp);if(!n)return null;var{width:r,height:l,y:o,x:u}=n;return g.createElement(iD,{width:r,height:l,x:u,y:o},t)},$k=g.forwardRef((e,t)=>{var{children:n}=e,r=zY(e,PY),l=Br();return l?g.createElement($Y,null,g.createElement(Lk,{isPanorama:!0},n)):g.createElement(LY,Ep({ref:t},r),g.createElement(Lk,{isPanorama:!1},n))});function BY(){var e=Nr(),[t,n]=g.useState(null),r=Je(mL);return g.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;Hn(o)&&o!==r&&e(ZI(o))}},[t,e,r]),n}function Bk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function UY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bk(Object(n),!0).forEach(function(r){FY(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FY(e,t,n){return(t=qY(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qY(e){var t=HY(e,"string");return typeof t=="symbol"?t:t+""}function HY(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $l(){return $l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$l.apply(null,arguments)}var WY=()=>(k7(),null);function Dp(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var VY=g.forwardRef((e,t)=>{var n,r,l=g.useRef(null),[o,u]=g.useState({containerWidth:Dp((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Dp((r=e.style)===null||r===void 0?void 0:r.height)}),d=g.useCallback((p,m)=>{u(v=>{var x=Math.round(p),j=Math.round(m);return v.containerWidth===x&&v.containerHeight===j?v:{containerWidth:x,containerHeight:j}})},[]),h=g.useCallback(p=>{if(typeof t=="function"&&t(p),p!=null&&typeof ResizeObserver<"u"){var{width:m,height:v}=p.getBoundingClientRect();d(m,v);var x=w=>{var{width:N,height:S}=w[0].contentRect;d(N,S)},j=new ResizeObserver(x);j.observe(p),l.current=j}},[t,d]);return g.useEffect(()=>()=>{var p=l.current;p?.disconnect()},[d]),g.createElement(g.Fragment,null,g.createElement(eh,{width:o.containerWidth,height:o.containerHeight}),g.createElement("div",$l({ref:h},e)))}),GY=g.forwardRef((e,t)=>{var{width:n,height:r}=e,[l,o]=g.useState({containerWidth:Dp(n),containerHeight:Dp(r)}),u=g.useCallback((h,p)=>{o(m=>{var v=Math.round(h),x=Math.round(p);return m.containerWidth===v&&m.containerHeight===x?m:{containerWidth:v,containerHeight:x}})},[]),d=g.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null){var{width:p,height:m}=h.getBoundingClientRect();u(p,m)}},[t,u]);return g.createElement(g.Fragment,null,g.createElement(eh,{width:l.containerWidth,height:l.containerHeight}),g.createElement("div",$l({ref:d},e)))}),YY=g.forwardRef((e,t)=>{var{width:n,height:r}=e;return g.createElement(g.Fragment,null,g.createElement(eh,{width:n,height:r}),g.createElement("div",$l({ref:t},e)))}),KY=g.forwardRef((e,t)=>{var{width:n,height:r}=e;return rs(n)||rs(r)?g.createElement(GY,$l({},e,{ref:t})):g.createElement(YY,$l({},e,{ref:t}))});function QY(e){return e===!0?VY:KY}var XY=g.forwardRef((e,t)=>{var{children:n,className:r,height:l,onClick:o,onContextMenu:u,onDoubleClick:d,onMouseDown:h,onMouseEnter:p,onMouseLeave:m,onMouseMove:v,onMouseUp:x,onTouchEnd:j,onTouchMove:w,onTouchStart:N,style:S,width:C,responsive:k,dispatchTouchEvents:E=!0}=e,O=g.useRef(null),D=Nr(),[A,M]=g.useState(null),[q,te]=g.useState(null),ce=BY(),G=N0(),R=G?.width>0?G.width:C,F=G?.height>0?G.height:l,he=g.useCallback(W=>{ce(W),typeof t=="function"&&t(W),M(W),te(W),W!=null&&(O.current=W)},[ce,t,M,te]),ee=g.useCallback(W=>{D(VM(W)),D(La({handler:o,reactEvent:W}))},[D,o]),U=g.useCallback(W=>{D(Gx(W)),D(La({handler:p,reactEvent:W}))},[D,p]),ne=g.useCallback(W=>{D(AA()),D(La({handler:m,reactEvent:W}))},[D,m]),J=g.useCallback(W=>{D(Gx(W)),D(La({handler:v,reactEvent:W}))},[D,v]),xe=g.useCallback(()=>{D(ZM())},[D]),Ce=g.useCallback(W=>{D(XM(W.key))},[D]),$=g.useCallback(W=>{D(La({handler:u,reactEvent:W}))},[D,u]),ie=g.useCallback(W=>{D(La({handler:d,reactEvent:W}))},[D,d]),we=g.useCallback(W=>{D(La({handler:h,reactEvent:W}))},[D,h]),Z=g.useCallback(W=>{D(La({handler:x,reactEvent:W}))},[D,x]),K=g.useCallback(W=>{D(La({handler:N,reactEvent:W}))},[D,N]),Ee=g.useCallback(W=>{E&&D(e2(W)),D(La({handler:w,reactEvent:W}))},[D,E,w]),de=g.useCallback(W=>{D(La({handler:j,reactEvent:W}))},[D,j]),Se=QY(k);return g.createElement(ZA.Provider,{value:A},g.createElement(a6.Provider,{value:q},g.createElement(Se,{width:R??S?.width,height:F??S?.height,className:yn("recharts-wrapper",r),style:UY({position:"relative",cursor:"default",width:R,height:F},S),onClick:ee,onContextMenu:$,onDoubleClick:ie,onFocus:xe,onKeyDown:Ce,onMouseDown:we,onMouseEnter:U,onMouseLeave:ne,onMouseMove:J,onMouseUp:Z,onTouchEnd:de,onTouchMove:Ee,onTouchStart:K,ref:he},g.createElement(WY,null),n)))}),ZY=["width","height","responsive","children","className","style","compact","title","desc"];function JY(e,t){if(e==null)return{};var n,r,l=eK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function eK(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var tK=g.forwardRef((e,t)=>{var{width:n,height:r,responsive:l,children:o,className:u,style:d,compact:h,title:p,desc:m}=e,v=JY(e,ZY),x=Ua(v);return h?g.createElement(g.Fragment,null,g.createElement(eh,{width:n,height:r}),g.createElement($k,{otherAttributes:x,title:p,desc:m},o)):g.createElement(XY,{className:u,style:d,width:n,height:r,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement($k,{otherAttributes:x,title:p,desc:m,ref:t},g.createElement(SV,null,o)))});function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yx.apply(null,arguments)}var nK={top:5,right:5,bottom:5,left:5},rK={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:nK,reverseStackOrder:!1,syncMethod:"index",responsive:!1},aK=g.forwardRef(function(t,n){var r,l=$r(t.categoricalChartProps,rK),{chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,categoricalChartProps:p}=t,m={chartName:o,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return g.createElement(OY,{preloadedState:{options:m},reduxStoreName:(r=p.id)!==null&&r!==void 0?r:o},g.createElement(pV,{chartData:p.data}),g.createElement(AY,{layout:l.layout,margin:l.margin}),g.createElement(MY,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),g.createElement(tK,Yx({},l,{ref:n})))}),iK=["axis"],Bb=g.forwardRef((e,t)=>g.createElement(aK,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:iK,tooltipPayloadSearcher:d7,categoricalChartProps:e,ref:t}));const sK=[{value:"spend",label:"Spend",icon:Ap},{value:"price",label:"Price",icon:Go},{value:"issues",label:"Issues",icon:tn},{value:"matchRate",label:"Match Rate",icon:Kr}],lK=[{value:"7d",label:"1W"},{value:"30d",label:"1M"},{value:"180d",label:"6M"},{value:"365d",label:"1Y"}];function oK(){const{filters:e}=us(),[t,n]=g.useState("spend"),[r,l]=g.useState("30d"),[o,u]=g.useState(null),[d,h]=g.useState(!0);g.useEffect(()=>{let v=!0;async function x(){h(!0);try{const j=r==="7d"?"7d":r==="30d"?"30d":r==="180d"?"180d":"365d",w=await $3(t,e.venueId||void 0,j,{supplier:e.searchQuery||void 0});v&&u(w)}catch(j){console.error("Failed to load trend data:",j),v&&u({data:[],forecast:[],unit:""})}finally{v&&h(!1)}}return x(),()=>{v=!1}},[t,r,e.venueId,e.searchQuery]);const p=v=>t==="spend"?new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(v):t==="matchRate"?`${v.toFixed(1)}%`:v.toLocaleString(),m=o&&o.data&&o.data.length>0?[...o.data.map(v=>({date:v.date,value:v.value,forecast:void 0})),...(o.forecast||[]).map(v=>({date:v.date,value:void 0,forecast:v.forecast}))]:[];return d?i.jsx("div",{className:"trends-graph",children:i.jsx("div",{className:"trends-graph-loading",children:"Loading trend data..."})}):!o||!o.data||o.data.length===0?i.jsx("div",{className:"trends-graph",children:i.jsx("div",{className:"trends-graph-loading",children:"No trend data available"})}):i.jsxs("div",{className:"trends-graph",children:[i.jsxs("div",{className:"trends-graph-header",children:[i.jsx("div",{className:"trends-graph-tabs",children:sK.map(v=>{const x=v.icon;return i.jsxs("button",{className:`trends-graph-tab ${t===v.value?"trends-graph-tab-active":""}`,onClick:()=>n(v.value),children:[i.jsx(x,{size:16}),i.jsx("span",{children:v.label})]},v.value)})}),i.jsx("div",{className:"trends-graph-range-toggles",children:lK.map(v=>i.jsx("button",{className:`trends-graph-range-toggle ${r===v.value?"trends-graph-range-toggle-active":""}`,onClick:()=>l(v.value),children:v.label},v.value))})]}),i.jsx("div",{className:"trends-graph-chart-container",children:m.length>0?i.jsx(C0,{width:"100%",height:300,children:i.jsxs(Bb,{data:m,children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"colorActual",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"rgba(59, 130, 246, 0.3)",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"rgba(59, 130, 246, 0.3)",stopOpacity:0})]}),i.jsxs("linearGradient",{id:"colorForecast",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"rgba(251, 191, 36, 0.2)",stopOpacity:.2}),i.jsx("stop",{offset:"95%",stopColor:"rgba(251, 191, 36, 0.2)",stopOpacity:0})]})]}),i.jsx(kh,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),i.jsx(Dh,{dataKey:"date",stroke:"rgba(255, 255, 255, 0.5)",tick:{fill:"rgba(255, 255, 255, 0.6)",fontSize:12}}),i.jsx(Oh,{stroke:"rgba(255, 255, 255, 0.5)",tick:{fill:"rgba(255, 255, 255, 0.6)",fontSize:12},tickFormatter:p}),i.jsx(kb,{contentStyle:{backgroundColor:"rgba(42, 42, 42, 0.95)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.87)"},formatter:v=>p(v)}),i.jsx(Eh,{type:"monotone",dataKey:"value",stroke:"rgba(59, 130, 246, 1)",fill:"url(#colorActual)",strokeWidth:2,dot:!1,connectNulls:!1}),i.jsx(Rb,{type:"monotone",dataKey:"forecast",stroke:"rgba(251, 191, 36, 1)",strokeWidth:2,strokeDasharray:"5 5",dot:!1,connectNulls:!1})]})}):i.jsx("div",{className:"trends-graph-loading",children:"No data to display"})})]})}let uu=[],Gs=[];function du(e){const t=`notification-${Date.now()}-${Math.random()}`,n={...e,id:t,duration:e.duration||5e3};Gs=[...Gs,n],uu.forEach(r=>r([...Gs]))}function cK(e){Gs=Gs.filter(t=>t.id!==e),uu.forEach(t=>t([...Gs]))}function n2({notifications:e}){const[t,n]=g.useState(e||Gs);g.useEffect(()=>{if(e){n(e);return}const o=u=>{n(u)};return uu.push(o),n([...Gs]),()=>{uu=uu.filter(u=>u!==o)}},[e]);const r=g.useCallback(o=>{e?n(u=>u.filter(d=>d.id!==o)):cK(o)},[e]);g.useEffect(()=>{t.forEach(o=>{if(o.duration&&o.duration>0){const u=setTimeout(()=>{r(o.id)},o.duration);return()=>clearTimeout(u)}})},[t,r]);const l=o=>{switch(o){case"success":return i.jsx(Kr,{size:18});case"error":return i.jsx(Wa,{size:18});default:return i.jsx(Po,{size:18})}};return t.length===0?null:i.jsx("div",{className:"notification-stack",children:t.map(o=>i.jsxs("div",{className:`notification notification-${o.type}`,style:{animation:"slideInRight 300ms ease"},children:[i.jsx("div",{className:"notification-icon",children:l(o.type)}),i.jsx("div",{className:"notification-content",children:i.jsx("div",{className:"notification-message",children:o.message})}),i.jsx("button",{className:"notification-dismiss",onClick:()=>r(o.id),"aria-label":"Dismiss notification",children:i.jsx(sn,{size:16})})]},o.id))})}function uK(){const{filters:e}=us(),[t,n]=g.useState([]),[r,l]=g.useState(!0),[o,u]=g.useState(null);g.useEffect(()=>{let p=!0;async function m(){l(!0);try{const x=await zS(e.venueId||void 0);if(p){const j=[...x].sort((w,N)=>N.age-w.age);n(j)}}catch(x){console.error("Failed to load unmatched DNs:",x),p&&n([])}finally{p&&l(!1)}}m();const v=setInterval(m,3e4);return()=>{p=!1,clearInterval(v)}},[e.venueId]);const d=p=>p<=1?"green":p<=3||p<=7?"amber":"red",h=async p=>{if(!p.suggestedInvoice){du({type:"error",message:"No suggested invoice available for this delivery note"});return}try{await eD(p.id,p.suggestedInvoice.id),du({type:"success",message:`Paired ${p.deliveryNoteNumber} with invoice`});const m=await zS(e.venueId||void 0);n(m.sort((v,x)=>x.age-v.age))}catch(m){du({type:"error",message:`Failed to pair delivery note: ${m instanceof Error?m.message:"Unknown error"}`})}};return r?i.jsx("div",{className:"unmatched-dn-strip",children:i.jsx("div",{className:"unmatched-dn-strip-loading",children:"Loading..."})}):t.length===0?null:i.jsxs("div",{className:"unmatched-dn-strip",children:[i.jsx("h3",{className:"unmatched-dn-strip-title",children:"Unmatched Delivery Notes"}),i.jsx("div",{className:"unmatched-dn-strip-pills",children:t.map(p=>i.jsxs("div",{className:`unmatched-dn-pill unmatched-dn-pill-${d(p.age)}`,onMouseEnter:()=>u(p.id),onMouseLeave:()=>u(null),children:[i.jsx(Za,{size:14}),i.jsx("span",{className:"unmatched-dn-pill-number",children:p.deliveryNoteNumber}),i.jsx("span",{className:"unmatched-dn-pill-supplier",children:p.supplier}),i.jsxs("span",{className:"unmatched-dn-pill-age",children:[p.age,"d"]}),p.suggestedInvoice&&i.jsxs("button",{className:"unmatched-dn-pill-pair-button",onClick:()=>h(p),title:`Pair with invoice (${Math.round(p.suggestedInvoice.confidence*100)}% confidence)`,children:["Pair (",Math.round(p.suggestedInvoice.confidence*100),"%)"]}),o===p.id&&p.suggestedInvoice&&i.jsxs("div",{className:"unmatched-dn-pill-preview",children:["Suggested Invoice: ",p.suggestedInvoice.id," (",Math.round(p.suggestedInvoice.confidence*100),"% match)"]})]},p.id))})]})}function dK(){const{filters:e}=us(),[t,n]=g.useState([]),[r,l]=g.useState(!0),[o,u]=g.useState(!1);g.useEffect(()=>{let m=!0;async function v(){l(!0);try{const j=await B3(e.venueId||void 0,20);m&&n(j)}catch(j){console.error("Failed to load activity:",j),m&&n([])}finally{m&&l(!1)}}v();const x=setInterval(v,6e4);return()=>{m=!1,clearInterval(x)}},[e.venueId]);const d=m=>{const v=new Date(m),j=new Date().getTime()-v.getTime(),w=Math.floor(j/6e4);if(w<1)return"Just now";if(w<60)return`${w}m ago`;const N=Math.floor(w/60);return N<24?`${N}h ago`:v.toLocaleDateString()},h=()=>{const m=[["Timestamp","Actor","Action","Detail"].join(","),...t.map(w=>[w.timestamp,w.actor,w.action,w.detail||""].map(N=>`"${N.replace(/"/g,'""')}"`).join(","))].join(`
`),v=new Blob([m],{type:"text/csv"}),x=URL.createObjectURL(v),j=document.createElement("a");j.href=x,j.download=`audit_log_${new Date().toISOString().split("T")[0]}.csv`,j.click(),URL.revokeObjectURL(x)};if(r)return i.jsx("div",{className:"activity-ticker",children:i.jsx("div",{className:"activity-ticker-loading",children:"Loading..."})});const p=t.slice(0,3);return i.jsxs("div",{className:"activity-ticker",children:[i.jsxs("div",{className:"activity-ticker-header",children:[i.jsxs("div",{className:"activity-ticker-title",children:[i.jsx(Ru,{size:16}),i.jsx("span",{children:"Recent Activity"})]}),i.jsxs("div",{className:"activity-ticker-actions",children:[o&&i.jsx("button",{className:"activity-ticker-action-button",onClick:h,title:"Export CSV",children:i.jsx(n0,{size:14})}),i.jsx("button",{className:"activity-ticker-action-button",onClick:()=>u(!o),title:o?"Collapse":"Expand",children:o?i.jsx(ur,{size:14}):i.jsx(jn,{size:14})})]})]}),i.jsx("div",{className:"activity-ticker-content",children:o?i.jsxs("div",{className:"activity-ticker-expanded",children:[t.map(m=>i.jsxs("div",{className:"activity-ticker-item-full",children:[i.jsxs("div",{className:"activity-ticker-item-header",children:[i.jsx("span",{className:"activity-ticker-actor",children:m.actor}),i.jsx("span",{className:"activity-ticker-time-full",children:new Date(m.timestamp).toLocaleString()})]}),i.jsx("div",{className:"activity-ticker-action-full",children:m.action}),m.detail&&i.jsx("div",{className:"activity-ticker-detail",children:m.detail})]},m.id)),t.length===0&&i.jsx("div",{className:"activity-ticker-empty",children:"No activity found"})]}):i.jsxs("div",{className:"activity-ticker-preview",children:[p.map((m,v)=>i.jsxs("div",{className:"activity-ticker-item",children:[i.jsx("span",{className:"activity-ticker-actor",children:m.actor}),i.jsx("span",{className:"activity-ticker-action",children:m.action}),i.jsx("span",{className:"activity-ticker-time",children:d(m.timestamp)})]},m.id)),t.length===0&&i.jsx("div",{className:"activity-ticker-empty",children:"No recent activity"})]})})]})}const Uk=["critical","major","minor"],Fk=6,qk=10,fK={critical:"Review these first",major:"Worth a look",minor:"Nice to fix"};function pK(e,t){const[n,r]=g.useState(e);return g.useEffect(()=>{const l=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(l)}},[e,t]),n}const r2=g.memo(({item:e,isInvoicesScope:t,viewMode:n,onItemClick:r,isSelected:l,isHovered:o})=>{const u=g.useRef(null),[d,h]=g.useState(!1),p=g.useCallback(()=>{h(!0),r?.(e)},[e,r]);return g.useEffect(()=>{if(!d)return;const m=v=>{u.current&&!u.current.contains(v.target)&&h(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[d]),i.jsxs("div",{ref:u,className:"discrepancy-item-wrapper",children:[i.jsx("button",{type:"button",onClick:p,className:"discrepancy-item-button",children:i.jsxs("div",{className:`${t?"discrepancy-item":"discrepancy-item-card"} ${o?"discrepancy-item-hovered":""} ${d?"discrepancy-item-selected":""}`,children:[i.jsxs("div",{className:"discrepancy-item-left",children:[t?i.jsx("div",{className:"discrepancy-priority-indicator-wrapper",children:i.jsx("span",{className:`discrepancy-priority-indicator discrepancy-priority-indicator-${e.level||"minor"}`})}):i.jsxs("div",{className:"discrepancy-item-icon-wrapper",children:[e.level==="critical"&&i.jsx(Wa,{className:"discrepancy-icon discrepancy-icon-critical",size:16,strokeWidth:1.7}),e.level==="major"&&i.jsx(Po,{className:"discrepancy-icon discrepancy-icon-major",size:16,strokeWidth:1.7}),(e.level==="minor"||!e.level)&&i.jsx(Po,{className:"discrepancy-icon discrepancy-icon-minor",size:16,strokeWidth:1.4})]}),i.jsx("div",{className:"discrepancy-item-text",children:i.jsx("div",{className:t?"discrepancy-item-title":"discrepancy-item-title-new",children:e.title})})]}),e.contextLabel&&i.jsx("span",{className:t?"discrepancy-context-badge":"discrepancy-context-label",children:e.contextLabel})]})}),d&&i.jsx("div",{className:"discrepancy-item-dropdown discrepancy-item-dropdown-clicked",children:i.jsxs("div",{className:"discrepancy-item-dropdown-content",children:[e.description&&i.jsxs("div",{className:"discrepancy-item-dropdown-section",children:[i.jsx("div",{className:"discrepancy-item-dropdown-label",children:"Details"}),i.jsx("div",{className:"discrepancy-item-dropdown-text",children:e.description})]}),e.contextLabel&&i.jsxs("div",{className:"discrepancy-item-dropdown-section",children:[i.jsx("div",{className:"discrepancy-item-dropdown-label",children:"Invoice"}),i.jsx("div",{className:"discrepancy-item-dropdown-text",children:e.contextLabel})]}),e.actions&&e.actions.length>0&&i.jsx("div",{className:"discrepancy-item-dropdown-actions",children:e.actions.map((m,v)=>i.jsx("button",{type:"button",className:"discrepancy-item-dropdown-action",onClick:x=>{x.stopPropagation(),r?.(e)},children:m.label||m.actionType},v))})]})})]})});r2.displayName="DiscrepancyItemCard";function a2({scope:e,items:t,isLoading:n=!1,lastUpdated:r=null,onItemClick:l,className:o}){const u=e==="invoices",d=`discrepancy-panel-collapsed-${e}`,[h,p]=g.useState(()=>{try{return localStorage.getItem(d)==="true"}catch{return!1}}),[m,v]=g.useState(""),[x,j]=g.useState("expanded"),[w,N]=g.useState(null),[S,C]=g.useState(!1),[k,E]=g.useState(null),[O,D]=g.useState(-1),A=g.useRef(null),M=pK(m,150),q=g.useMemo(()=>{if(!M.trim())return t;const Se=M.toLowerCase();return t.filter(W=>W.title.toLowerCase().includes(Se)||W.description?.toLowerCase().includes(Se)||W.contextLabel?.toLowerCase().includes(Se))},[t,M]),te=g.useMemo(()=>{const Se={critical:[],major:[],minor:[]};return q.forEach(W=>{const me=W.level||(W.severity==="critical"?"critical":W.severity==="warning"?"major":"minor");Se[me]&&Se[me].push(W)}),Se},[q]),ce=te.critical.length>0,G=te.major.length>0;let R=null;ce?R="High priority":G?R="Needs attention":q.length>0&&(R="All low priority"),g.useEffect(()=>{u&&t.length>50&&x==="expanded"&&j("compact")},[t.length,u,x]);const F=g.useMemo(()=>{const Se=[];return Uk.forEach(W=>{const me=te[W];if(me){const Me=x==="compact"?qk:Fk;Se.push(...me.slice(0,Me))}}),Se},[te,x]);g.useEffect(()=>{if(!u||h)return;const Se=W=>{if(W.key==="/"&&!W.ctrlKey&&!W.metaKey){const me=W.target;me.tagName!=="INPUT"&&me.tagName!=="TEXTAREA"&&(W.preventDefault(),A.current?.focus());return}if((W.key==="j"||W.key==="k")&&!W.ctrlKey&&!W.metaKey){const me=W.target;if(me.tagName!=="INPUT"&&me.tagName!=="TEXTAREA"){if(W.preventDefault(),F.length===0)return;let Me=O;W.key==="j"?Me=O<0?0:Math.min(O+1,F.length-1):Me=O<0?F.length-1:Math.max(O-1,0),D(Me);const Q=F[Me];Q&&(N(Q.id),setTimeout(()=>{document.querySelector(`[data-item-id="${Q.id}"]`)?.scrollIntoView({behavior:"smooth",block:"nearest"})},50))}return}if(W.key==="Enter"&&O>=0){const me=W.target;if(me.tagName!=="INPUT"&&me.tagName!=="TEXTAREA"){W.preventDefault();const Me=F[O];Me&&l?.(Me)}return}W.key==="Escape"&&(D(-1),N(null),A.current?.blur())};return window.addEventListener("keydown",Se),()=>window.removeEventListener("keydown",Se)},[u,h,O,F,l]);const he=()=>{const Se=!h;p(Se);try{localStorage.setItem(d,String(Se))}catch{}},ee=Se=>{const W=document.querySelector(`[data-level="${Se}"]`);W&&(W.scrollIntoView({behavior:"smooth",block:"start"}),E(Se),setTimeout(()=>E(null),2e3)),C(!1)};g.useEffect(()=>{if(!S)return;const Se=W=>{W.target.closest(".discrepancy-jump-to-container")||C(!1)};return document.addEventListener("mousedown",Se),()=>document.removeEventListener("mousedown",Se)},[S]);const U=x==="compact"?qk:Fk,ne=(Se,W)=>{if(W.length===0)return null;const me=W.slice(0,U),Me=W.length-U;return i.jsxs("div",{"data-level":Se,className:`${u?"discrepancy-group-invoices":"discrepancy-group-new"} ${k===Se?"discrepancy-group-focused":""}`,children:[i.jsxs("h3",{className:u?"discrepancy-section-title":"discrepancy-group-title-new",children:[fK[Se]," (",W.length,")"]}),i.jsxs("div",{className:u?"discrepancy-group-items-invoices":"discrepancy-group-items-new",children:[me.map((Q,$e)=>{const Ae=F.findIndex(vt=>vt.id===Q.id);return i.jsx("div",{"data-item-id":Q.id,children:i.jsx(r2,{item:Q,isInvoicesScope:u,viewMode:x,onItemClick:l,isSelected:O===Ae,isHovered:w===Q.id||O===Ae})},Q.id)}),Me>0&&i.jsx("button",{type:"button",onClick:()=>{console.log(`Show all ${Me} more ${Se} issues`),W[U]&&l?.(W[U])},className:"discrepancy-item-button",children:i.jsx("div",{className:u?"discrepancy-item-more-invoices":"discrepancy-item-more-new",children:i.jsxs("span",{children:["+ ",Me," more item",Me!==1?"s":"","  scroll to view"]})})})]})]},Se)},J=e==="dashboard"?"Issues for this dashboard period.":e==="invoices"?"Issues for invoices in this view.":"Issues in this view.",xe=u&&t.length>10,Ce=u&&t.length>20,$=u&&!h&&(te.critical.length>0||te.major.length>0||te.minor.length>0),ie=M?q.length:t.length,we=u?"discrepancy-panel":"discrepancy-panel-container",Z=u?"discrepancy-panel-header-invoices":"discrepancy-panel-header-new",K=u?"discrepancy-panel-title-invoices":"discrepancy-panel-title",Ee=u?"discrepancy-panel-subline-invoices":"discrepancy-panel-subline",de=u?`discrepancy-priority-chip ${ce?"discrepancy-priority-critical":G?"discrepancy-priority-major":""}`:`discrepancy-chip-new ${ce?"discrepancy-chip-critical-new":G?"discrepancy-chip-major-new":"discrepancy-chip-minor-new"}`;return n?i.jsxs("div",{className:`${we} ${o||""}`,children:[i.jsx("div",{className:Z,children:i.jsx("div",{children:i.jsx("h2",{className:K,children:"Discrepancies"})})}),i.jsx("div",{className:"discrepancy-panel-content-new",children:i.jsx("div",{className:"discrepancy-loading",children:"Loading discrepancies..."})})]}):t.length===0?i.jsxs("div",{className:`${we} ${o||""}`,children:[i.jsx("div",{className:Z,children:i.jsxs("div",{children:[i.jsx("h2",{className:K,children:"Discrepancies (0)"}),i.jsx("p",{className:Ee,children:"Owlin hasn't found anything that needs your attention."})]})}),i.jsxs("div",{className:"discrepancy-empty-state",children:[i.jsx(Kr,{className:"discrepancy-empty-icon",size:16,strokeWidth:1.7}),i.jsxs("div",{children:[i.jsx("div",{className:"discrepancy-empty-title",children:"All clear for now"}),i.jsx("div",{className:"discrepancy-empty-description",children:"Owlin didn't find any issues in this view."})]})]})]}):i.jsxs("div",{className:`${we} ${o||""}`,children:[i.jsxs("div",{className:Z,children:[i.jsxs("div",{className:"discrepancy-panel-header-left",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:K,children:["Discrepancies (",M?`${ie} of ${t.length}`:ie,")"]}),i.jsx("p",{className:Ee,children:t.length===0?"Owlin hasn't found anything that needs your attention.":"Owlin found a few things to review."})]}),xe&&!h&&i.jsxs("div",{className:"discrepancy-search-container",children:[i.jsx(Bl,{className:"discrepancy-search-icon",size:14}),i.jsx("input",{ref:A,type:"text",value:m,onChange:Se=>v(Se.target.value),placeholder:"Search issues...",className:"discrepancy-search-input"}),m&&i.jsx("button",{type:"button",onClick:()=>v(""),className:"discrepancy-search-clear","aria-label":"Clear search",children:i.jsx(sn,{size:12})})]})]}),i.jsxs("div",{className:"discrepancy-panel-header-right-new",children:[$&&i.jsxs("div",{className:"discrepancy-jump-to-container",children:[i.jsxs("button",{type:"button",onClick:()=>C(!S),className:"discrepancy-jump-to-button","aria-label":"Jump to section",children:["Jump to",i.jsx(jn,{size:12,className:S?"discrepancy-jump-to-chevron-open":""})]}),S&&i.jsxs("div",{className:"discrepancy-jump-to-menu",children:[te.critical.length>0&&i.jsxs("button",{type:"button",className:"discrepancy-jump-to-item",onClick:()=>ee("critical"),children:[i.jsx("span",{className:"discrepancy-priority-dot discrepancy-priority-dot-critical"}),"Review these first (",te.critical.length,")"]}),te.major.length>0&&i.jsxs("button",{type:"button",className:"discrepancy-jump-to-item",onClick:()=>ee("major"),children:[i.jsx("span",{className:"discrepancy-priority-dot discrepancy-priority-dot-major"}),"Worth a look (",te.major.length,")"]}),te.minor.length>0&&i.jsxs("button",{type:"button",className:"discrepancy-jump-to-item",onClick:()=>ee("minor"),children:[i.jsx("span",{className:"discrepancy-priority-dot discrepancy-priority-dot-minor"}),"Nice to fix (",te.minor.length,")"]})]})]}),Ce&&!h&&i.jsx("button",{type:"button",onClick:()=>j(x==="compact"?"expanded":"compact"),className:"discrepancy-view-toggle","aria-label":`Switch to ${x==="compact"?"expanded":"compact"} view`,title:x==="compact"?"Switch to expanded view":"Switch to compact view",children:x==="compact"?"Expand":"Compact"}),R&&i.jsxs("span",{className:de,children:[u&&i.jsx("span",{className:`discrepancy-priority-dot ${ce?"discrepancy-priority-dot-critical":G?"discrepancy-priority-dot-major":"discrepancy-priority-dot-minor"}`}),R]}),i.jsx("button",{type:"button",onClick:he,"aria-label":h?"Expand discrepancies":"Collapse discrepancies",className:"discrepancy-collapse-button",children:i.jsx(jn,{className:`discrepancy-chevron-icon ${h?"discrepancy-chevron-collapsed":""}`,size:14})})]})]}),!h&&i.jsxs("div",{className:"discrepancy-panel-content-new",children:[q.length===0&&m?i.jsxs("div",{className:"discrepancy-empty-state",children:[i.jsx("div",{className:"discrepancy-empty-title",children:"No matches found"}),i.jsx("div",{className:"discrepancy-empty-description",children:"Try a different search term."})]}):i.jsx("div",{className:"discrepancy-panel-body-new",children:Uk.map(Se=>ne(Se,te[Se]))}),i.jsxs("div",{className:"discrepancy-panel-footer-new",children:[i.jsx("p",{children:J}),u&&t.length>10&&i.jsxs("p",{className:"discrepancy-keyboard-hint",children:["Press ",i.jsx("kbd",{children:"/"})," to search, ",i.jsx("kbd",{children:"j"}),"/",i.jsx("kbd",{children:"k"})," to navigate"]})]})]})]})}async function hK(e){try{const t=await fetch(`${Be}/api/discrepancies?scope=${e}`);if(!t.ok)return t.status===404?{items:[],lastUpdated:new Date().toISOString()}:(console.warn(`Failed to fetch discrepancies (${t.status}):`,t.statusText),{items:[],lastUpdated:new Date().toISOString()});const n=await t.json();return{items:n.items||n.discrepancies||[],lastUpdated:n.lastUpdated||n.last_updated||new Date().toISOString()}}catch(t){return t instanceof Error&&!t.message.includes("404")&&console.warn("Failed to fetch discrepancies from API, returning empty list:",t),{items:[],lastUpdated:new Date().toISOString()}}}const yy="GM";function mK(){const{filters:e}=us(),t=Mu(),n=g.useRef(null),[r,l]=g.useState(0),[o,u]=g.useState(new Set),[d,h]=g.useState([]),[p,m]=g.useState(!1),[v,x]=g.useState(null);g.useEffect(()=>{try{const w=localStorage.getItem("dashboardScrollPosition"),N=localStorage.getItem("dashboardExpandedTiles");w&&l(Number(w)),N&&u(new Set(JSON.parse(N)))}catch(w){console.warn("Failed to restore dashboard state",w)}},[]),g.useEffect(()=>{const w=()=>{if(n.current){const S=n.current.scrollTop;l(S);try{localStorage.setItem("dashboardScrollPosition",S.toString())}catch{}}},N=n.current;if(N)return N.addEventListener("scroll",w),N.scrollTop=r,()=>N.removeEventListener("scroll",w)},[r]),g.useEffect(()=>{try{localStorage.setItem("dashboardExpandedTiles",JSON.stringify(Array.from(o)))}catch{}},[o]),g.useEffect(()=>{let w=!0;async function N(){m(!0);try{const S=await hK("dashboard");if(w){let C=S.items;C.length===0&&(C=[{id:"dashboard-critical-1",type:"critical_issues",severity:"critical",level:"critical",title:"Several invoices are ready to submit but have unresolved issues",description:"Review and resolve issues before submitting these invoices.",contextRef:{type:"system"},createdAt:new Date().toISOString()},{id:"dashboard-major-1",type:"match_rate_low",severity:"warning",level:"major",title:"Match rate is low this month  many invoices not linked to delivery notes",description:"Link delivery notes to improve match rate and accuracy.",contextRef:{type:"system"},createdAt:new Date().toISOString()}]),h(C),x(S.lastUpdated)}}catch(S){console.error("Failed to load discrepancies:",S),w&&h([{id:"dashboard-critical-1",type:"critical_issues",severity:"critical",level:"critical",title:"Several invoices are ready to submit but have unresolved issues",description:"Review and resolve issues before submitting these invoices.",contextRef:{type:"system"},createdAt:new Date().toISOString()},{id:"dashboard-major-1",type:"match_rate_low",severity:"warning",level:"major",title:"Match rate is low this month  many invoices not linked to delivery notes",description:"Link delivery notes to improve match rate and accuracy.",contextRef:{type:"system"},createdAt:new Date().toISOString()}])}finally{w&&m(!1)}}return N(),()=>{w=!1}},[e.venueId,e.dateRange]);const j=w=>{if(w.contextRef?.type==="invoice"&&w.contextRef.id)t(`/invoices?invoice=${w.contextRef.id}`);else if(w.contextRef?.type==="system"||w.contextRef?.type==="venue"){let N="";w.type==="unpaired_invoices"||w.type==="match_rate_low"?N="?filter=missing_dn":(w.type==="flagged_invoices"||w.type==="critical_issues")&&(N="?filter=flagged"),t(`/invoices${N}`)}else if(w.actions&&w.actions.length>0){const N=w.actions[0];N.actionType==="navigate"&&N.target?(console.log("Navigating to:",N.target),t(N.target)):N.actionType==="filter"&&N.target?t(`/invoices?filter=${N.target}`):console.log("Discrepancy action:",N)}};return i.jsxs("div",{className:"dashboard-container",ref:n,children:[i.jsx(Iu,{children:i.jsx(P3,{currentRole:yy})}),i.jsxs("div",{className:"dashboard-grid",children:[i.jsxs("div",{className:"dashboard-metrics-row",children:[i.jsx(uf,{id:"open-issues",title:"Open Issues",type:"issues",expanded:o.has("open-issues"),onToggle:()=>{u(w=>{const N=new Set(w);return N.has("open-issues")?N.delete("open-issues"):N.add("open-issues"),N})}}),i.jsx(uf,{id:"match-rate",title:"Match Rate",type:"matchRate",expanded:o.has("match-rate"),onToggle:()=>{u(w=>{const N=new Set(w);return N.has("match-rate")?N.delete("match-rate"):N.add("match-rate"),N})}}),i.jsx(uf,{id:"spend",title:"Spend",type:"spend",expanded:o.has("spend"),onToggle:()=>{u(w=>{const N=new Set(w);return N.has("spend")?N.delete("spend"):N.add("spend"),N})}}),i.jsx(uf,{id:"price-volatility",title:"Price Volatility",type:"volatility",expanded:o.has("price-volatility"),onToggle:()=>{u(w=>{const N=new Set(w);return N.has("price-volatility")?N.delete("price-volatility"):N.add("price-volatility"),N})}})]}),i.jsxs("div",{className:"dashboard-main-content",children:[i.jsx("div",{className:"dashboard-left-column",children:i.jsx(H3,{currentRole:yy})}),i.jsxs("div",{className:"dashboard-right-column",children:[i.jsx(a2,{scope:"dashboard",items:d,isLoading:p,lastUpdated:v,onItemClick:j}),i.jsx(G3,{currentRole:yy})]})]}),i.jsx("div",{className:"dashboard-trends-section",children:i.jsx(oK,{})}),i.jsx("div",{className:"dashboard-unmatched-section",children:i.jsx(uK,{})}),i.jsx("div",{className:"dashboard-activity-section",children:i.jsx(dK,{})})]}),i.jsx(n2,{})]})}function vK(){return i.jsx(ZE,{children:i.jsx(mK,{})})}function gK({venue:e,onVenueChange:t,dateRange:n,onDateRangeChange:r,searchQuery:l,onSearchChange:o,onUploadClick:u,onNewManualInvoice:d,onNewManualDN:h,venues:p=["Waterloo","Royal Oak","Main Restaurant"],manualPairingWorkflowActive:m=!1,onToggleManualPairingWorkflow:v}){const[x,j]=g.useState(!1),[w,N]=g.useState(!1);return i.jsxs("header",{className:"invoices-header-new",children:[i.jsx("div",{className:"invoices-header-left",children:i.jsx("div",{className:"invoices-header-title-section",children:i.jsx("h1",{className:"invoices-header-title",children:"Invoices"})})}),i.jsxs("div",{className:"invoices-header-center",children:[i.jsxs("div",{className:"invoices-header-filters",children:[i.jsxs("div",{className:"dropdown-wrapper",children:[i.jsxs("button",{className:"glass-button secondary-action",onClick:()=>j(!x),children:[i.jsx(zu,{size:16,className:"button-icon"}),i.jsx("span",{className:"button-text",children:e}),i.jsx(jn,{size:14,className:"button-chevron"})]}),x&&i.jsx("div",{className:"dropdown-menu",children:p.map(S=>i.jsx("button",{className:"dropdown-item",onClick:()=>{t(S),j(!1)},children:S},S))})]}),i.jsxs("div",{className:"dropdown-wrapper",children:[i.jsxs("button",{className:"glass-button secondary-action",onClick:()=>N(!w),children:[i.jsxs("span",{className:"button-text",children:[n==="today"&&"Today",n==="week"&&"This week",n==="month"&&"This month",n==="custom"&&"Custom"]}),i.jsx(jn,{size:14,className:"button-chevron"})]}),w&&i.jsxs("div",{className:"dropdown-menu",children:[i.jsx("button",{className:"dropdown-item",onClick:()=>{r("today"),N(!1)},children:"Today"}),i.jsx("button",{className:"dropdown-item",onClick:()=>{r("week"),N(!1)},children:"This week"}),i.jsx("button",{className:"dropdown-item",onClick:()=>{r("month"),N(!1)},children:"This month"}),i.jsx("button",{className:"dropdown-item",onClick:()=>{r("custom"),N(!1)},children:"Custom"})]})]})]}),i.jsxs("div",{className:"search-wrapper",children:[i.jsx(Bl,{size:16,className:"search-icon"}),i.jsx("input",{type:"text",className:"search-input",placeholder:"Search by supplier, invoice # or filename",value:l,onChange:S=>o(S.target.value)})]})]}),i.jsxs("div",{className:"invoices-header-right",children:[i.jsxs("div",{className:"invoices-header-actions",children:[v&&i.jsxs("button",{className:`glass-button ${m?"primary-action-large":"secondary-action"}`,onClick:v,title:"Toggle manual pairing mode",children:[i.jsx("span",{className:"button-text-full",children:m?" Pairing Mode":"Manual Pairing"}),i.jsx("span",{className:"button-text-short",children:m?" Pair":"Pair"})]}),i.jsxs("button",{className:"glass-button primary-action-large primary-action-upload",onClick:u,children:[i.jsx(Mp,{size:18,className:"button-icon"}),i.jsx("span",{className:"button-text-full",children:"Upload documents"}),i.jsx("span",{className:"button-text-short",children:"Upload"})]}),i.jsxs("button",{className:"glass-button primary-action-large",onClick:d,children:[i.jsx(Ws,{size:18,className:"button-icon"}),i.jsx("span",{className:"button-text-full",children:"Create invoice or delivery note"}),i.jsx("span",{className:"button-text-short",children:"Create"})]})]}),i.jsx("div",{className:"invoices-header-assistant-spacer"})]})]})}function yK({invoices:e,selectedId:t,onSelect:n,sortBy:r,onSortChange:l,onSupplierClick:o,onBatchSubmit:u,onDelete:d,newlyUploadedIds:h,emptyState:p}){const[m,v]=g.useState(!1),[x,j]=g.useState(null),w=g.useRef(null),N=g.useRef(null),S=g.useRef(null),C=g.useRef(e.length);g.useEffect(()=>{const R=F=>{N.current&&!N.current.contains(F.target)&&v(!1)};return m&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[m]),g.useEffect(()=>{const R=he=>{he.key==="Escape"&&x&&j(null)},F=he=>{x&&S.current&&(S.current.contains(he.target)||j(null))};return x&&(document.addEventListener("keydown",R),document.addEventListener("mousedown",F)),()=>{document.removeEventListener("keydown",R),document.removeEventListener("mousedown",F)}},[x]);const k=(R,F)=>{R.stopPropagation(),o&&o(F)},E=(R,F)=>{R.stopPropagation(),j(F)},O=async(R,F)=>{R.stopPropagation(),d&&(await d(F),j(null))},D=R=>{R.stopPropagation(),j(null)},A=R=>{l(R),v(!1)};g.useEffect(()=>{if(e.length>C.current&&w.current){const R=w.current.lastElementChild;R&&setTimeout(()=>{R.scrollIntoView({behavior:"smooth",block:"nearest"}),R.classList.add("scroll-target"),setTimeout(()=>R.classList.remove("scroll-target"),1e3)},100)}C.current=e.length},[e.length]),g.useEffect(()=>{if(t&&w.current){const R=w.current.querySelector(`[data-invoice-id="${t}"]`);R&&setTimeout(()=>{R.scrollIntoView({behavior:"smooth",block:"nearest"})},100)}},[t]);const M=R=>{if(!R)return"No date";try{return new Date(R).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch{return R}},q=R=>R==null?"0.00":new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(R),te=e.filter(R=>R.readyToSubmit).length,ce=e.filter(R=>R.readyToSubmit).map(R=>R.id),G=()=>{te===0||!u||ce.length>0&&u(ce)};return i.jsxs("div",{className:"invoices-list-column",children:[i.jsx("div",{className:"invoices-list-header",children:i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",flex:1},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("h3",{className:"invoices-list-title",children:"Documents"}),i.jsxs("div",{className:"dropdown-wrapper",ref:N,children:[i.jsxs("button",{className:"sort-button",onClick:()=>v(!m),children:["Sort by: ",r==="date"?"Date":r==="supplier"?"Supplier":r==="value"?"Value":r==="venue"?"Venue":"Status",i.jsx(jn,{size:14})]}),m&&i.jsxs("div",{className:"dropdown-menu",children:[i.jsx("button",{className:"dropdown-item",onClick:()=>A("date"),children:"Date"}),i.jsx("button",{className:"dropdown-item",onClick:()=>A("supplier"),children:"Supplier"}),i.jsx("button",{className:"dropdown-item",onClick:()=>A("value"),children:"Value"}),i.jsx("button",{className:"dropdown-item",onClick:()=>A("venue"),children:"Venue"}),i.jsx("button",{className:"dropdown-item",onClick:()=>A("status"),children:"Status"})]})]})]}),te>0&&u&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"var(--text-secondary)"},children:[i.jsxs("span",{children:[te," invoice",te!==1?"s":""," ready to submit"]}),i.jsx("button",{className:"glass-button",style:{fontSize:"11px",padding:"4px 10px"},onClick:G,children:"Submit all"})]})]})}),i.jsx("div",{className:"invoices-list-scrollable",ref:w,children:e.map((R,F)=>{const he=R.supplier||"unknown",ee=String(R.id||R.docId||F),U=`${ee}-${R.status}-${F}`,ne=x===ee,J=R.status==="submitted",xe=h?.has(ee);return i.jsxs("div",{ref:ne?Ce=>{S.current=Ce}:null,"data-invoice-id":ee,"data-supplier":he,className:`invoice-card-new ${t===ee?"selected":""} supplier-group ${ne?"delete-confirming":""} ${xe?"newly-uploaded":""}`,onClick:Ce=>{ne?j(null):n(ee)},tabIndex:0,onKeyDown:Ce=>{Ce.key==="Enter"||Ce.key===" "?(Ce.preventDefault(),ne||n(ee)):Ce.key==="Escape"&&ne&&(Ce.preventDefault(),j(null))},children:[!J&&d&&i.jsx(i.Fragment,{children:ne?i.jsxs("div",{className:"invoice-card-delete-confirm",onClick:Ce=>O(Ce,ee),children:[i.jsx("button",{className:"invoice-card-delete-close",onClick:Ce=>{Ce.stopPropagation(),D(Ce)},title:"Close","aria-label":"Close confirmation",children:i.jsx(sn,{size:16})}),i.jsx("div",{className:"invoice-card-delete-confirm-content",children:i.jsx("div",{className:"invoice-card-delete-confirm-text",children:"Confirm Delete"})})]}):i.jsx("button",{className:"invoice-card-delete-btn",onClick:Ce=>E(Ce,ee),title:"Delete invoice","aria-label":"Delete invoice",children:i.jsx(Zi,{size:14})})}),i.jsxs("div",{className:"invoice-card-rectangular",children:[i.jsx("div",{className:"invoice-card-row-1",children:i.jsx("div",{className:"invoice-card-supplier",style:{fontSize:"15px",fontWeight:"600",flex:1},children:R.supplier?i.jsx("button",{onClick:Ce=>k(Ce,R.supplier),className:"invoice-card-supplier-link",title:"View supplier details",style:{fontSize:"15px",fontWeight:"600",textAlign:"left",width:"100%"},children:R.supplier}):"Unknown Supplier"})}),i.jsx("div",{className:"invoice-card-row-2",children:i.jsx("div",{className:"invoice-card-value",style:{fontSize:"18px",fontWeight:"700",color:"var(--accent-green)"},children:q(R.totalValue)})}),i.jsxs("div",{className:"invoice-card-row-3",style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"var(--text-muted)",marginTop:"6px",marginBottom:"8px"},children:[i.jsxs("div",{className:"invoice-card-venue",children:["Site: ",R.venue||"Main Restaurant"]}),i.jsx("div",{className:"invoice-card-date",children:M(R.invoiceDate)})]}),i.jsxs("div",{className:"invoice-card-row-4",style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center",marginTop:"8px"},children:[R.matched||R.hasDeliveryNote?i.jsxs("span",{className:"badge badge-matched",style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(Za,{size:10}),"Paired"]}):i.jsxs("span",{className:"badge badge-unmatched",style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(Wa,{size:10}),"Unpaired"]}),R.status==="manual"?i.jsx("span",{className:"badge badge-manual",children:"Manual"}):i.jsx("span",{className:"badge badge-scanned",children:"Scanned"}),R.dbStatus==="needs_review"&&i.jsxs("span",{className:"badge badge-needs-review",style:{display:"flex",alignItems:"center",gap:"4px"},title:"Owlin flagged this invoice because totals don't quite add up. Please double-check.",children:[i.jsx(tn,{size:10}),"Needs Review"]}),R.matched&&R.hasQuantityMismatch&&i.jsxs("span",{className:"badge badge-flagged",style:{display:"flex",alignItems:"center",gap:"4px"},title:"Quantity mismatch between invoice and delivery note",children:[i.jsx(tn,{size:10}),"Qty Mismatch"]}),R.issuesCount&&R.issuesCount>0||R.flagged?i.jsxs("span",{className:"badge badge-flagged",children:["Issues: ",R.issuesCount||(R.flagged?1:0)]}):null,R.status==="scanned"&&R.confidence!==void 0?i.jsxs("span",{className:"badge badge-ocr",style:{fontSize:"10px"},children:["OCR: ",typeof R.confidence=="number"&&R.confidence<=1?Math.round(R.confidence*100):Math.round(R.confidence),"%"]}):R.status==="manual"?i.jsx("span",{className:"badge badge-manual-indicator",style:{fontSize:"10px"},children:"Manual"}):null,R.validation?.badge&&i.jsx("span",{className:`badge badge-validation badge-validation-${R.validation.badge.color}`,style:{fontSize:"10px"},title:R.validation.badge.tooltip,children:R.validation.badge.label})]})]})]},U)})})]})}function Ou({isOpen:e,onClose:t,onConfirm:n,invoiceId:r,deliveryNoteId:l,initialValidation:o=null,invoiceLineItems:u=[],deliveryNoteLineItems:d=[]}){const[h,p]=g.useState(o),[m,v]=g.useState(!1),[x,j]=g.useState(!1),[w,N]=g.useState(null);g.useEffect(()=>{e&&(o?p(o):S())},[e,r,l,o]);const S=async()=>{v(!0),N(null);try{const D=await Ks(r,l);p(D)}catch(D){N(D instanceof Error?D.message:"Failed to validate pair")}finally{v(!1)}},C=async()=>{j(!0),N(null);try{const D=await gi(r,l);n(D.warnings),k()}catch(D){N(D instanceof Error?D.message:"Failed to pair documents")}finally{j(!1)}},k=()=>{p(null),N(null),t()},E=D=>{switch(D){case"critical":return i.jsx(tn,{className:"icon-critical"});case"warning":return i.jsx(tn,{className:"icon-warning"});default:return i.jsx(Po,{className:"icon-info"})}},O=D=>`severity-${D}`;return e?i.jsx("div",{className:"modal-overlay",onClick:k,children:i.jsxs("div",{className:"modal-container pairing-preview-modal",onClick:D=>D.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{children:"Review Pairing"}),i.jsx("button",{className:"modal-close",onClick:k,children:i.jsx(sn,{size:20})})]}),i.jsxs("div",{className:"modal-body",children:[m&&i.jsx("div",{className:"loading-state",children:i.jsx("p",{children:"Validating quantities..."})}),w&&i.jsxs("div",{className:"error-message",children:[i.jsx(tn,{size:16}),i.jsx("span",{children:w}),i.jsx("button",{className:"glass-button",onClick:S,style:{marginLeft:"12px",padding:"6px 14px",fontSize:"12px"},children:"Retry"})]}),h&&!m&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"match-score-section",children:[i.jsxs("div",{className:"match-score-header",children:[i.jsx("span",{children:"Quantity Match Score"}),i.jsxs("span",{className:`match-score-value score-${h.matchScore>=.8?"high":h.matchScore>=.6?"medium":"low"}`,children:[(h.matchScore*100).toFixed(0),"%"]})]}),i.jsx("div",{className:"match-score-bar",children:i.jsx("div",{className:"match-score-fill",style:{width:`${h.matchScore*100}%`}})})]}),h.warnings.length>0&&i.jsxs("div",{className:"warnings-section",children:[i.jsxs("div",{className:"warnings-header",children:[i.jsx(tn,{size:18}),i.jsx("h3",{children:"Warnings"})]}),i.jsx("ul",{className:"warnings-list",children:h.warnings.map((D,A)=>i.jsx("li",{children:D},A))})]}),h.discrepancies.length>0&&i.jsxs("div",{className:"discrepancies-section",children:[i.jsx("h3",{children:"Quantity Discrepancies"}),i.jsx("div",{className:"discrepancies-table-container",children:i.jsxs("table",{className:"discrepancies-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Item"}),i.jsx("th",{children:"Invoice Qty"}),i.jsx("th",{children:"Delivery Qty"}),i.jsx("th",{children:"Difference"}),i.jsx("th",{children:"Status"})]})}),i.jsx("tbody",{children:h.discrepancies.map((D,A)=>i.jsxs("tr",{className:O(D.severity),children:[i.jsx("td",{className:"item-description-cell",children:D.description}),i.jsx("td",{className:"qty-cell",children:D.invoiceQty.toFixed(2)}),i.jsx("td",{className:"qty-cell",children:D.deliveryQty.toFixed(2)}),i.jsxs("td",{className:`diff-cell ${D.difference>0?"diff-positive":"diff-negative"}`,children:[D.difference>0?"+":"",D.difference.toFixed(2)]}),i.jsx("td",{className:"status-cell",children:i.jsxs("span",{className:`severity-badge ${O(D.severity)}`,children:[E(D.severity),i.jsx("span",{className:"severity-text",children:D.severity.toUpperCase()})]})})]},A))})]})})]}),(u.length>0||d.length>0)&&i.jsxs("div",{className:"line-items-comparison",children:[i.jsx("h3",{children:"Line Items Comparison"}),i.jsxs("div",{className:"comparison-grid",children:[i.jsxs("div",{className:"comparison-column",children:[i.jsx("h4",{children:"Invoice Items"}),i.jsx("div",{className:"line-items-list",children:u.map((D,A)=>i.jsxs("div",{className:"line-item-row",children:[i.jsx("span",{className:"item-description",children:D.description||"N/A"}),i.jsx("span",{className:"item-qty",children:D.qty?.toFixed(2)||"0.00"})]},A))})]}),i.jsxs("div",{className:"comparison-column",children:[i.jsx("h4",{children:"Delivery Note Items"}),i.jsx("div",{className:"line-items-list",children:d.map((D,A)=>i.jsxs("div",{className:"line-item-row",children:[i.jsx("span",{className:"item-description",children:D.description||"N/A"}),i.jsx("span",{className:"item-qty",children:D.qty?.toFixed(2)||"0.00"})]},A))})]})]})]}),h.isValid&&h.discrepancies.length===0&&i.jsxs("div",{className:"success-message",children:[i.jsx(Vo,{size:18}),i.jsx("span",{children:"All quantities match. Safe to pair."})]})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{className:"glass-button secondary-action",onClick:k,disabled:x,children:"Cancel"}),i.jsx("button",{className:"glass-button primary-action",onClick:C,disabled:m||x||!h,children:x?"Pairing...":"Confirm Pair"})]})]})}):null}function xK({toast:e,onClose:t}){const[n,r]=g.useState(!1);g.useEffect(()=>{r(!0);const o=e.duration||5e3,u=setTimeout(()=>{r(!1),setTimeout(()=>t(e.id),300)},o);return()=>clearTimeout(u)},[e.id,e.duration,t]);const l=()=>{switch(e.type){case"success":return i.jsx(Vo,{size:20});case"error":return i.jsx(tn,{size:20});case"warning":return i.jsx(tn,{size:20});default:return i.jsx(Po,{size:20})}};return i.jsxs("div",{className:`toast toast-${e.type} ${n?"toast-visible":""}`,children:[i.jsx("div",{className:"toast-icon",children:l()}),i.jsx("div",{className:"toast-message",children:e.message}),i.jsx("button",{className:"toast-close",onClick:()=>t(e.id),children:i.jsx(sn,{size:16})})]})}function bK({toasts:e,onClose:t}){return i.jsx("div",{className:"toast-container",children:e.map(n=>i.jsx(xK,{toast:n,onClose:t},n.id))})}let jK=0;const ru=[];let jl=[];function Th(){const[e,t]=g.useState([]);g.useEffect(()=>{const l=o=>{t([...o])};return ru.push(l),t([...jl]),()=>{const o=ru.indexOf(l);o>-1&&ru.splice(o,1)}},[]);const n=(l,o="info",u)=>{const h={id:`toast-${++jK}`,message:l,type:o,duration:u};jl=[...jl,h],ru.forEach(p=>p(jl))};return{toasts:e,showToast:n,removeToast:l=>{jl=jl.filter(o=>o.id!==l),ru.forEach(o=>o(jl))},success:(l,o)=>n(l,"success",o),error:(l,o)=>n(l,"error",o),warning:(l,o)=>n(l,"warning",o),info:(l,o)=>n(l,"info",o)}}const wK=.85;function Js(e){return e?e.toLowerCase().trim().replace(/\s+/g," "):""}function SK(e,t){if(!e||!t)return 0;const n=Js(e),r=Js(t);if(!n||!r)return 0;if(n===r)return 1;const l=n.length>r.length?n:r,o=n.length>r.length?r:n;if(l.length===0)return 1;let u=0,d=0;for(let N=0;N<l.length&&d<o.length;N++)l[N]===o[d]&&(u++,d++);const h=u/l.length,p=l.includes(o)||o.includes(l)?.3:0,m=new Set(n.split(/\s+/)),v=new Set(r.split(/\s+/)),x=new Set([...m].filter(N=>v.has(N))),j=new Set([...m,...v]),w=j.size>0?x.size/j.size:0;return Math.max(h+p,w)}function Hk(e,t){if(!e||!t)return 0;const n=Js(e),r=Js(t);if(!n||!r)return 0;const l=new Set(n.split(/\s+/)),o=new Set(r.split(/\s+/));if(l.size===0||o.size===0)return 0;const u=new Set([...l].filter(h=>o.has(h))),d=new Set([...l,...o]);return d.size>0?u.size/d.size:0}function NK(e,t){if(!e||!t)return!1;const n=Js(e),r=Js(t);if(!n||!r)return!1;const l=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by"]),o=new Set(n.split(/\s+/).filter(p=>!l.has(p))),u=new Set(r.split(/\s+/).filter(p=>!l.has(p)));if(o.size===0||u.size===0)return!1;const d=new Set([...o].filter(p=>u.has(p))),h=Math.min(o.size,u.size);return h>0&&d.size/h>=.5}function Wk(e){return e.description||e.item||""}function Vk(e){return(e.sku||e.SKU||"").toString().trim()}function CK(e,t,n=wK){const r=[],l=new Set;for(const o of e){const u=Wk(o),d=Vk(o);let h=null,p=0,m="none",v=-1;for(let x=0;x<t.length;x++){if(l.has(x))continue;const j=t[x],w=Wk(j),N=Vk(j);let S="none",C=0;if(d&&N){const k=d.toUpperCase(),E=N.toUpperCase();if(k===E){S="sku",C=1,C>p&&(h=j,p=C,m=S,v=x);continue}}if(u&&w){const k=Js(u),E=Js(w);if(k===E&&k){S="exact",C=1,C>p&&(h=j,p=C,m=S,v=x);continue}}if(u&&w){const k=SK(u,w),E=Hk(u,w);C=Math.max(k,E),C>=n&&(S="fuzzy",C>p&&(h=j,p=C,m=S,v=x))}p<n&&u&&w&&NK(u,w)&&(C=Hk(u,w),C>p&&(S="partial",h=j,p=C,m=S,v=x))}h&&v>=0&&p>=n&&l.add(v),r.push({invoiceItem:o,deliveryItem:h,similarity:p,matchType:m})}return r}function Gk({docId:e,lineItems:t=[],activeLineItemIndex:n=null,onLineItemHover:r,className:l=""}){const[o,u]=g.useState(!1),[d,h]=g.useState(!1),[p,m]=g.useState(null),[v,x]=g.useState(null),[j,w]=g.useState(null),[N,S]=g.useState(!0),C=g.useRef(null),k=g.useRef(null),E=`/api/ocr/page-image/${e}`;g.useEffect(()=>{h(!1),m(null),u(!1)},[e]);const O=()=>{if(C.current){const G=C.current.naturalWidth,R=C.current.naturalHeight;x({width:G,height:R}),u(!0),h(!1),m(null)}},D=G=>{h(!0),u(!1);const R=G.currentTarget,F=R.src?`Failed to load: ${R.src}`:"Failed to load image";m(F),console.error("[InvoiceVisualizer] Image load error:",{docId:e,imageUrl:E,error:F})},A=t.filter(G=>{const R=G.bbox,F=R&&Array.isArray(R)&&R.length>=4;return!F&&t.length>0&&console.debug("[InvoiceVisualizer] Item missing bbox:",{description:G.description||G.desc||G.item,hasBbox:!!R,bboxType:typeof R,bboxValue:R,allKeys:Object.keys(G)}),F});g.useEffect(()=>{t.length>0&&console.log("[InvoiceVisualizer] Line items bbox status:",{totalItems:t.length,itemsWithBbox:A.length,sampleItem:t[0],showBoxes:N,imageLoaded:o,imageDimensions:v})},[t,A.length,N,o,v]);const M=(G,R)=>{if(!v)return{};const[F,he,ee,U]=G,{width:ne,height:J}=v,xe=F/ne*100,Ce=he/J*100,$=ee/ne*100,ie=U/J*100,we=j===R||n===R,Z=j===R;return{position:"absolute",left:`${xe}%`,top:`${Ce}%`,width:`${$}%`,height:`${ie}%`,border:we?`2px solid ${Z?"rgba(59, 130, 246, 1)":"rgba(16, 185, 129, 0.9)"}`:"2px solid rgba(0, 255, 0, 0.7)",backgroundColor:we?`${Z?"rgba(59, 130, 246, 0.2)":"rgba(16, 185, 129, 0.15)"}`:"rgba(0, 255, 0, 0.1)",cursor:"pointer",transition:"all 0.2s ease",zIndex:we?10:1,boxShadow:we?`0 0 0 2px ${Z?"rgba(59, 130, 246, 0.3)":"rgba(16, 185, 129, 0.3)"}`:"none"}},q=G=>G.description||G.item||G.desc||"Unknown item",te=G=>{w(G),r&&r(G)},ce=()=>{w(null),r&&r(null)};return g.useEffect(()=>{n!==null&&n!==j&&w(null)},[n]),d?i.jsx("div",{className:`invoice-visualizer error ${l}`,children:i.jsxs("div",{className:"error-message",children:[i.jsx("p",{children:"Unable to load invoice image"}),i.jsxs("p",{className:"error-detail",children:["Document ID: ",e]}),p&&i.jsx("p",{className:"error-detail",style:{fontSize:"0.75rem",marginTop:"8px"},children:p}),i.jsxs("p",{className:"error-detail",style:{fontSize:"0.75rem",marginTop:"8px",color:"var(--text-tertiary)"},children:["URL: ",E]}),i.jsx("p",{className:"error-detail",style:{fontSize:"0.75rem",marginTop:"4px",color:"var(--text-tertiary)"},children:"Check browser console for details. Ensure backend is running and document exists."})]})}):i.jsxs("div",{className:`invoice-visualizer ${l}`,ref:k,children:[i.jsxs("div",{className:"visualizer-controls",children:[i.jsxs("button",{type:"button",onClick:()=>S(!N),className:"toggle-boxes-btn",title:N?"Hide bounding boxes":"Show bounding boxes",children:[N?i.jsx(C4,{size:16}):i.jsx(r0,{size:16}),i.jsx("span",{children:N?"Hide Boxes":"Show Boxes"})]}),A.length>0&&i.jsxs("span",{className:"box-count",children:[A.length," item",A.length!==1?"s":""," detected"]})]}),i.jsxs("div",{className:"image-container",children:[!o&&!d&&i.jsxs("div",{className:"loading-overlay",children:[i.jsx(sa,{className:"spinner",size:24}),i.jsx("p",{children:"Loading invoice image..."})]}),i.jsx("img",{ref:C,src:E,alt:"Invoice",className:"invoice-image",onLoad:O,onError:D,style:{display:o?"block":"none"}}),o&&N&&v&&C.current&&i.jsx("div",{className:"bbox-overlay-container",style:{width:C.current.offsetWidth>0?`${C.current.offsetWidth}px`:"100%",height:C.current.offsetHeight>0?`${C.current.offsetHeight}px`:"100%"},children:A.map((G,R)=>{const F=G.bbox;return i.jsx("div",{className:"bbox-overlay",style:M(F,R),onMouseEnter:()=>te(R),onMouseLeave:ce,title:`${q(G)} | Qty: ${G.qty||"N/A"} | Total: ${G.total||"N/A"}`,children:j===R&&i.jsx("div",{className:"bbox-tooltip",children:i.jsxs("div",{className:"tooltip-content",children:[i.jsx("strong",{children:q(G)}),G.qty&&i.jsxs("span",{children:["Qty: ",G.qty]}),G.total&&i.jsxs("span",{children:["Total: ",G.total]})]})})},R)})})]}),o&&N&&A.length>0&&i.jsxs("div",{className:"visualizer-legend",children:[i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-box",style:{borderColor:"rgba(0, 255, 0, 0.7)"}}),i.jsx("span",{children:"Detected item"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-box",style:{borderColor:"rgba(59, 130, 246, 1)"}}),i.jsx("span",{children:"Hovered"})]}),i.jsxs("div",{className:"legend-item",children:[i.jsx("div",{className:"legend-box",style:{borderColor:"rgba(16, 185, 129, 0.9)"}}),i.jsx("span",{children:"Selected"})]})]})]})}function _K({invoice:e,selectedDNId:t,onLinkDeliveryNote:n,onCreateDeliveryNote:r,onChangeDeliveryNote:l,onOpenPDF:o,onViewOCRDetails:u,onSaveNote:d,noteText:h="",onNoteTextChange:p,savingNote:m=!1,onSubmit:v,canSubmit:x=!1,isSubmitting:j=!1,hasIssues:w=!1,onPairSuccess:N,isEmptyState:S=!1,onUploadClick:C,onNewManualInvoice:k,onSelectInvoice:E,manualPairingWorkflowActive:O=!1,topSuggestion:D=null,onPairWithSuggestion:A,onEditInvoice:M,onEditDeliveryNote:q,highlightContext:te,onHighlightComplete:ce,onInvoiceUpdated:G}){const R=Th(),[F,he]=g.useState(!1),[ee,U]=g.useState(!1),[ne,J]=g.useState(!1),[xe,Ce]=g.useState(null),[$,ie]=g.useState(!1),we=g.useRef(null),Z=g.useRef(null),[K,Ee]=g.useState([]),[de,Se]=g.useState(!1),[W,me]=g.useState(null),[Me,Q]=g.useState(null),[$e,Ae]=g.useState(!1),[vt,jt]=g.useState(!1),[gt,Xn]=g.useState(null),[pn,Wn]=g.useState(null),[ca,Mn]=g.useState(!1),[yt,Tt]=g.useState([]),[Ur,Pn]=g.useState(!1),[Ln,ln]=g.useState([]),[Ca,Fr]=g.useState(!1),[oi,qr]=g.useState(!1),[Zr,Ut]=g.useState(null),[Zn,At]=g.useState(null),[Lt,Ft]=g.useState(null),[Vt,qt]=g.useState(null),[nn,on]=g.useState(null),[cn,hn]=g.useState(!1),[H,Ve]=g.useState([]),[Gt,Dt]=g.useState(!1),ut=V=>V==null?"0.00":new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(V),wt=V=>{if(!V)return"No date";try{return new Date(V).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch{return V}},Yt=()=>{if(!e||!e.lineItems)return;const V=e.deliveryNote?.lineItems||[],Pe=e.lineItems.map(re=>{const Qe=V.find(Et=>{const Cn=(re.description||"").toLowerCase(),Mt=(Et.description||"").toLowerCase();return Cn.includes(Mt)||Mt.includes(Cn)});return{description:re.description||"Item",qty:Math.round(re.qty||0),unit:re.uom||re.unit||"",price:re.unitPrice||0,total:re.total||0,dnQty:Qe?Math.round(Qe.qty||0):void 0}});Ve(Pe),hn(!0)},_t=(V,Pe,re)=>{const Qe=[...H];if(Pe==="qty"||Pe==="dnQty"?Qe[V]={...Qe[V],[Pe]:Math.round(Number(re))||0}:Qe[V]={...Qe[V],[Pe]:re},Pe==="qty"||Pe==="price"){const Et=Pe==="qty"?Math.round(Number(re)):Qe[V].qty||0,Cn=Pe==="price"?Number(re):Qe[V].price||0;Qe[V].total=Et*Cn}Ve(Qe)},Ge=()=>{Ve([...H,{description:"",qty:0,unit:"",price:0,total:0,dnQty:void 0}])},kt=V=>{H.length>1&&Ve(H.filter((Pe,re)=>re!==V))},et=()=>{const V=H.reduce((Qe,Et)=>Qe+(Et.total||0),0),Pe=V*.2,re=V+Pe;return{subtotal:V,vat:Pe,total:re}},Hr=async()=>{if(e){Dt(!0);try{const{subtotal:V,vat:Pe,total:re}=et(),Qe=H.filter(Et=>Et.description.trim()!=="");await JE(e.id,{supplier:e.supplier||"",invoiceNumber:e.invoiceNumber||"",date:e.date||new Date().toISOString().split("T")[0],venue:e.venue||"Waterloo",lineItems:Qe.map(Et=>({description:Et.description,qty:Math.round(Et.qty||0),unit:Et.unit||"",price:Et.price||0,total:Et.total||0})),subtotal:V,vat:Pe,total:re}),R.success("Invoice updated successfully"),hn(!1),Ve([]),G&&await G()}catch(V){console.error("Failed to update invoice:",V),R.error(V instanceof Error?V.message:"Failed to update invoice")}finally{Dt(!1)}}},Dn=()=>{hn(!1),Ve([])};g.useEffect(()=>{e&&(hn(!1),Ve([]))},[e?.id]),g.useEffect(()=>{if(!te||!e)return;let V=[];const re=setTimeout(()=>{te.section==="lineItems"&&e.lineItems?he(Et=>{if(!Et){const pt=setTimeout(()=>{if(we.current&&we.current.scrollIntoView({behavior:"smooth",block:"center"}),te.lineItemDescription)document.querySelectorAll("[data-line-item-description]").forEach(Wr=>{const ua=Wr.getAttribute("data-line-item-description")?.toLowerCase()||"",_a=te.lineItemDescription?.toLowerCase()||"";(ua.includes(_a)||_a.includes(ua))&&(Wr.classList.add("line-item-pulse"),Z.current=Wr)});else{const $t=document.querySelectorAll("[data-line-item-description]");$t.length>0&&($t[0].classList.add("line-item-pulse"),Z.current=$t[0])}},400);V.push(pt)}else{const Mt=setTimeout(()=>{if(we.current&&we.current.scrollIntoView({behavior:"smooth",block:"center"}),te.lineItemDescription)document.querySelectorAll("[data-line-item-description]").forEach($t=>{const Wr=$t.getAttribute("data-line-item-description")?.toLowerCase()||"",ua=te.lineItemDescription?.toLowerCase()||"";(Wr.includes(ua)||ua.includes(Wr))&&($t.classList.add("line-item-pulse"),Z.current=$t)});else{const pt=document.querySelectorAll("[data-line-item-description]");pt.length>0&&(pt[0].classList.add("line-item-pulse"),Z.current=pt[0])}},100);V.push(Mt)}return!0}):te.section==="deliveryNote"&&U(Et=>{if(!Et){const pt=setTimeout(()=>{const $t=document.querySelector("[data-delivery-note-section]");$t&&($t.scrollIntoView({behavior:"smooth",block:"center"}),$t.classList.add("section-pulse"))},400);V.push(pt)}else{const Mt=setTimeout(()=>{const pt=document.querySelector("[data-delivery-note-section]");pt&&(pt.scrollIntoView({behavior:"smooth",block:"center"}),pt.classList.add("section-pulse"))},100);V.push(Mt)}return!0});const Qe=setTimeout(()=>{document.querySelectorAll(".line-item-pulse").forEach(Et=>Et.classList.remove("line-item-pulse")),document.querySelectorAll(".section-pulse").forEach(Et=>Et.classList.remove("section-pulse")),ce&&ce()},3e3);V.push(Qe)},100);return V.push(re),()=>{V.forEach(Qe=>clearTimeout(Qe))}},[te,e?.id,ce]);const Ot=V=>{if(!V)return"No date/time";try{return new Date(V).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return V}};g.useEffect(()=>{e&&!e.deliveryNote&&K.length===0&&!de||e?.deliveryNote&&(Ee([]),U(!1))},[e?.id,e?.deliveryNote]),g.useEffect(()=>{t?(Mn(!0),Xn(null),Wn(null),ln([]),Qs(t).then(V=>{const Pe={...V,supplier:V.supplier||"Unknown Supplier",noteNumber:V.noteNumber||V.note_number||V.deliveryNo||`DN-${t.slice(0,8)}`};return Xn(Pe),Promise.all([Cl(t),iu(t)])}).then(([V,Pe])=>{const re=V.suggestions||[];Tt(re),ln(Pe||[]),re.length>0&&(!Pe||Pe.length===0)&&J(!0)}).catch(V=>{const Pe=V instanceof Error?V.message:"Unknown error";console.error("Failed to fetch delivery note details:",V),Xn(null),Wn(`Failed to load delivery note: ${Pe}`)}).finally(()=>{Mn(!1)})):(Xn(null),Wn(null),Tt([]),ln([]),J(!1),on(null),Q(null))},[t]);const Le=async V=>{if(e){qt(null);try{me(V);const Pe=await Ks(e.id,V);if(!Pe.isValid||Pe.matchScore<.8||Pe.warnings.length>0){me(null),Ut(V),Ft(Pe),qr(!0);return}const re=await gi(e.id,V);re.warnings&&re.warnings.length>0?R.warning(`Pairing completed with warnings: ${re.warnings.slice(0,2).join(", ")}`):R.success("Invoice paired with delivery note successfully"),Ee([]);try{const Qe=await Ji(e.id);Ee(Qe.suggestions||[])}catch(Qe){console.debug("Failed to refresh pairing suggestions after pairing:",Qe)}N?N(re.warnings):n()}catch(Pe){console.error("Failed to validate or pair delivery note:",Pe);const re=Pe instanceof Error?Pe.message:"Failed to pair delivery note";qt(re),R.error(re)}finally{me(null)}}},ht=async()=>{if(e){Ae(!0),qt(null);try{await k3(e.id),R.success("Invoice unpaired from delivery note successfully");try{const V=await Ji(e.id);Ee(V.suggestions||[]),V.suggestions&&V.suggestions.length>0&&U(!0)}catch(V){console.error("Failed to refresh pairing suggestions after unpairing:",V)}N?N():n(),jt(!1)}catch(V){console.error("Failed to unpair delivery note:",V);const Pe=V instanceof Error?V.message:"Failed to unpair delivery note";qt(Pe),R.error(Pe)}finally{Ae(!1)}}},it=async()=>{if(N?N():n(),t&&Zn)try{const[V,Pe]=await Promise.all([Cl(t),iu(t)]);Tt(V.suggestions||[]),ln(Pe||[]),Pe&&Pe.length>0&&(Tt([]),J(!1))}catch(V){console.error("Failed to refresh delivery note details after pairing:",V)}qr(!1),Ut(null),At(null)},Ye=async()=>{if(e?.deliveryNote)n();else{Se(!0);try{const Pe=(await Ji(e.id)).suggestions||[];Ee(Pe),Pe.length>0?U(!0):n()}catch(V){console.error("Failed to fetch pairing suggestions:",V),Ee([]),n()}finally{Se(!1)}}},ze=async()=>{if(t&&Ln.length===0)if(yt.length===0){Pn(!0);try{const Pe=(await Cl(t)).suggestions||[];Tt(Pe),Pe.length>0&&J(!0)}catch(V){console.error("Failed to fetch invoice suggestions:",V),Tt([])}finally{Pn(!1)}}else J(!0)},ft=async V=>{if(t){on(null);try{Q(V);const Pe=await Ks(V,t);if(!Pe.isValid||Pe.matchScore<.8||Pe.warnings.length>0){Q(null),At(V),Ut(t),Ft(Pe),qr(!0);return}const re=await gi(V,t);re.warnings&&re.warnings.length>0?R.warning(`Pairing completed with warnings: ${re.warnings.slice(0,2).join(", ")}`):R.success("Delivery note paired with invoice successfully"),N&&N();try{const Qe=await iu(t);ln(Qe||[]),Tt([]),J(!1)}catch(Qe){console.error("Failed to refresh paired invoices:",Qe)}}catch(Pe){console.error("Failed to validate or pair invoice:",Pe);const re=Pe instanceof Error?Pe.message:"Failed to pair invoice";on(re),R.error(re)}finally{Q(null)}}},rn=e?.lineItems?.reduce((V,Pe)=>V+(Pe.total||0),0)||0,dt=rn*.2,bt=rn+dt,at=e?.value||0,Ht=at>0?at:bt,Sn=e?.subtotal&&e.subtotal>0?e.subtotal:rn,Jn=e?.vat&&e.vat>0?e.vat:dt;if(t){if(pn)return i.jsx("div",{className:"document-detail-panel",children:i.jsxs("div",{className:"detail-card",style:{padding:"24px",textAlign:"center"},children:[i.jsx(tn,{size:48,style:{color:"var(--accent-red)",marginBottom:"16px"}}),i.jsx("h3",{style:{marginBottom:"8px",color:"var(--text-primary)"},children:"Error Loading Delivery Note"}),i.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:"16px"},children:pn}),i.jsx("button",{className:"glass-button",onClick:async()=>{Wn(null),Mn(!0),Xn(null);try{const re=await Qs(t);if(!re)throw new Error("Delivery note not found");const Qe={...re,supplier:re.supplier||"Unknown Supplier",noteNumber:re.noteNumber||re.note_number||re.deliveryNo||`DN-${t.slice(0,8)}`};Xn(Qe);const[Et,Cn]=await Promise.all([Cl(t),iu(t)]);Tt(Et.suggestions||[]),ln(Cn||[])}catch(re){const Qe=re instanceof Error?re.message:"Unknown error";Wn(`Failed to load delivery note: ${Qe}`)}finally{Mn(!1)}},children:"Retry"})]})});if(ca||!gt)return i.jsx("div",{className:"document-detail-panel",children:i.jsxs("div",{className:"detail-card",style:{padding:"24px",textAlign:"center"},children:[i.jsx(sa,{size:32,className:"spinner",style:{animation:"spin 1s linear infinite",marginBottom:"16px"}}),i.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading delivery note details..."})]})});const V=gt.lineItems?.length||0,Pe=Ln.length>0;return i.jsxs("div",{className:"invoices-detail-column invoices-detail-column-selected",children:[i.jsx("div",{className:"detail-card document-header-card",children:i.jsxs("div",{className:"document-header-left",children:[i.jsxs("div",{className:"document-header-supplier",style:{fontSize:"28px",fontWeight:"700",marginBottom:"4px"},children:[i.jsx(Za,{size:24,style:{marginRight:"8px",display:"inline-block",verticalAlign:"middle"}}),gt.supplier||"Unknown Supplier"]}),i.jsxs("div",{className:"document-header-meta",children:[i.jsx("span",{children:gt.noteNumber||`DN-${t.slice(0,8)}`}),i.jsx("span",{children:""}),i.jsx("span",{children:wt(gt.date)}),gt.venue&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsx("span",{children:gt.venue})]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px",flexWrap:"wrap"},children:[Pe?i.jsx("span",{className:"badge badge-matched",children:"Paired"}):i.jsx("span",{className:"badge badge-unmatched",children:"Unpaired"}),V>0&&i.jsxs("span",{className:"badge",style:{background:"rgba(255, 255, 255, 0.1)",color:"var(--text-muted)"},children:[V," item",V!==1?"s":""]})]})]})}),i.jsxs("div",{className:"detail-card",style:{marginTop:"12px"},children:[i.jsx("h3",{className:"detail-card-title",children:"Delivery Details"}),i.jsx("div",{className:"detail-card-content",children:i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",fontSize:"13px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Delivery Date"}),i.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:wt(gt.date)})]}),gt.timeWindow&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Time of Delivery"}),i.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:gt.timeWindow})]}),gt.driver&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Driver Name"}),i.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:gt.driver})]}),gt.vehicle&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Number Plate"}),i.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:gt.vehicle})]}),gt.venue&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Site/Venue"}),i.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:gt.venue})]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Line Items"}),i.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:V})]})]})})]}),i.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-color)"},"data-invoice-pairing-section":!0,children:Ln.length>0?i.jsxs("div",{className:"dn-pairing-widget",children:[i.jsx("button",{className:"dn-pairing-widget-header",onClick:()=>J(!ne),children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[i.jsx(Xa,{size:16}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsxs("div",{style:{fontSize:"13px",fontWeight:"600"},children:["Paired: ",Ln[0].invoiceNumber||`INV-${Ln[0].id?.slice(0,8)}`]}),i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:wt(Ln[0].date)})]}),ne?i.jsx(ur,{size:16}):i.jsx(jn,{size:16})]})}),ne&&i.jsx("div",{className:"dn-pairing-widget-content",children:i.jsx("div",{style:{marginBottom:"12px"},children:Ln.map((re,Qe)=>i.jsxs("div",{style:{marginBottom:Qe<Ln.length-1?"12px":"0",padding:"12px",background:"var(--bg-card)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:re.invoiceNumber||`INV-${re.id?.slice(0,8)}`}),i.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"4px"},children:wt(re.date)}),i.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-primary)"},children:ut(re.total||re.totalValue||0)})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"6px"},children:[i.jsx("span",{className:`badge ${re.pairStatus==="confirmed"||re.pairStatus==="accepted"?"badge-matched":"badge-unmatched"}`,children:re.pairStatus==="confirmed"?"Confirmed":re.pairStatus==="accepted"?"Accepted":re.pairStatus}),E&&i.jsx("button",{className:"glass-button primary-action",style:{fontSize:"12px",padding:"6px 12px"},onClick:()=>E(re.id||re.invoiceId),children:"View Invoice"})]})]}),re.pairedAt&&i.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid var(--border-color)"},children:["Paired: ",Ot(re.pairedAt)]})]},Qe))})})]}):Ur?i.jsxs("div",{style:{padding:"12px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"12px",fontWeight:"500"},children:"Loading recommendations..."}),i.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[i.jsxs("button",{className:"glass-button primary-action",style:{fontSize:"12px",padding:"8px 16px",fontWeight:"600",opacity:.6},disabled:!0,children:[i.jsx(Xa,{size:14,style:{marginRight:"6px"}}),"Link Invoice"]}),i.jsx("button",{className:"glass-button",style:{fontSize:"12px",padding:"8px 16px",opacity:.6},disabled:!0,children:"Create Manual Invoice"})]})]}):yt.length>0?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"dn-pairing-widget-header",onClick:()=>J(!ne),children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[i.jsx(Xa,{size:16}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsxs("div",{style:{fontSize:"13px",fontWeight:"600"},children:["Recommended: ",yt[0].invoiceNumber||`INV-${yt[0].invoiceId?.slice(0,8)||yt[0].id?.slice(0,8)}`]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"2px"},children:[yt[0].confidence!==void 0&&i.jsxs("span",{className:`confidence-badge ${yt[0].confidence>=.8?"high":yt[0].confidence>=.6?"medium":"low"}`,style:{fontSize:"10px",padding:"2px 6px",background:yt[0].confidence>=.8?"rgba(34, 197, 94, 0.2)":yt[0].confidence>=.6?"rgba(251, 191, 36, 0.2)":"rgba(239, 68, 68, 0.2)",color:yt[0].confidence>=.8?"var(--accent-green)":yt[0].confidence>=.6?"var(--accent-yellow)":"var(--accent-red)",border:`1px solid ${yt[0].confidence>=.8?"rgba(34, 197, 94, 0.3)":yt[0].confidence>=.6?"rgba(251, 191, 36, 0.3)":"rgba(239, 68, 68, 0.3)"}`,fontWeight:"600"},children:[Math.round(yt[0].confidence*100),"% match"]}),!yt[0].confidence&&i.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"Suggested pairing"})]})]}),ne?i.jsx(ur,{size:16}):i.jsx(jn,{size:16})]})}),ne&&i.jsx("div",{className:"dn-pairing-widget-content",children:i.jsxs("div",{style:{marginBottom:"12px"},children:[yt[0].llmExplanation&&i.jsxs("div",{className:"llm-explanation",style:{background:"rgba(59, 130, 246, 0.1)",borderLeft:"3px solid #3b82f6",padding:"12px",marginBottom:"12px",borderRadius:"4px",fontSize:"12px",lineHeight:"1.5",color:"var(--text-primary)"},children:[i.jsx("span",{style:{marginRight:"8px"},children:""}),i.jsx("span",{children:yt[0].llmExplanation})]}),!yt[0].llmExplanation&&yt[0].reason&&i.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"12px"},children:yt[0].reason}),yt[0].featuresSummary&&i.jsxs("div",{className:"feature-highlights",style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:[yt[0].featuresSummary.amountDiffPct!==void 0&&i.jsxs("span",{className:"feature-tag",style:{background:"rgba(255, 255, 255, 0.1)",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",color:"var(--text-secondary)"},children:["Amount: ",Math.abs(yt[0].featuresSummary.amountDiffPct*100).toFixed(1),"% diff"]}),yt[0].featuresSummary.dateDiffDays!==void 0&&i.jsxs("span",{className:"feature-tag",style:{background:"rgba(255, 255, 255, 0.1)",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",color:"var(--text-secondary)"},children:["Date: ",Math.abs(yt[0].featuresSummary.dateDiffDays).toFixed(0)," days"]}),yt[0].featuresSummary.supplierNameSimilarity!==void 0&&i.jsxs("span",{className:"feature-tag",style:{background:"rgba(255, 255, 255, 0.1)",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",color:"var(--text-secondary)"},children:["Supplier: ",Math.round(yt[0].featuresSummary.supplierNameSimilarity*100),"% match"]})]}),nn&&i.jsxs("div",{style:{padding:"8px 12px",marginBottom:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",fontSize:"12px",color:"var(--accent-red)",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(tn,{size:14}),i.jsx("span",{style:{flex:1},children:nn}),i.jsx("button",{onClick:()=>{on(null),(yt[0]?.invoiceId||yt[0]?.id)&&ft(yt[0].invoiceId||yt[0].id)},className:"glass-button",style:{fontSize:"11px",padding:"4px 8px"},children:"Retry"}),i.jsx("button",{onClick:()=>on(null),style:{background:"none",border:"none",cursor:"pointer",color:"var(--accent-red)"},children:i.jsx(sn,{size:14})})]}),yt.map((re,Qe)=>{const Et=re.invoiceId||re.id,Cn=Me===Et;return i.jsxs("div",{style:{marginBottom:Qe<yt.length-1?"12px":"0",padding:"12px",background:"var(--bg-card)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"4px"},children:re.invoiceNumber||`INV-${Et?.slice(0,8)}`}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px"},children:[re.confidence!==void 0&&i.jsxs("span",{className:`confidence-badge ${re.confidence>=.8?"high":re.confidence>=.6?"medium":"low"}`,style:{fontSize:"10px",padding:"2px 6px",background:re.confidence>=.8?"rgba(34, 197, 94, 0.2)":re.confidence>=.6?"rgba(251, 191, 36, 0.2)":"rgba(239, 68, 68, 0.2)",color:re.confidence>=.8?"var(--accent-green)":re.confidence>=.6?"var(--accent-yellow)":"var(--accent-red)",border:`1px solid ${re.confidence>=.8?"rgba(34, 197, 94, 0.3)":re.confidence>=.6?"rgba(251, 191, 36, 0.3)":"rgba(239, 68, 68, 0.3)"}`,fontWeight:"600"},children:[Math.round(re.confidence*100),"% match"]}),re.date&&i.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:wt(re.date)}),re.value!==void 0&&i.jsxs("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:[" ",ut(re.value)]})]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginLeft:"12px"},children:[i.jsx("button",{className:"glass-button primary-action",style:{fontSize:"12px",padding:"6px 12px",fontWeight:"600"},onClick:()=>ft(Et),disabled:Cn,children:Cn?i.jsxs(i.Fragment,{children:[i.jsx(sa,{size:12,style:{marginRight:"4px",display:"inline-block",animation:"spin 1s linear infinite"}}),"Pairing..."]}):"Pair"}),E&&i.jsx("button",{className:"glass-button",style:{fontSize:"12px",padding:"6px 12px"},onClick:()=>E(Et),children:"View"})]})]}),re.reason&&i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"8px"},children:re.reason}),re.quantityMatchScore!==void 0&&i.jsxs("div",{style:{marginTop:"8px",fontSize:"11px"},children:[i.jsxs("span",{className:`quantity-match-score score-${re.quantityMatchScore>=.8?"high":re.quantityMatchScore>=.6?"medium":"low"}`,children:["Qty Match: ",(re.quantityMatchScore*100).toFixed(0),"%"]}),re.quantityMatchScore<.8&&re.quantityWarnings&&re.quantityWarnings.length>0&&i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"4px",marginLeft:"8px",color:"var(--accent-yellow)"},children:[i.jsx(tn,{size:12}),i.jsxs("span",{children:[re.quantityWarnings.length," warning",re.quantityWarnings.length!==1?"s":""]})]})]}),re.hasQuantityMismatch&&i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",fontSize:"12px",color:"var(--accent-red)"},children:" Quantity mismatch detected"}),re.quantityDifferences&&re.quantityDifferences.length>0&&i.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"var(--text-secondary)"},children:i.jsxs("details",{style:{cursor:"pointer"},children:[i.jsx("summary",{style:{fontWeight:"500"},children:"View quantity differences"}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"var(--bg-secondary)",borderRadius:"4px"},children:re.quantityDifferences.map((Mt,pt)=>i.jsxs("div",{style:{marginBottom:"4px",display:"flex",justifyContent:"space-between"},children:[i.jsxs("span",{children:[Mt.description,":"]}),i.jsxs("span",{style:{color:Mt.difference!==0?"var(--accent-red)":"var(--accent-green)"},children:["Invoice: ",Mt.invoiceQty," | DN: ",Mt.dnQty," | Diff: ",Mt.difference>0?"+":"",Mt.difference]})]},pt))})]})})]},Qe)}),i.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginTop:"12px"},children:k&&i.jsx("button",{className:"glass-button",style:{fontSize:"12px",padding:"8px 16px"},onClick:k,children:"Create manual invoice"})})]})})]}):i.jsx("div",{className:"dn-pairing-widget",children:i.jsxs("div",{style:{padding:"16px",background:"rgba(255, 255, 255, 0.02)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[i.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px",fontWeight:"500",letterSpacing:"0.3px"},children:"No invoice linked yet"}),i.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[i.jsxs("button",{className:"glass-button",style:{flex:"1",minWidth:"160px",fontSize:"13px",padding:"10px 20px",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",color:"var(--accent-blue)",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseEnter:re=>{re.currentTarget.style.background="rgba(59, 130, 246, 0.15)",re.currentTarget.style.borderColor="rgba(59, 130, 246, 0.3)",re.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:re=>{re.currentTarget.style.background="rgba(59, 130, 246, 0.1)",re.currentTarget.style.borderColor="rgba(59, 130, 246, 0.2)",re.currentTarget.style.transform="translateY(0)"},onClick:ze,children:[i.jsx(Xa,{size:16}),"Link Invoice"]}),k&&i.jsxs("button",{className:"glass-button",style:{flex:"1",minWidth:"160px",fontSize:"13px",padding:"10px 20px",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"var(--text-primary)",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseEnter:re=>{re.currentTarget.style.background="rgba(255, 255, 255, 0.08)",re.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)",re.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:re=>{re.currentTarget.style.background="rgba(255, 255, 255, 0.05)",re.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",re.currentTarget.style.transform="translateY(0)"},onClick:k,children:[i.jsx(Ws,{size:16}),"Create Manual Invoice"]})]})]})})}),gt.lineItems&&gt.lineItems.length>0&&i.jsxs("div",{className:"detail-card line-items-card",style:{marginTop:"12px"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsx("h3",{className:"detail-card-title",style:{margin:0},children:"Delivery Note Line Items"}),(gt.ocrStage==="manual"||gt.source==="manual")&&q&&t&&i.jsxs("button",{className:"glass-button",onClick:()=>q(t),style:{fontSize:"12px",padding:"6px 12px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(OS,{size:14}),"Edit Delivery Note"]})]}),i.jsx("div",{className:"detail-card-content",style:{padding:0},children:i.jsx("div",{className:"invoice-line-items-table-wrapper",style:{width:"100%",overflowX:"auto"},children:i.jsxs("table",{className:"invoice-line-items-table",style:{width:"100%",tableLayout:"auto"},children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"col-description",style:{width:"auto",minWidth:0,maxWidth:"none"},children:"Item Name"}),i.jsx("th",{className:"col-quantity",style:{width:"80px",minWidth:"80px",maxWidth:"80px"},children:"Quantity"})]})}),i.jsx("tbody",{children:gt.lineItems.map((re,Qe)=>i.jsxs("tr",{children:[i.jsx("td",{className:"col-description",style:{width:"auto",minWidth:0,maxWidth:"none",paddingRight:"16px"},children:i.jsx("div",{className:"line-item-description",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:re.description||"Unknown item"})}),i.jsx("td",{className:"col-quantity text-numeric",style:{width:"80px",minWidth:"80px",maxWidth:"80px",textAlign:"right",paddingRight:"16px"},children:i.jsx("span",{className:"quantity-value",children:re.qty||0})})]},Qe))})]})})})]})]})}if(!e)return S?i.jsx("div",{className:"invoices-detail-column",children:i.jsxs("div",{className:"detail-card",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"80px 40px",textAlign:"center",minHeight:"400px"},children:[i.jsx("div",{className:"empty-state-icon",style:{fontSize:"64px",marginBottom:"24px"},children:""}),i.jsx("div",{className:"empty-state-title",style:{fontSize:"24px",fontWeight:"600",marginBottom:"12px",color:"var(--text-primary)"},children:"Upload your first invoice"}),i.jsx("div",{className:"empty-state-description",style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"32px",maxWidth:"400px"},children:"Drag and drop a file above, or click the button below to get started. Owlin will automatically extract and process your invoice details."}),i.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:[C&&i.jsx("button",{className:"glass-button primary-action",onClick:C,style:{fontSize:"14px",padding:"12px 24px",fontWeight:"600"},children:"Choose File to Upload"}),k&&i.jsx("button",{className:"glass-button",onClick:k,style:{fontSize:"14px",padding:"12px 24px"},children:"Create Manual Invoice"})]})]})}):i.jsx("div",{className:"invoices-detail-column",children:i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-state-icon",style:{fontSize:"64px",marginBottom:"24px"},children:""}),i.jsx("div",{className:"empty-state-title",children:"Select an invoice"}),i.jsx("div",{className:"empty-state-description",children:"Choose a document from the left to review its details and resolve any issues."})]})});const Nt=[];if(e.lineItems){const V=e.deliveryNote?.lineItems||[];CK(e.lineItems,V,.85).forEach(re=>{const Qe=re.invoiceItem,Et=re.deliveryItem,Cn=Qe.qty||0,Mt=Et?Et.qty||0:void 0;let pt="not_matched";Mt!==void 0&&(Mt<Cn?pt="short":Mt>Cn?pt="over":pt="ok"),Nt.push({item:Qe.description||"Unknown item",invQty:Cn,dnQty:Mt,unit:Qe.uom||Qe.unit||"",price:Qe.unitPrice||0,lineTotal:Qe.total||Cn*(Qe.unitPrice||0),status:pt})})}const Kt=e.status==="scanned"||e.status==="manual",$n=!w,Nn=!!e.deliveryNote;return i.jsxs("div",{className:"invoices-detail-column invoices-detail-column-selected",children:[i.jsxs("div",{className:"detail-card document-header-card","data-section":"invoice_header",children:[i.jsxs("div",{className:"document-header-left",children:[i.jsx("div",{className:"document-header-supplier",style:{fontSize:"28px",fontWeight:"700",marginBottom:"4px"},children:e.supplier||"Unknown Supplier"}),i.jsxs("div",{className:"document-header-meta",children:[i.jsx("span",{children:e.invoiceNumber||`INV-${e.id.slice(0,8)}`}),i.jsx("span",{children:""}),i.jsx("span",{children:wt(e.date||"")}),e.venue&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsx("span",{children:e.venue})]})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px",flexWrap:"wrap"},children:[e.status==="manual"?i.jsx("span",{className:"badge badge-manual",children:"Manual"}):i.jsx("span",{className:"badge badge-scanned",children:"Scanned"}),e.matched?i.jsx("span",{className:"badge badge-matched",children:"Matched"}):i.jsx("span",{className:"badge badge-unmatched",children:"Unmatched"}),x?i.jsx("span",{className:"badge badge-ready",children:"Ready"}):i.jsx("span",{className:"badge",style:{background:"rgba(255, 255, 255, 0.1)",color:"var(--text-muted)"},children:"Draft"}),e.status==="scanned"&&e.confidence!==void 0&&i.jsxs("span",{className:"badge badge-ocr",style:{fontSize:"11px"},children:[typeof e.confidence=="number"&&e.confidence<=1?Math.round(e.confidence*100):Math.round(e.confidence),"% OCR"]}),e.flagged&&i.jsx("span",{className:"badge badge-flagged",children:"Flagged"})]})]}),i.jsxs("div",{className:"document-header-right",children:[i.jsx("div",{className:"document-header-total",children:ut(Ht)}),(Sn>0||Jn>0)&&i.jsxs("div",{className:"document-header-subtotal",children:["Subtotal ",ut(Sn),"  VAT ",ut(Jn)]})]}),i.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border-color)"},children:i.jsxs("div",{className:"workflow-progress-compressed",children:[i.jsxs("div",{className:"workflow-step",style:{opacity:Kt?1:.5},children:[Kt?i.jsx(Kr,{size:14,style:{color:"var(--accent-green)"}}):i.jsx(au,{size:14,style:{color:"var(--text-muted)"}}),i.jsx("span",{style:{fontSize:"11px"},children:"Scanned"})]}),i.jsxs("div",{className:"workflow-step",style:{opacity:$n?1:.5},children:[$n?i.jsx(Kr,{size:14,style:{color:"var(--accent-green)"}}):i.jsx(au,{size:14,style:{color:"var(--text-muted)"}}),i.jsx("span",{style:{fontSize:"11px"},children:"Issues"})]}),i.jsxs("div",{className:"workflow-step",style:{opacity:Nn?1:.5},children:[Nn?i.jsx(Kr,{size:14,style:{color:"var(--accent-green)"}}):i.jsx(au,{size:14,style:{color:"var(--text-muted)"}}),i.jsx("span",{style:{fontSize:"11px"},children:"DN Linked"})]}),i.jsxs("div",{className:"workflow-step",style:{opacity:.5},children:[i.jsx(au,{size:14,style:{color:"var(--text-muted)"}}),i.jsx("span",{style:{fontSize:"11px"},children:"Submitted"})]})]})}),i.jsxs("div",{style:{gridColumn:"1 / -1",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border-color)",display:"flex",gap:"12px",flexWrap:"wrap"},children:[o&&i.jsxs("button",{className:"glass-button",style:{fontSize:"12px"},onClick:o,children:[i.jsx(S4,{size:14}),"Open original PDF"]}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[e.status==="scanned"&&e.lineItems&&e.lineItems.some(V=>V.bbox)&&i.jsxs("button",{className:"glass-button",style:{fontSize:"12px"},onClick:()=>ie(!$),title:"Toggle visual verification",children:[i.jsx(r0,{size:14,style:{marginRight:"6px"}}),$?"Hide":"Show"," Visual"]}),e.status==="scanned"&&u&&i.jsxs("button",{className:"glass-button",style:{fontSize:"12px"},onClick:u,children:[i.jsx(Xa,{size:14}),"OCR details"]})]})]}),i.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"16px",paddingTop:"16px",borderTop:"1px solid var(--border-color)"},"data-section":"delivery_link","data-delivery-note-section":!0,children:e.deliveryNote?i.jsxs("div",{className:"dn-pairing-widget",children:[i.jsx("button",{className:"dn-pairing-widget-header",onClick:()=>U(!ee),children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[i.jsx(Za,{size:16}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsxs("div",{style:{fontSize:"13px",fontWeight:"600"},children:["Paired: ",e.deliveryNote.noteNumber||`DN-${e.deliveryNote.id.slice(0,8)}`]}),i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:wt(e.deliveryNote.date)})]}),ee?i.jsx(ur,{size:16}):i.jsx(jn,{size:16})]})}),ee&&i.jsx("div",{className:"dn-pairing-widget-content",children:i.jsxs("div",{style:{marginBottom:"12px"},children:[Vt&&i.jsxs("div",{style:{padding:"8px 12px",marginBottom:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",fontSize:"12px",color:"var(--accent-red)",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(tn,{size:14}),i.jsx("span",{children:Vt}),i.jsx("button",{onClick:()=>qt(null),style:{marginLeft:"auto",background:"none",border:"none",cursor:"pointer",color:"var(--accent-red)"},children:i.jsx(sn,{size:14})})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",flexWrap:"wrap"},children:[i.jsx("button",{className:"glass-button",style:{fontSize:"11px",padding:"6px 12px"},onClick:l,children:"Change DN"}),i.jsx("button",{className:"glass-button",style:{fontSize:"11px",padding:"6px 12px"},onClick:n,children:"View full details"}),i.jsx("button",{className:"glass-button",style:{fontSize:"11px",padding:"6px 12px",color:"var(--accent-red)",borderColor:"rgba(239, 68, 68, 0.3)"},onClick:()=>jt(!0),disabled:$e,children:$e?i.jsxs(i.Fragment,{children:[i.jsx(sa,{size:12,style:{marginRight:"4px",animation:"spin 1s linear infinite"}}),"Unpairing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(c3,{size:12,style:{marginRight:"4px"}}),"Unpair"]})})]}),vt&&i.jsxs("div",{style:{padding:"12px",marginBottom:"12px",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"6px",fontSize:"12px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:"600",color:"var(--text-primary)"},children:"Unpair delivery note?"}),i.jsx("div",{style:{marginBottom:"12px",color:"var(--text-secondary)"},children:"This will remove the pairing between this invoice and its delivery note. You can pair them again later."}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{className:"glass-button",style:{fontSize:"11px",padding:"6px 12px",background:"var(--accent-red)",color:"white"},onClick:ht,disabled:$e,children:$e?"Unpairing...":"Confirm Unpair"}),i.jsx("button",{className:"glass-button",style:{fontSize:"11px",padding:"6px 12px"},onClick:()=>jt(!1),disabled:$e,children:"Cancel"})]})]}),Nt.length>0&&i.jsxs("table",{className:"comparison-table",style:{fontSize:"12px"},children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Item"}),i.jsx("th",{children:"Inv Qty"}),i.jsx("th",{children:"DN Qty"}),i.jsx("th",{children:"Status"})]})}),i.jsx("tbody",{children:Nt.map((V,Pe)=>i.jsxs("tr",{className:V.status!=="ok"?"mismatch":"",children:[i.jsx("td",{children:V.item}),i.jsx("td",{children:V.invQty}),i.jsx("td",{children:V.dnQty!==void 0?V.dnQty:"-"}),i.jsxs("td",{children:[V.status==="not_matched"&&i.jsx("span",{title:"No delivery note paired",style:{color:"var(--accent-red)",fontSize:"11px"},children:"Not Matched"}),V.status==="ok"&&i.jsx(Yi,{size:14,style:{color:"var(--accent-green)"},title:"Quantities match"}),V.status==="short"&&i.jsx(tn,{size:14,style:{color:"var(--accent-red)",cursor:"help"},title:`Under delivered: ${V.invQty-(V.dnQty||0)} units short`}),V.status==="over"&&i.jsx(tn,{size:14,style:{color:"var(--accent-yellow)",cursor:"help"},title:`Over delivered: ${(V.dnQty||0)-V.invQty} units extra`})]})]},Pe))})]})]})})]}):i.jsx("div",{className:"dn-pairing-widget",children:de?i.jsxs("div",{style:{padding:"12px"},children:[i.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"12px",fontWeight:"500"},children:"Loading recommendations..."}),i.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[i.jsxs("button",{className:"glass-button primary-action",style:{fontSize:"12px",padding:"8px 16px",fontWeight:"600",opacity:.6},disabled:!0,children:[i.jsx(Za,{size:14,style:{marginRight:"6px"}}),"Link Delivery Note"]}),i.jsx("button",{className:"glass-button",style:{fontSize:"12px",padding:"8px 16px",opacity:.6},disabled:!0,children:"Create Manual DN"})]})]}):K.length>0?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"dn-pairing-widget-header",onClick:()=>U(!ee),children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:1},children:[i.jsx(Za,{size:16}),i.jsxs("div",{style:{flex:1,textAlign:"left"},children:[i.jsxs("div",{style:{fontSize:"13px",fontWeight:"600"},children:["Recommended: ",K[0].deliveryNoteNumber||`DN-${K[0].deliveryNoteId.slice(0,8)}`]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"2px"},children:[K[0].confidence!==void 0&&i.jsxs("span",{className:`confidence-badge ${K[0].confidence>=.8?"high":K[0].confidence>=.6?"medium":"low"}`,style:{fontSize:"10px",padding:"2px 6px",background:K[0].confidence>=.8?"rgba(34, 197, 94, 0.2)":K[0].confidence>=.6?"rgba(251, 191, 36, 0.2)":"rgba(239, 68, 68, 0.2)",color:K[0].confidence>=.8?"var(--accent-green)":K[0].confidence>=.6?"var(--accent-yellow)":"var(--accent-red)",border:`1px solid ${K[0].confidence>=.8?"rgba(34, 197, 94, 0.3)":K[0].confidence>=.6?"rgba(251, 191, 36, 0.3)":"rgba(239, 68, 68, 0.3)"}`,fontWeight:"600"},children:[Math.round(K[0].confidence*100),"% match"]}),!K[0].confidence&&i.jsx("span",{style:{fontSize:"11px",color:"var(--text-muted)"},children:"Suggested pairing"})]})]}),ee?i.jsx(ur,{size:16}):i.jsx(jn,{size:16})]})}),ee&&i.jsx("div",{className:"dn-pairing-widget-content",children:i.jsxs("div",{style:{marginBottom:"12px"},children:[K[0].llmExplanation&&i.jsxs("div",{className:"llm-explanation",style:{background:"rgba(59, 130, 246, 0.1)",borderLeft:"3px solid #3b82f6",padding:"12px",marginBottom:"12px",borderRadius:"4px",fontSize:"12px",lineHeight:"1.5",color:"var(--text-primary)"},children:[i.jsx("span",{style:{marginRight:"8px"},children:""}),i.jsx("span",{children:K[0].llmExplanation})]}),!K[0].llmExplanation&&K[0].reason&&i.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"12px"},children:K[0].reason}),K[0].featuresSummary&&i.jsxs("div",{className:"feature-highlights",style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:[K[0].featuresSummary.amountDiffPct!==void 0&&i.jsxs("span",{className:"feature-tag",style:{background:"rgba(255, 255, 255, 0.1)",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",color:"var(--text-secondary)"},children:["Amount: ",Math.abs(K[0].featuresSummary.amountDiffPct*100).toFixed(1),"% diff"]}),K[0].featuresSummary.dateDiffDays!==void 0&&i.jsxs("span",{className:"feature-tag",style:{background:"rgba(255, 255, 255, 0.1)",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",color:"var(--text-secondary)"},children:["Date: ",Math.abs(K[0].featuresSummary.dateDiffDays).toFixed(0)," days"]}),K[0].featuresSummary.supplierNameSimilarity!==void 0&&i.jsxs("span",{className:"feature-tag",style:{background:"rgba(255, 255, 255, 0.1)",padding:"4px 8px",borderRadius:"4px",fontSize:"11px",color:"var(--text-secondary)"},children:["Supplier: ",Math.round(K[0].featuresSummary.supplierNameSimilarity*100),"% match"]})]}),Vt&&i.jsxs("div",{style:{padding:"8px 12px",marginBottom:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"6px",fontSize:"12px",color:"var(--accent-red)",display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx(tn,{size:14}),i.jsx("span",{style:{flex:1},children:Vt}),i.jsx("button",{onClick:()=>{qt(null),Le(K[0].deliveryNoteId)},className:"glass-button",style:{fontSize:"11px",padding:"4px 8px"},children:"Retry"}),i.jsx("button",{onClick:()=>qt(null),style:{background:"none",border:"none",cursor:"pointer",color:"var(--accent-red)"},children:i.jsx(sn,{size:14})})]}),i.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:[i.jsx("button",{className:"glass-button primary-action",style:{fontSize:"12px",padding:"8px 16px",fontWeight:"600"},onClick:()=>Le(K[0].deliveryNoteId),disabled:W===K[0].deliveryNoteId,children:W===K[0].deliveryNoteId?i.jsxs(i.Fragment,{children:[i.jsx(sa,{size:14,style:{marginRight:"6px",display:"inline-block",animation:"spin 1s linear infinite"}}),"Pairing..."]}):"Pair with this DN"}),i.jsx("button",{className:"glass-button",style:{fontSize:"12px",padding:"8px 16px"},onClick:n,children:"View all DNs"}),i.jsx("button",{className:"glass-button",style:{fontSize:"12px",padding:"8px 16px"},onClick:r,children:"Create manual DN"})]}),K.length>1&&i.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"8px"},children:[K.length-1," more suggestion",K.length-1!==1?"s":""," available"]})]})})]}):i.jsxs("div",{style:{padding:"16px",background:"rgba(255, 255, 255, 0.02)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[i.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"16px",fontWeight:"500",letterSpacing:"0.3px"},children:"No delivery note linked yet"}),i.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[i.jsxs("button",{className:"glass-button",style:{flex:"1",minWidth:"160px",fontSize:"13px",padding:"10px 20px",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",color:"var(--accent-blue)",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseEnter:V=>{V.currentTarget.style.background="rgba(59, 130, 246, 0.15)",V.currentTarget.style.borderColor="rgba(59, 130, 246, 0.3)",V.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:V=>{V.currentTarget.style.background="rgba(59, 130, 246, 0.1)",V.currentTarget.style.borderColor="rgba(59, 130, 246, 0.2)",V.currentTarget.style.transform="translateY(0)"},onClick:Ye,children:[i.jsx(Za,{size:16}),"Link Delivery Note"]}),i.jsxs("button",{className:"glass-button",style:{flex:"1",minWidth:"160px",fontSize:"13px",padding:"10px 20px",fontWeight:"500",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"var(--text-primary)",transition:"all 0.2s ease",backdropFilter:"blur(10px)"},onMouseEnter:V=>{V.currentTarget.style.background="rgba(255, 255, 255, 0.08)",V.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)",V.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:V=>{V.currentTarget.style.background="rgba(255, 255, 255, 0.05)",V.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",V.currentTarget.style.transform="translateY(0)"},onClick:r,children:[i.jsx(Ws,{size:16}),"Create Manual DN"]})]})]})})})]}),$&&e.status==="scanned"&&e.lineItems&&e.lineItems.some(V=>V.bbox)&&i.jsxs("div",{className:"detail-card",children:[i.jsxs("div",{className:"detail-card-header",children:[i.jsx("h3",{className:"detail-card-title",children:"Visual Verification"}),i.jsx("button",{className:"glass-button",style:{fontSize:"12px",padding:"4px 8px"},onClick:()=>ie(!1),children:i.jsx(sn,{size:14})})]}),i.jsx("div",{className:"detail-card-content",style:{padding:0},children:i.jsx(Gk,{docId:e.id,lineItems:e.lineItems,activeLineItemIndex:xe,onLineItemHover:Ce})})]}),!e.deliveryNote&&(O?D:K.length>0)&&!de&&i.jsxs("div",{className:"detail-card recommended-dn-card",style:{animation:"fadeIn 0.3s ease-out"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"4px"},children:O?"Suggested Delivery Note":"Recommended Delivery Note"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[i.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:(O?D:K[0])?.deliveryNoteNumber||`DN-${(O?D:K[0])?.deliveryNoteId.slice(0,8)}`}),(O?D:K[0])?.confidence!==void 0&&i.jsxs("span",{className:"badge",style:{fontSize:"10px",padding:"2px 6px",background:(O?D:K[0]).confidence>=.8?"rgba(34, 197, 94, 0.2)":(O?D:K[0]).confidence>=.6?"rgba(251, 191, 36, 0.2)":"rgba(239, 68, 68, 0.2)",color:K[0].confidence>=.8?"var(--accent-green)":K[0].confidence>=.6?"var(--accent-yellow)":"var(--accent-red)",border:`1px solid ${K[0].confidence>=.8?"rgba(34, 197, 94, 0.3)":K[0].confidence>=.6?"rgba(251, 191, 36, 0.3)":"rgba(239, 68, 68, 0.3)"}`},children:[Math.round(K[0].confidence*100),"% match"]})]})]}),i.jsx("button",{className:"glass-button primary-action",style:{fontSize:"13px",padding:"10px 20px",fontWeight:"600"},onClick:()=>Le(K[0].deliveryNoteId),disabled:W===K[0].deliveryNoteId,children:W===K[0].deliveryNoteId?i.jsxs(i.Fragment,{children:[i.jsx(sa,{size:14,style:{marginRight:"6px",display:"inline-block",animation:"spin 1s linear infinite"}}),"Pairing..."]}):"Pair Now"})]}),K[0].reason&&i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",paddingTop:"8px",borderTop:"1px solid var(--border-color)"},children:K[0].reason})]}),i.jsxs("div",{className:"detail-card line-items-card","data-section":"line_items",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[i.jsx("h3",{className:"detail-card-title",style:{margin:0},children:"Invoice Line Items"}),e.status==="manual"&&i.jsx(i.Fragment,{children:cn?i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsxs("button",{className:"glass-button",onClick:Dn,disabled:Gt,style:{fontSize:"11px",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(sn,{size:12}),"Cancel"]}),i.jsx("button",{className:"glass-button",onClick:Hr,disabled:Gt,style:{fontSize:"11px",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px",background:"rgba(34, 197, 94, 0.2)",borderColor:"rgba(34, 197, 94, 0.4)"},children:Gt?i.jsxs(i.Fragment,{children:[i.jsx(sa,{size:12,className:"spinning"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Vo,{size:12}),"Done"]})})]}):i.jsxs("button",{className:"glass-button",onClick:Yt,style:{fontSize:"12px",padding:"6px 12px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx(OS,{size:14}),"Edit Invoice"]})})]}),i.jsx("div",{className:"detail-card-content",style:cn?{padding:"8px"}:{},children:cn?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"invoice-line-items-table-wrapper",ref:we,children:i.jsxs("table",{className:"invoice-line-items-table invoice-line-items-table-editing",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"col-description",children:"Description"}),i.jsx("th",{className:"col-quantity",children:"Qty"}),i.jsx("th",{className:"col-quantity-dn",children:"DN"}),i.jsx("th",{className:"col-price",children:"Price"}),i.jsx("th",{className:"col-total",children:"Total"}),i.jsx("th",{className:"col-status"})]})}),i.jsx("tbody",{children:H.map((V,Pe)=>i.jsxs("tr",{children:[i.jsx("td",{className:"col-description","data-label":"Description",children:i.jsx("input",{type:"text",className:"line-item-input",value:V.description,onChange:re=>_t(Pe,"description",re.target.value),placeholder:"Item description"})}),i.jsx("td",{className:"col-quantity text-numeric","data-label":"Qty",children:i.jsx("input",{type:"number",className:"line-item-input numeric-input",value:V.qty||"",onChange:re=>_t(Pe,"qty",Math.round(Number(re.target.value))||0),min:"0",step:"1",disabled:Gt,placeholder:"0"})}),i.jsx("td",{className:"col-quantity-dn text-numeric","data-label":"DN",children:i.jsx("input",{type:"number",className:"line-item-input numeric-input",value:V.dnQty!==void 0?V.dnQty:"",onChange:re=>_t(Pe,"dnQty",re.target.value===""?void 0:Math.round(Number(re.target.value))),placeholder:"",min:"0",step:"1",disabled:Gt||!e?.deliveryNote,title:e?.deliveryNote?"":"Link a delivery note first to edit DN quantities"})}),i.jsx("td",{className:"col-price text-numeric","data-label":"Price",children:i.jsx("input",{type:"number",className:"line-item-input numeric-input",value:V.price||"",onChange:re=>_t(Pe,"price",Number(re.target.value)||0),min:"0",step:"0.01",disabled:Gt,placeholder:"0.00"})}),i.jsx("td",{className:"col-total text-numeric","data-label":"Total",children:i.jsx("span",{className:"total-value",children:ut(V.total)})}),i.jsx("td",{className:"col-status","data-label":"Actions",children:H.length>1&&i.jsx("button",{type:"button",className:"line-item-delete-button",onClick:()=>kt(Pe),disabled:Gt,title:"Delete row",children:i.jsx(Zi,{size:12})})})]},Pe))}),i.jsxs("tfoot",{className:"invoice-totals",children:[i.jsxs("tr",{className:"totals-row-subtotal",children:[i.jsx("td",{colSpan:4,className:"totals-label",children:"Subtotal"}),i.jsx("td",{colSpan:2,className:"totals-value text-numeric",children:ut(et().subtotal)})]}),i.jsxs("tr",{className:"totals-row-vat",children:[i.jsx("td",{colSpan:4,className:"totals-label",children:"VAT (20%)"}),i.jsx("td",{colSpan:2,className:"totals-value text-numeric",children:ut(et().vat)})]}),i.jsxs("tr",{className:"totals-row-total",children:[i.jsx("td",{colSpan:4,className:"totals-label-total",children:"Total"}),i.jsx("td",{colSpan:2,className:"totals-value-total text-numeric",children:ut(et().total)})]})]})]})}),i.jsx("div",{style:{marginTop:"8px",display:"flex",justifyContent:"flex-end"},children:i.jsxs("button",{type:"button",className:"glass-button",onClick:Ge,disabled:Gt,style:{fontSize:"11px",padding:"4px 8px",display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx(Ws,{size:12}),"Add Item"]})})]}):i.jsx(i.Fragment,{children:Nt.length>0?i.jsxs(i.Fragment,{children:[Nt.length>10&&i.jsxs("button",{className:"glass-button",onClick:()=>he(!F),style:{marginBottom:"12px",fontSize:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[F?i.jsx(ur,{size:14}):i.jsx(jn,{size:14}),F?"Collapse":"Expand"," line items (",Nt.length,")"]}),(Nt.length<=10||F)&&i.jsx("div",{className:"invoice-line-items-table-wrapper",ref:we,children:i.jsxs("table",{className:"invoice-line-items-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"col-description",children:"Name"}),i.jsx("th",{className:"col-quantity",children:"Qty"}),i.jsx("th",{className:"col-quantity-dn",children:"DN"}),i.jsx("th",{className:"col-price",children:"PPU"}),i.jsx("th",{className:"col-total",children:"Total"}),i.jsx("th",{className:"col-status",children:"Status"})]})}),i.jsx("tbody",{children:Nt.map((V,Pe)=>{const re=e.lineItems?.findIndex(Qe=>(Qe.description||"").toLowerCase()===V.item.toLowerCase())??null;return i.jsxs("tr",{className:V.status!=="ok"?"mismatch":"","data-line-item-description":V.item,"data-line-item-index":Pe,onMouseEnter:()=>{re!==null&&re>=0&&Ce(re)},onMouseLeave:()=>Ce(null),style:{backgroundColor:xe===re?"rgba(59, 130, 246, 0.1)":"transition",transition:"background-color 0.2s ease"},children:[i.jsx("td",{className:"col-description","data-label":"Name",children:i.jsx("div",{className:"line-item-description",children:V.item})}),i.jsx("td",{className:"col-quantity text-numeric","data-label":"Qty",children:i.jsx("span",{className:"quantity-value",children:V.invQty})}),i.jsx("td",{className:"col-quantity-dn text-numeric","data-label":"DN",children:V.dnQty!==void 0?i.jsx("span",{className:"quantity-value",children:V.dnQty}):i.jsx("span",{className:"quantity-empty",children:""})}),i.jsx("td",{className:"col-price text-numeric","data-label":"PPU",children:i.jsx("span",{className:"price-value",children:ut(V.price)})}),i.jsx("td",{className:"col-total text-numeric","data-label":"Total",children:i.jsx("span",{className:"total-value",children:ut(V.lineTotal)})}),i.jsxs("td",{className:"col-status","data-label":"Status",children:[V.status==="not_matched"&&i.jsx("span",{className:"status-badge status-not-matched",title:"No delivery note paired",children:"No Match"}),V.status==="ok"&&i.jsxs("span",{className:"status-badge status-matched",title:"Quantities match",children:[i.jsx(Yi,{size:10,style:{marginRight:"3px"}}),"OK"]}),V.status==="short"&&i.jsxs("span",{className:"status-badge status-short",title:`Under delivered: ${V.invQty-(V.dnQty||0)} units short`,children:[i.jsx(tn,{size:10}),"Short"]}),V.status==="over"&&i.jsxs("span",{className:"status-badge status-over",title:`Over delivered: ${(V.dnQty||0)-V.invQty} units extra`,children:[i.jsx(tn,{size:10}),"Over"]})]})]},Pe)})}),i.jsxs("tfoot",{className:"invoice-totals",children:[i.jsxs("tr",{className:"totals-row-subtotal",children:[i.jsx("td",{colSpan:3,className:"totals-label",children:"Subtotal"}),i.jsx("td",{colSpan:2,className:"totals-value text-numeric",children:ut(Sn)}),i.jsx("td",{className:"col-status"})]}),i.jsxs("tr",{className:"totals-row-vat",children:[i.jsx("td",{colSpan:3,className:"totals-label",children:"VAT (20%)"}),i.jsx("td",{colSpan:2,className:"totals-value text-numeric",children:ut(Jn)}),i.jsx("td",{className:"col-status"})]}),i.jsxs("tr",{className:"totals-row-total",children:[i.jsx("td",{colSpan:3,className:"totals-label-total",children:"Total"}),i.jsx("td",{colSpan:2,className:"totals-value-total text-numeric",children:ut(Ht)}),i.jsx("td",{className:"col-status"})]})]})]})})]}):i.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--text-muted)"},children:"No line items available"})})})]}),i.jsxs("div",{className:"detail-card",children:[i.jsx("div",{className:"detail-card-header",children:i.jsx("h3",{className:"detail-card-title",children:"Invoice & Delivery Note"})}),i.jsx("div",{className:"detail-card-content",children:i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[i.jsxs("div",{className:"summary-box",children:[i.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"4px"},children:"Invoice"}),i.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:e.invoiceNumber||`INV-${e.id.slice(0,8)}`}),i.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:["Lines: ",e.lineItems?.length||0]}),i.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["Total: ",ut(Ht)]})]}),i.jsxs("div",{className:"summary-box",children:[i.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"4px"},children:"Delivery Note"}),e.deliveryNote?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{fontSize:"14px",fontWeight:"600"},children:e.deliveryNote.noteNumber||`DN-${e.deliveryNote.id.slice(0,8)}`}),i.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:["Lines: ",e.deliveryNote.lineItems?.length||0]}),i.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["Delivered: ",wt(e.deliveryNote.date)]})]}):i.jsx("div",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"No delivery note linked"})]})]})})]}),i.jsxs("div",{className:"detail-card",children:[i.jsx("h3",{className:"detail-card-title",style:{fontSize:"15px",fontWeight:"600",marginBottom:"16px"},children:"Discussion & log"}),i.jsxs("div",{className:"detail-card-content",children:[i.jsx("textarea",{className:"comment-textarea",placeholder:"Add a note about this invoice",rows:3,value:h,onChange:V=>p?.(V.target.value),disabled:m}),i.jsx("button",{className:"glass-button",style:{marginTop:"8px",alignSelf:"flex-start"},onClick:d,disabled:!h.trim()||m,children:m?"Saving...":"Save note"})]})]}),e&&e.status==="scanned"&&i.jsxs("div",{className:"detail-card document-preview-card",children:[i.jsxs("div",{className:"detail-card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid var(--border-color)"},children:[i.jsx("h3",{className:"detail-card-title",style:{fontSize:"15px",fontWeight:"600",margin:0},children:"Document Preview"}),i.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"8px"},children:e.lineItems&&e.lineItems.some(V=>V.bbox)?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"2px",backgroundColor:"rgba(0, 255, 0, 0.7)",border:"1px solid rgba(0, 255, 0, 0.9)"}}),i.jsx("span",{children:"Highlighted areas show extracted line items"})]}):i.jsx("span",{children:"Image preview (no bounding box data available)"})})]}),i.jsx("div",{className:"detail-card-content",style:{padding:0},children:i.jsx(Gk,{docId:e.docId||e.documentId||e.id,lineItems:e.lineItems||[],activeLineItemIndex:xe,onLineItemHover:Ce})})]}),e&&Zr&&i.jsx(Ou,{isOpen:oi,onClose:()=>{qr(!1),Ut(null),Ft(null)},onConfirm:it,invoiceId:e.id,deliveryNoteId:Zr,initialValidation:Lt,invoiceLineItems:e.lineItems,deliveryNoteLineItems:gt?.lineItems}),t&&Zn&&i.jsx(Ou,{isOpen:oi,onClose:()=>{qr(!1),At(null),Ut(null),Ft(null)},onConfirm:it,invoiceId:Zn,deliveryNoteId:t,initialValidation:Lt,invoiceLineItems:void 0,deliveryNoteLineItems:gt?.lineItems})]})}function kK(e){if(!e)return"No date";try{return new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch{return e}}const EK=g.memo(function({deliveryNote:t,isSelected:n=!1,onClick:r,onDelete:l}){const o=t.pairingType||"suggested",u=t.recommendedInvoice?.confidence,[d,h]=g.useState(!1),p=x=>{x.stopPropagation(),h(!0)},m=x=>{x.stopPropagation(),h(!1)},v=x=>{x.stopPropagation(),l&&(l(t.id),h(!1))};return g.useEffect(()=>{const x=j=>{j.key==="Escape"&&d&&h(!1)};return d&&document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[d]),i.jsxs("div",{className:`delivery-note-card ${n?"selected":""} ${d?"delete-confirming":""}`,onClick:r,tabIndex:0,onKeyDown:x=>{x.key==="Enter"||x.key===" "?(x.preventDefault(),d||r()):x.key==="Escape"&&d&&(x.preventDefault(),h(!1))},children:[l&&i.jsx(i.Fragment,{children:d?i.jsxs("div",{className:"delivery-note-card-delete-confirm",onClick:v,children:[i.jsx("button",{className:"delivery-note-card-delete-close",onClick:x=>{x.stopPropagation(),m(x)},title:"Close","aria-label":"Close confirmation",children:i.jsx(sn,{size:16})}),i.jsx("div",{className:"delivery-note-card-delete-confirm-content",children:i.jsx("div",{className:"delivery-note-card-delete-confirm-text",children:"Confirm Delete"})})]}):i.jsx("button",{className:"delivery-note-card-delete-btn",onClick:p,title:"Delete delivery note","aria-label":"Delete delivery note",children:i.jsx(Zi,{size:14})})}),i.jsxs("div",{className:"delivery-note-card-content",children:[i.jsxs("div",{className:"delivery-note-card-row-1",children:[i.jsx("div",{className:"delivery-note-card-supplier",style:{fontSize:"15px",fontWeight:"600",flex:1},children:t.supplier||"Unknown Supplier"}),i.jsx("span",{className:`badge badge-pairing-${o==="pending_confirmation"?"automatic":o}`,style:{marginRight:l?"28px":"0"},children:o==="automatic"||o==="pending_confirmation"?"Auto":o==="manual"?"Manual":"Suggested"})]}),i.jsxs("div",{className:"delivery-note-card-row-3",style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"var(--text-muted)",marginTop:"6px",marginBottom:"8px"},children:[i.jsx("div",{className:"delivery-note-card-venue",children:t.venue?`Site: ${t.venue}`:t.noteNumber?`DN: ${t.noteNumber}`:`DN-${t.id.slice(0,8)}`}),i.jsx("div",{className:"delivery-note-card-date",children:kK(t.date)})]}),i.jsxs("div",{className:"delivery-note-card-row-4",style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center",marginTop:"8px"},children:[t.isPaired!==void 0&&i.jsx("span",{title:t.isPaired?"Paired":"Unpaired",style:{display:"inline-flex",alignItems:"center"},children:t.isPaired?i.jsx(Kr,{size:14,style:{color:"var(--accent-green)"}}):i.jsx(au,{size:14,style:{color:"var(--text-muted)"}})}),t.recommendedInvoice&&i.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)"},children:[" ",t.recommendedInvoice.invoiceNumber||`INV-${t.recommendedInvoice.id.slice(0,8)}`,u!==void 0&&` (${Math.round(u*100)}%)`]})]})]})]})});function DK({isOpen:e,onClose:t,onConfirm:n,onReject:r,data:l,loading:o=!1}){const[u,d]=g.useState(new Set);if(!e||!l)return null;const h=v=>{try{return new Date(v).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch{return v}},p=v=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(v),m=v=>v>=.9?"var(--accent-green)":v>=.7?"var(--accent-yellow)":"var(--accent-red)";return i.jsx("div",{className:"modal-overlay",onClick:t,children:i.jsxs("div",{className:"modal-container",onClick:v=>v.stopPropagation(),style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{className:"modal-title",children:"Confirm Automatic Pairing"}),i.jsx("button",{className:"modal-close-button",onClick:t,"aria-label":"Close modal",children:i.jsx(sn,{size:20})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{style:{padding:"16px",background:"var(--bg-secondary)",borderRadius:"8px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:`rgba(${m(l.confidence)==="var(--accent-green)"?"34, 197, 94":m(l.confidence)==="var(--accent-yellow)"?"251, 191, 36":"239, 68, 68"}, 0.1)`,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:l.confidence>=.9?i.jsx(Vo,{size:24,style:{color:m(l.confidence)}}):i.jsx(tn,{size:24,style:{color:m(l.confidence)}})}),i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"4px"},children:["Confidence: ",Math.round(l.confidence*100),"%"]}),i.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:l.reason})]})]}),l.hasQuantityMismatch&&i.jsxs("div",{style:{padding:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",marginBottom:"16px",display:"flex",alignItems:"flex-start",gap:"8px"},children:[i.jsx(tn,{size:20,style:{color:"var(--accent-red)",flexShrink:0,marginTop:"2px"}}),i.jsxs("div",{style:{fontSize:"13px",color:"var(--accent-red)"},children:[i.jsx("strong",{children:"Warning:"})," Quantity mismatches detected between invoice and delivery note. Please review before confirming."]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[i.jsxs("div",{style:{padding:"16px",background:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[i.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"var(--accent-blue)"},children:"Invoice"}),i.jsxs("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[i.jsx("strong",{children:"Number:"})," ",l.invoiceNumber]}),i.jsxs("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[i.jsx("strong",{children:"Supplier:"})," ",l.invoiceSupplier]}),i.jsxs("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[i.jsx("strong",{children:"Date:"})," ",h(l.invoiceDate)]}),i.jsxs("div",{style:{fontSize:"13px",marginBottom:"12px"},children:[i.jsx("strong",{children:"Total:"})," ",p(l.invoiceTotal)]}),l.invoiceLineItems&&l.invoiceLineItems.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:"600",marginBottom:"8px",color:"var(--text-secondary)"},children:"Line Items:"}),i.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:l.invoiceLineItems.map((v,x)=>i.jsxs("div",{style:{padding:"6px",background:"var(--bg-card)",borderRadius:"4px",marginBottom:"4px",fontSize:"11px"},children:[i.jsx("div",{style:{fontWeight:"500"},children:v.description}),i.jsxs("div",{style:{color:"var(--text-secondary)"},children:[v.qty," ",v.unit," @ ",p(v.price)]})]},x))})]})]}),i.jsxs("div",{style:{padding:"16px",background:"var(--bg-secondary)",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[i.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"var(--accent-green)"},children:"Delivery Note"}),i.jsxs("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[i.jsx("strong",{children:"Number:"})," ",l.deliveryNoteNumber]}),i.jsxs("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[i.jsx("strong",{children:"Supplier:"})," ",l.deliveryNoteSupplier]}),i.jsxs("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[i.jsx("strong",{children:"Date:"})," ",h(l.deliveryNoteDate)]}),i.jsxs("div",{style:{fontSize:"13px",marginBottom:"12px"},children:[i.jsx("strong",{children:"Total:"})," ",p(l.deliveryNoteTotal)]}),l.deliveryNoteLineItems&&l.deliveryNoteLineItems.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:"600",marginBottom:"8px",color:"var(--text-secondary)"},children:"Line Items:"}),i.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:l.deliveryNoteLineItems.map((v,x)=>i.jsxs("div",{style:{padding:"6px",background:"var(--bg-card)",borderRadius:"4px",marginBottom:"4px",fontSize:"11px"},children:[i.jsx("div",{style:{fontWeight:"500"},children:v.description}),i.jsxs("div",{style:{color:"var(--text-secondary)"},children:[v.qty," ",v.unit]})]},x))})]})]})]}),l.quantityDifferences&&l.quantityDifferences.length>0&&i.jsxs("div",{style:{padding:"16px",background:"rgba(239, 68, 68, 0.05)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"8px",marginBottom:"16px"},children:[i.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"var(--accent-red)"},children:"Quantity Differences"}),i.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:l.quantityDifferences.map((v,x)=>i.jsxs("div",{style:{padding:"10px",background:"var(--bg-card)",borderRadius:"6px",marginBottom:"8px",border:"1px solid var(--border-color)"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"6px",fontSize:"13px"},children:v.description}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"8px",fontSize:"12px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"11px"},children:"Invoice Qty"}),i.jsx("div",{style:{fontWeight:"500"},children:v.invoiceQty})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"11px"},children:"DN Qty"}),i.jsx("div",{style:{fontWeight:"500"},children:v.dnQty})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"11px"},children:"Difference"}),i.jsxs("div",{style:{fontWeight:"600",color:v.difference===0?"var(--accent-green)":"var(--accent-red)"},children:[v.difference>0?"+":"",v.difference]})]})]})]},x))})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{className:"modal-button-secondary",onClick:r,disabled:o,children:"Reject"}),i.jsx("button",{className:"modal-button-primary",onClick:n,disabled:o,style:{background:l.hasQuantityMismatch?"var(--accent-yellow)":"var(--accent-blue)"},children:o?"Pairing...":"Confirm Pairing"})]})]})})}function OK({isOpen:e,onClose:t,onConfirm:n,count:r,loading:l=!1}){const[o,u]=g.useState(1),[d,h]=g.useState("");if(g.useEffect(()=>{e&&(u(1),h(""))},[e]),g.useEffect(()=>{if(!e)return;const x=j=>{j.key==="Escape"&&(o===2?(u(1),h("")):t())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,o,t]),!e)return null;const p=d.trim().toUpperCase()==="DELETE",m=()=>{o===1?u(2):o===2&&p&&n()},v=()=>{u(1),h("")};return i.jsx("div",{className:"modal-overlay",onClick:t,children:i.jsxs("div",{className:"modal-container",onClick:x=>x.stopPropagation(),style:{maxWidth:"500px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{className:"modal-title",children:o===1?"Clear All Non-Paired Delivery Notes":"Confirm Deletion"}),i.jsx("button",{className:"modal-close-button",onClick:t,"aria-label":"Close modal",children:i.jsx(sn,{size:20})})]}),i.jsx("div",{className:"modal-body",children:o===1?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",padding:"16px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px"},children:[i.jsx(tn,{size:24,style:{color:"var(--accent-red)",flexShrink:0}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px",color:"var(--text-primary)"},children:"Warning: Permanent Deletion"}),i.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:["You are about to delete ",i.jsx("strong",{children:r})," non-paired delivery note",r!==1?"s":"",". This action cannot be undone."]})]})]}),i.jsxs("div",{style:{fontSize:"14px",color:"var(--text-secondary)",lineHeight:"1.6",marginBottom:"24px"},children:[i.jsx("p",{style:{marginBottom:"12px"},children:"This will permanently remove all selected delivery notes from the database. Only non-paired delivery notes will be deleted. Paired delivery notes are protected and will not be affected."}),i.jsx("p",{style:{marginBottom:"0"},children:"Are you sure you want to continue?"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",padding:"16px",background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:"12px"},children:[i.jsx(tn,{size:24,style:{color:"var(--accent-red)",flexShrink:0}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"4px",color:"var(--text-primary)"},children:"Final Confirmation Required"}),i.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:["Type ",i.jsx("strong",{children:"DELETE"})," to confirm deletion of ",r," delivery note",r!==1?"s":""]})]})]}),i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsx("label",{style:{display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"8px",color:"var(--text-primary)"},children:'Type "DELETE" to confirm:'}),i.jsx("input",{type:"text",value:d,onChange:x=>h(x.target.value),placeholder:"Type DELETE here",autoFocus:!0,style:{width:"100%",padding:"12px 16px",background:"var(--bg-secondary)",border:`2px solid ${p?"var(--accent-red)":"var(--border-color)"}`,borderRadius:"8px",fontSize:"14px",color:"var(--text-primary)",outline:"none",transition:"border-color 0.2s ease"},onKeyDown:x=>{x.key==="Enter"&&p&&!l&&m()}}),d&&!p&&i.jsx("div",{style:{fontSize:"12px",color:"var(--accent-red)",marginTop:"6px"},children:'Text must match "DELETE" exactly'})]})]})}),i.jsx("div",{className:"modal-footer",children:o===1?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"glass-button",onClick:t,disabled:l,children:"Cancel"}),i.jsx("button",{className:"glass-button",onClick:m,disabled:l,style:{background:"var(--accent-red)",borderColor:"var(--accent-red)",color:"white"},children:"Continue to Confirm"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"glass-button",onClick:v,disabled:l,children:"Back"}),i.jsx("button",{className:"glass-button",onClick:t,disabled:l,children:"Cancel"}),i.jsx("button",{className:"glass-button",onClick:m,disabled:!p||l,style:{background:p?"var(--accent-red)":"rgba(239, 68, 68, 0.3)",borderColor:p?"var(--accent-red)":"rgba(239, 68, 68, 0.3)",color:"white",cursor:p&&!l?"pointer":"not-allowed",opacity:p&&!l?1:.6},children:l?i.jsxs(i.Fragment,{children:[i.jsx(sa,{size:16,style:{animation:"spin 1s linear infinite"}}),"Deleting..."]}):"Confirm Delete"})]})})]})})}function TK({selectedDNId:e,onSelectDN:t,pairingMode:n,onPairingModeChange:r,onPairSuccess:l,refreshTrigger:o}){const u=Th(),[d,h]=g.useState([]),[p,m]=g.useState(!1),[v,x]=g.useState(null),[j,w]=g.useState(new Map),[N,S]=g.useState(new Map),[C,k]=g.useState(null),[E,O]=g.useState(!1),[D,A]=g.useState(!1),[M,q]=g.useState(!1),[te,ce]=g.useState(null),[G,R]=g.useState(!1),[F,he]=g.useState(!1),ee=async()=>{m(!0),x(null);try{console.log("[DEBUG] DeliveryNotesCardsSection: Fetching delivery notes...");const Z=await a0();if(console.log("[DEBUG] DeliveryNotesCardsSection: Fetched",Z?.length||0,"delivery notes",Z),!Z||Z.length===0){h([]),S(new Map),w(new Map),m(!1);return}const K=new Set,de=Z.filter(Q=>{const $e=Q.id||Q.docId||"";return!$e||$e.trim()===""||K.has($e)?!1:(K.add($e),!0)}).map(Q=>{const $e=Q.supplier||Q.supplierName||Q.supplier_name,Ae={id:Q.id||Q.docId||"",noteNumber:Q.deliveryNo||Q.delivery_no||Q.deliveryNoteNumber||Q.noteNumber||Q.note_number||"",supplier:$e&&$e!=="Unknown Supplier"?$e:$e||"Unknown Supplier",date:Q.docDate||Q.doc_date||Q.date||"",total:Q.total||0,venue:Q.venue||Q.venueId||void 0,deliveryNo:Q.deliveryNo||Q.delivery_no||Q.deliveryNoteNumber||Q.noteNumber||"",docDate:Q.docDate||Q.doc_date||Q.date||""};return console.log("[DEBUG] DeliveryNotesCardsSection: Mapped DN",{id:Ae.id,supplier:Ae.supplier,noteNumber:Ae.noteNumber,date:Ae.date,venue:Ae.venue,raw:Q}),Ae}).filter(Q=>Q.id&&Q.id.trim()!==""),Se=new Map;for(const Q of de)if(Q.id&&Q.id.trim()!==""){const $e=Se.get(Q.id);(!$e||!$e.supplier&&Q.supplier||!$e.noteNumber&&Q.noteNumber)&&Se.set(Q.id,Q)}const W=Array.from(Se.values()),me=new Map;for(const Q of W)if(Q.id)try{const $e=await iu(Q.id);me.set(Q.id,$e.length>0)}catch($e){console.warn(`Failed to check pairing status for DN ${Q.id}:`,$e),me.set(Q.id,!1)}S(me),console.log("[DEBUG] DeliveryNotesCardsSection: Setting",W.length,"delivery notes to state"),h(W);const Me=new Map;for(const Q of W)if(Q.id)try{const $e=await Cl(Q.id);$e.suggestions&&$e.suggestions.length>0&&Me.set(Q.id,$e.suggestions[0])}catch($e){console.warn(`Failed to fetch suggestions for DN ${Q.id}:`,$e)}w(Me)}catch(Z){const K=Z instanceof Error?Z.message:"Unknown error occurred";console.error("Failed to fetch delivery notes:",Z),x(`Failed to load delivery notes: ${K}`),u.error(`Failed to load delivery notes: ${K}`)}finally{m(!1)}};g.useEffect(()=>{ee()},[o]);const U=g.useMemo(()=>d.map(Z=>{const K=j.get(Z.id),Ee=K?.confidence||K?.similarity,de=N.get(Z.id)||!1;let Se="suggested";return n==="automatic"&&Ee&&Ee>=.9?Se="pending_confirmation":n==="manual"&&(Se="manual"),{id:Z.id,noteNumber:Z.noteNumber||Z.deliveryNo||`DN-${Z.id.slice(0,8)}`,supplier:Z.supplier,date:Z.date||Z.docDate,total:Z.total,venue:Z.venue,isPaired:de,recommendedInvoice:K?{id:K.invoiceId||K.id,invoiceNumber:K.invoiceNumber,confidence:Ee}:void 0,pairingType:Se}}),[d,j,n,N]),ne=g.useMemo(()=>n==="automatic"?U.filter(Z=>{const K=Z.recommendedInvoice?.confidence;return K!==void 0&&K>=.9}):U,[U,n]),J=async Z=>{Z.pairingType==="pending_confirmation"&&Z.recommendedInvoice?await xe(Z):t(Z.id)},xe=async Z=>{if(Z.recommendedInvoice){A(!0),O(!1);try{const K=await Qs(Z.id);let Ee=await fetch(`${Be}/api/invoices/${Z.recommendedInvoice.id}`),de=!1;if(Ee.ok||(Ee=await fetch(`${Be}/api/manual/invoices/${Z.recommendedInvoice.id}`),de=!0),!Ee.ok)throw new Error(`Failed to fetch invoice details: ${Ee.status} ${Ee.statusText}`);const Se=await Ee.json(),W=Se.invoice||Se,me=Dl(W),Me=j.get(Z.id);let Q=Me?.quantityDifferences||[],$e=Me?.hasQuantityMismatch||!1;if(Q.length===0&&me.id)try{const jt=(await Ji(String(me.id))).suggestions?.find(gt=>gt.deliveryNoteId===Z.id);jt&&(Q=jt.quantityDifferences||[],$e=jt.hasQuantityMismatch||!1)}catch(vt){console.warn("Failed to fetch quantity differences:",vt)}const Ae={invoiceId:String(me.id||me.docId),invoiceNumber:String(me.id||me.docId||Z.recommendedInvoice.id||""),invoiceSupplier:me.supplier||"Unknown Supplier",invoiceDate:me.invoiceDate||"",invoiceTotal:me.totalValue||0,invoiceLineItems:me.lineItems||[],deliveryNoteId:Z.id,deliveryNoteNumber:Z.noteNumber||K.noteNumber||`DN-${Z.id.slice(0,8)}`,deliveryNoteSupplier:Z.supplier||K.supplier||"Unknown Supplier",deliveryNoteDate:Z.date||K.date||"",deliveryNoteTotal:Z.total||K.total||0,deliveryNoteLineItems:K.lineItems||[],confidence:Z.recommendedInvoice.confidence||.9,reason:Me?.reason||`High confidence match (${Math.round((Z.recommendedInvoice.confidence||.9)*100)}%)`,quantityDifferences:Q,hasQuantityMismatch:$e};k(Ae),O(!0)}catch(K){console.error("Failed to load pairing confirmation data:",K);const Ee=K instanceof Error?K.message:"Unknown error";u.error(`Failed to load pairing confirmation: ${Ee}`),t(Z.id)}finally{A(!1)}}},Ce=async()=>{if(C){A(!0);try{const Z=await Ks(C.invoiceId,C.deliveryNoteId);if(!Z.isValid||Z.matchScore<.8||Z.warnings.length>0){ce({invoiceId:C.invoiceId,deliveryNoteId:C.deliveryNoteId,validation:Z}),q(!0),O(!1),A(!1);return}await gi(C.invoiceId,C.deliveryNoteId),O(!1),k(null);const K=await M3();h(K);const Ee=new Map;for(const de of K)try{const Se=await Cl(de.id);Se.suggestions&&Se.suggestions.length>0&&Ee.set(de.id,Se.suggestions[0])}catch(Se){console.warn(`Failed to fetch suggestions for DN ${de.id}:`,Se)}w(Ee),t(C.deliveryNoteId),l&&l()}catch(Z){console.error("Failed to pair:",Z),console.error("Failed to pair:",Z)}finally{A(!1)}}},$=()=>{O(!1),k(null)},ie=async()=>{if(ne.length!==0){he(!0);try{const Z=ne.map(de=>de.id),K=await Yy(Z);await ee(),e&&Z.includes(e)&&t("");let Ee=`Successfully deleted ${K.deleted_count} delivery note${K.deleted_count!==1?"s":""}!`;K.skipped_count&&K.skipped_count>0&&(Ee+=` (${K.skipped_count} paired delivery note${K.skipped_count!==1?"s":""} were skipped)`),u.success(Ee),l&&l()}catch(Z){console.error("Failed to delete delivery notes:",Z);const K=Z instanceof Error?Z.message:"Unknown error";u.error(`Failed to delete delivery notes: ${K}`)}finally{he(!1),R(!1)}}},we=async Z=>{he(!0);try{console.log("[DEBUG] Deleting delivery note:",Z);const K=await Yy([Z]);if(console.log("[DEBUG] Delete result:",K),K.deleted_count>0)h(Ee=>Ee.filter(de=>de.id!==Z)),e===Z&&t(""),u.success("Delivery note deleted successfully!");else if(K.skipped_count&&K.skipped_count>0){const Ee=K.errors&&K.errors.length>0?K.errors[0]:"This delivery note is paired and cannot be deleted.";u.warning(Ee)}else{console.error("[DEBUG] Delete failed - deleted_count:",K.deleted_count,"skipped_count:",K.skipped_count,"result:",K);const Ee=K.errors&&K.errors.length>0?K.errors[0]:K.message||"Please try again.";u.error(`Failed to delete delivery note: ${Ee}`)}setTimeout(async()=>{try{await ee()}catch(Ee){console.error("Failed to refresh after deletion:",Ee)}},100),l&&l()}catch(K){console.error("Failed to delete delivery note:",K);const Ee=K instanceof Error?K.message:"Unknown error";u.error(`Failed to delete delivery note: ${Ee}`)}finally{he(!1)}};return i.jsxs("div",{className:"discrepancy-card delivery-notes-cards-section",children:[i.jsxs("div",{className:"discrepancy-card-header",children:[i.jsx(Za,{size:20}),i.jsx("h3",{className:"discrepancy-card-title",children:"Delivery Notes"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"auto"},children:[ne.length>0&&i.jsx("div",{className:"discrepancy-badge",children:ne.length}),ne.length>0&&i.jsx("button",{className:"delivery-notes-clear-all-btn",onClick:()=>R(!0),disabled:p||D||F,title:"Clear all non-paired delivery notes","aria-label":"Clear all non-paired delivery notes",children:i.jsx(Zi,{size:16})})]})]}),i.jsxs("div",{className:"delivery-notes-cards-section-content",children:[i.jsxs("div",{className:"delivery-notes-toggle-section",children:[i.jsx("div",{className:"delivery-notes-toggle-label",children:"Pairing Mode:"}),i.jsxs("div",{className:"delivery-notes-toggle-container",children:[i.jsx("button",{className:`delivery-notes-toggle-option ${n==="automatic"?"active":""}`,onClick:()=>r("automatic"),children:"Automatic"}),i.jsx("button",{className:`delivery-notes-toggle-option ${n==="manual"?"active":""}`,onClick:()=>r("manual"),children:"Manual (Recommended)"})]})]}),i.jsx("div",{className:"delivery-notes-cards-container",children:v?i.jsxs("div",{className:"delivery-notes-empty",style:{padding:"16px"},children:[i.jsx(tn,{size:32,style:{color:"var(--accent-red)",marginBottom:"8px"}}),i.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",textAlign:"center",marginBottom:"12px"},children:v}),i.jsx("button",{className:"glass-button",onClick:()=>ee(),style:{fontSize:"12px",padding:"6px 12px"},children:"Retry"})]}):p||D?i.jsxs("div",{className:"delivery-notes-loading",children:[i.jsx(sa,{size:20,className:"spinner"}),i.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"8px"},children:p?"Loading delivery notes...":"Loading pairing confirmation..."})]}):ne.length===0?i.jsxs("div",{className:"delivery-notes-empty",children:[i.jsx(Za,{size:32,style:{opacity:.3,marginBottom:"8px"}}),i.jsx("div",{style:{fontSize:"13px",color:"var(--text-muted)",textAlign:"center"},children:d.length===0?"Waiting on delivery notes to display cards":n==="automatic"?"No high-confidence pairings available":"No unmatched delivery notes"}),d.length===0&&i.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",textAlign:"center",marginTop:"8px",opacity:.7},children:"Upload or create delivery notes to get started"})]}):i.jsx("div",{className:"delivery-notes-cards-list",children:ne.map(Z=>i.jsx(EK,{deliveryNote:Z,isSelected:e===Z.id,onClick:()=>J(Z),onDelete:we},Z.id))})})]}),i.jsx(DK,{isOpen:E,onClose:$,onConfirm:Ce,onReject:$,data:C,loading:D}),te&&i.jsx(Ou,{isOpen:M,onClose:()=>{q(!1),ce(null)},onConfirm:()=>{q(!1),ce(null),l&&l()},invoiceId:te.invoiceId,deliveryNoteId:te.deliveryNoteId,initialValidation:te.validation}),i.jsx(OK,{isOpen:G,onClose:()=>R(!1),onConfirm:ie,count:ne.length,loading:F})]})}function AK(e,t){return e?/^INV-?/i.test(e)?e.toUpperCase().replace(/^INV-?/,"INV-"):`INV-${e}`:t?`INV-${String(t).slice(-4).padStart(4,"0")}`:"INV-XXXX"}function MK(e){if(!e)return[];const t=[],n=AK(e.invoiceNumber,e.id),r=`Invoice  ${n}`;if(!e.deliveryNote&&!e.matched&&t.push({id:`missing-dn-${e.id}`,type:"missing_delivery_note",severity:"warning",level:"major",title:`Invoice ${n} is not linked to a delivery note`,description:"Link a delivery note or check if this invoice was delivered.",contextLabel:r,focusTarget:"delivery_link",actions:[{actionType:"scroll",target:"delivery_link",label:"Link Delivery Note"}],contextRef:{type:"invoice",id:e.id},createdAt:new Date().toISOString()}),e.value!==void 0&&e.lineItems&&e.lineItems.length>0){const l=e.lineItems.reduce((d,h)=>{const p=h.qty||0,m=h.unitPrice||0;return d+p*m},0),o=Math.abs(e.value-l),u=Math.max(e.value*.01,10);o>u&&t.push({id:`mismatch-${e.id}`,type:"total_mismatch",severity:"critical",level:"critical",title:`Big mismatch in invoice ${n}`,description:`Total and line items differ by ${o.toFixed(2)}.`,contextLabel:r,focusTarget:"line_items",contextRef:{type:"invoice",id:e.id},createdAt:new Date().toISOString()})}return e.confidence!==null&&e.confidence!==void 0&&e.confidence<.7&&t.push({id:`low-confidence-${e.id}`,type:"low_confidence",severity:"info",level:"minor",title:`Check invoice ${n} before submitting`,description:"Some values were hard to read. Double-check totals and VAT.",contextLabel:r,focusTarget:"invoice_header",contextRef:{type:"invoice",id:e.id},createdAt:new Date().toISOString()}),e.flagged&&t.push({id:`flagged-${e.id}`,type:"flagged",severity:"warning",level:"major",title:`Invoice ${n} needs review`,description:"This invoice has been flagged for review.",contextLabel:r,focusTarget:"invoice_header",contextRef:{type:"invoice",id:e.id},createdAt:new Date().toISOString()}),t}function PK(e){const t=[],n=e.filter(l=>!l.matched&&!l.hasDeliveryNote).length;n>0&&t.push({id:"unpaired-invoices",type:"unpaired_invoices",severity:"warning",level:"major",title:`${n} invoice${n!==1?"s":""} not linked to delivery notes`,description:n===1?"One invoice needs to be linked to a delivery note.":`${n} invoices need to be linked to delivery notes.`,actions:[{actionType:"filter",target:"unpaired",label:"Show Unpaired"}],contextRef:{type:"system"},createdAt:new Date().toISOString()});const r=e.filter(l=>l.flagged||l.issuesCount&&l.issuesCount>0).length;return r>0&&t.push({id:"flagged-invoices",type:"flagged_invoices",severity:"warning",level:"major",title:`${r} invoice${r!==1?"s":""} need${r===1?"s":""} review`,description:r===1?"One invoice has been flagged and needs your attention.":`${r} invoices have been flagged and need your attention.`,actions:[{actionType:"filter",target:"flagged",label:"Show Flagged"}],contextRef:{type:"system"},createdAt:new Date().toISOString()}),t}function zK({onUpload:e}){const[t,n]=g.useState(!1),[r,l]=g.useState(0),o=g.useRef(null),u=g.useCallback(x=>{x.preventDefault(),x.stopPropagation(),l(j=>j+1),x.dataTransfer.types.includes("Files")&&n(!0)},[]),d=g.useCallback(x=>{x.preventDefault(),x.stopPropagation(),l(j=>{const w=j-1;return w===0&&n(!1),w})},[]),h=g.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.dataTransfer.types.includes("Files")&&(x.dataTransfer.dropEffect="copy")},[]),p=g.useCallback(x=>{x.preventDefault(),x.stopPropagation(),n(!1),l(0),x.dataTransfer.files&&x.dataTransfer.files.length>0&&e(x.dataTransfer.files)},[e]),m=g.useCallback(()=>{o.current?.click()},[]),v=g.useCallback(x=>{x.target.files&&x.target.files.length>0&&e(x.target.files),o.current&&(o.current.value="")},[e]);return i.jsxs("div",{className:`compact-drag-drop-zone ${t?"dragging":""}`,onDragEnter:u,onDragLeave:d,onDragOver:h,onDrop:p,onClick:m,role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),m())},"aria-label":"Drag and drop files here or click to browse",children:[i.jsxs("div",{className:"compact-zone-content",children:[i.jsx("div",{className:"compact-zone-icon",children:t?i.jsx(Xa,{size:24}):i.jsx(Mp,{size:24})}),i.jsxs("div",{className:"compact-zone-text",children:[i.jsx("span",{className:"compact-zone-title",children:t?"Drop files here":"Drag & drop files"}),i.jsx("span",{className:"compact-zone-hint",children:"or click to browse"})]})]}),i.jsx("input",{ref:o,type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.heic",onChange:v,style:{display:"none"},"aria-label":"File input"})]})}function RK({isOpen:e,type:t,title:n,message:r,onClose:l,onAction:o}){return g.useEffect(()=>{if(!e)return;const u=setTimeout(()=>{o(),l()},3e3);return()=>clearTimeout(u)},[e,o,l]),e?i.jsx("div",{className:"submission-notification-overlay",onClick:()=>{o(),l()},children:i.jsx("div",{className:"submission-notification-card",onClick:u=>u.stopPropagation(),children:t==="success"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"submission-notification-icon success-icon",children:[i.jsx("div",{className:"success-checkmark-circle",children:i.jsx(Kr,{size:48,strokeWidth:2.5})}),i.jsx("div",{className:"confetti-container",children:[...Array(8)].map((u,d)=>i.jsx("div",{className:"confetti-piece",style:{"--rotation":`${d*45}deg`,"--delay":`${d*.1}s`}},d))})]}),i.jsx("h2",{className:"submission-notification-title success-title",children:n}),i.jsx("p",{className:"submission-notification-message",children:r})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"submission-notification-icon error-icon",children:i.jsxs("div",{className:"error-cone-container",children:[i.jsx(tn,{size:48,strokeWidth:2.5}),i.jsx("div",{className:"error-dash-line"})]})}),i.jsx("h2",{className:"submission-notification-title error-title",children:n}),i.jsx("p",{className:"submission-notification-message",children:r})]})})}):null}function IK({isOpen:e,onClose:t,onConfirm:n,errors:r}){const[l,o]=g.useState(new Map),[u,d]=g.useState(null),[h,p]=g.useState("");if(!e)return null;const m=(S,C,k)=>{const E=r[S];if(!E)return;const O=E.result.errors[0];if(!O)return;const D=O.word,A=new RegExp(`\\b${D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,"gi"),M=k.replace(A,(te,ce)=>ce===O.position?C:te),q=new Map(l);q.set(E.index,M),o(q)},v=S=>{const C=r[S];if(!C)return;const k=new Map(l);k.set(C.index,C.itemDescription),o(k)},x=S=>{const C=r[S];C&&(d(S),p(C.itemDescription))},j=S=>{const C=r[S];if(!C)return;const k=new Map(l);k.set(C.index,h),o(k),d(null),p("")},w=()=>{d(null),p("")},N=()=>{const S=new Map(l);r.forEach(C=>{S.has(C.index)||S.set(C.index,C.itemDescription)}),n(S)};return i.jsx("div",{className:"modal-overlay",onClick:t,children:i.jsxs("div",{className:"modal-container",onClick:S=>S.stopPropagation(),style:{maxWidth:"700px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h2",{className:"modal-title",style:{display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx(Wa,{size:24,style:{color:"var(--accent-orange)"}}),"Spelling Check Required"]}),i.jsx("button",{className:"modal-close-button",onClick:t,"aria-label":"Close modal",children:i.jsx(sn,{size:20})})]}),i.jsxs("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:[i.jsx("div",{style:{padding:"16px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"8px",marginBottom:"20px",fontSize:"14px",color:"var(--text-secondary)"},children:"Please review the following items with potential spelling errors. You can accept suggestions, keep the original text, or edit manually."}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r.map((S,C)=>{const k=l.get(S.index)||S.itemDescription,E=u===C,O=S.result.errors[0];return i.jsxs("div",{style:{padding:"16px",border:"1px solid var(--border-color)",borderRadius:"8px",background:"var(--bg-secondary)"},children:[i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsxs("div",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"4px"},children:["Item #",S.index+1]}),E?i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"text",value:h,onChange:D=>p(D.target.value),className:"modal-form-input",style:{flex:1},autoFocus:!0,onKeyDown:D=>{D.key==="Enter"?j(C):D.key==="Escape"&&w()}}),i.jsx("button",{type:"button",className:"glass-button",onClick:()=>j(C),style:{padding:"6px 12px"},children:i.jsx(Yi,{size:16})}),i.jsx("button",{type:"button",className:"glass-button",onClick:w,style:{padding:"6px 12px"},children:i.jsx(sn,{size:16})})]}):i.jsx("div",{style:{fontSize:"14px",color:"var(--text-primary)",padding:"8px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",wordBreak:"break-word"},children:k})]}),O&&!E&&i.jsxs("div",{style:{marginTop:"12px"},children:[i.jsxs("div",{style:{fontSize:"12px",color:"var(--accent-red)",marginBottom:"8px",fontWeight:"500"},children:['Potential error: "',O.word,'"']}),O.suggestions.length>0&&i.jsxs("div",{style:{marginBottom:"12px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"var(--text-secondary)",marginBottom:"6px"},children:"Suggestions:"}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:O.suggestions.slice(0,5).map((D,A)=>i.jsx("button",{type:"button",className:"glass-button",onClick:()=>m(C,D,S.itemDescription),style:{fontSize:"12px",padding:"4px 10px",background:"rgba(59, 130, 246, 0.1)",borderColor:"var(--accent-blue)"},children:D},A))})]}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsxs("button",{type:"button",className:"glass-button",onClick:()=>v(C),style:{fontSize:"12px",padding:"6px 12px",background:l.has(S.index)&&k===S.itemDescription?"rgba(34, 197, 94, 0.2)":void 0},children:[i.jsx(Yi,{size:14,style:{marginRight:"4px"}}),"Keep as is"]}),i.jsxs("button",{type:"button",className:"glass-button",onClick:()=>x(C),style:{fontSize:"12px",padding:"6px 12px"},children:[i.jsx(V4,{size:14,style:{marginRight:"4px"}}),"Edit"]})]})]})]},S.index)})})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:t,children:"Cancel"}),i.jsx("button",{type:"button",className:"modal-button-primary",onClick:N,children:"Confirm All & Continue"})]})]})})}function xy({value:e,onChange:t,onFetchSuggestions:n,placeholder:r,className:l="",required:o=!1,debounceMs:u=400,minChars:d=2}){const h=g.useRef(null);return i.jsx("div",{className:`autocomplete-input-wrapper ${l}`,children:i.jsx("input",{ref:h,type:"text",value:e,onChange:p=>t(p.target.value),placeholder:r,required:o,className:"autocomplete-input"})})}const LK="modulepreload",$K=function(e){return"/"+e},Yk={},BK=function(t,n,r){let l=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");l=h(n.map(p=>{if(p=$K(p),p in Yk)return;Yk[p]=!0;const m=p.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":LK,m||(x.as="script"),x.crossOrigin="",x.href=p,d&&x.setAttribute("nonce",d),document.head.appendChild(x),m)return new Promise((j,w)=>{x.addEventListener("load",j),x.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return l.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})};var by,Kk;function UK(){return Kk||(Kk=1,by=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}),by}var jy,Qk;function i2(){if(Qk)return jy;Qk=1,jy=t;var e=[];function t(n,r){var l=0,o;if(!r)return e;if(n.FLAG==="long"){for(o=new Array(Math.ceil(r.length/2));l<r.length;)o[l/2]=r.slice(l,l+2),l+=2;return o}return r.split(n.FLAG==="num"?",":"")}return jy}var wy,Xk;function FK(){if(Xk)return wy;Xk=1;var e=i2();wy=o;var t=[].push,n="etaoinshrdlcumwfgypbvkjxqz".split(""),r=/\s+/,l=["qwertzuop","yxcvbnm","qaw","say","wse","dsx","sy","edr","fdc","dx","rft","gfv","fc","tgz","hgb","gv","zhu","jhn","hb","uji","kjm","jn","iko","lkm"];function o(h){var p=Object.create(null),m=Object.create(null),v=Object.create(null),x=[],j={in:[],out:[]},w=[],N=h.toString("utf8"),S=[],C=0,k=N.indexOf(`
`),E,O,D,A,M,q,te,ce,G,R,F,he,ee;for(v.KEY=[];k>-1;)U(N.slice(C,k)),C=k+1,k=N.indexOf(`
`,C);for(U(N.slice(C)),k=-1;++k<S.length;)if(O=S[k],E=O.split(r),D=E[0],D==="REP"){for(A=k+parseInt(E[1],10);++k<=A;)E=S[k].split(r),x.push([E[1],E[2]]);k--}else if(D==="ICONV"||D==="OCONV"){for(A=k+parseInt(E[1],10),ce=j[D==="ICONV"?"in":"out"];++k<=A;)E=S[k].split(r),ce.push([new RegExp(E[1],"g"),E[2]]);k--}else if(D==="COMPOUNDRULE"){for(A=k+parseInt(E[1],10);++k<=A;)for(R=S[k].split(r)[1],G=-1,w.push(R);++G<R.length;)m[R.charAt(G)]=[];k--}else if(D==="PFX"||D==="SFX"){for(A=k+parseInt(E[3],10),R={type:D,combineable:E[2]==="Y",entries:[]},p[E[1]]=R;++k<=A;){E=S[k].split(r),M=E[2],q=E[3].split("/"),te=E[4],ce={add:"",remove:"",match:"",continuation:e(v,q[1])},q&&q[0]!=="0"&&(ce.add=q[0]);try{M!=="0"&&(ce.remove=D==="SFX"?u(M):M),te&&te!=="."&&(ce.match=D==="SFX"?u(te):d(te))}catch{ce=null}ce&&R.entries.push(ce)}k--}else if(D==="TRY"){for(te=E[1],he=-1,F=[];++he<te.length;)ee=te.charAt(he),ee.toLowerCase()===ee&&F.push(ee);for(he=-1;++he<n.length;)te.indexOf(n[he])<0&&F.push(n[he]);v[D]=F}else D==="KEY"?t.apply(v[D],E[1].split("|")):D==="COMPOUNDMIN"?v[D]=Number(E[1]):D==="ONLYINCOMPOUND"?(v[D]=E[1],m[E[1]]=[]):v[D]=E[1];return isNaN(v.COMPOUNDMIN)&&(v.COMPOUNDMIN=3),v.KEY.length||(v.KEY=l),v.TRY||(v.TRY=n.concat()),v.KEEPCASE||(v.KEEPCASE=!1),{compoundRuleCodes:m,replacementTable:x,conversion:j,compoundRules:w,rules:p,flags:v};function U(ne){ne=ne.trim(),ne&&ne.charCodeAt(0)!==35&&S.push(ne)}}function u(h){return new RegExp(h+"$")}function d(h){return new RegExp("^"+h)}return wy}var Sy,Zk;function s2(){if(Zk)return Sy;Zk=1,Sy=e;function e(t,n){for(var r=-1;++r<n.length;)t=t.replace(n[r][0],n[r][1]);return t}return Sy}var Ny,Jk;function Ah(){if(Jk)return Ny;Jk=1,Ny=e;function e(t,n,r){return r&&n in t&&r.indexOf(t[n])>-1}return Ny}var Cy,eE;function qK(){if(eE)return Cy;eE=1;var e=Ah();Cy=t;function t(n,r){var l=-1;if(n.data[r])return!e(n.flags,"ONLYINCOMPOUND",n.data[r]);if(r.length>=n.flags.COMPOUNDMIN){for(;++l<n.compoundRules.length;)if(n.compoundRules[l].test(r))return!0}return!1}return Cy}var _y,tE;function Ub(){if(tE)return _y;tE=1;var e=s2(),t=qK(),n=Ah();_y=r;function r(o,u,d){var h=u.trim(),p;if(!h)return null;if(h=e(h,o.conversion.in),t(o,h))return!d&&n(o.flags,"FORBIDDENWORD",o.data[h])?null:h;if(h.toUpperCase()===h){if(p=h.charAt(0)+h.slice(1).toLowerCase(),l(o.flags,o.data[p],d))return null;if(t(o,p))return p}if(p=h.toLowerCase(),p!==h){if(l(o.flags,o.data[p],d))return null;if(t(o,p))return p}return null}function l(o,u,d){return n(o,"KEEPCASE",u)||d||n(o,"FORBIDDENWORD",u)}return _y}var ky,nE;function HK(){if(nE)return ky;nE=1;var e=Ub();ky=t;function t(n){return!!e(this,n)}return ky}var Ey,rE;function WK(){if(rE)return Ey;rE=1,Ey=e;function e(n){var r=t(n.charAt(0)),l=n.slice(1);return!l||(l=t(l),r===l)?r:r==="u"&&l==="l"?"s":null}function t(n){return n===n.toLowerCase()?"l":n===n.toUpperCase()?"u":null}return Ey}var Dy,aE;function VK(){if(aE)return Dy;aE=1;var e=WK(),t=s2(),n=Ah(),r=Ub();Dy=o;var l=[].push;function o(d){var h=this,p={},m=[],v={},x,j,w=[],N,S,C,k,E,O,D,A,M,q,te,ce,G,R,F,he,ee,U,ne,J,xe,Ce,$;if(d=t(d.trim(),h.conversion.in),!d||h.correct(d))return[];for($=e(d),S=-1;++S<h.replacementTable.length;)for(j=h.replacementTable[S],C=d.indexOf(j[0]);C>-1;)w.push(d.replace(j[0],j[1])),C=d.indexOf(j[0],C+1);for(S=-1;++S<d.length;)for(A=d.charAt(S),q=d.slice(0,S),te=d.slice(S+1),G=A.toLowerCase(),ce=G!==A,p={},C=-1;++C<h.flags.KEY.length;)if(M=h.flags.KEY[C],k=M.indexOf(G),!(k<0)){for(O=-1;++O<M.length;)if(O!==k){if(D=M.charAt(O),p[D])continue;p[D]=!0,ce&&(D=D.toUpperCase()),w.push(q+D+te)}}for(S=-1,ee=d.charAt(0),N=[""],U=1,ne=0;++S<d.length;){for(A=ee,ee=d.charAt(S+1),q=d.slice(0,S),j=A===ee?"":A+A,C=-1,E=N.length;++C<E;)C<=U&&N.push(N[C]+j),N[C]+=A;++ne<3&&(U=N.length)}for(l.apply(w,N),N=[d],j=d.toLowerCase(),(d===j||$===null)&&N.push(d.charAt(0).toUpperCase()+j.slice(1)),j=d.toUpperCase(),d!==j&&N.push(j),x={state:{},weighted:v,suggestions:m},R=u(h,x,N,w),F=0,U=Math.min(R.length,Math.pow(Math.max(15-d.length,3),3)),J=Math.max(Math.pow(10-d.length,3),1);!m.length&&F<U;)he=F+J,u(h,x,R.slice(F,he)),F=he;for(m.sort(ie),N=[],xe=[],S=-1;++S<m.length;)Ce=t(m[S],h.conversion.out),j=Ce.toLowerCase(),xe.indexOf(j)<0&&(N.push(Ce),xe.push(j));return N;function ie(Ee,de){return we(Ee,de)||Z(Ee,de)||K(Ee,de)}function we(Ee,de){return v[Ee]===v[de]?0:v[Ee]>v[de]?-1:1}function Z(Ee,de){var Se=e(Ee),W=e(de);return Se===W?0:Se===$?-1:W===$?1:void 0}function K(Ee,de){return Ee.localeCompare(de)}}function u(d,h,p,m){var v=d.flags.TRY,x=d.data,j=d.flags,w=[],N=-1,S,C,k,E,O,D,A,M,q,te,ce,G,R;if(m)for(;++N<m.length;)F(m[N],!0);for(N=-1;++N<p.length;)for(S=p[N],C="",k="",E=S.charAt(0),O=S,D=S.slice(1),A=E.toLowerCase()!==E,M=e(S),q=-1;++q<=S.length;)for(C+=k,te=O,O=D,D=O.slice(1),k=E,E=S.charAt(q+1),ce=A,E&&(A=E.toLowerCase()!==E),O&&ce!==A&&(F(C+he(O)),F(C+he(E)+he(k)+D)),F(C+O),O&&F(C+E+k+D),R=-1;++R<v.length;)G=v[R],ce&&G!==G.toUpperCase()?(M!=="s"&&(F(C+G+te),F(C+G+O)),G=G.toUpperCase(),F(C+G+te),F(C+G+O)):(F(C+G+te),F(C+G+O));return w;function F(ee,U){var ne=h.state[ee],J;ne!==!!ne&&(w.push(ee),J=r(d,ee),ne=J&&!n(j,"NOSUGGEST",x[J]),h.state[ee]=ne,ne&&(h.weighted[ee]=U?10:0,h.suggestions.push(ee))),ne&&h.weighted[ee]++}function he(ee){var U=ee.charAt(0);return(U.toLowerCase()===U?U.toUpperCase():U.toLowerCase())+ee.slice(1)}}return Dy}var Oy,iE;function GK(){if(iE)return Oy;iE=1;var e=Ub(),t=Ah();Oy=n;function n(r){var l=this,o=e(l,r,!0);return{correct:l.correct(r),forbidden:!!(o&&t(l.flags,"FORBIDDENWORD",l.data[o])),warn:!!(o&&t(l.flags,"WARN",l.data[o]))}}return Oy}var Ty,sE;function YK(){if(sE)return Ty;sE=1,Ty=e;function e(t,n,r,l){for(var o=-1,u,d,h,p,m;++o<n.entries.length;)if(u=n.entries[o],p=u.continuation,m=-1,(!u.match||u.match.test(t))&&(d=u.remove?t.replace(u.remove,""):t,d=n.type==="SFX"?d+u.add:u.add+d,l.push(d),p&&p.length))for(;++m<p.length;)h=r[p[m]],h&&e(d,h,r,l);return l}return Ty}var Ay,lE;function l2(){if(lE)return Ay;lE=1;var e=YK();Ay=l;var t=[].push,n=[];function r(o,u,d){var h=o[u];u in o?h===n?o[u]=d.concat():t.apply(h,d):o[u]=d.concat()}function l(o,u,d,h){var p=-1,m,v,x,j,w,N,S;for((!("NEEDAFFIX"in h.flags)||d.indexOf(h.flags.NEEDAFFIX)<0)&&r(o,u,d);++p<d.length;)if(m=h.rules[d[p]],d[p]in h.compoundRuleCodes&&h.compoundRuleCodes[d[p]].push(u),m){for(N=e(u,m,h.rules,[]),v=-1;++v<N.length;)if(N[v]in o||(o[N[v]]=n),m.combineable){for(x=p;++x<d.length;)if(w=h.rules[d[x]],w&&w.combineable&&m.type!==w.type)for(S=e(N[v],w,h.rules,[]),j=-1;++j<S.length;)S[j]in o||(o[S[j]]=n)}}}return Ay}var My,oE;function KK(){if(oE)return My;oE=1;var e=l2();My=n;var t=[];function n(r,l){var o=this;return e(o.data,r,o.data[l]||t,o),o}return My}var Py,cE;function QK(){if(cE)return Py;cE=1,Py=e;function e(t){var n=this;return delete n.data[t],n}return Py}var zy,uE;function XK(){if(uE)return zy;uE=1,zy=e;function e(){return this.flags.WORDCHARS||null}return zy}var Ry,dE;function ZK(){if(dE)return Ry;dE=1;var e=i2(),t=l2();Ry=r;var n=/\s/g;function r(o,u,d){for(var h=o.toString("utf8"),p=h.indexOf(`
`)+1,m=h.indexOf(`
`,p);m>-1;)h.charCodeAt(p)!==9&&l(h.slice(p,m),u,d),p=m+1,m=h.indexOf(`
`,p);l(h.slice(p),u,d)}function l(o,u,d){for(var h=o.indexOf("/"),p=o.indexOf("#"),m="",v,x;h>-1&&o.charCodeAt(h-1)===92;)o=o.slice(0,h-1)+o.slice(h),h=o.indexOf("/",h);p>-1?h>-1&&h<p?(v=o.slice(0,h),n.lastIndex=h+1,x=n.exec(o),m=o.slice(h+1,x?x.index:void 0)):v=o.slice(0,p):h>-1?(v=o.slice(0,h),m=o.slice(h+1)):v=o,v=v.trim(),v&&t(d,v,e(u.flags,m.trim()),u)}return Ry}var Iy,fE;function JK(){if(fE)return Iy;fE=1;var e=ZK();Iy=t;function t(n){var r=this,l=-1,o,u,d,h;for(e(n,r,r.data);++l<r.compoundRules.length;){for(o=r.compoundRules[l],u="",h=-1;++h<o.length;)d=o.charAt(h),u+=r.compoundRuleCodes[d].length?"(?:"+r.compoundRuleCodes[d].join("|")+")":d;r.compoundRules[l]=new RegExp(u,"i")}return r}return Iy}var Ly,pE;function eQ(){if(pE)return Ly;pE=1,Ly=e;function e(t){var n=this,r=t.toString("utf8").split(`
`),l=-1,o,u,d,h;for(n.flags.FORBIDDENWORD===void 0&&(n.flags.FORBIDDENWORD=!1),h=n.flags.FORBIDDENWORD;++l<r.length;)o=r[l].trim(),o&&(o=o.split("/"),d=o[0],u=d.charAt(0)==="*",u&&(d=d.slice(1)),n.add(d,o[1]),u&&n.data[d].push(h));return n}return Ly}var $y,hE;function tQ(){if(hE)return $y;hE=1;var e=UK(),t=FK();$y=r;var n=r.prototype;n.correct=HK(),n.suggest=VK(),n.spell=GK(),n.add=KK(),n.remove=QK(),n.wordCharacters=XK(),n.dictionary=JK(),n.personal=eQ();function r(l,o){var u=-1,d;if(!(this instanceof r))return new r(l,o);if(typeof l=="string"||e(l)?(typeof o=="string"||e(o))&&(d=[{dic:o}]):l&&("length"in l?(d=l,l=l[0]&&l[0].aff):(l.dic&&(d=[l]),l=l.aff)),!l)throw new Error("Missing `aff` in dictionary");if(l=t(l),this.data=Object.create(null),this.compoundRuleCodes=l.compoundRuleCodes,this.replacementTable=l.replacementTable,this.conversion=l.conversion,this.compoundRules=l.compoundRules,this.rules=l.rules,this.flags=l.flags,d)for(;++u<d.length;)d[u].dic&&this.dictionary(d[u].dic)}return $y}var nQ=tQ();const _o=si(nQ),rQ={},aQ=Object.freeze(Object.defineProperty({__proto__:null,default:rQ},Symbol.toStringTag,{value:"Module"})),mE=rP(aQ);var By,vE;function iQ(){if(vE)return By;vE=1;const e=mE,t=mE;By=n;function n(r){let l={},o=-1,u;d("aff"),d("dic");function d(h){e.readFile(t.join("","index."+h),(p,m)=>{o++,u=u||p,l[h]=m,o&&(r(u,u?void 0:l),u=void 0,l=void 0)})}}return By}var sQ=iQ();const lQ=si(sQ),oQ=()=>BK(()=>import("./index-DcVyDy5J.js").then(e=>e.i),[]).then(e=>e.default).catch(()=>(console.warn("Welsh dictionary not available, only English spelling will be checked"),null)),gE=new Set(["kg","g","mg","lb","oz","L","l","ml","cl","dl","m","cm","mm","km","pc","pcs","pkg","pkgs","ea","each","x","X","no","No","NO","id","ID","Id"]),cQ=new Set(["12Litre","12L","12l","pepsi","coca","cola","pink","red","blue","green","yellow","container","bottle","can","pack","box"]);let Ys=null,vi=null,yE=!1;async function o2(){if(!yE){if(yE=!0,typeof window<"u"){console.warn("Spell checking disabled in browser (requires Node.js environment)");return}try{const e=await lQ();Ys=_o(e);try{const t=await oQ();t?vi=_o(t):vi=_o({})}catch(t){console.warn("Failed to load Welsh dictionary:",t),vi=_o({})}}catch(e){console.error("Failed to initialize spell checkers:",e),Ys||(Ys=_o({})),vi===null&&(vi=_o({}))}}}o2().catch(console.error);function uQ(e){const t=e.toLowerCase().trim();return!!(!t||t.length<=2&&!gE.has(t)&&!cQ.has(t)||/^\d+$/.test(t)||gE.has(t)||/^\d+[a-z]*$/i.test(t))}function dQ(e){const t=[],n=/\b[\w']+\b/g;let r;for(;(r=n.exec(e))!==null;)t.push({word:r[0],position:r.index});return t}function fQ(e,t=5){if(!Ys||!vi)return[];const n=Ys.suggest(e),r=vi.suggest(e);return[...new Set([...n,...r])].slice(0,t)}async function pQ(e,t=["en","cy"]){if(await o2(),!Ys&&!vi)return{isValid:!0,errors:[],text:e};if(!e||!e.trim())return{isValid:!0,errors:[],text:e};const n=[],r=dQ(e);for(const{word:l,position:o}of r){if(uQ(l))continue;let u=!1;if(t.includes("en")&&Ys&&(u=u||Ys.correct(l)),t.includes("cy")&&vi&&(u=u||vi.correct(l)),!u){const d=fQ(l);n.push({word:l,suggestions:d,position:o})}}return{isValid:n.length===0,errors:n,text:e}}async function hQ(e,t=["en","cy"]){return(await Promise.all(e.map((r,l)=>pQ(r,t).then(o=>({index:l,result:o}))))).filter(({result:r})=>!r.isValid)}function kf({value:e,onChange:t,required:n,className:r="",placeholder:l}){const[o,u]=g.useState(!1),[d,h]=g.useState(new Date),p=g.useRef(null),m=g.useRef(null),v=g.useRef(!1),x=e?new Date(e+"T00:00:00"):null;g.useEffect(()=>{if(!o)return;function F(ee){if(v.current)return;const U=ee.target;(m.current?.contains(U)||p.current?.contains(U))&&(U.closest?.(".date-picker-nav-button")||U.classList?.contains("date-picker-nav-button")||U.tagName==="BUTTON"&&U.closest?.(".date-picker-popup")||m.current?.contains(U)||U.closest?.(".date-picker-input"))||u(!1)}const he=setTimeout(()=>{document.addEventListener("click",F,!0)},100);return()=>{clearTimeout(he),document.removeEventListener("click",F,!0)}},[o]),g.useEffect(()=>{o&&h(x?new Date(x.getFullYear(),x.getMonth(),1):new Date)},[o]);const j=F=>{if(!F)return"";const he=new Date(F+"T00:00:00"),ee=he.getDate().toString().padStart(2,"0"),U=(he.getMonth()+1).toString().padStart(2,"0"),ne=he.getFullYear();return`${ee}/${U}/${ne}`},w=F=>new Date(F.getFullYear(),F.getMonth()+1,0).getDate(),N=F=>{const he=new Date(F.getFullYear(),F.getMonth(),1);return he.getDay()===0?6:he.getDay()-1},S=F=>{const he=d.getFullYear(),ee=d.getMonth(),U=`${he}-${String(ee+1).padStart(2,"0")}-${String(F).padStart(2,"0")}`;t(U),u(!1)},C=()=>{const F=new Date,he=`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}-${String(F.getDate()).padStart(2,"0")}`;t(he),u(!1)},k=()=>{t(""),u(!1)},E=F=>{v.current=!0,h(he=>{const ee=new Date(he);return F==="prev"?ee.setMonth(he.getMonth()-1):ee.setMonth(he.getMonth()+1),ee}),requestAnimationFrame(()=>{setTimeout(()=>{v.current=!1},200)})},O=F=>{v.current=!0,h(he=>{const ee=new Date(he);return F==="prev"?ee.setFullYear(he.getFullYear()-1):ee.setFullYear(he.getFullYear()+1),ee}),requestAnimationFrame(()=>{setTimeout(()=>{v.current=!1},200)})},D=w(d),A=N(d),M=[];for(let F=0;F<A;F++)M.push(null);for(let F=1;F<=D;F++)M.push(F);const q=["January","February","March","April","May","June","July","August","September","October","November","December"],te=["Mo","Tu","We","Th","Fr","Sa","Su"],ce=new Date,G=F=>F===ce.getDate()&&d.getMonth()===ce.getMonth()&&d.getFullYear()===ce.getFullYear(),R=F=>x?F===x.getDate()&&d.getMonth()===x.getMonth()&&d.getFullYear()===x.getFullYear():!1;return i.jsxs("div",{className:`date-picker-container ${r}`,ref:p,children:[i.jsxs("div",{className:"date-picker-input",onClick:()=>u(!o),style:{cursor:"pointer"},children:[i.jsx("input",{type:"text",readOnly:!0,value:j(e),placeholder:l||"Select date",required:n,className:"modal-form-input",style:{cursor:"pointer"}}),i.jsx(t0,{size:18,className:"date-picker-icon"})]}),o&&i.jsxs("div",{ref:m,className:"date-picker-popup",onClick:F=>{F.stopPropagation()},onMouseDown:F=>{F.stopPropagation()},onMouseUp:F=>{F.stopPropagation()},children:[i.jsxs("div",{className:"date-picker-header",children:[i.jsxs("div",{className:"date-picker-nav",children:[i.jsx("button",{type:"button",className:"date-picker-nav-button",onClick:F=>{F.stopPropagation(),F.preventDefault(),v.current=!0,O("prev")},onMouseDown:F=>{F.stopPropagation(),F.preventDefault(),v.current=!0},"aria-label":"Previous year",children:i.jsx(pu,{size:16})}),i.jsx("button",{type:"button",className:"date-picker-nav-button",onClick:F=>{F.stopPropagation(),F.preventDefault(),v.current=!0,E("prev")},onMouseDown:F=>{F.stopPropagation(),F.preventDefault(),v.current=!0},"aria-label":"Previous month",children:i.jsx(pu,{size:14})})]}),i.jsxs("div",{className:"date-picker-month-year",children:[q[d.getMonth()]," ",d.getFullYear()]}),i.jsxs("div",{className:"date-picker-nav",children:[i.jsx("button",{type:"button",className:"date-picker-nav-button",onClick:F=>{F.stopPropagation(),F.preventDefault(),v.current=!0,E("next")},onMouseDown:F=>{F.stopPropagation(),F.preventDefault(),v.current=!0},"aria-label":"Next month",children:i.jsx(Lf,{size:14})}),i.jsx("button",{type:"button",className:"date-picker-nav-button",onClick:F=>{F.stopPropagation(),F.preventDefault(),v.current=!0,O("next")},onMouseDown:F=>{F.stopPropagation(),F.preventDefault(),v.current=!0},"aria-label":"Next year",children:i.jsx(Lf,{size:16})})]})]}),i.jsx("div",{className:"date-picker-weekdays",children:te.map(F=>i.jsx("div",{className:"date-picker-weekday",children:F},F))}),i.jsx("div",{className:"date-picker-days",children:M.map((F,he)=>F===null?i.jsx("div",{className:"date-picker-day empty"},`empty-${he}`):i.jsx("button",{type:"button",className:`date-picker-day ${R(F)?"selected":""} ${G(F)?"today":""}`,onClick:ee=>{ee.stopPropagation(),S(F)},children:F},F))}),i.jsxs("div",{className:"date-picker-footer",children:[i.jsx("button",{type:"button",className:"date-picker-footer-button",onClick:F=>{F.stopPropagation(),k()},children:"Clear"}),i.jsx("button",{type:"button",className:"date-picker-footer-button",onClick:F=>{F.stopPropagation(),C()},children:"Today"})]})]})]})}function Uy({value:e,onChange:t,venues:n=["Waterloo","Royal Oak","Main Restaurant"],className:r=""}){const[l,o]=g.useState(!1),u=g.useRef(null);return g.useEffect(()=>{function d(h){u.current&&!u.current.contains(h.target)&&o(!1)}if(l)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[l]),i.jsxs("div",{className:`venue-selector-container ${r}`,ref:u,children:[i.jsxs("div",{className:"venue-selector-input",onClick:()=>o(!l),style:{cursor:"pointer"},children:[i.jsx("input",{type:"text",readOnly:!0,value:e,placeholder:"Select venue",className:"modal-form-input",style:{cursor:"pointer",paddingRight:"40px"}}),i.jsxs("div",{className:"venue-selector-icons",children:[i.jsx(zu,{size:18,className:"venue-selector-icon"}),i.jsx(jn,{size:16,className:`venue-selector-chevron ${l?"open":""}`})]})]}),l&&i.jsx("div",{className:"venue-selector-dropdown",children:n.map(d=>i.jsx("button",{type:"button",className:`venue-selector-option ${e===d?"selected":""}`,onClick:h=>{h.stopPropagation(),t(d),o(!1)},children:d},d))})]})}function mQ({isOpen:e,onClose:t,onSuccess:n,venue:r="Waterloo",initialTab:l="invoice",editInvoiceId:o,editDNId:u,editMode:d}){const h=Th(),[p,m]=g.useState(l),[v,x]=g.useState(!1),[j,w]=g.useState(!1),[N,S]=g.useState(!1),[C,k]=g.useState(!1),E=g.useRef(null),[O,D]=g.useState("auto"),A=g.useRef(v),M=g.useRef(p),q=g.useRef(null),te=g.useRef(!1),ce=g.useRef(!1),[G,R]=g.useState(null),[F,he]=g.useState(null),[ee,U]=g.useState([]),[ne,J]=g.useState(!1),[xe,Ce]=g.useState(!1),[$,ie]=g.useState(!1),[we,Z]=g.useState(!1),[K,Ee]=g.useState(!1),[de,Se]=g.useState(null),[W,me]=g.useState(null),[Me,Q]=g.useState([]),[$e,Ae]=g.useState(!1),[vt,jt]=g.useState(!1),[gt,Xn]=g.useState(null),[pn,Wn]=g.useState(null),[ca,Mn]=g.useState(!1),[yt,Tt]=g.useState("success"),[Ur,Pn]=g.useState(""),[Ln,ln]=g.useState(""),[Ca,Fr]=g.useState(null),[oi,qr]=g.useState(!1),[Zr,Ut]=g.useState([]),[Zn,At]=g.useState(null),[Lt,Ft]=g.useState(""),[Vt,qt]=g.useState(""),[nn,on]=g.useState(new Date().toISOString().split("T")[0]),[cn,hn]=g.useState(r),[H,Ve]=g.useState([{description:"",qty:0,unit:"",price:0,total:0}]),[Gt,Dt]=g.useState(0),[ut,wt]=g.useState(0),[Yt,_t]=g.useState(0),[Ge,kt]=g.useState(20),[et,Hr]=g.useState("whole"),[Dn,Ot]=g.useState(""),[Le,ht]=g.useState(new Date().toISOString().split("T")[0]),[it,Ye]=g.useState(""),[ze,ft]=g.useState([{description:"",qty:0,unit:""}]),[rn,dt]=g.useState(""),[bt,at]=g.useState(""),[Ht,Sn]=g.useState(""),[Jn,Nt]=g.useState(""),[Kt,$n]=g.useState([{description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:"",invVat:20}]),[Nn,V]=g.useState(!1),[Pe,re]=g.useState(null),[Qe,Et]=g.useState(!1);g.useEffect(()=>{(async()=>{if(e){if(o&&d==="invoice"){Et(!0);try{const L=await fetch(`${Be}/api/manual/invoices/${o}`);if(!L.ok)throw new Error("Failed to load invoice");const z=await L.json(),ae=Dl(z.invoice||z);Ft(ae.supplier||""),qt(ae.invoiceNumber||""),on(ae.invoiceDate||new Date().toISOString().split("T")[0]),hn(ae.venue||r);const ue=ae.lineItems||[];ue.length>0&&Ve(ue.map(Ie=>({description:Ie.description||"",qty:Ie.qty||0,unit:Ie.uom||Ie.unit||"",price:Ie.unitPrice||0,total:Ie.total||0}))),Dt(ae.subtotal||0),wt(ae.vat||0),_t(ae.totalValue||0),m("invoice")}catch(L){console.error("Failed to load invoice for editing:",L),h.error("Failed to load invoice data")}finally{Et(!1)}}else if(u&&d==="delivery-note"){Et(!0);try{const L=await Qs(u);if(!L)throw new Error("Delivery note not found");if(Ye(L.supplier||""),Ot(L.noteNumber||L.deliveryNoteNumber||L.delivery_no||""),ht(L.date||L.deliveryDate||new Date().toISOString().split("T")[0]),hn(L.venue||r),L.notes){const ae=L.notes,ue=ae.match(/Driver:\s*(.+)/i),Ie=ae.match(/Vehicle:\s*(.+)/i),Ke=ae.match(/Time Window:\s*(.+)/i);ue&&at(ue[1].trim()),Ie&&Sn(Ie[1].trim()),Ke&&Nt(Ke[1].trim())}const z=L.lineItems||L.line_items||[];z.length>0&&ft(z.map(ae=>({description:ae.description||ae.item||"",qty:ae.qty||ae.quantity||0,unit:ae.unit||ae.uom||"",weight:ae.weight}))),m("delivery-note")}catch(L){console.error("Failed to load delivery note for editing:",L),h.error("Failed to load delivery note data")}finally{Et(!1)}}}})()},[e,o,u,d,r,h]);const[Cn,Mt]=g.useState(!1),[pt,$t]=g.useState(null),Wr=["Waterloo","Royal Oak","Main Restaurant"],ua="manualInvoiceFormData",_a="manualDNFormData",I="manualUnifiedFormData",ge="manualFormMode",De=()=>{try{if(v){const P={supplier:Lt,invoiceNumber:Vt,invoiceDate:nn,selectedVenue:cn,unifiedLineItems:Kt,noteNumber:Dn,dnDate:Le,dnSupplier:it,driver:bt,vehicle:Ht,timeWindow:Jn,vatPercentage:Ge,vatMode:et};localStorage.setItem(I,JSON.stringify(P)),localStorage.setItem(ge,JSON.stringify({unifiedMode:!0,activeTab:p}))}else if(p==="invoice"){const P={supplier:Lt,invoiceNumber:Vt,invoiceDate:nn,selectedVenue:cn,invoiceLineItems:H,vatPercentage:Ge,vatMode:et};localStorage.setItem(ua,JSON.stringify(P)),localStorage.setItem(ge,JSON.stringify({unifiedMode:!1,activeTab:"invoice"}))}else{const P={noteNumber:Dn,dnDate:Le,dnSupplier:it,dnLineItems:ze,driver:bt,vehicle:Ht,timeWindow:Jn,selectedVenue:cn};localStorage.setItem(_a,JSON.stringify(P)),localStorage.setItem(ge,JSON.stringify({unifiedMode:!1,activeTab:"delivery-note"}))}}catch(P){console.error("Failed to save form data:",P)}},_e=()=>{try{const P=localStorage.getItem(ge);if(!P)return;const{unifiedMode:L,activeTab:z}=JSON.parse(P);if(L){const ae=localStorage.getItem(I);if(ae){const ue=JSON.parse(ae);Ft(ue.supplier||""),qt(ue.invoiceNumber||""),on(ue.invoiceDate||new Date().toISOString().split("T")[0]),hn(ue.selectedVenue||r),$n(ue.unifiedLineItems||[{description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:"",invVat:20}]),Ot(ue.noteNumber||""),ht(ue.dnDate||new Date().toISOString().split("T")[0]),Ye(ue.dnSupplier||""),at(ue.driver||""),Sn(ue.vehicle||""),Nt(ue.timeWindow||""),kt(ue.vatPercentage||20),Hr(ue.vatMode||"whole"),x(!0),m("invoice")}}else if(z==="invoice"){const ae=localStorage.getItem(ua);if(ae){const ue=JSON.parse(ae);Ft(ue.supplier||""),qt(ue.invoiceNumber||""),on(ue.invoiceDate||new Date().toISOString().split("T")[0]),hn(ue.selectedVenue||r),Ve(ue.invoiceLineItems||[{description:"",qty:0,unit:"",price:0,total:0}]),kt(ue.vatPercentage||20),Hr(ue.vatMode||"whole"),x(!1),m("invoice")}}else{const ae=localStorage.getItem(_a);if(ae){const ue=JSON.parse(ae);Ot(ue.noteNumber||""),ht(ue.dnDate||new Date().toISOString().split("T")[0]),Ye(ue.dnSupplier||""),ft(ue.dnLineItems||[{description:"",qty:0,unit:""}]),at(ue.driver||""),Sn(ue.vehicle||""),Nt(ue.timeWindow||""),hn(ue.selectedVenue||r),x(!1),m("delivery-note")}}}catch(P){console.error("Failed to restore form data:",P)}},Oe=()=>{try{localStorage.removeItem(ua),localStorage.removeItem(_a),localStorage.removeItem(I),localStorage.removeItem(ge)}catch(P){console.error("Failed to clear form data:",P)}};g.useEffect(()=>{e&&(_e(),localStorage.getItem(ge)||m(l))},[e,l]),g.useEffect(()=>{p==="invoice"&&!v&&be(H)},[Ge,et]),g.useEffect(()=>{et==="per-item"&&($n(P=>P.map(L=>({...L,invVat:L.invVat!==void 0?L.invVat:Ge}))),Ve(P=>P.map(L=>({...L,vat:L.vat!==void 0?L.vat:Ge}))))},[et,Ge]),g.useLayoutEffect(()=>{const P=A.current!==v,L=M.current!==p;if((P||L)&&E.current&&!ce.current){ce.current=!0;const z=q.current??E.current.scrollHeight;A.current=v,M.current=p,D(z),E.current.offsetHeight,requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(E.current){const ae=E.current.scrollHeight;Math.abs(ae-z)>2?(D(ae),q.current=null,setTimeout(()=>{D("auto"),ce.current=!1},420)):(D("auto"),q.current=null,ce.current=!1)}else ce.current=!1})})}else A.current=v,M.current=p},[v,p]);const be=P=>{const L=P.reduce((ue,Ie)=>ue+(Ie.total||0),0);let z=0;et==="whole"?z=L*(Ge/100):z=P.reduce((ue,Ie)=>{const Ke=Ie.vat!==void 0?Ie.vat:Ge;return ue+Ie.total*(Ke/100)},0);const ae=L+z;Dt(L),wt(z),_t(ae)},ve=(P,L,z)=>{const ae=[...H];if(L==="qty"?ae[P]={...ae[P],[L]:Math.floor(Number(z))||0}:ae[P]={...ae[P],[L]:z},et==="per-item"&&ae[P].vat===void 0&&(ae[P].vat=Ge),L==="qty"||L==="price"){const ue=L==="qty"?Math.floor(Number(z))||0:ae[P].qty,Ie=L==="price"?Number(z):ae[P].price;ae[P].total=ue*Ie}Ve(ae),be(ae)},Re=()=>{const P={description:"",qty:0,unit:"",price:0,total:0};et==="per-item"&&(P.vat=Ge),Ve([...H,P])},st=P=>{if(H.length>1){const L=H.filter((z,ae)=>ae!==P);Ve(L),be(L)}},ot=(P,L,z)=>{const ae=[...ze];L==="qty"?ae[P]={...ae[P],[L]:Math.floor(Number(z))||0}:ae[P]={...ae[P],[L]:z},ft(ae)},mt=()=>{ft([...ze,{description:"",qty:0,unit:"",weight:0}])},tt=P=>{ze.length>1&&ft(ze.filter((L,z)=>z!==P))},Te=(P,L,z)=>{const ae=[...Kt];if(L==="invQty"||L==="dnQty"?ae[P]={...ae[P],[L]:Math.floor(Number(z))||0}:ae[P]={...ae[P],[L]:z},et==="per-item"&&ae[P].invVat===void 0&&(ae[P].invVat=Ge),L==="invQty"||L==="invPrice"){const ue=L==="invQty"?Math.floor(Number(z))||0:ae[P].invQty,Ie=L==="invPrice"?Number(z):ae[P].invPrice;ae[P].invTotal=ue*Ie}$n(ae)},Fe=()=>{const P={description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:""};et==="per-item"&&(P.invVat=Ge),$n([...Kt,P])},an=P=>{Kt.length>1&&$n(Kt.filter((L,z)=>z!==P))},Qt=()=>{const P=Kt.reduce((ae,ue)=>ae+(ue.invTotal||0),0);let L=0;et==="whole"?L=P*(Ge/100):L=Kt.reduce((ae,ue)=>{const Ie=ue.invVat!==void 0?ue.invVat:Ge;return ae+ue.invTotal*(Ie/100)},0);const z=P+L;return{subtotal:P,vat:L,total:z}},gr=(P=!1)=>{const L=P&&G?G.supplier:Lt,z=P&&G?G.date:nn,ae=P&&G?G.lineItems:H;Ye(L),ht(z);const ue=ae.filter(Ie=>Ie.description.trim()!=="").map(Ie=>({description:Ie.description,qty:Ie.qty,unit:Ie.unit}));ue.length>0&&ft(ue.length>0?ue:[{description:"",qty:0,unit:"",weight:0}]),k(!0),S(!0),p!=="delivery-note"&&m("delivery-note"),setTimeout(()=>{S(!1)},3e3)},er=Lt.trim()!==""||H.some(P=>P.description.trim()!==""),Mr=G!==null,rl=async(P,L)=>{const z=[];try{let ae=await fetch(`${Be}/api/manual/invoices/${P}`);if(ae.ok||(ae=await fetch(`${Be}/api/invoices/${P}`)),!ae.ok)return z.push("Failed to fetch created invoice for verification"),{isValid:!1,errors:z};const ue=await ae.json(),Ie=ue.invoice||ue,Ke=Dl(Ie);Ke.supplier?.toLowerCase().trim()!==L.supplier.toLowerCase().trim()&&z.push(`Supplier mismatch: expected "${L.supplier}", got "${Ke.supplier||"missing"}"`);const nt=Ke.invoiceNumber||"";nt&&nt.toLowerCase().trim()!==L.invoiceNumber.toLowerCase().trim()&&z.push(`Invoice number mismatch: expected "${L.invoiceNumber}", got "${nt||"missing"}"`);const _n=new Date(L.date).toISOString().split("T")[0],kn=Ke.invoiceDate;if(kn){const Vn=new Date(kn).toISOString().split("T")[0];Vn!==_n&&z.push(`Date mismatch: expected "${_n}", got "${Vn}"`)}else z.push("Date is missing in created invoice");Ke.venue?.toLowerCase().trim()!==L.venue.toLowerCase().trim()&&z.push(`Venue mismatch: expected "${L.venue}", got "${Ke.venue||"missing"}"`);const da=Ke.totalValue||0;Math.abs(da-L.total)>.01&&z.push(`Total mismatch: expected ${L.total}, got ${da}`);const rt=Ke.lineItems||Ke.line_items||[],fa=L.lineItems.filter(Vn=>Vn.description.trim()!=="");if(rt.length!==fa.length)z.push(`Line item count mismatch: expected ${fa.length}, got ${rt.length}`);else for(const Vn of fa){const Ei=rt.find(Mh=>(Mh.description||"").toLowerCase().trim()===Vn.description.toLowerCase().trim());if(!Ei){z.push(`Line item not found: "${Vn.description}"`);continue}const Di=Ei.qty||0;Math.abs(Di-Vn.qty)>.01&&z.push(`Quantity mismatch for "${Vn.description}": expected ${Vn.qty}, got ${Di}`);const ad=Ei.unitPrice||0;Math.abs(ad-Vn.price)>.01&&z.push(`Price mismatch for "${Vn.description}": expected ${Vn.price}, got ${ad}`);const cc=Ei.total||0;Math.abs(cc-Vn.total)>.01&&z.push(`Line total mismatch for "${Vn.description}": expected ${Vn.total}, got ${cc}`)}return{isValid:z.length===0,errors:z}}catch(ae){return z.push(`Verification error: ${ae instanceof Error?ae.message:"Unknown error"}`),{isValid:!1,errors:z}}},ac=async(P,L,z)=>{const ae=[];try{let ue=z;if(!ue&&(ue=await Qs(P),!ue))return ae.push("Failed to fetch created delivery note for verification"),{isValid:!1,errors:ae};console.log("[DEBUG] verifyCreatedDeliveryNote: dnData keys:",Object.keys(ue)),console.log("[DEBUG] verifyCreatedDeliveryNote: dnData.supplier:",ue.supplier),console.log("[DEBUG] verifyCreatedDeliveryNote: dnData.noteNumber:",ue.noteNumber),console.log("[DEBUG] verifyCreatedDeliveryNote: dnData.deliveryNoteNumber:",ue.deliveryNoteNumber),console.log("[DEBUG] verifyCreatedDeliveryNote: dnData.delivery_note_number:",ue.delivery_note_number);const Ie=ue.supplier||ue.supplierName||"";Ie?.toLowerCase().trim()!==L.supplier.toLowerCase().trim()&&ae.push(`Supplier mismatch: expected "${L.supplier}", got "${Ie||"missing"}"`);const Ke=ue.noteNumber||ue.note_number||ue.deliveryNo||ue.deliveryNoteNumber||ue.delivery_note_number||"";Ke?.toLowerCase().trim()!==L.noteNumber.toLowerCase().trim()&&ae.push(`Note number mismatch: expected "${L.noteNumber}", got "${Ke||"missing"}"`);const nt=new Date(L.date).toISOString().split("T")[0],_n=ue.date||ue.deliveryDate;if(_n){const kn=new Date(_n).toISOString().split("T")[0];kn!==nt&&ae.push(`Date mismatch: expected "${nt}", got "${kn}"`)}else ae.push("Date is missing in created delivery note");if(ue.venue&&ue.venue.toLowerCase().trim()!==L.venue.toLowerCase().trim()&&ae.push(`Venue mismatch: expected "${L.venue}", got "${ue.venue}"`),!z){const kn=ue.lineItems||ue.line_items||[],da=L.lineItems.filter(rt=>rt.description.trim()!=="");if(kn.length!==da.length)ae.push(`Line item count mismatch: expected ${da.length}, got ${kn.length}`);else for(const rt of da){const fa=kn.find(Di=>(Di.description||"").toLowerCase().trim()===rt.description.toLowerCase().trim());if(!fa){ae.push(`Line item not found: "${rt.description}"`);continue}const Vn=fa.qty||0;Math.abs(Vn-rt.qty)>.01&&ae.push(`Quantity mismatch for "${rt.description}": expected ${rt.qty}, got ${Vn}`);const Ei=fa.unit||fa.uom||"";if(Ei?.toLowerCase().trim()!==rt.unit.toLowerCase().trim()&&ae.push(`Unit mismatch for "${rt.description}": expected "${rt.unit}", got "${Ei||"missing"}"`),rt.weight!==void 0){const Di=fa.weight||0;Math.abs(Di-rt.weight)>.01&&ae.push(`Weight mismatch for "${rt.description}": expected ${rt.weight}, got ${Di}`)}}}return{isValid:ae.length===0,errors:ae}}catch(ue){return ae.push(`Verification error: ${ue instanceof Error?ue.message:"Unknown error"}`),{isValid:!1,errors:ae}}},gs=async(P,L)=>{Z(!0);try{const z=await a0(),ae=new Date(L);z.find(Ie=>{if(Ie.supplier?.toLowerCase()!==P.toLowerCase()||!Ie.date)return!1;const Ke=new Date(Ie.date);return Math.abs((ae.getTime()-Ke.getTime())/(1e3*60*60*24))<=3})||ie(!0)}catch(z){console.warn("Failed to check for delivery notes:",z)}finally{Z(!1)}},ys=async P=>{Ce(!0);try{const L=await Ji(P);L.suggestions&&L.suggestions.length>0&&(U(L.suggestions),J(!0))}catch(L){console.warn("Failed to fetch pairing suggestions:",L)}finally{Ce(!1)}},Hl=async(P,L)=>{const z=P.map((ue,Ie)=>({item:ue,originalIndex:Ie})).filter(({item:ue})=>ue.description.trim()!=="");if(z.length===0)return!0;const ae=z.map(({item:ue})=>ue.description.trim());try{const ue=await hQ(ae,["en","cy"]);if(ue.length>0){const Ie=ue.map(({index:Ke,result:nt})=>{const{originalIndex:_n,item:kn}=z[Ke];return{index:_n,itemDescription:kn.description.trim(),result:nt}});return Ut(Ie),qr(!0),!1}return!0}catch(ue){return console.error("Error checking spelling:",ue),!0}},ic=P=>{if(p==="invoice"){const L=[...H];P.forEach((z,ae)=>{L[ae]&&(L[ae]={...L[ae],description:z})}),Ve(L)}else if(p==="delivery-note"){const L=[...ze];P.forEach((z,ae)=>{L[ae]&&(L[ae]={...L[ae],description:z})}),ft(L)}else if(v){const L=[...Kt];P.forEach((z,ae)=>{L[ae]&&(L[ae]={...L[ae],description:z})}),$n(L)}qr(!1),Ut([]),Zn&&(Zn(),At(null))},rd=async P=>{P.preventDefault(),re(null),V(!0);try{if(!Lt.trim()||!Vt.trim()){re("Please fill in supplier and invoice number"),V(!1);return}const L=H.filter(ae=>ae.description.trim()!=="");if(L.length===0){re("Please add at least one line item with a description"),V(!1);return}if(!await Hl(H,"invoice")){At(()=>()=>{const ae=H.filter(ue=>ue.description.trim()!=="");xs(ae)}),V(!1);return}await xs(L)}catch(L){console.error("Error in handleInvoiceSubmit:",L),re(L.message||"Failed to submit invoice"),V(!1)}},xs=async P=>{V(!0);try{try{const ue=`${Be||window.location.origin}/api/health`;console.log("[handleInvoiceSubmit] Checking backend health at:",ue);const Ie=new AbortController,Ke=setTimeout(()=>Ie.abort(),3e3);try{const nt=await fetch(ue,{method:"GET",cache:"no-cache",signal:Ie.signal});if(clearTimeout(Ke),!nt.ok)throw new Error(`Backend health check failed: ${nt.status} ${nt.statusText}`);console.log("[handleInvoiceSubmit] Backend health check passed")}catch(nt){throw clearTimeout(Ke),nt.name==="AbortError"?new Error("TIMEOUT"):nt}}catch(ue){const Ie=ue.message==="TIMEOUT"||ue.name==="AbortError",Ke=Be?`${Be}/api/health`:`${window.location.origin}/api/health`,nt=Ie?`Backend server is not responding (timeout after 3 seconds).

Please ensure:
1. Backend is running on port 8000
2. Run: python -m uvicorn backend.main:app --host 0.0.0.0 --port 8000
3. Or use: start_backend_8000.bat

(Attempted: ${Ke})`:`Cannot connect to backend server: ${ue.message}.

Please ensure the backend is running on port 8000.
(Attempted: ${Ke})`;console.error("[handleInvoiceSubmit] Backend health check failed:",ue),re(nt),V(!1);return}const L={supplier:Lt,invoiceNumber:Vt,date:nn,venue:cn,lineItems:P,subtotal:Gt,vat:ut,total:Yt};console.log("[handleInvoiceSubmit]",o?"Updating":"Creating","invoice with data:",L);let z,ae;if(o)ae=await JE(o,L),z=o;else{if(ae=await AS(L),z=ae.id||ae.invoiceId||ae.invoice_id||ae.invoice?.id,!z){console.warn("Invoice created but no ID returned in response:",ae),re("Invoice created but no ID returned. Please check if it was created successfully."),V(!1);return}const ue=await rl(String(z),L);if(!ue.isValid){try{await Eo([String(z)])}catch(Ie){console.error("Failed to delete invalid invoice:",Ie)}Tt("error"),Pn("OH NO..."),ln(ue.errors.length>0?`Something went wrong. ${ue.errors.slice(0,2).join(". ")}. Let's try again.`:"Something went wrong, let's try again."),Mn(!0),V(!1);return}}if(he(String(z)),R({supplier:Lt,date:nn,lineItems:H.filter(ue=>ue.description.trim()!=="")}),gt)try{const ue=await gi(String(z),gt);ue.warnings&&ue.warnings.length>0?(Tt("success"),Pn("SUCCESS!"),ln(`Congratulations, your upload was successful. Note: ${ue.warnings.slice(0,1).join(", ")}.`)):(Tt("success"),Pn("SUCCESS!"),ln("Congratulations, your upload was successful.")),Xn(null),Fr(()=>{setTimeout(()=>{n(String(z),"invoice"),Ft(""),qt(""),on(new Date().toISOString().split("T")[0]),Ve([{description:"",qty:0,unit:"",price:0,total:0}]),Dt(0),wt(0),_t(0)},0)}),Mn(!0),V(!1);return}catch(ue){console.warn("Failed to auto-pair invoice with delivery note:",ue),Tt("success"),Pn("SUCCESS!"),ln("Congratulations, your upload was successful. Pairing with delivery note failed, but you can pair it manually later."),Fr(()=>{setTimeout(()=>{n(String(z),"invoice"),Ft(""),qt(""),on(new Date().toISOString().split("T")[0]),Ve([{description:"",qty:0,unit:"",price:0,total:0}]),Dt(0),wt(0),_t(0)},0)}),Mn(!0),V(!1);return}!o&&!gt&&await gs(Lt,nn),o||await ys(String(z)),Tt("success"),Pn("SUCCESS!"),ln(o?"Invoice updated successfully!":"Congratulations, your upload was successful."),Fr(()=>{setTimeout(()=>{n(String(z),"invoice"),o||(Ft(""),qt(""),on(new Date().toISOString().split("T")[0]),Ve([{description:"",qty:0,unit:"",price:0,total:0}]),Dt(0),wt(0),_t(0))},0)}),Mn(!0)}catch(L){re(L instanceof Error?L.message:"Failed to create invoice")}finally{V(!1)}},Ga=async P=>{jt(!0);try{const L=await Cl(P);L.suggestions&&L.suggestions.length>0&&(Q(L.suggestions),Ae(!0))}catch(L){console.warn("Failed to fetch invoice suggestions:",L)}finally{jt(!1)}},sc=async P=>{if(!(!W||!P.invoiceId)){V(!0);try{const L=await Ks(P.invoiceId,W);if(!L.isValid||L.matchScore<.8||L.warnings.length>0){Se({invoiceId:P.invoiceId,deliveryNoteId:W,validation:L}),Ee(!0),V(!1);return}await gi(P.invoiceId,W),h.success("Invoice paired with delivery note successfully!"),Ae(!1),setTimeout(()=>{n()},0)}catch(L){re(L instanceof Error?L.message:"Failed to pair invoice")}finally{V(!1)}}},al=async P=>{if(!(!F||!P.deliveryNoteId)){V(!0);try{const L=await Ks(F,P.deliveryNoteId);if(!L.isValid||L.matchScore<.8||L.warnings.length>0){Se({invoiceId:F,deliveryNoteId:P.deliveryNoteId,validation:L}),Ee(!0),V(!1);return}await gi(F,P.deliveryNoteId),h.success("Invoice paired with delivery note successfully!"),J(!1),setTimeout(()=>{n(F,"invoice")},0)}catch(L){re(L instanceof Error?L.message:"Failed to pair invoice")}finally{V(!1)}}},ci=()=>{ie(!1),gr(!0)},lc=()=>{ie(!1)},Wl=async P=>{if(P.preventDefault(),!Nn){re(null),V(!0);try{const L=Kt.some(ue=>ue.description.trim()!=="");if(!Lt.trim()||!Vt.trim()){re("Please fill in supplier and invoice number"),V(!1);return}const z=Kt.filter(ue=>ue.description.trim()!=="");if(z.length===0){re("Please add at least one line item with a description"),V(!1);return}if(!await Hl(Kt,"unified")){At(()=>()=>{const ue=Kt.filter(Ie=>Ie.description.trim()!=="");oc(ue)}),V(!1);return}await oc(z)}catch(L){console.error("Error in handleUnifiedSubmit:",L),re(L.message||"Failed to submit"),V(!1)}}},oc=async P=>{V(!0);try{if(!hasLineItems){re("Please add at least one line item with a description"),V(!1);return}const L=Qt(),z={supplier:Lt,invoiceNumber:Vt,date:nn,venue:cn,lineItems:Kt.filter(rt=>rt.description.trim()!=="").map(rt=>({description:rt.description,qty:rt.invQty||0,unit:rt.unit||"",price:rt.invPrice||0,total:rt.invTotal||0,vat:et==="per-item"?rt.invVat||Ge:void 0})),subtotal:L.subtotal,vat:L.vat,total:L.total},ae=await AS(z),ue=ae.id||ae.invoiceId||ae.invoice_id||ae.invoice?.id;if(!ue){re("Invoice created but no ID returned"),V(!1);return}const Ie=await rl(String(ue),z),Ke=it.trim()||Lt.trim();if(!Ke){if(Ie.isValid)try{await Eo([String(ue)])}catch(rt){console.error("Failed to delete invoice:",rt)}re("Please fill in supplier for delivery note"),V(!1);return}const nt={noteNumber:Dn.trim()||`DN-${Vt}`,date:Le||nn,supplier:Ke,lineItems:Kt.filter(rt=>rt.description.trim()!=="").map(rt=>({description:rt.description,qty:rt.dnQty||0,unit:rt.unit||"",weight:rt.dnWeight||0})),driver:bt.trim()||void 0,vehicle:Ht.trim()?Ht.trim().toUpperCase():void 0,timeWindow:Jn.trim()||void 0,venue:cn},_n=await MS(nt),kn=_n.id||_n.deliveryNoteId||_n.delivery_note_id;if(!kn){if(Ie.isValid)try{await Eo([String(ue)])}catch(rt){console.error("Failed to delete invoice:",rt)}re("Delivery note created but no ID returned"),V(!1);return}const da=await ac(String(kn),{noteNumber:Dn.trim()||`DN-${Vt}`,date:Le||nn,supplier:Ke,venue:cn,lineItems:Kt.filter(rt=>rt.description.trim()!=="").map(rt=>({description:rt.description,qty:rt.dnQty||0,unit:rt.unit||"",weight:rt.dnWeight||0}))});if(!Ie.isValid||!da.isValid){const rt=[...Ie.isValid?[]:Ie.errors,...da.isValid?[]:da.errors];try{Ie.isValid||await Eo([String(ue)]),da.isValid||await Yy([String(kn)])}catch(fa){console.error("Failed to delete invalid records:",fa)}Tt("error"),Pn("OH NO..."),ln(rt.length>0?`Something went wrong. ${rt.slice(0,2).join(". ")}. Let's try again.`:"Something went wrong, let's try again."),Mn(!0),V(!1);return}try{await gi(String(ue),String(kn)),Tt("success"),Pn("SUCCESS!"),ln("Congratulations, your upload was successful.")}catch(rt){console.warn("Failed to auto-pair:",rt),Tt("success"),Pn("SUCCESS!"),ln("Congratulations, your upload was successful. Pairing failed, but you can pair them manually.")}Fr(()=>{setTimeout(()=>{n(String(ue),"both"),Ft(""),qt(""),on(new Date().toISOString().split("T")[0]),Ot(""),ht(new Date().toISOString().split("T")[0]),Ye(""),$n([{description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:""}]),at(""),Sn(""),Nt(""),setTimeout(()=>{ui(!1)},500)},0)}),Mn(!0)}catch(L){re(L instanceof Error?L.message:"Failed to create invoice and delivery note")}finally{V(!1)}},Vl=async P=>{if(P.preventDefault(),!Nn){re(null),V(!0);try{if(!Dn.trim()||!it.trim()){re("Please fill in note number and supplier"),V(!1);return}const L=ze.filter(ae=>ae.description.trim()!=="");if(L.length===0){re("Please add at least one line item with a description"),V(!1);return}if(!await Hl(ze,"dn")){At(()=>()=>{const ae=ze.filter(ue=>ue.description.trim()!=="");il(ae)}),V(!1);return}await il(L)}catch(L){console.error("Error in handleDNSubmit:",L),re(L.message||"Failed to submit delivery note"),V(!1)}}},il=async P=>{V(!0);try{const L=it.trim()||Lt.trim();if(!L){re("Please fill in supplier for delivery note"),V(!1);return}const z={noteNumber:Dn.trim(),date:Le||new Date().toISOString().split("T")[0],supplier:L,lineItems:ze.filter(_n=>_n.description.trim()!==""),supervisor:rn.trim()||void 0,driver:bt.trim()||void 0,vehicle:Ht.trim()?Ht.trim().toUpperCase():void 0,timeWindow:Jn.trim()||void 0,venue:cn};console.log("[DEBUG] ManualInvoiceOrDNModal: Submitting DN data:",{noteNumber:z.noteNumber,date:z.date,supplier:z.supplier,venue:z.venue,lineItemsCount:z.lineItems.length});const ae=MS(z),ue=new Promise((_n,kn)=>setTimeout(()=>kn(new Error("Request timeout - please try again")),1e4)),Ie=await Promise.race([ae,ue]),Ke=Ie.id||Ie.deliveryNoteId||Ie.delivery_note_id;if(!Ke){re("Delivery note created but no ID returned"),V(!1);return}let nt={isValid:!0,errors:[]};nt&&nt.isValid,me(String(Ke)),Wn({supplier:L,date:Le||new Date().toISOString().split("T")[0],lineItems:ze.filter(_n=>_n.description.trim()!==""),venue:cn}),Tt("success"),Pn("SUCCESS!"),ln("Congratulations, your upload was successful."),Fr(()=>{setTimeout(()=>{console.log("[DEBUG] ManualInvoiceOrDNModal: Triggering refresh for delivery note",Ke),n(void 0,"delivery-note"),Ot(""),ht(new Date().toISOString().split("T")[0]),Ye(""),ft([{description:"",qty:0,unit:"",weight:0}]),dt(""),at(""),Sn(""),Nt(""),k(!1)},0)}),Mn(!0),Ga(String(Ke)).catch(_n=>{console.warn("Failed to fetch invoice suggestions:",_n)})}catch(L){re(L instanceof Error?L.message:"Failed to create delivery note")}finally{V(!1)}},ui=(P=!1)=>{P?De():(Oe(),Ft(""),qt(""),on(new Date().toISOString().split("T")[0]),hn(r),Ve([{description:"",qty:0,unit:"",price:0,total:0}]),Dt(0),wt(0),_t(0),Ot(""),ht(new Date().toISOString().split("T")[0]),Ye(""),ft([{description:"",qty:0,unit:""}]),dt(""),at(""),Sn(""),Nt(""),$n([{description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:"",invVat:20}]),m(l),x(!1)),re(null),S(!1),k(!1),R(null),he(null),U([]),J(!1),Ce(!1),ie(!1),Z(!1),me(null),Q([]),Ae(!1),jt(!1),Xn(null),Wn(null),t()},yr=()=>{De(),h.success("Form data saved"),ui(!0)},ka=(P,L,z)=>{E.current&&(q.current=E.current.scrollHeight,te.current=P&&!v);const ae=[...Kt];if(P){x(!0),m("invoice");const ue=!L&&(Lt||Vt||H.some(Ke=>Ke.description.trim()!=="")),Ie=!z&&(it||Dn||ze.some(Ke=>Ke.description.trim()!==""));if(ue&&Ie){const Ke=[];H.forEach(nt=>{const _n=ze.find(kn=>kn.description.trim()!==""&&nt.description.trim()!==""&&kn.description.toLowerCase().trim()===nt.description.toLowerCase().trim());Ke.push({description:nt.description,invQty:nt.qty,invPrice:nt.unitPrice,invTotal:nt.total,invVat:nt.vat||Ge,dnQty:_n?_n.qty:0,dnWeight:_n?.weight||0,unit:nt.unit||_n?.unit||""})}),ze.forEach(nt=>{nt.description.trim()!==""&&(Ke.some(kn=>kn.description.trim()!==""&&kn.description.toLowerCase().trim()===nt.description.toLowerCase().trim())||Ke.push({description:nt.description,invQty:0,invPrice:0,invTotal:0,invVat:Ge,dnQty:nt.qty,dnWeight:nt.weight||0,unit:nt.unit||""}))}),$n(Ke.length>0?Ke:[{description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:"",invVat:Ge}])}else if(ue){const Ke=H.map(nt=>({description:nt.description,invQty:nt.qty,invPrice:nt.unitPrice,invTotal:nt.total,invVat:nt.vat||Ge,dnQty:0,dnWeight:0,unit:nt.unit||""}));$n(Ke.length>0?Ke:[{description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:"",invVat:Ge}])}else if(Ie){const Ke=ze.map(nt=>({description:nt.description,invQty:0,invPrice:0,invTotal:0,invVat:Ge,dnQty:nt.qty,dnWeight:nt.weight||0,unit:nt.unit||""}));$n(Ke.length>0?Ke:[{description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:"",invVat:Ge}]),it&&!Lt&&Ft(it)}else $n([{description:"",invQty:0,invPrice:0,invTotal:0,dnQty:0,dnWeight:0,unit:"",invVat:Ge}]);L&&(Ft(""),qt(""),on(new Date().toISOString().split("T")[0]),Ve([{description:"",qty:0,unit:"",price:0,total:0}]),Dt(0),wt(0),_t(0)),z&&(Ye(""),Ot(""),ht(new Date().toISOString().split("T")[0]),ft([{description:"",qty:0,unit:""}]),at(""),Sn(""),Nt(""))}else{if(v){if(!L){const ue=ae.length>0?ae.map(Ie=>({description:Ie.description||"",qty:Ie.invQty||0,unit:Ie.unit||"",price:Ie.invPrice||0,total:Ie.invTotal||0,vat:Ie.invVat||Ge})):[{description:"",qty:0,unit:"",price:0,total:0,vat:Ge}];Ve(ue)}if(!z){const ue=ae.length>0?ae.map(Ie=>({description:Ie.description||"",qty:Ie.dnQty||0,unit:Ie.unit||"",weight:Ie.dnWeight||0})):[{description:"",qty:0,unit:""}];ft(ue),Lt&&!it&&Ye(Lt)}x(!1),pt?.type==="individual-dn"?m("delivery-note"):m("invoice")}else pt?.type==="individual-invoice"?(z&&(Ye(""),Ot(""),ht(new Date().toISOString().split("T")[0]),ft([{description:"",qty:0,unit:""}]),at(""),Sn(""),Nt("")),E.current&&(q.current=E.current.scrollHeight),w(!0),requestAnimationFrame(()=>{m("invoice"),setTimeout(()=>w(!1),300)})):pt?.type==="individual-dn"&&(L&&(Ft(""),qt(""),on(new Date().toISOString().split("T")[0]),Ve([{description:"",qty:0,unit:"",price:0,total:0}]),Dt(0),wt(0),_t(0)),E.current&&(q.current=E.current.scrollHeight),w(!0),requestAnimationFrame(()=>{m("delivery-note"),setTimeout(()=>w(!1),300)}));L&&(Ft(""),qt(""),on(new Date().toISOString().split("T")[0]),Ve([{description:"",qty:0,unit:"",price:0,total:0}]),$n(Kt.map(ue=>({...ue,invQty:0,invPrice:0,invTotal:0}))),Dt(0),wt(0),_t(0)),z&&(Ye(""),Ot(""),ht(new Date().toISOString().split("T")[0]),ft([{description:"",qty:0,unit:""}]),$n(Kt.map(ue=>({...ue,dnQty:0,dnWeight:0}))),at(""),Sn(""),Nt(""))}Mt(!1),$t(null)};return e?i.jsxs("div",{className:"modal-overlay",onClick:()=>ui(!0),children:[i.jsxs("div",{className:"modal-container",onClick:P=>P.stopPropagation(),style:{maxWidth:v?"1200px":"800px",maxHeight:v?"85vh":"90vh",height:v?"85vh":"90vh",position:"relative",transition:"max-width 0.4s cubic-bezier(0.4, 0, 0.2, 1), width 0.4s cubic-bezier(0.4, 0, 0.2, 1), max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), height 0.4s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},children:[i.jsxs("div",{className:"modal-header",style:{position:"relative",display:"flex",flexDirection:"column",width:"100%"},children:[!v&&i.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:"12px",marginBottom:"16px",position:"relative"},children:[i.jsxs("div",{onClick:()=>{if(p!=="invoice"&&!j){const P=it||Dn||ze.some(z=>z.description.trim()!==""),L=Lt||Vt||H.some(z=>z.description.trim()!=="");P&&L?($t({type:"individual-invoice",hasInvoiceData:L,hasDNData:P}),Mt(!0)):(E.current&&(q.current=E.current.scrollHeight),w(!0),requestAnimationFrame(()=>{m("invoice"),setTimeout(()=>w(!1),300)}))}},style:{cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 20px",borderRadius:"12px",background:p==="invoice"?"var(--accent-blue, #3b82f6)":"rgba(59, 130, 246, 0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:p==="invoice"?"2px solid rgba(0, 0, 0, 0.2)":"2px solid transparent",minWidth:"160px",width:"160px"},children:[i.jsx(Xa,{size:20,style:{color:"white"}}),i.jsx("span",{style:{fontSize:"14px",fontWeight:p==="invoice"?"600":"500",color:"white",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap"},children:"Invoice"})]}),i.jsxs("div",{onClick:()=>{if(p!=="delivery-note"&&!j){const P=Lt||Vt||H.some(z=>z.description.trim()!==""),L=it||Dn||ze.some(z=>z.description.trim()!=="");P&&L?($t({type:"individual-dn",hasInvoiceData:P,hasDNData:L}),Mt(!0)):(E.current&&(q.current=E.current.scrollHeight),w(!0),requestAnimationFrame(()=>{m("delivery-note"),setTimeout(()=>w(!1),300)}))}},style:{cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 20px",borderRadius:"12px",background:p==="delivery-note"?"var(--accent-blue, #3b82f6)":"rgba(59, 130, 246, 0.3)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:p==="delivery-note"?"2px solid rgba(0, 0, 0, 0.2)":"2px solid transparent",position:"relative",minWidth:"160px",width:"160px"},children:[i.jsx(Za,{size:20,style:{color:"white"}}),i.jsx("span",{style:{fontSize:"14px",fontWeight:p==="delivery-note"?"600":"500",color:"white",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",whiteSpace:"nowrap"},children:"Delivery Note"}),C&&p==="delivery-note"&&i.jsx("span",{style:{position:"absolute",top:"-6px",right:"-6px",width:"18px",height:"18px",borderRadius:"50%",background:"var(--accent-green, #22c55e)",border:"2px solid var(--bg-card)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2},children:i.jsx(Yi,{size:10,style:{color:"white"}})})]})]}),v&&i.jsx("div",{style:{width:"100%",marginBottom:"12px",background:"var(--bg-secondary)",borderRadius:"8px",padding:"12px 16px",fontSize:"15px",color:"var(--text-primary)",fontWeight:"600",textAlign:"center"},children:"Creating Invoice & Delivery Note Together"}),i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"100%",position:"absolute",top:"0",right:"0"},children:i.jsx("button",{className:"modal-close-button",onClick:()=>ui(!0),"aria-label":"Close modal",style:{color:"var(--text-muted)"},children:i.jsx(sn,{size:20})})})]}),i.jsx("div",{style:{position:"absolute",bottom:"20px",left:"28px",zIndex:10},children:i.jsx("div",{onClick:()=>{const P=Lt||Vt||H.some(ae=>ae.description.trim()!=="")||Kt.some(ae=>ae.description.trim()!==""&&(ae.invQty>0||ae.invPrice>0)),L=it||Dn||ze.some(ae=>ae.description.trim()!=="")||Kt.some(ae=>ae.description.trim()!==""&&ae.dnQty>0),z=!v;z&&(P||L)||!z&&v&&(P||L)?($t({type:z?"unified":p==="invoice"?"individual-invoice":"individual-dn",hasInvoiceData:P,hasDNData:L}),Mt(!0)):ka(z,!1,!1)},style:{position:"relative",display:"flex",alignItems:"center",background:"rgba(255, 255, 255, 0.1)",borderRadius:"24px",padding:"4px",cursor:"pointer",width:"220px",height:"44px",transition:"all 0.3s ease"},onClick:()=>{E.current&&(q.current=E.current.scrollHeight,te.current=!v),x(!v),v||m("invoice")},children:i.jsxs("div",{style:{position:"absolute",left:v?"calc(100% - 4px)":"4px",transform:v?"translateX(-100%)":"translateX(0)",background:"white",borderRadius:"20px",padding:"8px 16px",display:"flex",alignItems:"center",gap:"8px",transition:"left 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",whiteSpace:"nowrap",minWidth:"140px",justifyContent:"space-between"},children:[i.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"#000",transition:"opacity 0.3s ease 0.1s",order:v?2:1},children:v?"Create Individually":"Create as Pair"}),i.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",color:"#000",transition:"opacity 0.3s ease 0.1s",order:v?1:2},children:v?i.jsx(Vz,{size:18}):i.jsx(HE,{size:18})})]})})}),v?i.jsxs("form",{onSubmit:Wl,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[i.jsxs("div",{ref:E,className:"modal-body",style:{flex:1,minHeight:0,overflowY:"auto",paddingBottom:"20px",transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[Pe&&i.jsx("div",{className:"modal-error",children:Pe}),i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Supplier *"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Lt,onChange:P=>Ft(P.target.value),required:!0,placeholder:"Supplier name"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Venue"}),i.jsx(Uy,{value:cn,onChange:hn,venues:Wr})]})]}),i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Invoice Number *"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Vt,onChange:P=>qt(P.target.value),required:!0,placeholder:"INV-001"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Invoice Date *"}),i.jsx(kf,{value:nn,onChange:on,required:!0})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Delivery Note Number *"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Dn,onChange:P=>Ot(P.target.value),required:!0,placeholder:"DN-001"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"DN Date *"}),i.jsx(kf,{value:Le,onChange:ht,required:!0})]})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("label",{className:"modal-form-label",style:{marginBottom:0},children:"Line Items"}),i.jsxs("button",{type:"button",className:"glass-button",onClick:Fe,style:{fontSize:"12px",padding:"6px 12px"},children:[i.jsx(Ws,{size:14}),"Add Item"]})]}),i.jsx("div",{className:"line-items-table-container",style:Kt.length>3?{maxHeight:"400px",overflowY:"auto",overflowX:"auto",display:"block"}:{maxHeight:"none",overflowY:"visible",overflowX:"auto",display:"block"},children:i.jsxs("table",{className:"line-items-table",style:{minWidth:et==="per-item"?"1100px":"1000px"},children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Item Name"}),i.jsx("th",{children:"Quantity"}),i.jsx("th",{children:"Price per Unit"}),i.jsx("th",{children:"Total (no VAT)"}),et==="per-item"&&i.jsx("th",{children:"VAT %"}),i.jsx("th",{children:"Delivery Qty"}),i.jsx("th",{})]})}),i.jsx("tbody",{children:Kt.map((P,L)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(xy,{value:P.description,onChange:z=>Te(L,"description",z),onFetchSuggestions:$v,placeholder:"Item description (e.g., 12Litre pepsi pink container)",className:"line-items-table input",minChars:2,debounceMs:400})}),i.jsx("td",{children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",value:P.invQty||"",onChange:z=>Te(L,"invQty",Math.floor(Number(z.target.value))||0),min:"0",step:"1",style:{paddingRight:"30px",width:"100%",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:z=>z.currentTarget.blur()}),i.jsx("style",{children:`
                                input[type="number"]::-webkit-inner-spin-button,
                                input[type="number"]::-webkit-outer-spin-button {
                                  -webkit-appearance: none;
                                  margin: 0;
                                }
                              `}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),Te(L,"invQty",Math.floor((P.invQty||0)+1))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),Te(L,"invQty",Math.max(0,Math.floor((P.invQty||0)-1)))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})}),i.jsx("td",{children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",value:P.invPrice||"",onChange:z=>Te(L,"invPrice",Number(z.target.value)||0),min:"0",step:"0.01",style:{paddingRight:"30px",width:"100%",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:z=>z.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),Te(L,"invPrice",Number((Number(P.invPrice||0)+.01).toFixed(2)))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),Te(L,"invPrice",Math.max(0,Number((Number(P.invPrice||0)-.01).toFixed(2))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})}),i.jsxs("td",{children:["",P.invTotal.toFixed(2)]}),et==="per-item"&&i.jsx("td",{children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",value:P.invVat!==void 0?P.invVat:Ge,onChange:z=>Te(L,"invVat",Number(z.target.value)||Ge),min:"0",max:"100",step:"0.1",style:{width:"70px",paddingRight:"30px",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:z=>z.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation();const ae=P.invVat!==void 0?P.invVat:Ge;Te(L,"invVat",Math.min(100,Number((Number(ae)+.1).toFixed(1))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation();const ae=P.invVat!==void 0?P.invVat:Ge;Te(L,"invVat",Math.max(0,Number((Number(ae)-.1).toFixed(1))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})}),i.jsx("td",{children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",value:P.dnQty||"",onChange:z=>Te(L,"dnQty",Math.floor(Number(z.target.value))||0),min:"0",step:"1",style:{paddingRight:"30px",width:"100%",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:z=>z.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),Te(L,"dnQty",Math.floor((P.dnQty||0)+1))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),Te(L,"dnQty",Math.max(0,Math.floor((P.dnQty||0)-1)))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})}),i.jsx("td",{children:Kt.length>1&&i.jsx("button",{type:"button",className:"line-item-remove",onClick:()=>an(L),children:i.jsx(Zi,{size:16})})})]},L))})]})})]}),i.jsx("div",{className:"modal-form-group",children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[i.jsx("label",{className:"modal-form-label",style:{marginBottom:0,flex:"0 0 auto"},children:"VAT Mode:"}),i.jsxs("div",{style:{position:"relative",display:"flex",gap:"4px",background:"var(--bg-secondary)",borderRadius:"8px",padding:"4px",flex:"0 0 auto",minWidth:"200px"},children:[i.jsx("div",{style:{position:"absolute",top:"4px",left:et==="whole"?"4px":"50%",width:"calc(50% - 4px)",height:"calc(100% - 8px)",background:"var(--accent-blue)",borderRadius:"6px",transition:"left 0.4s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:0,boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"}}),i.jsx("button",{type:"button",onClick:()=>Hr("whole"),style:{fontSize:"12px",padding:"6px 12px",position:"relative",zIndex:1,border:"none",background:"transparent",color:et==="whole"?"white":"var(--text-secondary)",cursor:"pointer",fontWeight:et==="whole"?600:500,transition:"color 0.3s ease, font-weight 0.3s ease",borderRadius:"6px",flex:1},children:"VAT as Whole"}),i.jsx("button",{type:"button",onClick:()=>Hr("per-item"),style:{fontSize:"12px",padding:"6px 12px",position:"relative",zIndex:1,border:"none",background:"transparent",color:et==="per-item"?"white":"var(--text-secondary)",cursor:"pointer",fontWeight:et==="per-item"?600:500,transition:"color 0.3s ease, font-weight 0.3s ease",borderRadius:"6px",flex:1},children:"VAT per Item"})]}),et==="whole"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:"1"},children:[i.jsx("label",{className:"modal-form-label",style:{marginBottom:0,whiteSpace:"nowrap"},children:"VAT %:"}),i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",className:"modal-form-input",value:Ge,onChange:P=>kt(Number(P.target.value)||0),min:"0",max:"100",step:"0.1",style:{width:"80px",paddingRight:"30px",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:P=>P.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:P=>{P.preventDefault(),P.stopPropagation(),kt(Math.min(100,Number((Number(Ge)+.1).toFixed(1))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:P=>P.currentTarget.style.color="var(--accent-blue)",onMouseLeave:P=>P.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:P=>{P.preventDefault(),P.stopPropagation(),kt(Math.max(0,Number((Number(Ge)-.1).toFixed(1))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:P=>P.currentTarget.style.color="var(--accent-blue)",onMouseLeave:P=>P.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})]})]})}),(()=>{const P=Qt();return i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Subtotal"}),i.jsx("input",{type:"number",className:"modal-form-input",value:P.subtotal.toFixed(2),readOnly:!0,style:{background:"var(--bg-secondary)"}})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsxs("label",{className:"modal-form-label",children:["VAT (",et==="whole"?`${Ge}%`:"Variable",")"]}),i.jsx("input",{type:"number",className:"modal-form-input",value:P.vat.toFixed(2),readOnly:!0,style:{background:"var(--bg-secondary)"}})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Total"}),i.jsx("input",{type:"number",className:"modal-form-input",value:P.total.toFixed(2),readOnly:!0,style:{background:"var(--bg-secondary)",fontSize:"18px",fontWeight:"700",color:"var(--accent-green)"}})]})]})})(),i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Driver"}),i.jsx("input",{type:"text",className:"modal-form-input",value:bt,onChange:P=>at(P.target.value),placeholder:"Driver name"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Vehicle"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Ht,onChange:P=>Sn(P.target.value.toUpperCase()),placeholder:"Vehicle registration",style:{textTransform:"uppercase"}})]})]}),i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Time Window"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Jn,onChange:P=>Nt(P.target.value),placeholder:"e.g., 09:00 - 11:00"})]}),i.jsx("div",{className:"modal-form-group"})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:()=>ui(!1),children:"Cancel"}),i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:yr,children:"Save and Close"}),i.jsx("button",{type:"submit",className:"modal-button-primary",disabled:Nn,children:Nn?"Creating...":"Create Invoice & Delivery Note"})]})]}):i.jsx("div",{ref:E,style:{flex:1,minHeight:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:i.jsx("div",{style:{opacity:j?0:1,transform:j?"translateY(10px)":"translateY(0)",transition:"opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:p==="invoice"?i.jsxs("form",{onSubmit:rd,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[i.jsxs("div",{className:"modal-body",style:{paddingBottom:"20px",flex:1,minHeight:0,overflowY:"auto",transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[Pe&&i.jsx("div",{className:"modal-error",children:Pe}),$&&i.jsxs("div",{style:{padding:"16px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",marginBottom:"16px",display:"flex",alignItems:"flex-start",gap:"12px"},children:[i.jsx(Wa,{size:20,style:{color:"var(--accent-blue)",flexShrink:0,marginTop:"2px"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"4px",color:"var(--text-primary)"},children:"Create Delivery Note?"}),i.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"12px"},children:"No delivery note found for this supplier and date. Would you like to create one now? The form will be pre-filled with invoice data."}),i.jsxs("div",{style:{display:"flex",gap:"8px"},children:[i.jsx("button",{type:"button",className:"glass-button",onClick:ci,style:{fontSize:"12px",padding:"6px 12px"},children:"Yes, Create Delivery Note"}),i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:lc,style:{fontSize:"12px",padding:"6px 12px"},children:"Not Now"})]})]})]}),xe&&i.jsx("div",{style:{padding:"16px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",marginBottom:"16px",textAlign:"center"},children:i.jsx("div",{style:{color:"var(--text-muted)",fontSize:"13px"},children:"Loading pairing suggestions..."})}),!xe&&ne&&ee.length>0&&i.jsxs("div",{style:{padding:"16px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",marginBottom:"16px"},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("span",{children:"Pairing Suggestions"}),i.jsx("button",{type:"button",onClick:()=>J(!1),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:i.jsx(sn,{size:16})})]}),i.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:ee.map(P=>i.jsxs("div",{style:{padding:"12px",border:"1px solid var(--border-color)",borderRadius:"6px",marginBottom:"8px",background:"var(--bg-card)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",fontSize:"14px"},children:P.supplier}),i.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[P.deliveryNoteNumber||"DN-"+P.deliveryNoteId?.slice(0,8),"  ",P.deliveryDate?new Date(P.deliveryDate).toLocaleDateString("en-GB"):"No date"]})]}),i.jsxs("div",{style:{padding:"4px 8px",background:(P.confidence||0)>=.8?"rgba(34, 197, 94, 0.1)":(P.confidence||0)>=.6?"rgba(251, 191, 36, 0.1)":"rgba(239, 68, 68, 0.1)",color:(P.confidence||0)>=.8?"var(--accent-green)":(P.confidence||0)>=.6?"var(--accent-yellow)":"var(--accent-red)",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:[Math.round((P.confidence||0)*100),"% match"]})]}),i.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"8px"},children:P.reason}),P.hasQuantityMismatch&&i.jsx("div",{style:{padding:"6px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",fontSize:"11px",color:"var(--accent-red)",marginBottom:"8px"},children:" Quantity mismatch detected"}),i.jsx("button",{type:"button",className:"glass-button",onClick:()=>al(P),disabled:Nn,style:{fontSize:"12px",padding:"6px 12px",width:"100%"},children:Nn?"Pairing...":"Pair with this Delivery Note"})]},P.id))})]}),er&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("button",{type:"button",onClick:()=>gr(),className:"copy-button glass-button",children:[i.jsx(Tf,{size:16}),"Copy to Delivery Note"]}),N&&i.jsxs("div",{className:"copied-feedback",children:[i.jsx(Yi,{size:14}),"Data copied! Switched to Delivery Note tab."]})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Supplier *"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Lt,onChange:P=>Ft(P.target.value),required:!0,placeholder:"Supplier name"})]}),i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Invoice Number *"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Vt,onChange:P=>qt(P.target.value),required:!0,placeholder:"INV-001"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Date *"}),i.jsx(kf,{value:nn,onChange:on,required:!0})]})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Venue"}),i.jsx(Uy,{value:cn,onChange:hn,venues:Wr})]}),i.jsx("div",{className:"modal-form-group",children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[i.jsx("label",{className:"modal-form-label",style:{marginBottom:0,flex:"0 0 auto"},children:"VAT Mode:"}),i.jsxs("div",{style:{position:"relative",display:"flex",gap:"4px",background:"var(--bg-secondary)",borderRadius:"8px",padding:"4px",flex:"0 0 auto",minWidth:"200px"},children:[i.jsx("div",{style:{position:"absolute",top:"4px",left:et==="whole"?"4px":"50%",width:"calc(50% - 4px)",height:"calc(100% - 8px)",background:"var(--accent-blue)",borderRadius:"6px",transition:"left 0.4s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:0,boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"}}),i.jsx("button",{type:"button",onClick:()=>Hr("whole"),style:{fontSize:"12px",padding:"6px 12px",position:"relative",zIndex:1,border:"none",background:"transparent",color:et==="whole"?"white":"var(--text-secondary)",cursor:"pointer",fontWeight:et==="whole"?600:500,transition:"color 0.3s ease, font-weight 0.3s ease",borderRadius:"6px",flex:1},children:"VAT as Whole"}),i.jsx("button",{type:"button",onClick:()=>Hr("per-item"),style:{fontSize:"12px",padding:"6px 12px",position:"relative",zIndex:1,border:"none",background:"transparent",color:et==="per-item"?"white":"var(--text-secondary)",cursor:"pointer",fontWeight:et==="per-item"?600:500,transition:"color 0.3s ease, font-weight 0.3s ease",borderRadius:"6px",flex:1},children:"VAT per Item"})]}),et==="whole"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:"1"},children:[i.jsx("label",{className:"modal-form-label",style:{marginBottom:0,whiteSpace:"nowrap"},children:"VAT %:"}),i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",className:"modal-form-input",value:Ge,onChange:P=>kt(Number(P.target.value)||0),min:"0",max:"100",step:"0.1",style:{width:"80px",paddingRight:"30px",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:P=>P.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:P=>{P.preventDefault(),P.stopPropagation(),kt(Math.min(100,Number((Number(Ge)+.1).toFixed(1))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:P=>P.currentTarget.style.color="var(--accent-blue)",onMouseLeave:P=>P.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:P=>{P.preventDefault(),P.stopPropagation(),kt(Math.max(0,Number((Number(Ge)-.1).toFixed(1))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:P=>P.currentTarget.style.color="var(--accent-blue)",onMouseLeave:P=>P.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})]})]})}),i.jsxs("div",{className:"modal-form-group",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("label",{className:"modal-form-label",style:{marginBottom:0},children:"Line Items"}),i.jsxs("button",{type:"button",className:"glass-button",onClick:Re,style:{fontSize:"12px",padding:"6px 12px"},children:[i.jsx(Ws,{size:14}),"Add Item"]})]}),i.jsx("div",{className:"line-items-table-container",style:H.length>=3?{maxHeight:"400px",overflowY:"auto",overflowX:"auto",display:"block"}:{maxHeight:"none",overflowY:"visible",overflowX:"auto",display:"block"},children:i.jsxs("table",{className:"line-items-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Item Name"}),i.jsx("th",{children:"Quantity"}),i.jsx("th",{children:"Price per Unit"}),i.jsx("th",{children:"Total (no VAT)"}),et==="per-item"&&i.jsx("th",{children:"VAT %"}),i.jsx("th",{})]})}),i.jsx("tbody",{children:H.map((P,L)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(xy,{value:P.description,onChange:z=>ve(L,"description",z),onFetchSuggestions:$v,placeholder:"Item description (e.g., 12Litre pepsi pink container)",className:"line-items-table input",minChars:2,debounceMs:400})}),i.jsx("td",{children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",value:P.qty||"",onChange:z=>ve(L,"qty",Math.floor(Number(z.target.value))||0),min:"0",step:"1",style:{paddingRight:"30px",width:"100%",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:z=>z.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),ve(L,"qty",Math.floor((P.qty||0)+1))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),ve(L,"qty",Math.max(0,Math.floor((P.qty||0)-1)))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})}),i.jsx("td",{children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",value:P.price||"",onChange:z=>ve(L,"price",Number(z.target.value)||0),min:"0",step:"0.01",style:{paddingRight:"30px",width:"100%",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:z=>z.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),ve(L,"price",Number((Number(P.price||0)+.01).toFixed(2)))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),ve(L,"price",Math.max(0,Number((Number(P.price||0)-.01).toFixed(2))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})}),i.jsxs("td",{children:["",P.total.toFixed(2)]}),et==="per-item"&&i.jsx("td",{children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",value:P.vat!==void 0?P.vat:Ge,onChange:z=>ve(L,"vat",Number(z.target.value)||Ge),min:"0",max:"100",step:"0.1",style:{width:"70px",paddingRight:"30px",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:z=>z.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation();const ae=P.vat!==void 0?P.vat:Ge;ve(L,"vat",Math.min(100,Number((Number(ae)+.1).toFixed(1))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation();const ae=P.vat!==void 0?P.vat:Ge;ve(L,"vat",Math.max(0,Number((Number(ae)-.1).toFixed(1))))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})}),i.jsx("td",{children:H.length>1&&i.jsx("button",{type:"button",className:"line-item-remove",onClick:()=>st(L),children:i.jsx(Zi,{size:16})})})]},L))})]})})]}),i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Subtotal"}),i.jsx("input",{type:"number",className:"modal-form-input",value:Gt.toFixed(2),readOnly:!0,style:{background:"var(--bg-secondary)"}})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsxs("label",{className:"modal-form-label",children:["VAT (",et==="whole"?`${Ge}%`:"Variable",")"]}),i.jsx("input",{type:"number",className:"modal-form-input",value:ut.toFixed(2),readOnly:!0,style:{background:"var(--bg-secondary)"}})]})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Total"}),i.jsx("input",{type:"number",className:"modal-form-input",value:Yt.toFixed(2),readOnly:!0,style:{background:"var(--bg-secondary)",fontSize:"18px",fontWeight:"700",color:"var(--accent-green)"}})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:()=>ui(!1),children:"Cancel"}),i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:yr,children:"Save and Close"}),i.jsx("button",{type:"submit",className:"modal-button-primary",disabled:Nn,children:Nn?"Creating...":"Create Invoice"})]})]}):i.jsxs("form",{onSubmit:Vl,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[i.jsxs("div",{className:"modal-body",style:{paddingBottom:"20px",flex:1,minHeight:0,overflowY:"auto",transition:"opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[Pe&&i.jsx("div",{className:"modal-error",children:Pe}),vt&&i.jsx("div",{style:{padding:"16px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",marginBottom:"16px",textAlign:"center"},children:i.jsx("div",{style:{color:"var(--text-muted)",fontSize:"13px"},children:"Loading invoice suggestions..."})}),!vt&&$e&&Me.length===0&&i.jsx("div",{style:{padding:"16px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",marginBottom:"16px",textAlign:"center",color:"var(--text-muted)",fontSize:"13px"},children:"No matching invoices found. You can create a new invoice from this delivery note or link an existing one manually."}),!vt&&$e&&Me.length>0&&i.jsxs("div",{style:{padding:"16px",background:"var(--bg-secondary)",border:"1px solid var(--border-color)",borderRadius:"8px",marginBottom:"16px"},children:[i.jsxs("div",{style:{fontWeight:"600",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("span",{children:"Invoice Suggestions"}),i.jsx("button",{type:"button",onClick:()=>Ae(!1),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:i.jsx(sn,{size:16})})]}),i.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:Me.map(P=>i.jsxs("div",{style:{padding:"12px",border:"1px solid var(--border-color)",borderRadius:"6px",marginBottom:"8px",background:"var(--bg-card)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:"600",fontSize:"14px"},children:P.supplier||"Unknown Supplier"}),i.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px"},children:[P.invoiceNumber||"INV-"+P.invoiceId?.slice(0,8),"  ",P.invoiceDate?new Date(P.invoiceDate).toLocaleDateString("en-GB"):"No date"]})]}),i.jsxs("div",{style:{padding:"4px 8px",background:(P.confidence||0)>=.8?"rgba(34, 197, 94, 0.1)":(P.confidence||0)>=.6?"rgba(251, 191, 36, 0.1)":"rgba(239, 68, 68, 0.1)",color:(P.confidence||0)>=.8?"var(--accent-green)":(P.confidence||0)>=.6?"var(--accent-yellow)":"var(--accent-red)",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:[Math.round((P.confidence||0)*100),"% match"]})]}),i.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"8px"},children:P.reason||"Potential match"}),P.hasQuantityMismatch&&i.jsx("div",{style:{padding:"6px",background:"rgba(239, 68, 68, 0.1)",borderRadius:"4px",fontSize:"11px",color:"var(--accent-red)",marginBottom:"8px"},children:" Quantity mismatch detected"}),P.quantityDifferences&&P.quantityDifferences.length>0&&i.jsx("div",{style:{marginBottom:"8px",fontSize:"11px",color:"var(--text-secondary)"},children:P.quantityDifferences.slice(0,2).map((L,z)=>i.jsxs("div",{style:{marginBottom:"4px"},children:[L.description,": Invoice ",L.invoiceQty,", DN ",L.dnQty]},z))}),i.jsx("button",{type:"button",className:"glass-button",onClick:()=>sc(P),disabled:Nn,style:{fontSize:"12px",padding:"6px 12px",width:"100%"},children:Nn?"Pairing...":"Pair with this Invoice"})]},P.id))})]}),(er||Mr)&&i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("button",{type:"button",onClick:()=>gr(Mr&&!er),className:"copy-button glass-button",children:[i.jsx(Tf,{size:16}),Mr&&!er?"Copy from Last Submitted Invoice":"Copy from Invoice"]}),N&&i.jsxs("div",{className:"copied-feedback",children:[i.jsx(Yi,{size:14}),"Data copied! You can edit any fields before submitting."]})]}),C&&i.jsxs("div",{className:"copied-indicator",children:[i.jsx(Yi,{size:16}),i.jsx("span",{children:"This delivery note was created from invoice data. You can edit any fields before submitting."})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Supplier *"}),i.jsx("input",{type:"text",className:"modal-form-input",value:it,onChange:P=>Ye(P.target.value),required:!0,placeholder:"Supplier name"})]}),i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Note Number *"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Dn,onChange:P=>Ot(P.target.value),required:!0,placeholder:"DN-001"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Date *"}),i.jsx(kf,{value:Le,onChange:ht,required:!0})]})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Venue"}),i.jsx(Uy,{value:cn,onChange:hn,venues:Wr})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("label",{className:"modal-form-label",style:{marginBottom:0},children:"Line Items"}),i.jsxs("button",{type:"button",className:"glass-button",onClick:mt,style:{fontSize:"12px",padding:"6px 12px"},children:[i.jsx(Ws,{size:14}),"Add Item"]})]}),i.jsx("div",{className:"line-items-table-container",style:ze.length>=3?{maxHeight:"400px",overflowY:"auto",overflowX:"auto",display:"block"}:{maxHeight:"none",overflowY:"visible",overflowX:"auto",display:"block"},children:i.jsxs("table",{className:"line-items-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Item Name"}),i.jsx("th",{children:"Quantity"}),i.jsx("th",{})]})}),i.jsx("tbody",{children:ze.map((P,L)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(xy,{value:P.description,onChange:z=>ot(L,"description",z),onFetchSuggestions:$v,placeholder:"Item description (e.g., 12Litre pepsi pink container)",className:"line-items-table input",minChars:2,debounceMs:400})}),i.jsx("td",{children:i.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[i.jsx("input",{type:"number",value:P.qty||"",onChange:z=>ot(L,"qty",Math.floor(Number(z.target.value))||0),min:"0",step:"1",style:{paddingRight:"30px",width:"100%",WebkitAppearance:"none",MozAppearance:"textfield"},onWheel:z=>z.currentTarget.blur()}),i.jsxs("div",{style:{position:"absolute",right:"4px",display:"flex",flexDirection:"column",gap:"2px"},children:[i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),ot(L,"qty",Math.floor((P.qty||0)+1))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(ur,{size:14})}),i.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),z.stopPropagation(),ot(L,"qty",Math.max(0,Math.floor((P.qty||0)-1)))},style:{background:"transparent",border:"none",padding:"2px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",transition:"color 0.2s ease"},onMouseEnter:z=>z.currentTarget.style.color="var(--accent-blue)",onMouseLeave:z=>z.currentTarget.style.color="var(--text-muted)",children:i.jsx(jn,{size:14})})]})]})}),i.jsx("td",{children:ze.length>1&&i.jsx("button",{type:"button",className:"line-item-remove",onClick:()=>tt(L),children:i.jsx(Zi,{size:16})})})]},L))})]})})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Supervisor"}),i.jsx("input",{type:"text",className:"modal-form-input",value:rn,onChange:P=>dt(P.target.value),placeholder:"Name of supervisor who took the delivery"})]}),i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Driver"}),i.jsx("input",{type:"text",className:"modal-form-input",value:bt,onChange:P=>at(P.target.value),placeholder:"Driver name"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Vehicle"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Ht,onChange:P=>Sn(P.target.value.toUpperCase()),placeholder:"Vehicle registration",style:{textTransform:"uppercase"}})]})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Time Window"}),i.jsx("input",{type:"text",className:"modal-form-input",value:Jn,onChange:P=>Nt(P.target.value),placeholder:"e.g., 09:00 - 11:00"})]}),W&&pn&&i.jsx("div",{style:{marginTop:"16px",marginBottom:"16px"},children:i.jsxs("button",{type:"button",onClick:()=>{Xn(W),Ft(pn.supplier),on(pn.date),hn(pn.venue);const P=pn.lineItems.map(L=>({description:L.description,qty:L.qty,unit:L.unit,price:0,total:0}));P.length>0&&(Ve(P),be(P)),m("invoice")},className:"glass-button",style:{width:"100%",padding:"10px"},children:[i.jsx(Tf,{size:16,style:{marginRight:"8px",verticalAlign:"middle"}}),"Create Invoice from This Delivery Note"]})})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:()=>ui(!1),children:"Cancel"}),i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:yr,children:"Save and Close"}),i.jsx("button",{type:"submit",className:"modal-button-primary",disabled:Nn,children:Nn?"Creating...":"Create Delivery Note"})]})]})})})]}),i.jsx(IK,{isOpen:oi,onClose:()=>{qr(!1),Ut([]),At(null)},onConfirm:ic,errors:Zr}),de&&i.jsx(Ou,{isOpen:K,onClose:()=>{Ee(!1),Se(null)},onConfirm:()=>{Ee(!1),Se(null),h.success("Invoice paired with delivery note successfully!"),J(!1),setTimeout(()=>{n(F||"","invoice")},0)},invoiceId:de.invoiceId,deliveryNoteId:de.deliveryNoteId,initialValidation:de.validation}),Cn&&pt&&i.jsx("div",{className:"modal-overlay",style:{zIndex:2e3},onClick:()=>{Mt(!1),$t(null)},children:i.jsxs("div",{className:"modal-container",onClick:P=>P.stopPropagation(),style:{maxWidth:"500px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{className:"modal-title",children:"Switch Mode?"}),i.jsx("button",{className:"modal-close-button",onClick:()=>{Mt(!1),$t(null)},"aria-label":"Close modal",children:i.jsx(sn,{size:20})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsx("div",{style:{marginBottom:"16px",color:"var(--text-secondary)"},children:pt.type==="unified"?"You have existing data. How would you like to proceed?":"You have existing data in unified mode. How would you like to proceed?"}),pt.hasInvoiceData&&i.jsxs("div",{style:{padding:"12px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",marginBottom:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:["Invoice data will be ",pt.type==="unified"?"transferred":"kept"]}),pt.hasDNData&&i.jsxs("div",{style:{padding:"12px",background:"rgba(59, 130, 246, 0.1)",borderRadius:"8px",marginBottom:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:["Delivery Note data will be ",pt.type==="unified"?"transferred":"kept"]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:()=>{Mt(!1),$t(null)},children:"Cancel (Mistake)"}),pt.hasInvoiceData&&i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:()=>{ka(pt.type==="unified",!0,!1)},style:{background:"rgba(239, 68, 68, 0.2)",color:"var(--accent-red)"},children:"Clear Invoice Data"}),pt.hasDNData&&i.jsx("button",{type:"button",className:"modal-button-secondary",onClick:()=>{ka(pt.type==="unified",!1,!0)},style:{background:"rgba(239, 68, 68, 0.2)",color:"var(--accent-red)"},children:"Clear DN Data"}),i.jsx("button",{type:"button",className:"modal-button-primary",onClick:()=>{ka(pt.type==="unified",!1,!1)},children:"Transfer All Data"})]})]})}),i.jsx(RK,{isOpen:ca,type:yt,title:Ur,message:Ln,onClose:()=>{Mn(!1),Fr(null)},onAction:()=>{Ca&&setTimeout(()=>{Ca(),Fr(null)},0)}})]}):null}function vQ({isOpen:e,onClose:t,onSuccess:n,invoiceId:r}){const[l,o]=g.useState([]),[u,d]=g.useState([]),[h,p]=g.useState(""),[m,v]=g.useState(!1),[x,j]=g.useState(null),[w,N]=g.useState(null),[S,C]=g.useState(!1),[k,E]=g.useState(null),[O,D]=g.useState(null),[A,M]=g.useState(new Map),[q,te]=g.useState(!1),[ce,G]=g.useState(null),[R,F]=g.useState(new Map),[he,ee]=g.useState(new Set),[U,ne]=g.useState(new Set);g.useEffect(()=>{e?J().then(()=>{xe()}):(G(null),F(new Map),M(new Map))},[e,r]),g.useEffect(()=>{if(h.trim()==="")d(l);else{const de=h.toLowerCase();d(l.filter(Se=>Se.noteNumber?.toLowerCase().includes(de)||Se.supplier?.toLowerCase().includes(de)||String(Se.id).toLowerCase().includes(de)))}},[h,l]);const J=async()=>{v(!0),N(null);try{const de=await a0();o(de),d(de)}catch(de){N(de instanceof Error?de.message:"Failed to load delivery notes")}finally{v(!1)}},xe=async()=>{te(!0);try{const de=await Ji(r),Se=new Map;de.suggestions&&de.suggestions.forEach(me=>{const Me=me.deliveryNoteId||me.delivery_note_id||me.deliveryNote?.id||me.delivery_id;let Q=me.quantityMatchScore||me.quantity_match_score||me.quantityMatch||me.match_score;if((Q==null||Q===0)&&(Q=me.confidence||me.probability||me.similarity),Me&&Q!==void 0&&Q!==null){const $e=String(Me);Se.set($e,Q)}}),console.log("[LinkDeliveryNoteModal] Pairing suggestions loaded:",{invoiceId:r,suggestionCount:de.suggestions?.length||0,scoresMapSize:Se.size,scoresMap:Array.from(Se.entries()),deliveryNoteCount:l.length,deliveryNoteIds:l.map(me=>me.id),suggestions:de.suggestions?.map(me=>({deliveryNoteId:me.deliveryNoteId,quantityMatchScore:me.quantityMatchScore||me.quantity_match_score,confidence:me.confidence,probability:me.probability,similarity:me.similarity,allFields:Object.keys(me)}))}),M(Se);const W=l.filter(me=>!Se.has(String(me.id)));if(W.length>0){console.log("[LinkDeliveryNoteModal] Fetching scores for",W.length,"delivery notes without scores");const Me=W.slice(0,20).map(async Ae=>{try{ne(jt=>new Set(jt).add(Ae.id));const vt=await Ce(Ae.id);if(vt!=null)return{dnId:Ae.id,score:vt}}catch(vt){console.warn(`Failed to fetch score for DN ${Ae.id}:`,vt)}finally{ne(vt=>{const jt=new Set(vt);return jt.delete(Ae.id),jt})}return null}),Q=await Promise.all(Me),$e=new Map(Se);Q.forEach(Ae=>{Ae&&Ae.score!==null&&Ae.score!==void 0&&$e.set(String(Ae.dnId),Ae.score)}),$e.size>Se.size&&(console.log("[LinkDeliveryNoteModal] Fetched",$e.size-Se.size,"additional scores:",Array.from($e.entries()).filter(([Ae])=>!Se.has(Ae))),M($e))}}catch(de){console.warn("Failed to load pairing suggestions:",de)}finally{te(!1)}},Ce=async de=>{try{return(await Ks(r,de)).matchScore||null}catch(Se){return console.warn(`Failed to fetch quantity match score for DN ${de}:`,Se),null}},$=async(de,Se)=>{if(!Se.target.closest("button")){if(ce===de)G(null);else if(G(de),!R.has(de)&&!he.has(de)){ee(W=>new Set(W).add(de));try{const W=await Qs(de);W&&F(me=>{const Me=new Map(me);return Me.set(de,W),Me})}catch(W){console.warn("Failed to load delivery note details:",W)}finally{ee(W=>{const me=new Set(W);return me.delete(de),me})}}}},ie=de=>de>=.8?{background:"rgba(34, 197, 94, 0.2)",border:"rgba(34, 197, 94, 0.3)",color:"var(--accent-green)"}:de>=.6?{background:"rgba(251, 191, 36, 0.2)",border:"rgba(251, 191, 36, 0.3)",color:"var(--accent-yellow)"}:{background:"rgba(239, 68, 68, 0.2)",border:"rgba(239, 68, 68, 0.3)",color:"var(--accent-red)"},we=async de=>{j(de),N(null);try{const Se=await Ks(r,de);if(!Se.isValid||Se.matchScore<.8||Se.warnings.length>0){E(de),D(Se),C(!0),j(null);return}const W=await gi(r,de);n(),K()}catch(Se){N(Se instanceof Error?Se.message:"Failed to link delivery note")}finally{j(null)}},Z=()=>{n(),K(),C(!1),E(null),D(null)},K=()=>{p(""),N(null),j(null),t()},Ee=de=>{if(!de)return"No date";try{return new Date(de).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch{return de}};return e?i.jsxs("div",{className:"modal-overlay",onClick:K,children:[i.jsxs("div",{className:"modal-container",onClick:de=>de.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{className:"modal-title",children:"Link Delivery Note"}),i.jsx("button",{className:"modal-close-button",onClick:K,children:i.jsx(sn,{size:20})})]}),i.jsxs("div",{className:"modal-body",children:[w&&i.jsx("div",{className:"modal-error",children:w}),i.jsx("div",{className:"modal-form-group",children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(Bl,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"}}),i.jsx("input",{type:"text",className:"modal-form-input",value:h,onChange:de=>p(de.target.value),placeholder:"Search by note number, supplier, or ID...",style:{paddingLeft:"36px"}})]})}),m?i.jsx("div",{className:"modal-loading",children:"Loading delivery notes..."}):u.length===0?i.jsx("div",{className:"modal-loading",style:{color:"var(--text-muted)"},children:h?"No delivery notes found matching your search.":"No delivery notes available."}):i.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:u.map(de=>{const Se=String(de.id);let W=A.get(Se);if(W===void 0)for(const[Ae,vt]of A.entries()){const jt=String(Ae);if(jt===Se||jt.includes(Se)||Se.includes(jt)){W=vt;break}}const me=ce===de.id,Me=R.get(de.id),Q=he.has(de.id),$e=W!==void 0?ie(W):null;return i.jsxs("div",{children:[i.jsx("div",{style:{padding:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",marginBottom:"12px",display:"flex",justifyContent:"space-between",alignItems:"center",transition:"all 0.2s ease",background:"rgba(255, 255, 255, 0.03)",backdropFilter:"blur(10px)",cursor:"pointer"},onClick:Ae=>$(de.id,Ae),onMouseEnter:Ae=>{Ae.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",Ae.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:Ae=>{Ae.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)",Ae.currentTarget.style.background="rgba(255, 255, 255, 0.03)"},children:i.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:"12px"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"6px"},children:[i.jsx("div",{style:{fontWeight:"600",fontSize:"14px"},children:de.noteNumber||`DN-${de.id.slice(0,8)}`}),W!==void 0&&$e?i.jsxs("div",{style:{fontSize:"13px",padding:"4px 10px",borderRadius:"16px",fontWeight:"700",background:$e.background,border:`1px solid ${$e.border}`,color:$e.color,backdropFilter:"blur(10px)",minWidth:"50px",textAlign:"center",letterSpacing:"0.3px"},children:[Math.round(W*100),"%"]}):i.jsx("div",{style:{fontSize:"13px",padding:"4px 10px",borderRadius:"16px",fontWeight:"700",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",color:"var(--text-muted)",backdropFilter:"blur(10px)",minWidth:"50px",textAlign:"center"},children:"N/A"})]}),i.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[de.supplier||"Unknown Supplier","  ",Ee(de.date)]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[me?i.jsx(ur,{size:16,style:{color:"var(--text-muted)"}}):i.jsx(jn,{size:16,style:{color:"var(--text-muted)"}}),i.jsx("button",{className:"modal-button-primary",onClick:Ae=>{Ae.stopPropagation(),we(de.id)},disabled:x===de.id,style:{padding:"8px 20px",fontSize:"13px",minWidth:"80px",flexShrink:0},children:x===de.id?"Linking...":"Link"})]})]})}),me&&i.jsx("div",{style:{marginTop:"-12px",marginBottom:"12px",marginLeft:"0",marginRight:"0",padding:"16px",border:"1px solid rgba(255, 255, 255, 0.1)",borderTop:"none",borderTopLeftRadius:"0",borderTopRightRadius:"0",borderBottomLeftRadius:"12px",borderBottomRightRadius:"12px",background:"rgba(255, 255, 255, 0.02)",backdropFilter:"blur(10px)",animation:"fadeIn 0.2s ease-out"},children:Q?i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",gap:"8px",color:"var(--text-muted)"},children:[i.jsx(sa,{size:16,style:{animation:"spin 1s linear infinite"}}),i.jsx("span",{style:{fontSize:"13px"},children:"Loading details..."})]}):Me?i.jsxs("div",{children:[i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:"600",marginBottom:"8px",color:"var(--text-secondary)"},children:"Key Details"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"13px"},children:[i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--text-muted)",fontSize:"11px",marginBottom:"2px"},children:"Supplier"}),i.jsx("div",{style:{color:"var(--text-primary)"},children:Me.supplier||"Unknown Supplier"})]}),i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--text-muted)",fontSize:"11px",marginBottom:"2px"},children:"Date"}),i.jsx("div",{style:{color:"var(--text-primary)"},children:Ee(Me.date)})]}),Me.venue&&i.jsxs("div",{children:[i.jsx("div",{style:{color:"var(--text-muted)",fontSize:"11px",marginBottom:"2px"},children:"Site/Venue"}),i.jsx("div",{style:{color:"var(--text-primary)"},children:Me.venue})]})]})]}),Me.lineItems&&Me.lineItems.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"12px",fontWeight:"600",marginBottom:"8px",color:"var(--text-secondary)"},children:"Line Items"}),i.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:Me.lineItems.map((Ae,vt)=>i.jsx("div",{style:{padding:"10px",marginBottom:"8px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.05)",fontSize:"12px"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"12px"},children:[i.jsx("div",{style:{flex:1,color:"var(--text-primary)"},children:Ae.description||"No description"}),i.jsxs("div",{style:{color:"var(--text-secondary)",whiteSpace:"nowrap"},children:["Qty: ",Ae.qty||Ae.quantity||0," ",Ae.unit||Ae.uom||""]})]})},vt))})]})]}):i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-muted)",fontSize:"13px"},children:"No details available"})})]},de.id)})})]}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{className:"modal-button-secondary",onClick:K,children:"Cancel"})})]}),k&&i.jsx(Ou,{isOpen:S,onClose:()=>{C(!1),E(null),D(null)},onConfirm:Z,invoiceId:r,deliveryNoteId:k,initialValidation:O})]}):null}function gQ({isOpen:e,onClose:t,deliveryNoteId:n}){const[r,l]=g.useState(null),[o,u]=g.useState(!1),[d,h]=g.useState(null);g.useEffect(()=>{e&&n&&p()},[e,n]);const p=async()=>{u(!0),h(null);try{const v=await Qs(n);l(v)}catch(v){h(v instanceof Error?v.message:"Failed to load delivery note details")}finally{u(!1)}},m=v=>{if(!v)return"No date";try{return new Date(v).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch{return v}};return e?i.jsx("div",{className:"modal-overlay",onClick:t,children:i.jsxs("div",{className:"modal-container large",onClick:v=>v.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h2",{className:"modal-title",children:["Delivery Note: ",r?.noteNumber||`DN-${n.slice(0,8)}`]}),i.jsx("button",{className:"modal-close-button",onClick:t,children:i.jsx(sn,{size:20})})]}),i.jsx("div",{className:"modal-body",children:o?i.jsx("div",{className:"modal-loading",children:"Loading delivery note details..."}):d?i.jsx("div",{className:"modal-error",children:d}):r?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Supplier"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:r.supplier||"Unknown Supplier"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Date"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:m(r.date)})]})]}),(r.driver||r.vehicle||r.timeWindow)&&i.jsxs("div",{className:"modal-form-row",style:{marginTop:"16px"},children:[r.driver&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Driver"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:r.driver})]}),r.vehicle&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Vehicle"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:r.vehicle})]}),r.timeWindow&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Time Window"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:r.timeWindow})]})]})]}),r.lineItems&&r.lineItems.length>0?i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Line Items"}),i.jsxs("table",{className:"line-items-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:"Description"}),i.jsx("th",{children:"Quantity"}),i.jsx("th",{children:"Unit"})]})}),i.jsx("tbody",{children:r.lineItems.map((v,x)=>i.jsxs("tr",{children:[i.jsx("td",{children:v.description||v.item||"Unknown item"}),i.jsx("td",{children:v.qty||v.quantity||0}),i.jsx("td",{children:v.unit||v.uom||"-"})]},x))})]})]}):i.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--text-muted)"},children:"No line items available"})]}):null}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{className:"modal-button-secondary",onClick:t,children:"Close"})})]})}):null}function yQ({isOpen:e,onClose:t,invoiceId:n}){const[r,l]=g.useState(null),[o,u]=g.useState(!1),[d,h]=g.useState(null);g.useEffect(()=>{e&&n&&p()},[e,n]);const p=async()=>{u(!0),h(null);try{const m=await T3(n);l(m)}catch(m){h(m instanceof Error?m.message:"Failed to load OCR details")}finally{u(!1)}};return e?i.jsx("div",{className:"modal-overlay",onClick:t,children:i.jsxs("div",{className:"modal-container large",onClick:m=>m.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{className:"modal-title",children:"OCR Processing Details"}),i.jsx("button",{className:"modal-close-button",onClick:t,children:i.jsx(sn,{size:20})})]}),i.jsx("div",{className:"modal-body",children:o?i.jsx("div",{className:"modal-loading",children:"Loading OCR details..."}):d?i.jsx("div",{className:"modal-error",children:d}):r?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"modal-form-row",children:[r.confidence!==void 0&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Confidence Score"}),i.jsxs("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:[Math.round(r.confidence*100),"%"]})]}),r.pages!==void 0&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Pages Processed"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:r.pages})]})]}),r.processingTime!==void 0&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Processing Time"}),i.jsxs("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:[r.processingTime.toFixed(2),"s"]})]}),r.ocrEngine&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"OCR Engine"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:r.ocrEngine})]}),r.extractedText&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Extracted Text"}),i.jsx("textarea",{className:"modal-form-textarea",value:r.extractedText,readOnly:!0,style:{minHeight:"200px",fontFamily:"monospace",fontSize:"12px"}})]}),r.metadata&&Object.keys(r.metadata).length>0&&i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Additional Metadata"}),i.jsx("pre",{style:{padding:"12px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"12px",overflow:"auto",maxHeight:"300px",fontFamily:"monospace"},children:JSON.stringify(r.metadata,null,2)})]})]}):null}),i.jsx("div",{className:"modal-footer",children:i.jsx("button",{className:"modal-button-secondary",onClick:t,children:"Close"})})]})}):null}async function xQ(e,t="30d"){const n=new URLSearchParams;e&&n.append("venue_id",e),n.append("date_range",t);try{const r=await fetch(`${Be}/api/dashboard/suppliers?${n.toString()}`);if(!r.ok)throw new Error(`Failed to fetch suppliers: ${r.statusText}`);return((await r.json()).suppliers||[]).map(o=>({id:o.id||o.name?.toLowerCase().replace(/\s+/g,"-"),name:o.name,score:o.score||"C",mismatchRate:o.mismatchRate||0,lateDeliveries:o.lateDeliveries||0,priceVolatility:o.priceVolatility||0,totalSpend:o.totalSpend||0,status:"Active",matchRate:100-(o.mismatchRate||0)}))}catch(r){const l=r instanceof Error?r.message:"Unknown error";throw console.error("Error fetching suppliers:",l,r),new Error(`Failed to fetch suppliers: ${l}`)}}async function c2(e){try{const t=await fetch(`${Be}/api/suppliers/${encodeURIComponent(e)}/scorecard`);if(!t.ok){if(t.status===404)return console.log(`Supplier ${e} has no scorecard data yet`),null;throw console.error(`Failed to fetch supplier scorecard: ${t.status} ${t.statusText}`),new Error(`Failed to fetch supplier detail: ${t.statusText}`)}const n=await t.json();return{id:e,name:n.supplier_id||e,score:kQ(n.metrics),mismatchRate:n.metrics?.mismatch_rate||0,lateDeliveries:n.summary?.late_deliveries||0,priceVolatility:n.metrics?.price_volatility||0,totalSpend:0,status:"Active",accuracy:100-(n.metrics?.mismatch_rate||0),reliability:100-(n.metrics?.delivery_delay_rate||0),priceBehaviour:(n.metrics?.price_volatility||0)>10?"volatile":(n.metrics?.price_volatility||0)>5?"rising":"stable",disputeHistory:{totalCredits:0,totalEscalations:n.summary?.resolved_issues||0,avgResolutionDays:n.metrics?.avg_issue_resolution_days||0},timeline:[]}}catch(t){throw t instanceof Error&&!t.message.includes("404")&&console.error("Error fetching supplier detail:",t),t}}async function bQ(e,t="30d"){try{const n=new URLSearchParams;n.append("supplier_id",e),n.append("date_range",t);const r=await fetch(`${Be}/api/suppliers/${encodeURIComponent(e)}/issues?${n.toString()}`);if(!r.ok)throw new Error(`Failed to fetch supplier issues: ${r.statusText}`);return(await r.json()).issues||[]}catch(n){const r=n instanceof Error?n.message:"Unknown error";throw console.error("Error fetching supplier issues:",r,n),new Error(`Failed to fetch supplier issues: ${r}`)}}async function jQ(e,t,n="30d"){try{const r=new URLSearchParams;r.append("type","price"),r.append("date_range",n),r.append("supplier",e),t&&r.append("item",t);const l=await fetch(`${Be}/api/dashboard/trends?${r.toString()}`);if(!l.ok)throw new Error(`Failed to fetch pricing: ${l.statusText}`);const o=await l.json();return o.data&&o.data.length>0?[{itemId:t||"default",itemName:t||"Average Price",prices:o.data.map(u=>({date:u.date,price:u.value,forecast:u.forecast}))}]:[]}catch(r){const l=r instanceof Error?r.message:"Unknown error";throw console.error("Error fetching pricing:",l,r),new Error(`Failed to fetch supplier pricing: ${l}`)}}async function wQ(e,t="30d"){try{const n=new URLSearchParams;n.append("supplier_id",e),n.append("date_range",t);const r=await fetch(`${Be}/api/suppliers/${encodeURIComponent(e)}/deliveries?${n.toString()}`);if(!r.ok)throw new Error(`Failed to fetch supplier deliveries: ${r.statusText}`);return(await r.json()).deliveries||[]}catch(n){const r=n instanceof Error?n.message:"Unknown error";throw console.error("Error fetching supplier deliveries:",r,n),new Error(`Failed to fetch supplier deliveries: ${r}`)}}async function SQ(e){try{const t=await fetch(`${Be}/api/suppliers/${encodeURIComponent(e)}/audit`);if(!t.ok)throw new Error(`Failed to fetch supplier audit: ${t.statusText}`);return(await t.json()).audit||[]}catch(t){const n=t instanceof Error?t.message:"Unknown error";throw console.error("Error fetching supplier audit:",n,t),new Error(`Failed to fetch supplier audit: ${n}`)}}async function NQ(e,t){try{const n=await fetch(`${Be}/api/suppliers/${encodeURIComponent(e)}/status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});if(!n.ok)throw new Error(`Failed to update status: ${n.statusText}`)}catch(n){const r=n instanceof Error?n.message:"Unknown error";throw console.error("Error updating supplier status:",r,n),new Error(`Failed to update supplier status: ${r}`)}}async function CQ(e,t,n,r){try{const l=await fetch(`${Be}/api/suppliers/${encodeURIComponent(e)}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:t,author:n,role:r})});if(!l.ok)throw new Error(`Failed to add note: ${l.statusText}`)}catch(l){const o=l instanceof Error?l.message:"Unknown error";throw console.error("Error adding supplier note:",o,l),new Error(`Failed to add supplier note: ${o}`)}}async function _Q(e,t){return`Dear ${e},

We are writing to request credit for the following issues:

${t.map(n=>`- Issue ${n}`).join(`
`)}

Please review and confirm.

Thank you,
Finance Team`}function kQ(e){const t=e?.mismatch_rate||0,n=e?.delivery_delay_rate||0,r=e?.price_volatility||0;return t<2&&n<2&&r<5?"A":t<5&&n<5&&r<10?"B":t<10&&n<10?"C":t<20?"D":"E"}function EQ({isOpen:e,onClose:t,supplierName:n}){const[r,l]=g.useState(null),[o,u]=g.useState(!0),[d,h]=g.useState(null);g.useEffect(()=>{e&&n&&(u(!0),h(null),c2(n).then(m=>{m===null?(l(null),h("No scorecard available yet for this supplier")):l(m),u(!1)}).catch(m=>{console.error("Failed to fetch supplier details:",m),h(m instanceof Error?m.message:"Failed to load supplier details"),u(!1)}))},[e,n]);const p=m=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(m);return e?i.jsx("div",{className:"modal-overlay",onClick:t,children:i.jsxs("div",{className:"modal-container large",onClick:m=>m.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h2",{className:"modal-title",children:["Supplier: ",n]}),i.jsx("button",{className:"modal-close-button",onClick:t,children:i.jsx(sn,{size:20})})]}),i.jsx("div",{className:"modal-body",children:o?i.jsx("div",{className:"modal-loading",children:"Loading supplier details..."}):d?i.jsxs("div",{style:{padding:"24px",textAlign:"center",color:"var(--text-secondary)",background:"var(--bg-secondary)",borderRadius:"8px"},children:[i.jsx("div",{style:{fontSize:"14px",marginBottom:"8px"},children:d}),d.includes("No scorecard")&&i.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Scorecard data will be available once invoices and delivery notes are paired for this supplier."})]}):r?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{marginBottom:"24px"},children:[i.jsxs("div",{className:"modal-form-row",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Supplier Name"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:r.name})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Status"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:r.status})]})]}),i.jsxs("div",{className:"modal-form-row",style:{marginTop:"16px"},children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Risk Score"}),i.jsx("div",{style:{padding:"10px 14px",background:r.score==="Low"?"rgba(34, 197, 94, 0.1)":r.score==="Medium"?"rgba(234, 179, 8, 0.1)":"rgba(239, 68, 68, 0.1)",borderRadius:"8px",fontSize:"14px",fontWeight:"600",color:r.score==="Low"?"#4ade80":r.score==="Medium"?"#fbbf24":"#f87171"},children:r.score})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Accuracy"}),i.jsxs("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:[r.accuracy.toFixed(1),"%"]})]})]}),i.jsxs("div",{className:"modal-form-row",style:{marginTop:"16px"},children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Mismatch Rate"}),i.jsxs("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:[r.mismatchRate.toFixed(1),"%"]})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Reliability"}),i.jsxs("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px"},children:[r.reliability.toFixed(1),"%"]})]})]}),r.totalSpend>0&&i.jsx("div",{className:"modal-form-row",style:{marginTop:"16px"},children:i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Total Spend"}),i.jsx("div",{style:{padding:"10px 14px",background:"var(--bg-secondary)",borderRadius:"8px",fontSize:"14px",fontWeight:"600"},children:p(r.totalSpend)})]})})]}),i.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid var(--border-color)"},children:[i.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px"},children:"Additional Information"}),i.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",lineHeight:"1.6"},children:i.jsx("p",{children:"For more detailed supplier information, visit the Suppliers page."})})]})]}):null})]})}):null}function Kx(e,t,n){const r=e.doc_id||e.id||e.invoice_id||e.invoice_no||e.invoice_number||e.doc_id||(t&&n?`${t}-${n}`:void 0)||String(Date.now()),l=e.supplier||e.supplier_name||e.vendor||e.vendor_name||e.parsed&&(e.parsed.supplier||e.parsed.supplier_name||e.parsed.vendor||e.parsed.vendor_name)||e.invoice&&(e.invoice.supplier||e.invoice.supplier_name||e.invoice.vendor||e.invoice.vendor_name),o=e.invoice_no||e.invoice_number||e.invoiceId||e.invoice_id||e.parsed&&(e.parsed.invoice_no||e.parsed.invoice_number||e.parsed.invoice_id)||e.invoice&&(e.invoice.invoice_no||e.invoice.invoice_number||e.invoice.invoice_id),u=e.date||e.invoice_date||e.doc_date||e.parsed&&(e.parsed.date||e.parsed.invoice_date||e.parsed.doc_date)||e.invoice&&(e.invoice.date||e.invoice.invoice_date||e.invoice.doc_date);let d;e.value!==void 0&&e.value!==null?d=typeof e.value=="number"?e.value:parseFloat(String(e.value)):e.total!==void 0&&e.total!==null?d=typeof e.total=="number"?e.total:parseFloat(String(e.total)):e.grand_total!==void 0&&e.grand_total!==null?d=typeof e.grand_total=="number"?e.grand_total:parseFloat(String(e.grand_total)):e.amount!==void 0&&e.amount!==null?d=typeof e.amount=="number"?e.amount:parseFloat(String(e.amount)):e.value_pence!==void 0&&e.value_pence!==null?d=(typeof e.value_pence=="number"?e.value_pence:parseFloat(String(e.value_pence)))/100:e.parsed?e.parsed.value!==void 0&&e.parsed.value!==null?d=typeof e.parsed.value=="number"?e.parsed.value:parseFloat(String(e.parsed.value)):e.parsed.value_pence!==void 0&&e.parsed.value_pence!==null?d=(typeof e.parsed.value_pence=="number"?e.parsed.value_pence:parseFloat(String(e.parsed.value_pence)))/100:e.parsed.total!==void 0&&e.parsed.total!==null&&(d=typeof e.parsed.total=="number"?e.parsed.total:parseFloat(String(e.parsed.total))):e.invoice&&(e.invoice.value!==void 0&&e.invoice.value!==null?d=typeof e.invoice.value=="number"?e.invoice.value:parseFloat(String(e.invoice.value)):e.invoice.value_pence!==void 0&&e.invoice.value_pence!==null?d=(typeof e.invoice.value_pence=="number"?e.invoice.value_pence:parseFloat(String(e.invoice.value_pence)))/100:e.invoice.total!==void 0&&e.invoice.total!==null&&(d=typeof e.invoice.total=="number"?e.invoice.total:parseFloat(String(e.invoice.total))));const h=e.confidence!==void 0&&e.confidence!==null?typeof e.confidence=="number"?e.confidence:parseFloat(String(e.confidence)):e.ocr_confidence!==void 0&&e.ocr_confidence!==null?typeof e.ocr_confidence=="number"?e.ocr_confidence:parseFloat(String(e.ocr_confidence)):e.overall_confidence!==void 0&&e.overall_confidence!==null?typeof e.overall_confidence=="number"?e.overall_confidence:parseFloat(String(e.overall_confidence)):e.parsed&&e.parsed.confidence!==void 0&&e.parsed.confidence!==null?typeof e.parsed.confidence=="number"?e.parsed.confidence:parseFloat(String(e.parsed.confidence)):e.invoice&&e.invoice.confidence!==void 0&&e.invoice.confidence!==null?typeof e.invoice.confidence=="number"?e.invoice.confidence:parseFloat(String(e.invoice.confidence)):void 0;let p;const m=e.pages||e.ocr_pages||e.page_metrics||e.parsed&&e.parsed.pages;Array.isArray(m)&&(p=m.map((w,N)=>({index:w.index!==void 0?w.index:w.page_num!==void 0?w.page_num:N+1,confidence:w.confidence!==void 0?typeof w.confidence=="number"?w.confidence:parseFloat(String(w.confidence)):void 0,words:w.words!==void 0?typeof w.words=="number"?w.words:parseInt(String(w.words),10):void 0,psm:w.psm!==void 0?w.psm:void 0,text:w.text||w.ocr_text||w.extracted_text||void 0})));let v;const x=e.line_items||e.items||e.lines||e.parsed&&(e.parsed.line_items||e.parsed.items)||e.invoice&&(e.invoice.items||e.invoice.line_items);return Array.isArray(x)&&(v=x.map(w=>{let N;w.price!==void 0&&w.price!==null?N=typeof w.price=="number"?w.price:parseFloat(String(w.price)):w.unit_price!==void 0&&w.unit_price!==null?N=typeof w.unit_price=="number"?w.unit_price:parseFloat(String(w.unit_price)):w.unit_price_pence!==void 0&&w.unit_price_pence!==null&&(N=(typeof w.unit_price_pence=="number"?w.unit_price_pence:parseFloat(String(w.unit_price_pence)))/100);let S;return w.total!==void 0&&w.total!==null?S=typeof w.total=="number"?w.total:parseFloat(String(w.total)):w.line_total!==void 0&&w.line_total!==null?S=typeof w.line_total=="number"?w.line_total:parseFloat(String(w.line_total)):w.line_total_pence!==void 0&&w.line_total_pence!==null&&(S=(typeof w.line_total_pence=="number"?w.line_total_pence:parseFloat(String(w.line_total_pence)))/100),{description:w.description||w.desc||w.name||w.item||"",qty:w.qty!==void 0?typeof w.qty=="number"?w.qty:parseFloat(String(w.qty)):w.quantity!==void 0?typeof w.quantity=="number"?w.quantity:parseFloat(String(w.quantity)):void 0,unit:w.unit||w.uom||"",price:N,total:S,bbox:w.bbox||void 0,...w}})),_3({id:r,supplier:l,invoiceNo:o,date:u,value:d,confidence:h,pages:p,lineItems:v,raw:e})}async function DQ(e){try{const t=await fetch(`${Be}/api/documents/${encodeURIComponent(e)}/status`);if(!t.ok)throw new Error(`Document status check failed: ${t.status}`);return t.json()}catch(t){return console.warn(`[UPLOAD] Failed to check document status for doc_id=${e}:`,t),{status:"processing",has_invoice:!1}}}async function OQ(e,t=80,n=1500){console.log(`[UPLOAD] Starting polling for doc_id: ${e} (max ${t} attempts, ${n}ms interval)`);const r=18e4,l=Date.now();let o="processing";for(let u=0;u<t;u++)try{const d=`${Be}/api/upload/status?doc_id=${encodeURIComponent(e)}`;console.log(`[UPLOAD] Poll attempt ${u+1}/${t}: ${d}`);const h=await fetch(d);if(!h.ok){console.warn(`[UPLOAD] Poll attempt ${u+1} failed: HTTP ${h.status}`),await new Promise(S=>setTimeout(S,n));continue}const p=await h.json();o=p?.status||"processing";const m=Date.now()-l;if(m>=r&&o==="processing"){console.warn(`[UPLOAD] Document has been processing for ${m}ms (${m/1e3}s) - checking document status directly`);const S=await DQ(e);if(S.status==="error")return console.warn(`[UPLOAD] Document status check revealed error status - stopping polling for doc_id: ${e}`),{id:e,supplier:void 0,invoiceNo:void 0,date:void 0,value:void 0,confidence:void 0,pages:void 0,lineItems:[],raw:{status:"error",error:S.error},error:S.error||"OCR processing failed"};S.has_invoice&&console.log("[UPLOAD] Document status check shows invoice exists - continuing to poll for line items")}const v=p?.parsed&&Object.keys(p.parsed).length>0||p?.invoice&&Object.keys(p.invoice).length>0,x=Array.isArray(p?.items)&&p.items.length>0,j=p?.status==="ready"||p?.status==="scanned"||p?.status==="completed"||p?.status==="submitted"||p?.status==="duplicate",w=(p?.status==="duplicate"||p?.status==="error")&&(x||v),N=p?.status==="error";if(console.log(`[UPLOAD] Poll attempt ${u+1} response:`,{status:p?.status,hasItems:x,isReady:j,hasData:v,isDuplicateOrErrorWithData:w,isError:N,itemsCount:p?.items?.length||0}),x||j||w||N){if(console.log(`[UPLOAD] Polling complete after ${u+1} attempts (hasItems=${x}, isReady=${j}, isDuplicateOrErrorWithData=${w}, isError=${N})`),N&&!x&&!v){const k=p?.error||"OCR processing failed";return console.warn(`[UPLOAD] Status is 'error' without items/data - returning minimal metadata for doc_id: ${e}, error: ${k}`),{id:e,supplier:void 0,invoiceNo:void 0,date:void 0,value:void 0,confidence:void 0,pages:void 0,lineItems:[],raw:{...p,error:k},error:k}}const S={...p,...p?.parsed||{},...p?.invoice||{},line_items:p?.items||p?.line_items||p?.invoice?.items||p?.invoice?.line_items||[],items:p?.items||p?.line_items||p?.invoice?.items||p?.invoice?.line_items||[],supplier:p?.supplier||p?.parsed?.supplier||p?.invoice?.supplier||p?.supplier_name||p?.parsed?.supplier_name||p?.invoice?.supplier_name,supplier_name:p?.supplier_name||p?.parsed?.supplier_name||p?.invoice?.supplier_name||p?.supplier||p?.parsed?.supplier||p?.invoice?.supplier,total:p?.total||p?.parsed?.total||p?.invoice?.total,total_value:p?.total_value||p?.parsed?.total_value||p?.invoice?.total_value||p?.total||p?.parsed?.total||p?.invoice?.total,value:p?.value||p?.parsed?.value||p?.invoice?.value||p?.total||p?.parsed?.total||p?.invoice?.total,raw:p};if(p?.invoice&&typeof p.invoice=="object"){const k=Dl(p.invoice);return{id:String(k.id||k.docId||e),supplier:k.supplier,invoiceNo:String(k.id||""),date:k.invoiceDate,value:k.totalValue,confidence:k.confidence||void 0,pages:void 0,lineItems:k.lineItems.map(E=>({description:E.description,qty:E.qty,unit:E.uom||"",price:E.unitPrice,total:E.total})),raw:p}}return Kx(S,void 0,Date.now())}await new Promise(S=>setTimeout(S,n))}catch(d){console.warn(`Poll attempt ${u+1} failed:`,d),await new Promise(h=>setTimeout(h,n))}return null}function TQ(e,t={}){return new Promise(n=>{const r=new XMLHttpRequest,l=new FormData;l.append("file",e),r.upload.addEventListener("progress",u=>{if(u.lengthComputable&&t.onProgress){const d={loaded:u.loaded,total:u.total,percentage:Math.round(u.loaded/u.total*100)};t.onProgress(d)}}),r.addEventListener("load",async()=>{if(console.log(`[UPLOAD] XHR load event: status=${r.status}, response length=${r.responseText?.length||0}`),r.status>=200&&r.status<300)try{const u=JSON.parse(r.responseText);console.log("[UPLOAD] Upload response:",{status:u.status,doc_id:u.doc_id,has_parsed:!!u.parsed});const d=u.doc_id||u.id||u.existing_doc_id;if((u.status==="processing"||u.status==="duplicate")&&d){console.log(`[UPLOAD] Status is "${u.status}", will poll for doc_id: ${d}`);const p=Kx(u,e.name,Date.now());n({success:!0,metadata:p}),console.log(`[UPLOAD] Starting polling for doc_id: ${d}`);const m=await OQ(d);m?(console.log("[UPLOAD] Polling completed, calling onComplete callback"),t.onComplete&&t.onComplete(m)):(console.warn(`[UPLOAD] Polling timed out or returned null for doc_id: ${d}`),t.onComplete&&(console.log("[UPLOAD] Calling onComplete with initial metadata due to polling timeout"),t.onComplete(p)));return}console.log("[UPLOAD] Upload completed immediately (no polling needed)");const h=Kx(u,e.name,Date.now());n({success:!0,metadata:h})}catch(u){n({success:!1,error:`Failed to parse response: ${u instanceof Error?u.message:"Unknown error"}`})}else n({success:!1,error:`Upload failed: ${r.status} ${r.statusText}`})}),r.addEventListener("error",()=>{console.error("[UPLOAD] XHR error event fired"),n({success:!1,error:"Network error: Failed to connect to server"})}),r.addEventListener("abort",()=>{n({success:!1,error:"Upload cancelled"})});const o=`${Be}/api/upload`;console.log(`[UPLOAD] Starting XHR upload to: ${o}`),r.open("POST",o),r.send(l)})}function AQ({fileName:e,percentage:t,isComplete:n,isProcessing:r,hasError:l,errorMessage:o,docId:u,onComplete:d,onRetry:h,queuePosition:p,queuedCount:m}){const[v,x]=g.useState("Calculating..."),[j]=g.useState(Date.now()),[w,N]=g.useState(null),[S,C]=g.useState(null),[k,E]=g.useState(!0),[O,D]=g.useState(!1);return g.useEffect(()=>{r&&!w&&N(Date.now()),t>=45&&t<90&&!S&&C(Date.now())},[r,w,t,S]),g.useEffect(()=>{if(r)if(w){const A=Math.floor((Date.now()-w)/1e3);let M=65,q=Math.max(5,M-A);A>50?(M=80,q=Math.max(5,M-A)):A>30&&(M=70,q=Math.max(5,M-A)),q>5?x(`${A}s elapsed  ~${Math.ceil(q)}s remaining`):x(`${A}s elapsed`)}else x("Processing...");else if(t>0&&t<100){const A=(Date.now()-j)/1e3;let M=0;if(t<20)M=Math.max(10,70-A);else if(t<45)M=Math.max(10,68-A);else if(t<90){const q=S?(S-j)/1e3:8,te=A-q;M=Math.max(10,65-te)}else{const q=S?(S-j)/1e3:8,te=A-q;M=Math.max(10,50-te)}if(M=Math.max(10,M),M<60)x(`~${Math.ceil(M)}s`);else{const q=Math.ceil(M/60);x(`~${q}m`)}}else t>=100&&!r&&x("Complete")},[t,j,n,r,w,S]),g.useEffect(()=>{if(n){const A=setTimeout(()=>{D(!0)},1500),M=setTimeout(()=>{E(!1),d&&d()},3e3);return()=>{clearTimeout(A),clearTimeout(M)}}},[n,d]),k?p!==void 0&&m!==void 0?i.jsx("div",{className:"upload-progress-bar queued",children:i.jsxs("div",{className:"upload-progress-header",children:[i.jsx("div",{className:"upload-progress-icon",children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:i.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3"})})}),i.jsxs("div",{className:"upload-progress-info",children:[i.jsx("div",{className:"upload-progress-filename",children:e}),i.jsx("div",{className:"upload-progress-stats",children:i.jsxs("span",{className:"upload-progress-status",children:["Queued (",p," of ",m,")"]})})]})]})}):i.jsxs("div",{className:`upload-progress-bar ${n?"complete":""} ${r?"processing":""} ${O?"fading-out":""}`,children:[i.jsxs("div",{className:"upload-progress-header",children:[i.jsx("div",{className:"upload-progress-icon",children:n?i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[i.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),i.jsx("path",{d:"M5 8L7 10L11 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}):i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"upload-spinner",children:[i.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.2"}),i.jsx("path",{d:"M15 8a7 7 0 0 1-7 7",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),i.jsxs("div",{className:"upload-progress-info",children:[i.jsx("div",{className:"upload-progress-filename",children:e}),i.jsx("div",{className:"upload-progress-stats",children:r?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"upload-progress-status",children:l?"OCR Failed":"Processing OCR"}),i.jsx("span",{className:"upload-progress-separator",children:""}),i.jsx("span",{className:"upload-progress-time",title:o||void 0,children:l?o?o.substring(0,50)+(o.length>50?"...":""):"Check backend logs":v}),l&&u&&h&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"upload-progress-separator",children:""}),i.jsx("button",{className:"upload-progress-retry",onClick:A=>{A.stopPropagation(),h(u)},title:"Retry OCR processing",children:"Retry"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"upload-progress-percentage",children:[Math.round(t),"%"]}),i.jsx("span",{className:"upload-progress-separator",children:""}),i.jsx("span",{className:"upload-progress-time",children:v})]})})]})]}),i.jsx("div",{className:"upload-progress-track",children:i.jsx("div",{className:`upload-progress-fill ${r?"processing-pulse":""} ${l?"error":""}`,style:{width:n?"100%":`${Math.min(100,Math.max(0,t))}%`,transition:n?"width 0.3s ease-out":r?"none":"width 0.15s linear",animation:r&&!l?"processingPulse 2s ease-in-out infinite":void 0}})})]}):null}function MQ(){const e=Th(),[t,n]=g.useState("Waterloo"),[r,l]=g.useState("month"),[o,u]=g.useState(""),[d,h]=g.useState("date"),[p,m]=g.useState(null),[v,x]=g.useState([]),[j,w]=g.useState(null),[N,S]=g.useState(!1),[C,k]=g.useState(null),[E,O]=g.useState(new Set),[D,A]=g.useState(new Map),[M,q]=g.useState(new Set),[te,ce]=g.useState(new Set),[G,R]=g.useState(new Map),[F,he]=g.useState([]),[ee,U]=g.useState(new Set),[ne,J]=g.useState(new Map),[xe,Ce]=g.useState(new Map),$=g.useRef(new Map),ie=g.useRef(new Map),we=g.useRef(null),[Z,K]=g.useState(!1),[Ee,de]=g.useState(!1),[Se,W]=g.useState(!1),[me,Me]=g.useState(!1),[Q,$e]=g.useState(!1),[Ae,vt]=g.useState(null),[jt,gt]=g.useState(null),[Xn,pn]=g.useState(null),[Wn,ca]=g.useState(null),[Mn,yt]=g.useState(null),[Tt,Ur]=g.useState("manual"),[Pn,Ln]=g.useState(0),[ln,Ca]=g.useState(null),[Fr,oi]=g.useState([]),[qr,Zr]=g.useState(null),[Ut,Zn]=g.useState(!1),[At,Lt]=g.useState(null),[Ft,Vt]=g.useState([]),[qt,nn]=g.useState([]),[on,cn]=g.useState(!1),[hn,H]=g.useState(null),[Ve,Gt]=g.useState(null),[Dt,ut]=g.useState(""),[wt,Yt]=g.useState(!1),[_t,Ge]=g.useState(!1),kt=g.useCallback(async()=>{console.log("[Invoices] fetchInvoices called",{sortBy:d,API_BASE_URL:Be}),S(!0),k(null);const I=new AbortController,ge=setTimeout(()=>I.abort(),8e3);try{const De=new URLSearchParams;De.append("sort",d),De.append("limit","100");const[_e,Oe]=await Promise.all([fetch(`${Be}/api/invoices?${De.toString()}`,{signal:I.signal}).catch(()=>({ok:!1,json:async()=>({invoices:[]})})),fetch(`${Be}/api/manual/invoices?${De.toString()}`,{signal:I.signal}).catch(()=>({ok:!1,json:async()=>({invoices:[]})}))]);clearTimeout(ge);const ve=((_e.ok?await _e.json():{invoices:[]}).invoices||[]).map(Te=>{const Fe=Dl(Te);return{...Fe,id:Fe.id||Fe.docId||0,status:"scanned",dbStatus:Te.status||Fe.status,matched:Fe.paired||!1,flagged:Fe.issuesCount&&Fe.issuesCount>0||!1,pending:Fe.status==="pending",hasDeliveryNote:!!Fe.deliveryNoteId,readyToSubmit:Fe.status==="ready"}}),st=((Oe.ok?await Oe.json():{invoices:[]}).invoices||[]).map(Te=>{const Fe=Dl(Te);return{...Fe,id:Fe.id||Fe.docId||0,status:"manual",dbStatus:Te.status||Fe.status,matched:Fe.paired||!1,flagged:Fe.issuesCount&&Fe.issuesCount>0||!1,pending:Fe.status==="pending",hasDeliveryNote:!!Fe.deliveryNoteId,readyToSubmit:Fe.status==="ready"}}),ot=[...ve,...st],mt=new Map;for(const Te of ot){const Fe=Te.id||Te.docId||0,an=mt.get(Fe);(!an||Te.status==="manual"&&an.status==="scanned")&&mt.set(Fe,Te)}const tt=Array.from(mt.values());tt.sort((Te,Fe)=>{switch(d){case"date":const an=Te.invoiceDate?new Date(Te.invoiceDate).getTime():0;return(Fe.invoiceDate?new Date(Fe.invoiceDate).getTime():0)-an;case"supplier":return(Te.supplier||"").localeCompare(Fe.supplier||"");case"value":return(Fe.totalValue||0)-(Te.totalValue||0);case"venue":return(Te.venue||"").localeCompare(Fe.venue||"");case"status":if(Te.matched!==Fe.matched)return Te.matched?-1:1;const gr=Te.readyToSubmit||!1,er=Fe.readyToSubmit||!1;return gr!==er?gr?-1:1:0;default:return 0}}),console.log("[Invoices] Merged invoice list:",{count:tt.length,scanned:ve.length,manual:st.length,duplicatesRemoved:ot.length-tt.length}),x(tt),k(null)}catch(De){if(clearTimeout(ge),De instanceof Error&&De.name==="AbortError")k("Unable to connect to the server. The backend may not be running or the API endpoint is unavailable."),console.error("[Invoices] API request timed out");else{const _e=De instanceof Error?De.message:"Failed to load invoices";k(_e),console.error("[Invoices] Error fetching invoices:",De)}x([])}finally{S(!1),console.log("[Invoices] fetchInvoices completed")}},[d]),et=g.useCallback(async I=>{try{let ge=await fetch(`${Be}/api/invoices/${I}`),De=!1;if(ge.ok||(ge=await fetch(`${Be}/api/manual/invoices/${I}`),De=!0),!ge.ok)throw new Error(`Failed to fetch invoice: ${ge.status}`);const _e=await ge.json();console.log("[Invoices] Raw invoice detail response:",_e);const Oe=_e.invoice||_e,be=Dl(Oe);console.log("[Invoices] Normalized invoice detail:",be);const ve=be.confidence||0,Re=be.status||Oe.status,st=Oe.source,ot=Oe.ocr_stage||Oe.ocrStage,mt=De||ve===1&&Re==="ready"||st==="manual"||ot==="manual",tt={id:String(be.id||be.docId),docId:be.docId||String(be.id||be.docId),invoiceNumber:be.invoiceNumber,supplier:be.supplier||"Unknown Supplier",date:be.invoiceDate,venue:be.venue||"Main Restaurant",value:be.totalValue||0,subtotal:be.subtotal,vat:be.vat,status:mt?"manual":"scanned",matched:be.paired||!1,flagged:be.issuesCount&&be.issuesCount>0||!1,deliveryNote:void 0,lineItems:be.lineItems||[],confidence:be.confidence||null};if(console.log("[Invoices] Created invoice detail:",tt),w(tt),be.deliveryNoteId){const Te=String(be.deliveryNoteId);if(/^dn-?\d+/i.test(Te.trim()))console.warn(`Delivery note ID appears to be a note number (${Te}), not a database ID. Skipping fetch.`),w({...tt,deliveryNote:{id:Te,noteNumber:Te}});else{const an={id:Te,noteNumber:`DN-${Te.slice(0,8)}`};w({...tt,deliveryNote:an}),Qs(Te).then(Qt=>{if(!Qt){console.warn(`Delivery note ${Te} not found - using basic info only`);return}const gr={id:Te,noteNumber:Qt.noteNumber||Qt.deliveryNoteNumber||Qt.delivery_no||Qt.note_number||`DN-${Te.slice(0,8)}`,date:Qt.date||Qt.deliveryDate||Qt.delivery_date,driver:Qt.driver,vehicle:Qt.vehicle,timeWindow:Qt.timeWindow};(Qt.lineItems||Qt.line_items)&&(gr.lineItems=Qt.lineItems||Qt.line_items),w(er=>er&&er.id===tt.id?{...er,deliveryNote:gr}:er)}).catch(Qt=>{console.warn("Failed to fetch delivery note details:",Qt)})}}}catch(ge){console.error("Error fetching invoice detail:",ge),w(null)}},[]);g.useEffect(()=>{(async()=>{try{const ge=`${Be}/api/health`;console.log("[Invoices] Checking backend health at:",ge);const De=new AbortController,_e=setTimeout(()=>De.abort(),2e3);try{const Oe=await fetch(ge,{signal:De.signal,cache:"no-cache",headers:{"Cache-Control":"no-cache"}});if(clearTimeout(_e),Oe.ok){const be=await Oe.json();console.log("[Invoices] Backend health check passed:",be)}else console.warn("[Invoices] Backend health check failed:",Oe.status,Oe.statusText)}catch(Oe){if(clearTimeout(_e),Oe.name==="AbortError")console.warn("[Invoices] Backend health check timed out - backend may not be running or is slow to respond");else throw Oe}}catch(ge){ge.name!=="AbortError"&&(console.warn("[Invoices] Backend health check error:",ge.message||ge),console.info("[Invoices] Tip: Make sure the backend is running. In dev mode, check Vite proxy config."))}})()},[]),g.useEffect(()=>{console.log("[Invoices] useEffect triggered",{sortBy:d});let I=!0;return kt().catch(ge=>{console.error("[Invoices] useEffect fetchInvoices error:",ge)}),()=>{console.log("[Invoices] useEffect cleanup"),I=!1}},[d]),g.useEffect(()=>{p?et(p):w(null)},[p,et]),g.useEffect(()=>{const I=new Date().toISOString();let ge=[];ge=[...PK(v)],j&&(ge=[...ge,...MK(j)]),oi(ge),Zr(I)},[j,v]);const Hr=I=>I<.5?4*I*I*I:1-Math.pow(-2*I+2,3)/2,Dn=g.useCallback((I,ge,De,_e)=>{const Oe=$.current.get(I);Oe&&cancelAnimationFrame(Oe);const be=Date.now(),ve=ge,Re=()=>{const ot=Date.now()-be,mt=Math.min(ot/_e,1),tt=Hr(mt),Te=ve+(De-ve)*tt;if(J(Fe=>{const an=new Map(Fe);return an.set(I,Te),an}),mt<1){const Fe=requestAnimationFrame(Re);$.current.set(I,Fe)}else $.current.delete(I)},st=requestAnimationFrame(Re);$.current.set(I,st)},[]),Ot=g.useRef(null),Le=g.useCallback(async(I,ge)=>{console.log(`[UPLOAD] Starting upload for file: ${ge.name} (${(ge.size/1024).toFixed(1)}KB)`),R(Oe=>{const be=new Map(Oe);return be.set(I,"uploading"),be}),J(Oe=>new Map(Oe).set(I,0)),O(Oe=>new Set(Oe).add(I));let De=!1,_e;try{const Oe=await TQ(ge,{onProgress:be=>{const ve=Math.min(20,Math.round(be.percentage*.2));console.log(`[UPLOAD] onProgress: ${be.percentage}% upload  ${ve}% staged (fileId: ${I})`),J(Re=>{const st=new Map(Re);return st.set(I,ve),st})},onComplete:async be=>{De=!0,console.log(`[UPLOAD] onComplete called for ${ge.name} (fileId: ${I})`),console.log("[UPLOAD] Metadata:",{id:be.id,status:be.raw?.status,hasItems:!!be.lineItems?.length}),be.id&&(_e=String(be.id),console.log(`[UPLOAD] Storing metadata: fileId=${I}, invoiceId=${_e}, status=${be.raw?.status}, error=${be.error||be.raw?.error||"none"}`),Ce(ve=>{const Re=new Map(ve);return Re.set(I,{id:_e,fileName:ge.name,raw:be.raw,error:be.error||be.raw?.error}),Re})),console.log(`[UPLOAD] Setting progress to 20% for fileId: ${I}`),J(ve=>{const Re=new Map(ve),st=Re.get(I)||0;return console.log(`[UPLOAD] Progress update: ${st}%  20% (fileId: ${I})`),Re.set(I,20),Re}),setTimeout(()=>{console.log(`[UPLOAD] Animating progress 20%  45% for fileId: ${I}`),Dn(I,20,45,2e3)},500),setTimeout(()=>{console.log(`[UPLOAD] Animating progress 45%  90% and setting stage to 'waiting-for-card' for fileId: ${I}`),Dn(I,45,90,1500),R(ve=>{const Re=new Map(ve),st=Re.get(I);return console.log(`[UPLOAD] Stage update: ${st}  'waiting-for-card' (fileId: ${I})`),Re.set(I,"waiting-for-card"),Re}),q(ve=>new Set(ve).add(I))},2500),console.log(`[UPLOAD] Waiting for OCR to complete for doc_id: ${_e}...`),await kt(),be.id&&(ce(ve=>new Set(ve).add(String(be.id))),setTimeout(()=>{ce(ve=>{const Re=new Set(ve);return Re.delete(String(be.id)),Re})},1e3)),setTimeout(()=>{Ln(ve=>ve+1)},200)}});if(console.log(`[UPLOAD] Upload result for ${ge.name}:`,{success:Oe.success,hasMetadata:!!Oe.metadata,error:Oe.error}),Oe.success&&Oe.metadata)if(Oe.metadata.id&&(_e=String(Oe.metadata.id),Ce(be=>{const ve=new Map(be);return ve.set(I,{id:_e,fileName:ge.name}),ve})),console.log(`[UPLOAD] Upload result status: ${Oe.metadata.raw?.status}, onCompleteCalled: ${De}`),Oe.metadata.raw?.status==="processing"||Oe.metadata.raw?.status==="duplicate"){if(Oe.metadata.raw?.status==="duplicate"&&_e){const be=Oe.metadata.raw?.has_invoice??!1,ve=Oe.metadata.raw?.doc_status;if(v.some(st=>String(st.docId||"")===_e)||be){console.log(`[UPLOAD] Duplicate file - invoice already exists (matched by docId=${_e}), completing immediately`),J(st=>{const ot=new Map(st);return ot.set(I,100),ot}),R(st=>{const ot=new Map(st);return ot.set(I,"complete"),ot}),e.success(`File already uploaded: ${ge.name}`),setTimeout(()=>{U(st=>{const ot=new Set(st);return ot.delete(I),ot}),J(st=>{const ot=new Map(st);return ot.delete(I),ot}),R(st=>{const ot=new Map(st);return ot.delete(I),ot}),Ot.current&&Ot.current()},2e3);return}else if(ve==="error"){console.log(`[UPLOAD] Duplicate document with error status (doc_id=${_e}) - showing error state immediately`),fetch(`${Be}/api/documents/${encodeURIComponent(_e)}/status`).then(st=>{if(st.ok)return st.json();throw new Error(`Status check failed: ${st.status}`)}).then(st=>{const ot=st.error||Oe.metadata.raw?.error||"OCR processing failed previously";Ce(mt=>{const tt=new Map(mt),Te=tt.get(I)||{};return tt.set(I,{...Te,id:_e,error:ot,raw:{...Te.raw,...Oe.metadata.raw,status:"error",error:ot}}),tt})}).catch(st=>{console.warn("[UPLOAD] Failed to fetch document status for error details:",st),Ce(ot=>{const mt=new Map(ot),tt=mt.get(I)||{};return mt.set(I,{...tt,id:_e,error:Oe.metadata.raw?.error||"OCR processing failed previously",raw:{...tt.raw,...Oe.metadata.raw,status:"error"}}),mt})}),R(st=>{const ot=new Map(st);return ot.set(I,"waiting-for-card"),ot}),J(st=>{const ot=new Map(st);return ot.set(I,90),ot});return}else console.log(`[UPLOAD] Duplicate document found (doc_id=${_e}, status=${ve}) but no invoice exists yet. Will poll for invoice creation.`)}console.log(`[UPLOAD] Upload returned ${Oe.metadata.raw?.status} status, waiting for onComplete callback...`),setTimeout(()=>{De||(console.warn(`[UPLOAD] onComplete not called within 10s for ${ge.name}, proceeding with basic flow`),console.warn("[UPLOAD] Metadata:",Oe.metadata),J(be=>{const ve=new Map(be);return ve.set(I,90),ve}),R(be=>{const ve=new Map(be);return ve.set(I,"waiting-for-card"),ve}),q(be=>new Set(be).add(I)),Oe.metadata.id&&Ce(be=>{const ve=new Map(be);return ve.set(I,{id:String(Oe.metadata.id),fileName:ge.name}),ve}),kt().catch(be=>console.error("[UPLOAD] Error fetching invoices:",be)))},1e4)}else console.log(`[UPLOAD] Upload completed immediately for ${ge.name}`),J(be=>{const ve=new Map(be);return ve.set(I,100),ve}),R(be=>{const ve=new Map(be);return ve.set(I,"complete"),ve}),e.success(`Successfully uploaded ${ge.name}`),setTimeout(()=>{U(be=>{const ve=new Set(be);return ve.delete(I),ve}),J(be=>{const ve=new Map(be);return ve.delete(I),ve}),R(be=>{const ve=new Map(be);return ve.delete(I),ve}),Ot.current&&Ot.current()},2e3);else R(be=>{const ve=new Map(be);return ve.delete(I),ve}),q(be=>{const ve=new Set(be);return ve.delete(I),ve}),console.error(`[UPLOAD] Upload failed for ${ge.name}:`,Oe.error),e.error(Oe.error||"Upload failed"),U(be=>{const ve=new Set(be);return ve.delete(I),ve}),J(be=>{const ve=new Map(be);return ve.delete(I),ve}),Ce(be=>{const ve=new Map(be);return ve.delete(I),ve}),Ot.current&&Ot.current()}catch(Oe){console.error(`[UPLOAD] Error uploading ${ge.name}:`,Oe);const be=Oe instanceof Error?Oe.message:"Unknown error";e.error(`Upload failed: ${be}`),R(ve=>{const Re=new Map(ve);return Re.delete(I),Re}),q(ve=>{const Re=new Set(ve);return Re.delete(I),Re}),U(ve=>{const Re=new Set(ve);return Re.delete(I),Re}),J(ve=>{const Re=new Map(ve);return Re.delete(I),Re}),Ce(ve=>{const Re=new Map(ve);return Re.delete(I),Re}),Ot.current&&Ot.current(),O(ve=>{const Re=new Set(ve);return Re.delete(I),Re}),U(ve=>{const Re=new Set(ve);return Re.delete(I),Re}),J(ve=>{const Re=new Map(ve);return Re.delete(I),Re}),q(ve=>{const Re=new Set(ve);return Re.delete(I),Re}),Ce(ve=>{const Re=new Map(ve);return Re.delete(I),Re}),ie.current.delete(I),setTimeout(()=>{Ot.current&&Ot.current()},100)}},[Dn,kt,e,v]),ht=g.useCallback(()=>{U(I=>{const ge=new Set(I),De=[],_e=[];return he(Oe=>{const be=[...Oe];for(;ge.size<3&&be.length>0;){const ve=be.shift();if(ve){const Re=ie.current.get(ve);Re&&(ge.add(ve),De.push({fileId:ve,file:Re}),_e.push(ve))}}return De.length>0&&setTimeout(()=>{De.forEach(({fileId:ve,file:Re})=>{Le(ve,Re)})},0),be.filter(ve=>!_e.includes(ve))}),ge})},[Le]);Ot.current=ht,g.useEffect(()=>{const I=Array.from(G.entries()).filter(([ge,De])=>De==="waiting-for-card"||De==="processing").map(([ge])=>ge);if(I.length>0){console.log(`[UPLOAD] Setting up periodic refresh for ${I.length} waiting files: ${I.join(", ")}`);const ge=setInterval(()=>{const De=Array.from(G.entries()).filter(([_e,Oe])=>Oe==="waiting-for-card"||Oe==="processing");De.length>0?(console.log(`[UPLOAD]  Periodic refresh: checking for ${De.length} waiting files`),kt().catch(_e=>console.error("[UPLOAD]  Error refreshing invoices:",_e))):(console.log("[UPLOAD]  No waiting files, stopping periodic refresh"),clearInterval(ge))},5e3);return()=>{console.log("[UPLOAD] Cleaning up periodic refresh interval"),clearInterval(ge)}}},[G]);const it=g.useRef(new Set),Ye=g.useRef("");g.useEffect(()=>{const I=Array.from(G.entries()).filter(([_e,Oe])=>Oe==="waiting-for-card"||Oe==="processing").map(([_e])=>_e);if(I.length===0){it.current.clear(),Ye.current="";return}if(v.length===0){console.log("[UPLOAD]  Waiting for invoices to appear (currently 0 invoices)");return}const ge=v.map(_e=>`${_e.id}/${_e.docId}`).sort().join(","),De=ge!==Ye.current;De&&(Ye.current=ge,it.current.clear()),console.log(`[UPLOAD]  Card detection effect running: ${I.length} waiting files, ${v.length} invoices, invoiceIdsChanged=${De}, invoiceIds=${ge.substring(0,100)}...`),I.forEach(_e=>{if(it.current.has(_e))return;const Oe=xe.get(_e);if(!Oe?.id){console.warn(`[UPLOAD]  No metadata.id for fileId=${_e}, metadata=`,Oe);return}const be=String(Oe.id);Number(Oe.id);const ve=v.some(mt=>{const tt=String(mt.id),Te=Number(mt.id),Fe=Number(Oe.id),an=!isNaN(Te)&&!isNaN(Fe)&&Te!==0&&Fe!==0&&Te===Fe,Qt=tt===be,gr=Qt||an;return gr&&console.log(`[UPLOAD]  Match by ID: inv.id=${tt} (${typeof mt.id}) === metadataId=${be} (${typeof Oe.id}), stringMatch=${Qt}, numericMatch=${an}`),gr}),Re=v.some(mt=>{const tt=String(mt.docId||""),Te=tt===be&&tt!=="";return Te&&console.log(`[UPLOAD]  Match by DocId: inv.docId=${tt} === metadataId=${be}`),Te}),st=ve||Re,ot=v.filter(mt=>{const tt=String(mt.id),Te=Number(mt.id),Fe=Number(Oe.id),an=String(mt.docId||""),Qt=!isNaN(Te)&&!isNaN(Fe)&&Te!==0&&Fe!==0&&Te===Fe;return tt===be||Qt||an===be&&an!==""});if(console.log(`[UPLOAD]  Card detection check: fileId=${_e}, metadataId=${be} (type: ${typeof Oe.id})`),console.log(`[UPLOAD]  Invoice list: ${v.length} invoices, IDs: [${v.slice(0,5).map(mt=>`${mt.id}/${mt.docId}`).join(", ")}...]`),console.log(`[UPLOAD]  Matching: byId=${ve}, byDocId=${Re}, total=${st}, matches=${ot.length}`),v.forEach((mt,tt)=>{const Te=String(mt.id),Fe=Number(mt.id),an=Number(Oe.id),Qt=String(mt.docId||""),gr=Te===be,er=!isNaN(Fe)&&!isNaN(an)&&Fe!==0&&an!==0&&Fe===an,Mr=Qt===be&&Qt!=="";console.log(`[UPLOAD]  Invoice ${tt}: id=${Te} (num=${Fe}), docId=${Qt}, matches=${gr||er||Mr} (str=${gr}, num=${er}, doc=${Mr})`)}),ot.length>0&&console.log("[UPLOAD]  Matched invoice details:",ot[0]),st&&ot.length>0){it.current.add(_e);const mt=ot[0];console.log(`[UPLOAD]  Card appeared for file ${_e}, invoice ID: ${Oe.id}, matched invoice: id=${mt.id}, docId=${mt.docId}`),console.log("[UPLOAD]  Transitioning to 100% and marking as complete"),Dn(_e,90,100,1e3),setTimeout(()=>{console.log(`[UPLOAD]  Marking file ${_e} as complete`),R(tt=>{const Te=new Map(tt);return Te.set(_e,"complete"),console.log(`[UPLOAD]  Upload stage set to 'complete' for ${_e}`),Te}),setTimeout(()=>{console.log(`[UPLOAD]  Starting cleanup for ${_e} (card should be visible by now)`),U(tt=>{const Te=new Set(tt);return Te.delete(_e),Te}),J(tt=>{const Te=new Map(tt);return Te.delete(_e),Te}),R(tt=>{const Te=new Map(tt);return Te.delete(_e),Te}),q(tt=>{const Te=new Set(tt);return Te.delete(_e),Te}),O(tt=>{const Te=new Set(tt);return Te.delete(_e),Te}),Ce(tt=>{const Te=new Map(tt);return Te.delete(_e),Te}),ie.current.delete(_e),setTimeout(()=>{ht()},100)},5e3)},1e3)}else console.log(`[UPLOAD]  No match found for fileId=${_e}, metadataId=${be}`),console.log(`[UPLOAD]  Invoice with doc_id=${be} doesn't exist in invoice list. This might mean:`),console.log("[UPLOAD]   1. OCR processing failed (check backend logs)"),console.log("[UPLOAD]   2. Invoice hasn't been created yet (still processing)"),console.log("[UPLOAD]   3. Document exists but invoice record is missing"),console.log(`[UPLOAD]  Debug: invoiceExists=${st}, matchingInvoices.length=${ot.length}`),xe.get(_e)?.raw?.status==="error"&&console.warn("[UPLOAD]  Document has error status - OCR likely failed. Keeping at 90% and showing error state.")})},[G,xe,v]),g.useEffect(()=>{if(Ut&&!At){const I=v.find(ge=>!ge.matched&&!ge.paired);I&&(Lt(I.id),m(I.id))}},[Ut,At,v]),g.useEffect(()=>{Ut&&At&&(cn(!0),H(null),Ji(At).then(I=>{Vt(I.suggestions||[])}).catch(I=>{console.error("Failed to fetch pairing suggestions:",I),Vt([]),H("Could not load suggestions. You can still pair manually using unpaired delivery notes.")}),E3().then(I=>{nn(I||[])}).catch(I=>{console.error("Failed to fetch unpaired delivery notes:",I),nn([]),hn||H("Could not load unpaired delivery notes. Please check your connection and retry.")}).finally(()=>{cn(!1)}))},[Ut,At]);const ze=v.filter(I=>{if(!o)return!0;const ge=o.toLowerCase();return I.supplier?.toLowerCase().includes(ge)||I.invoiceNumber?.toLowerCase().includes(ge)||String(I.id).toLowerCase().includes(ge)}),rn=(I=>{if(!I)return[];const ge=[];return I.lineItems&&I.deliveryNote?.lineItems&&I.lineItems.forEach(De=>{const _e=I.deliveryNote?.lineItems?.find(Oe=>Oe.description===De.description||Oe.item===De.item);if(_e){const Oe=De.qty||0,be=_e.qty||0;if(be<Oe){const ve=De.description||"Unknown item";ge.push({id:`short-${ve}-${Date.now()}`,type:"short",severity:be<Oe*.5?"critical":"review",item:ve,description:`Short delivery: invoiced ${Oe}, delivered ${be}`,suggestedCredit:(Oe-be)*(De.unitPrice||0)})}}}),ge})(j),dt=j&&(()=>{if(!j.status)return!1;const I=rn.length>0,ge=!!j.deliveryNote;return!I||ge})(),bt=v.map(I=>{const ge=!I.issuesCount||I.issuesCount===0||I.hasDeliveryNote;return{...I,readyToSubmit:ge}}),at=bt.filter(I=>I.readyToSubmit),Ht=async()=>{const I=v.filter(De=>De.dbStatus!=="submitted");if(I.length===0){e.info("No invoices to clear. All invoices have already been submitted.");return}if(window.confirm(`Are you sure you want to delete ${I.length} uploaded invoice${I.length!==1?"s":""}? This will permanently remove them from the database. Submitted invoices will not be affected.`))try{const De=I.map(be=>be.id);console.log("[Invoices] Clearing invoices:",{count:De.length,ids:De});const _e=await Eo(De);await kt(),p&&De.includes(p)&&(m(null),w(null));let Oe=`Successfully deleted ${_e.deleted_count} invoice${_e.deleted_count!==1?"s":""}!`;_e.skipped_count&&_e.skipped_count>0&&(Oe+=` (${_e.skipped_count} submitted invoice${_e.skipped_count!==1?"s":""} were skipped)`),e.success(Oe)}catch(De){console.error("[Invoices] Failed to delete invoices:",De);const _e=De instanceof Error?De.message:"Unknown error";_e.includes("405")?e.error("Failed to delete invoices: The server endpoint is not available. Please check that the backend is running and the route is properly configured."):_e.includes("403")?e.error("Failed to delete invoices: This operation is not allowed in the current environment."):e.error(`Failed to delete invoices: ${_e}`)}};j&&j.status;const Sn=async()=>{if(!(!p||!dt)){Ge(!0);try{await PS([p]),await et(p),await kt(),Ln(I=>I+1),e.success("Invoice submitted successfully!")}catch(I){console.error("Failed to submit invoice:",I),e.error(`Failed to submit invoice: ${I instanceof Error?I.message:"Unknown error"}`)}finally{Ge(!1)}}},Jn=async I=>{if(!(I.length===0||!window.confirm(`Are you sure you want to submit ${I.length} invoice${I.length!==1?"s":""}?`))){Ge(!0);try{await PS(I),await kt(),p&&I.includes(p)&&await et(p),Ln(De=>De+1),e.success(`Successfully submitted ${I.length} invoice${I.length!==1?"s":""}!`)}catch(De){console.error("Failed to submit invoices:",De),e.error(`Failed to submit invoices: ${De instanceof Error?De.message:"Unknown error"}`)}finally{Ge(!1)}}},Nt=async I=>{try{const ge=await Eo([I]);await kt(),p===I&&(m(null),w(null)),ge.deleted_count>0?e.success("Invoice deleted successfully!"):ge.skipped_count&&ge.skipped_count>0?e.warning("This invoice has already been submitted and cannot be deleted."):e.error("Failed to delete invoice. Please try again.")}catch(ge){console.error("[Invoices] Failed to delete invoice:",ge);const De=ge instanceof Error?ge.message:"Unknown error";De.includes("405")?e.error("Failed to delete invoice: The server endpoint is not available. Please check that the backend is running."):De.includes("403")?e.error("Failed to delete invoice: This operation is not allowed in the current environment."):e.error(`Failed to delete invoice: ${De}`)}},Kt=g.useCallback(async I=>{const ge=Array.from(I),De=[];ge.forEach(_e=>{const Oe=`${_e.name}-${Date.now()}-${Math.random()}`;De.push(Oe),ie.current.set(Oe,_e),Ce(be=>{const ve=new Map(be);return ve.set(Oe,{id:"",fileName:_e.name}),ve}),J(be=>new Map(be).set(Oe,0)),R(be=>{const ve=new Map(be);return ve.set(Oe,"uploading"),ve})}),U(_e=>{const Oe=new Set(_e),be=[],ve=[];return De.forEach((Re,st)=>{const ot=ge[st];Oe.size<3?(Oe.add(Re),be.push({fileId:Re,file:ot})):ve.push(Re)}),ve.length>0&&he(Re=>[...Re,...ve]),be.length>0&&setTimeout(()=>{be.forEach(({fileId:Re,file:st})=>{Le(Re,st)})},0),Oe})},[Le]),$n=()=>{we.current?.click()},Nn=()=>{K(!0)},V=()=>{K(!0)},Pe=async()=>{await kt(),p&&await et(p),Ln(I=>I+1)},re=(I,ge)=>{kt(),I?(m(I),et(I)):p&&et(p),(ge==="delivery-note"||ge==="both")&&Ln(De=>De+1)},Qe=()=>{p&&de(!0)},Et=()=>{Qe()},Cn=async I=>{if(I&&I.length>0?e.warning(`Pairing completed with warnings: ${I.slice(0,2).join(", ")}`):e.success("Invoice paired with delivery note successfully"),p){await et(p);try{const ge=await Ji(p);Vt(ge.suggestions||[])}catch(ge){console.debug("Failed to refresh pairing suggestions after pairing:",ge)}}Ln(ge=>ge+1)},Mt=async I=>{if(!(!At||Ve)){Gt(I),H(null);try{await gi(At,I),e.success("Delivery note paired successfully"),x(De=>De.map(_e=>_e.id===At?{..._e,matched:!0,paired:!0}:_e)),nn(De=>De.filter(_e=>_e.id!==I)),Vt(De=>De.filter(_e=>_e.deliveryNoteId!==I)),p===At&&et(At);const ge=v.find(De=>!De.matched&&!De.paired&&De.id!==At);if(ge){Lt(ge.id),m(ge.id);try{const De=await Ji(ge.id);Vt(De.suggestions||[])}catch(De){console.error("Failed to refresh pairing suggestions for next invoice:",De),Vt([])}}else Lt(null),Vt([]),e.info("All invoices have been paired!")}catch(ge){const De=ge instanceof Error?ge.message:"Failed to pair delivery note";e.error(De),H(De),console.error("Failed to pair delivery note:",ge)}finally{Gt(null)}}},pt=()=>{Zn(I=>!I),Ut&&(Lt(null),Vt([]),nn([]))},$t=async()=>{if(p)try{const I=await O3(p);window.open(I,"_blank")}catch(I){console.error("Failed to open PDF:",I),e.error("Failed to open PDF. Please try again.")}},Wr=()=>{p&&Me(!0)},ua=async()=>{if(!(!p||!Dt.trim())){Yt(!0);try{await D3(p,Dt.trim()),ut(""),et(p)}catch(I){console.error("Failed to save note:",I)}finally{Yt(!1)}}},_a=I=>{yt(I),$e(!0)};try{return i.jsxs("div",{className:"invoices-page-new",children:[i.jsx(Iu,{children:i.jsx(gK,{venue:t,onVenueChange:n,dateRange:r,onDateRangeChange:l,searchQuery:o,onSearchChange:u,onUploadClick:$n,onNewManualInvoice:Nn,onNewManualDN:V,manualPairingWorkflowActive:Ut,onToggleManualPairingWorkflow:pt})}),i.jsxs("div",{className:"invoices-main-new has-submission-footer",children:[N&&ze.length===0&&i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",padding:"80px",color:"var(--text-muted)",fontSize:"14px",zIndex:10,background:"rgba(26, 26, 26, 0.8)",backdropFilter:"blur(4px)"},children:"Loading invoices..."}),C&&ze.length===0&&!N&&i.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",marginBottom:"24px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",color:"var(--accent-red)",fontSize:"13px",gap:"12px",maxWidth:"600px",margin:"0 auto 24px auto"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"4px"},children:" Connection Error"}),i.jsx("div",{style:{textAlign:"center",marginBottom:"12px",color:"var(--text-secondary)"},children:C}),i.jsxs("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"12px",textAlign:"center"},children:[i.jsx("div",{style:{marginBottom:"8px"},children:i.jsx("strong",{children:"Backend may not be running."})}),i.jsx("div",{style:{marginBottom:"8px"},children:"Start the backend with:"}),i.jsx("code",{style:{display:"block",background:"rgba(0, 0, 0, 0.3)",padding:"8px",borderRadius:"4px",fontSize:"11px",marginBottom:"8px"},children:"python -m uvicorn backend.main:app --host 0.0.0.0 --port 8000 --reload"}),i.jsxs("div",{style:{marginTop:"8px"},children:["Or use: ",i.jsx("code",{style:{fontSize:"11px"},children:"start_backend_8000.bat"})]})]}),i.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"12px",textAlign:"center"},children:"You can still upload documents or create manual invoices using the buttons above."}),i.jsx("button",{className:"glass-button",onClick:()=>kt(),style:{marginTop:"8px"},children:"Retry Connection"})]}),!(N&&ze.length===0)&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0",gridColumn:"1"},children:[i.jsx(zK,{onUpload:Kt}),Array.from(ee).slice(0,3).reverse().map((I,ge)=>{const De=ne.get(I)||0,_e=xe.get(I)?.fileName||I.split("-").slice(0,-2).join("-"),Oe=G.get(I),be=Oe==="complete",ve=Oe==="processing"||Oe==="waiting-for-card",Re=xe.get(I),st=Re?.raw?.status==="error"&&Oe==="waiting-for-card",ot=Re?.error||Re?.raw?.error||void 0,mt=Re?.id||void 0;return i.jsx(AQ,{fileName:_e,percentage:De,isComplete:be,isProcessing:ve,hasError:st,errorMessage:ot,docId:mt,onRetry:async tt=>{try{console.log(`[UPLOAD] Retrying OCR for doc_id: ${tt}`),await C3(tt),e.success("OCR retry initiated. Processing..."),R(Te=>{const Fe=new Map(Te);return Fe.set(I,"processing"),Fe}),J(Te=>{const Fe=new Map(Te);return Fe.set(I,90),Fe}),Ce(Te=>{const Fe=new Map(Te),an=Fe.get(I);return an&&Fe.set(I,{...an,raw:{...an.raw,status:"processing"},error:void 0}),Fe}),setTimeout(()=>{kt()},2e3)}catch(Te){console.error("[UPLOAD] Failed to retry OCR:",Te),e.error(`Failed to retry OCR: ${Te instanceof Error?Te.message:"Unknown error"}`)}},onComplete:()=>{U(tt=>{const Te=new Set(tt);return Te.delete(I),Te}),Ot.current&&Ot.current()}},I)}),F.length>0&&i.jsx("div",{className:"upload-next-in-queue",children:i.jsxs("div",{className:"upload-next-in-queue-content",children:[i.jsx("div",{className:"upload-next-in-queue-icon",children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",children:i.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.3"})})}),i.jsxs("div",{className:"upload-next-in-queue-info",children:[i.jsx("div",{className:"upload-next-in-queue-filename",children:xe.get(F[0])?.fileName||F[0].split("-").slice(0,-2).join("-")}),i.jsxs("div",{className:"upload-next-in-queue-status",children:["Next in queue ",F.length>1&&`(${F.length} total)`]})]})]})}),i.jsx(yK,{invoices:ze.length>0?bt.filter(I=>{if(!o)return!0;const ge=o.toLowerCase();return I.supplier?.toLowerCase().includes(ge)||I.invoiceNumber?.toLowerCase().includes(ge)||String(I.id).toLowerCase().includes(ge)}):[],selectedId:p,onSelect:I=>{m(I),ca(null)},sortBy:d,onSortChange:h,newlyUploadedIds:te,onSupplierClick:_a,onBatchSubmit:Jn,onDelete:Nt})]}),!(N&&ze.length===0)&&i.jsx(_K,{invoice:j,selectedDNId:Wn,onLinkDeliveryNote:Qe,onCreateDeliveryNote:V,onChangeDeliveryNote:Et,onOpenPDF:$t,onViewOCRDetails:Wr,onSaveNote:ua,noteText:Dt,onNoteTextChange:ut,savingNote:wt,onSubmit:Sn,canSubmit:!!dt,isSubmitting:_t,hasIssues:rn.length>0,onPairSuccess:Cn,isEmptyState:ze.length===0,onUploadClick:$n,onNewManualInvoice:Nn,onSelectInvoice:I=>{m(I),ca(null),Ca(null)},manualPairingWorkflowActive:Ut,topSuggestion:Ft.length>0?Ft[0]:null,onPairWithSuggestion:Mt,onEditInvoice:I=>{vt(I),pn("invoice"),K(!0)},onEditDeliveryNote:I=>{gt(I),pn("delivery-note"),K(!0)},highlightContext:ln,onHighlightComplete:()=>Ca(null),onInvoiceUpdated:Pe}),!(N&&ze.length===0)&&i.jsx("div",{style:{gridColumn:"3",display:"flex",flexDirection:"column",gap:"16px"},children:Ut?i.jsxs("div",{className:"manual-pairing-column",children:[i.jsxs("div",{className:"manual-pairing-header",children:[i.jsx("h3",{children:"Delivery Notes"}),on&&i.jsx("span",{className:"loading-indicator",children:"Loading..."})]}),hn&&i.jsx("div",{style:{padding:"12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",fontSize:"12px",color:"var(--accent-red)",marginBottom:"12px"},children:hn}),At?i.jsxs(i.Fragment,{children:[Ft.length>0&&i.jsxs("div",{className:"pairing-section",children:[i.jsxs("h4",{className:"pairing-section-title",children:["Suggested (",Ft.length,")"]}),Ft.map(I=>i.jsxs("div",{className:"dn-card suggested",children:[i.jsxs("div",{className:"dn-card-header",children:[i.jsx("span",{className:"dn-number",children:I.deliveryNoteNumber||"No number"}),i.jsxs("span",{className:"confidence-badge",children:[Math.round((I.confidence||0)*100),"%"]})]}),i.jsxs("div",{className:"dn-card-body",children:[i.jsxs("div",{className:"dn-info",children:[i.jsx("span",{className:"dn-supplier",children:I.supplier||"Unknown"}),i.jsx("span",{className:"dn-date",children:I.deliveryDate||"No date"}),i.jsxs("span",{className:"dn-total",children:["",(I.totalAmount||0).toFixed(2)]})]}),i.jsx("button",{className:"glass-button primary-action",onClick:()=>Mt(I.deliveryNoteId),disabled:Ve===I.deliveryNoteId,children:Ve===I.deliveryNoteId?"Pairing...":"Pair"})]})]},I.id))]}),qt.filter(I=>!Ft.some(ge=>ge.deliveryNoteId===I.id)).length>0&&i.jsxs("div",{className:"pairing-section",children:[i.jsxs("h4",{className:"pairing-section-title",children:["Other Unpaired (",qt.filter(I=>!Ft.some(ge=>ge.deliveryNoteId===I.id)).length,")"]}),qt.filter(I=>!Ft.some(ge=>ge.deliveryNoteId===I.id)).map(I=>i.jsxs("div",{className:"dn-card",children:[i.jsx("div",{className:"dn-card-header",children:i.jsx("span",{className:"dn-number",children:I.noteNumber||I.deliveryNo||"No number"})}),i.jsxs("div",{className:"dn-card-body",children:[i.jsxs("div",{className:"dn-info",children:[i.jsx("span",{className:"dn-supplier",children:I.supplier||"Unknown"}),i.jsx("span",{className:"dn-date",children:I.date||"No date"}),i.jsxs("span",{className:"dn-total",children:["",(I.total||0).toFixed(2)]})]}),i.jsx("button",{className:"glass-button primary-action",onClick:()=>Mt(I.id),disabled:Ve===I.id,children:Ve===I.id?"Pairing...":"Pair"})]})]},I.id))]}),Ft.length===0&&qt.length===0&&!on&&i.jsx("div",{className:"empty-state",children:i.jsx("p",{children:"No unpaired delivery notes found"})})]}):i.jsxs("div",{className:"empty-state",children:[i.jsx("p",{children:"All invoices have been paired!"}),i.jsx("button",{className:"glass-button secondary-action",onClick:pt,children:"Exit Pairing Mode"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(a2,{scope:"invoices",items:Fr,isLoading:!1,lastUpdated:qr,onItemClick:I=>{const ge=De=>{const _e=document.querySelector(`[data-section="${De}"]`);_e&&(_e.scrollIntoView({behavior:"smooth",block:"start"}),_e.classList.add("owlin-section-highlight"),setTimeout(()=>{_e.classList.remove("owlin-section-highlight")},1200))};if(I.contextRef?.type==="invoice"&&I.contextRef.id){const De=String(I.contextRef.id);p!==De?(m(De),setTimeout(()=>{I.focusTarget?ge(I.focusTarget):ge("invoice_header")},300)):I.focusTarget?ge(I.focusTarget):ge("invoice_header")}else if(I.contextRef?.type==="system"||I.contextRef?.type==="venue"){if(I.actions&&I.actions.length>0){const De=I.actions[0];if(De.actionType==="filter"&&De.target){console.log("Filter should be applied:",De.target);const _e=document.querySelector(".document-list-container")||document.querySelector('[data-section="invoice_list"]');_e&&_e.scrollIntoView({behavior:"smooth",block:"start"})}}}else if(I.actions&&I.actions.length>0){const De=I.actions[0];De.actionType==="navigate"&&De.target?window.location.href=De.target:De.actionType==="scroll"&&De.target&&ge(De.target)}}}),i.jsx(TK,{selectedDNId:Wn,onSelectDN:I=>{ca(I)},pairingMode:Tt,onPairingModeChange:Ur,onPairSuccess:()=>{kt(),Ln(I=>I+1),p&&et(p)},refreshTrigger:Pn}),i.jsx("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"},children:i.jsx(QE,{compactInputExternal:!1,renderAsWidget:!0,useSharedState:!0})})]})}),i.jsx(mQ,{isOpen:Z,onClose:()=>{K(!1),vt(null),gt(null),pn(null)},onSuccess:re,venue:t,editInvoiceId:Ae||void 0,editDNId:jt||void 0,editMode:Xn||void 0}),p&&i.jsx(vQ,{isOpen:Ee,onClose:()=>de(!1),onSuccess:Cn,invoiceId:p}),Wn&&i.jsx(gQ,{isOpen:Se,onClose:()=>{W(!1),ca(null)},deliveryNoteId:Wn}),p&&i.jsx(yQ,{isOpen:me,onClose:()=>Me(!1),invoiceId:p}),Mn&&i.jsx(EQ,{isOpen:Q,onClose:()=>{$e(!1),yt(null)},supplierName:Mn}),i.jsx("input",{ref:we,type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.heic",onChange:I=>{I.target.files&&Kt(I.target.files),we.current&&(we.current.value="")},style:{display:"none"}}),!(Z||Ee||Se||me||Q)&&i.jsx("div",{className:"submission-bar-fixed",children:i.jsxs("div",{className:"submission-bar-content",children:[i.jsxs("div",{className:"submission-bar-text",children:[i.jsx("span",{className:"submission-bar-count",children:at.length}),i.jsxs("span",{className:"submission-bar-label",children:["invoice",at.length!==1?"s":""," ready to submit"]})]}),i.jsxs("div",{className:"submission-bar-actions",children:[i.jsx("button",{className:"submission-button-clear",onClick:Ht,title:"Clear all uploaded invoices that haven't been submitted",disabled:v.length===0||_t,children:"Clear all uploaded"}),i.jsx("button",{className:"submission-button-submit",onClick:()=>Jn(at.map(I=>I.id)),disabled:at.length===0||_t,children:_t?"Submitting...":"Submit all ready invoices"})]})]})})]})]})}catch(I){return console.error("[Invoices] Render error:",I),i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"invoices-page-new",style:{padding:"24px"},children:i.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"24px",color:"#ef4444"},children:[i.jsx("h2",{children:"Render Error"}),i.jsx("p",{children:"The invoices page encountered an error while rendering."}),i.jsx("pre",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"12px",borderRadius:"8px",overflow:"auto"},children:I instanceof Error?I.message:String(I)}),i.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"16px",padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Reload Page"})]})}),i.jsx(bK,{toasts:e.toasts,onClose:e.removeToast})]})}}function PQ(){return i.jsx(MQ,{})}function zQ(e){const{onUploadClick:t=()=>{},onCreateInvoiceClick:n=()=>{},onCreateDeliveryNoteClick:r=()=>{}}=e,[l,o]=ni.useState(!1);return i.jsxs("div",{className:"upload-bar-gen",children:[i.jsx("div",{className:"upload-bar-gen__dropzone invoices-gen-card invoices-gen-card--subtle"+(l?" upload-bar-gen__dropzone--active":""),onDragOver:u=>{u.preventDefault(),o(!0)},onDragLeave:u=>{u.preventDefault(),o(!1)},onDrop:u=>{u.preventDefault(),o(!1),t&&t()},onClick:t,children:i.jsxs("div",{className:"upload-bar-gen__left",children:[i.jsx("div",{className:"upload-bar-gen__title invoices-gen__h1",children:"Invoices & Delivery Notes"}),i.jsx("div",{className:"upload-bar-gen__subtitle invoices-gen__body invoices-gen__text-muted",children:"Drop your PDFs and photos here. Owlin will scan, match, and flag issues automatically."}),i.jsx("div",{className:"upload-bar-gen__hint invoices-gen__micro invoices-gen__text-soft",children:"Drag & drop anywhere in this card, or click to choose files."})]})}),i.jsxs("div",{className:"upload-bar-gen__right",children:[i.jsx("button",{className:"owlin-btn owlin-btn--primary",type:"button",onClick:t,children:"Upload documents"}),i.jsx("button",{className:"owlin-btn owlin-btn--ghost",type:"button",onClick:n,children:"Create manual invoice"}),i.jsx("button",{className:"owlin-btn owlin-btn--ghost",type:"button",onClick:r,children:"Create delivery note"})]})]})}function RQ({onFilesSelected:e}){const[t,n]=ni.useState(!1),[r,l]=ni.useState([]),o=ni.useRef(null),u=S=>{if(S===0)return"0 Bytes";const C=1024,k=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(S)/Math.log(C));return Math.round(S/Math.pow(C,E)*100)/100+" "+k[E]},d=S=>S.startsWith("image/")?i.jsx(T4,{className:"upload-box-gen__file-icon"}):i.jsx(Xa,{className:"upload-box-gen__file-icon"}),h=S=>{S.preventDefault(),S.stopPropagation(),n(!0)},p=S=>{S.preventDefault(),S.stopPropagation(),n(!1)},m=S=>{S.preventDefault(),S.stopPropagation(),n(!1);const C=Array.from(S.dataTransfer.files);x(C)},v=S=>{if(S.target.files){const C=Array.from(S.target.files);x(C)}},x=S=>{const C=S.map(k=>({id:`${k.name}-${Date.now()}-${Math.random()}`,name:k.name,size:k.size,type:k.type,progress:0,status:"uploading",speed:Math.floor(Math.random()*100)+50}));l(k=>[...k,...C]),C.forEach(k=>{j(k.id)}),e&&e(S)},j=S=>{let C=0;const k=setInterval(()=>{C+=Math.random()*15,C>=100?(C=100,l(E=>E.map(O=>O.id===S?{...O,progress:100,status:"completed"}:O)),clearInterval(k)):l(E=>E.map(O=>O.id===S?{...O,progress:Math.round(C)}:O))},200)},w=S=>{l(C=>C.filter(k=>k.id!==S))},N=()=>{o.current?.click()};return i.jsxs("div",{className:"upload-box-gen",children:[i.jsxs("div",{className:`upload-box-gen__dropzone ${t?"upload-box-gen__dropzone--active":""}`,onDragOver:h,onDragLeave:p,onDrop:m,onClick:N,children:[i.jsx("input",{ref:o,type:"file",multiple:!0,className:"upload-box-gen__file-input",onChange:v,accept:".pdf,.jpg,.jpeg,.png,.heic"}),i.jsxs("div",{className:"upload-box-gen__dropzone-content",children:[i.jsx("div",{className:"upload-box-gen__icon-wrapper",children:i.jsx(Mp,{className:"upload-box-gen__upload-icon"})}),i.jsx("div",{className:"upload-box-gen__dropzone-text invoices-gen__body invoices-gen__text-muted",children:"Drag files to upload"}),i.jsx("button",{type:"button",className:"upload-box-gen__choose-button owlin-btn owlin-btn--primary",onClick:S=>{S.stopPropagation(),N()},children:"Choose File"})]})]}),r.length>0&&i.jsxs("div",{className:"upload-box-gen__progress-list",children:[i.jsx("div",{className:"upload-box-gen__progress-title invoices-gen__label",children:"Uploading"}),i.jsx("div",{className:"upload-box-gen__progress-items",children:r.map(S=>i.jsxs("div",{className:"upload-box-gen__progress-item",children:[i.jsxs("div",{className:"upload-box-gen__progress-item-left",children:[d(S.type),i.jsxs("div",{className:"upload-box-gen__progress-item-info",children:[i.jsx("div",{className:"upload-box-gen__progress-item-name invoices-gen__body",children:S.name}),i.jsx("div",{className:"upload-box-gen__progress-item-meta invoices-gen__micro invoices-gen__text-soft",children:u(S.size)})]})]}),i.jsxs("div",{className:"upload-box-gen__progress-item-right",children:[S.status==="uploading"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"upload-box-gen__progress-bar",children:i.jsx("div",{className:"upload-box-gen__progress-bar-fill",style:{width:`${S.progress}%`}})}),i.jsxs("div",{className:"upload-box-gen__progress-status invoices-gen__micro invoices-gen__text-muted",children:[S.progress,"% done  ",S.speed,"KB/sec"]})]}),S.status==="completed"&&i.jsxs("div",{className:"upload-box-gen__progress-status upload-box-gen__progress-status--completed invoices-gen__micro",children:[i.jsx(Kr,{className:"upload-box-gen__check-icon"}),"Completed"]}),i.jsx("button",{type:"button",className:"upload-box-gen__remove-button",onClick:()=>w(S.id),"aria-label":"Remove file",children:i.jsx(sn,{className:"upload-box-gen__remove-icon"})})]})]},S.id))})]})]})}function xE({invoices:e,selectedInvoiceId:t,onSelectInvoice:n}){const r=e&&e.length>0;return i.jsxs("div",{className:"invoice-column-gen",children:[i.jsxs("div",{className:"invoice-column-gen__header",children:[i.jsx("div",{className:"invoice-column-gen__title invoices-gen__label",children:"Invoices"}),i.jsx("div",{className:"invoice-column-gen__count invoices-gen__micro invoices-gen__text-soft",children:r?`${e.length} invoices`:"No invoices yet"})]}),i.jsxs("div",{className:"invoice-column-gen__list",children:[!r&&i.jsxs("div",{className:"invoice-column-gen__empty",children:[i.jsx("div",{className:"invoice-column-gen__empty-icon"}),i.jsx("div",{className:"invoice-column-gen__empty-text",children:"Upload documents to see invoices here."})]}),r&&e.map(l=>{const o=t===l.id;return i.jsxs("button",{type:"button",className:"invoice-card-gen invoices-gen-card"+(o?" invoice-card-gen--selected":""),onClick:()=>n(l.id),children:[i.jsxs("div",{className:"invoice-card-gen__top-row",children:[i.jsx("div",{className:"invoice-card-gen__supplier invoices-gen__body",children:l.supplierName||"Supplier"}),i.jsx("span",{className:"invoice-card-gen__status-pill",children:l.status||"Pending"})]}),i.jsx("div",{className:"invoice-card-gen__meta-row",children:i.jsx("span",{className:"invoice-card-gen__number invoices-gen__micro invoices-gen__text-soft",children:l.invoiceNumber||"Invoice"})}),i.jsx("div",{className:"invoices-gen-divider"}),i.jsx("div",{className:"invoice-card-gen__footer-row",children:i.jsx("div",{className:"invoice-card-gen__total invoices-gen__h2",children:l.totalAmount!=null?`${l.totalAmount.toFixed(2)}`:""})})]},l.id)})]})]})}function bE({selectedInvoiceId:e}){const t=!!e;return i.jsxs("div",{className:"detail-view-gen",children:[!t&&i.jsxs("div",{className:"detail-view-gen__empty",children:[i.jsx("div",{className:"detail-view-gen__empty-icon"}),i.jsx("div",{className:"detail-view-gen__empty-title invoices-gen__h2",children:"Select an invoice to review"}),i.jsx("div",{className:"detail-view-gen__empty-subtitle invoices-gen__body invoices-gen__text-muted",children:"When you choose an invoice, Owlin will show supplier, totals, and line-by-line checks here."})]}),t&&i.jsxs("div",{className:"detail-view-gen__content",children:[i.jsxs("div",{className:"detail-view-gen__section",children:[i.jsx("div",{className:"detail-view-gen__section-title invoices-gen__label",children:"Invoice summary"}),i.jsxs("div",{className:"detail-view-gen__field-row",children:[i.jsx("span",{className:"detail-view-gen__field-label invoices-gen__micro invoices-gen__text-soft",children:"Supplier"}),i.jsx("span",{className:"detail-view-gen__field-value invoices-gen__body detail-view-gen__placeholder",children:"(will show supplier name)"})]}),i.jsxs("div",{className:"detail-view-gen__field-row",children:[i.jsx("span",{className:"detail-view-gen__field-label invoices-gen__micro invoices-gen__text-soft",children:"Invoice number"}),i.jsx("span",{className:"detail-view-gen__field-value invoices-gen__body detail-view-gen__placeholder",children:"(will show invoice number)"})]}),i.jsxs("div",{className:"detail-view-gen__field-row",children:[i.jsx("span",{className:"detail-view-gen__field-label invoices-gen__micro invoices-gen__text-soft",children:"Total"}),i.jsx("span",{className:"detail-view-gen__field-value invoices-gen__body detail-view-gen__placeholder",children:"(will show total)"})]})]}),i.jsx("div",{className:"invoices-gen-divider"}),i.jsxs("div",{className:"detail-view-gen__section",children:[i.jsx("div",{className:"detail-view-gen__section-title invoices-gen__label",children:"Line items"}),i.jsx("div",{className:"detail-view-gen__lines-placeholder invoices-gen__micro invoices-gen__text-soft",children:"Line items will appear here once connected to real data."})]})]})]})}function jE({deliveryNotes:e,selectedDeliveryNoteId:t,onSelectDeliveryNote:n}){const r=e&&e.length>0;return i.jsxs("div",{className:"delivery-column-gen",children:[i.jsxs("div",{className:"delivery-column-gen__header",children:[i.jsx("div",{className:"delivery-column-gen__title invoices-gen__label",children:"Delivery notes"}),i.jsx("div",{className:"delivery-column-gen__count invoices-gen__micro invoices-gen__text-soft",children:r?`${e.length} notes`:"None pending"})]}),i.jsxs("div",{className:"delivery-column-gen__list",children:[!r&&i.jsx("div",{className:"delivery-column-gen__empty",children:i.jsx("div",{className:"delivery-column-gen__empty-text",children:"Unmatched delivery notes will wait here until paired with invoices."})}),r&&e.map(l=>{const o=t===l.id;return i.jsxs("button",{type:"button",className:"delivery-card-gen invoices-gen-card invoices-gen-card--subtle"+(o?" delivery-card-gen--selected":""),onClick:()=>n(l.id),children:[i.jsxs("div",{className:"delivery-card-gen__top-row",children:[i.jsx("div",{className:"delivery-card-gen__supplier invoices-gen__body",children:l.supplierName||"Supplier"}),i.jsx("span",{className:"delivery-card-gen__status-pill",children:l.status||"Unlinked"})]}),i.jsx("div",{className:"delivery-card-gen__meta-row",children:i.jsx("span",{className:"delivery-card-gen__id invoices-gen__micro invoices-gen__text-soft",children:l.noteNumber||"Delivery note"})})]},l.id)})]})]})}function wE({status:e="empty",issues:t=[],hasDocuments:n=!1,onSubmit:r=()=>{},onClear:l=()=>{}}){const o=e==="empty"||e==="critical-issues",u=n,d=()=>e==="all-clear"?i.jsxs("div",{className:"review-footer-gen__pill review-footer-gen__pill--success",children:[i.jsx(Kr,{className:"review-footer-gen__pill-icon"}),i.jsx("span",{children:"All clear  nothing requires your attention"})]}):e==="minor-issues"&&t.length>0?t.map(h=>i.jsxs("div",{className:`review-footer-gen__pill review-footer-gen__pill--${h.type==="warning"?"warning":"info"}`,children:[h.type==="warning"&&i.jsx(tn,{className:"review-footer-gen__pill-icon"}),i.jsx("span",{children:h.message})]},h.id)):e==="critical-issues"&&t.length>0?t.filter(h=>h.type==="error").map(h=>i.jsxs("div",{className:"review-footer-gen__pill review-footer-gen__pill--error",children:[i.jsx(Wa,{className:"review-footer-gen__pill-icon"}),i.jsx("span",{children:h.message})]},h.id)):null;return i.jsx("div",{className:"review-footer-gen",children:i.jsxs("div",{className:"review-footer-gen__inner",children:[i.jsxs("div",{className:"review-footer-gen__left",children:[i.jsxs("div",{className:"review-footer-gen__header",children:[i.jsx("div",{className:"review-footer-gen__title",children:"Review & submit"}),i.jsx("div",{className:"review-footer-gen__subtitle",children:"Owlin will only ask you to act on mismatches and exceptions. Everything else flows through automatically."})]}),e!=="empty"&&i.jsx("div",{className:"review-footer-gen__pills",children:d()})]}),i.jsxs("div",{className:"review-footer-gen__right",children:[u&&i.jsxs("button",{type:"button",className:"review-footer-gen__button review-footer-gen__button--ghost",onClick:l,children:[i.jsx(Zi,{className:"review-footer-gen__button-icon"}),"Clear all"]}),i.jsxs("button",{type:"button",className:`review-footer-gen__button review-footer-gen__button--primary ${o?"review-footer-gen__button--disabled":""}`,onClick:r,disabled:o,title:e==="critical-issues"?"Resolve required issues before submitting":void 0,children:[i.jsx(Gy,{className:"review-footer-gen__button-icon"}),"Submit documents"]})]})]})})}function IQ({status:e="clear",issueCount:t=0,issues:n=[],onIssueClick:r}){const[l,o]=ni.useState(new Set),[u,d]=ni.useState({}),h=5,p=N=>{o(S=>{const C=new Set(S);return C.has(N)?C.delete(N):C.add(N),C})},m=()=>{switch(e){case"clear":return i.jsxs("div",{className:"analysis-assistant-gen__status-pill analysis-assistant-gen__status-pill--success",children:[i.jsx(Kr,{className:"analysis-assistant-gen__status-icon"}),"All clear"]});case"scanning":return i.jsxs("div",{className:"analysis-assistant-gen__status-pill analysis-assistant-gen__status-pill--scanning",children:[i.jsx(sa,{className:"analysis-assistant-gen__status-icon analysis-assistant-gen__status-icon--spinning"}),"Scanning"]});case"issues-found":return i.jsxs("div",{className:"analysis-assistant-gen__status-pill analysis-assistant-gen__status-pill--warning",children:[t," ",t===1?"issue":"issues"," found"]})}},v=N=>{switch(N){case"price-mismatch":return i.jsx(Ap,{className:"analysis-assistant-gen__issue-icon"});case"missing-dn":return i.jsx(Xa,{className:"analysis-assistant-gen__issue-icon"});case"quantity-mismatch":return i.jsx(tn,{className:"analysis-assistant-gen__issue-icon"});case"credit-suggestion":return i.jsx(U4,{className:"analysis-assistant-gen__issue-icon"});case"duplicate":return i.jsx(Wa,{className:"analysis-assistant-gen__issue-icon"});case"low-confidence":return i.jsx(Go,{className:"analysis-assistant-gen__issue-icon"})}},x=N=>{const S={success:{label:"All clear",className:"analysis-assistant-gen__severity-pill--success"},info:{label:"Suggestion",className:"analysis-assistant-gen__severity-pill--info"},warning:{label:"Review",className:"analysis-assistant-gen__severity-pill--warning"},error:{label:"Action needed",className:"analysis-assistant-gen__severity-pill--error"}},{label:C,className:k}=S[N];return i.jsx("div",{className:`analysis-assistant-gen__severity-pill ${k}`,children:C})},j=ni.useMemo(()=>{const N={"Price issues":[],"Quantity mismatches":[],"Missing notes":[],Suggestions:[],Other:[]};return n.forEach(S=>{S.type==="price-mismatch"?N["Price issues"].push(S):S.type==="quantity-mismatch"?N["Quantity mismatches"].push(S):S.type==="missing-dn"?N["Missing notes"].push(S):S.severity==="info"||S.type==="credit-suggestion"?N.Suggestions.push(S):N.Other.push(S)}),Object.entries(N).filter(([S,C])=>C.length>0)},[n]),w=N=>{r?r(N):N.onView&&N.onView()};return i.jsxs("aside",{className:"analysis-assistant-gen",children:[i.jsxs("div",{className:"analysis-assistant-gen__header",children:[i.jsx("div",{className:"analysis-assistant-gen__title",children:"Analysis Assistant"}),m()]}),e==="clear"&&i.jsx("div",{className:"analysis-assistant-gen__summary",children:"Monitoring invoices and delivery notes for discrepancies."}),e==="scanning"&&i.jsxs("div",{className:"analysis-assistant-gen__scanning",children:[i.jsxs("div",{className:"analysis-assistant-gen__scanning-stage",children:[i.jsx(sa,{className:"analysis-assistant-gen__scanning-icon"}),"Extracting text"]}),i.jsxs("div",{className:"analysis-assistant-gen__scanning-stage",children:[i.jsx(sa,{className:"analysis-assistant-gen__scanning-icon"}),"Detecting supplier"]}),i.jsxs("div",{className:"analysis-assistant-gen__scanning-stage",children:[i.jsx(sa,{className:"analysis-assistant-gen__scanning-icon"}),"Analysing prices"]})]}),e==="issues-found"&&n.length>0&&i.jsx("div",{className:"analysis-assistant-gen__issues",children:j.map(([N,S])=>{const C=l.has(N),k=u[N]===S.length,E=k?S.length:Math.min(h,S.length),O=S.slice(0,E),D=S.length>h;return i.jsxs("div",{className:"analysis-assistant-gen__issue-group",children:[i.jsxs("button",{type:"button",className:"analysis-assistant-gen__group-header-button",onClick:()=>p(N),children:[i.jsxs("div",{className:"analysis-assistant-gen__group-header",children:[N," (",S.length,")"]}),C?i.jsx(jn,{className:"analysis-assistant-gen__group-chevron"}):i.jsx(ur,{className:"analysis-assistant-gen__group-chevron"})]}),!C&&i.jsxs("div",{className:"analysis-assistant-gen__group-cards",children:[O.map(A=>i.jsxs("div",{className:"analysis-assistant-gen__issue-card",onClick:()=>w(A),children:[i.jsxs("div",{className:"analysis-assistant-gen__issue-title-row",children:[i.jsxs("div",{className:"analysis-assistant-gen__issue-title-left",children:[v(A.type),i.jsx("span",{className:"analysis-assistant-gen__issue-title",children:A.title})]}),x(A.severity)]}),i.jsx("div",{className:"analysis-assistant-gen__issue-context",children:A.context}),A.aiNote&&i.jsx("div",{className:"analysis-assistant-gen__issue-ai-note",children:A.aiNote}),i.jsxs("div",{className:"analysis-assistant-gen__issue-cta",children:[i.jsx("span",{className:"analysis-assistant-gen__cta-text",children:"View"}),i.jsx(HE,{className:"analysis-assistant-gen__cta-icon"})]})]},A.id)),D&&!k&&i.jsxs("button",{type:"button",className:"analysis-assistant-gen__show-more",onClick:A=>{A.stopPropagation(),d(M=>({...M,[N]:S.length}))},children:["Show ",S.length-h," more"]})]})]},N)})}),e==="clear"&&i.jsxs("div",{className:"analysis-assistant-gen__empty",children:[i.jsx(Kr,{className:"analysis-assistant-gen__empty-icon"}),i.jsx("div",{className:"analysis-assistant-gen__empty-text",children:"All checks passed. No action required."})]}),e==="clear"&&i.jsx("div",{className:"analysis-assistant-gen__footer",children:"Most invoices require zero review."})]})}function LQ(){const[e,t]=ni.useState(null),[n,r]=ni.useState(null),[l,o]=ni.useState("invoices"),u=[{id:"inv-001",supplierName:"Greenside Produce",invoiceNumber:"INV-001234",totalAmount:256.4,status:"ready"}],d=[{id:"dn-001",supplierName:"Greenside Produce",noteNumber:"DN-7781",status:"unlinked"}];return i.jsx("div",{className:"invoices-gen-page",children:i.jsxs("div",{className:"invoices-gen-page__content",children:[i.jsx(zQ,{}),i.jsx(RQ,{}),i.jsxs("div",{className:"invoices-gen-page__main-row invoices-gen-page__main-row--desktop",children:[i.jsxs("div",{className:"invoices-gen-page__columns-container",children:[i.jsx(xE,{invoices:u,selectedInvoiceId:e,onSelectInvoice:t}),i.jsxs("div",{className:"invoices-gen-page__middle-column",children:[i.jsx(bE,{selectedInvoiceId:e}),i.jsx(jE,{deliveryNotes:d,selectedDeliveryNoteId:n,onSelectDeliveryNote:r})]})]}),i.jsx(IQ,{status:"issues-found",issueCount:3,issues:[{id:"issue-1",type:"price-mismatch",severity:"warning",title:"Price mismatch",context:"Carling 30L Keg  Supplier increased price from 82.40  105.00 (+27%).",aiNote:"Unusual jump vs 90-day average.",invoiceId:"inv-001",lineItemId:"line-1"},{id:"issue-2",type:"missing-dn",severity:"error",title:"Missing delivery note",context:"Invoice INV-001234 has no paired delivery note.",aiNote:"Owlin found 1 potential match from last week.",invoiceId:"inv-001"},{id:"issue-3",type:"credit-suggestion",severity:"info",title:"Likely credit",context:"Heineken 50L Keg  delivered 3, invoiced 4.",aiNote:"Estimated overcharge: 142.00.",invoiceId:"inv-001",lineItemId:"line-2"}]})]}),i.jsxs("div",{className:"invoices-gen-page__tabs invoices-gen-page__tabs--mobile",children:[i.jsxs("div",{className:"invoices-gen-page__tab-buttons",children:[i.jsx("button",{type:"button",className:`invoices-gen-page__tab-button ${l==="invoices"?"invoices-gen-page__tab-button--active":""}`,onClick:()=>o("invoices"),children:"Invoices"}),i.jsx("button",{type:"button",className:`invoices-gen-page__tab-button ${l==="details"?"invoices-gen-page__tab-button--active":""}`,onClick:()=>o("details"),children:"Details"}),i.jsx("button",{type:"button",className:`invoices-gen-page__tab-button ${l==="delivery"?"invoices-gen-page__tab-button--active":""}`,onClick:()=>o("delivery"),children:"Delivery Notes"})]}),i.jsxs("div",{className:"invoices-gen-page__tab-content",children:[l==="invoices"&&i.jsx(xE,{invoices:u,selectedInvoiceId:e,onSelectInvoice:t}),l==="details"&&i.jsx(bE,{selectedInvoiceId:e}),l==="delivery"&&i.jsx(jE,{deliveryNotes:d,selectedDeliveryNoteId:n,onSelectDeliveryNote:r})]})]}),i.jsx("div",{className:"invoices-gen-page__review-row invoices-gen-page__review-row--desktop",children:i.jsx(wE,{status:"all-clear",hasDocuments:!0,issues:[]})}),i.jsx("div",{className:"invoices-gen-page__review-row invoices-gen-page__review-row--mobile",children:i.jsx(wE,{status:"all-clear",hasDocuments:!0,issues:[]})})]})})}const $Q=["Food","Beverage","Utilities","Other"],BQ=["High","Medium","Low"],UQ=["Active","On Watch","Blocked"];function FQ({searchQuery:e,onSearchChange:t,categoryFilter:n,onCategoryFilterChange:r,riskFilter:l,onRiskFilterChange:o,statusFilter:u,onStatusFilterChange:d,sortBy:h,onSortChange:p,summaryStats:m,currentRole:v}){const x=n||l||u||e,j=()=>{t(""),r(null),o(null),d(null)},w=S=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(S),N=S=>S>=4.5?"A":S>=3.5?"B":S>=2.5?"C":S>=1.5?"D":"E";return i.jsxs("div",{className:"suppliers-header",children:[i.jsxs("div",{className:"suppliers-header-row-1",children:[i.jsxs("div",{className:"suppliers-header-title-section",children:[i.jsx("h1",{className:"suppliers-header-title",children:"Suppliers"}),i.jsx("p",{className:"suppliers-header-subtitle",children:"Manage supplier relationships and monitor performance"})]}),i.jsxs("div",{className:"suppliers-header-row-1-right",children:[i.jsxs("div",{className:"suppliers-header-search",children:[i.jsx(Bl,{size:18,className:"suppliers-header-search-icon"}),i.jsx("input",{type:"text",placeholder:"Search suppliers...",value:e,onChange:S=>t(S.target.value),className:"suppliers-header-search-input"}),e&&i.jsx("button",{onClick:()=>t(""),className:"suppliers-header-search-clear","aria-label":"Clear search",children:i.jsx(sn,{size:16})})]}),i.jsxs("div",{className:"suppliers-header-assistant-chip",children:[i.jsx(YE,{size:14}),i.jsx("span",{children:"Owlin Assistant"})]})]})]}),i.jsxs("div",{className:"suppliers-header-row-2",children:[i.jsxs("div",{className:"suppliers-summary-tile",children:[i.jsx("div",{className:"suppliers-summary-tile-label",children:"Total Spend"}),i.jsx("div",{className:"suppliers-summary-tile-value",children:w(m.totalSpend)})]}),i.jsxs("div",{className:"suppliers-summary-tile",children:[i.jsx("div",{className:"suppliers-summary-tile-label",children:"Active Suppliers"}),i.jsx("div",{className:"suppliers-summary-tile-value",children:m.activeCount})]}),i.jsxs("div",{className:"suppliers-summary-tile",children:[i.jsx("div",{className:"suppliers-summary-tile-label",children:"Avg Score"}),i.jsx("div",{className:"suppliers-summary-tile-value",children:N(m.avgScore)})]})]}),i.jsxs("div",{className:"suppliers-header-row-3",children:[i.jsxs("div",{className:"suppliers-header-filters",children:[i.jsxs("div",{className:"suppliers-header-filter-group",children:[i.jsx("span",{className:"suppliers-header-filter-label",children:"Category:"}),i.jsx("div",{className:"suppliers-header-filter-chips",children:$Q.map(S=>i.jsx("button",{className:`suppliers-header-filter-chip ${n===S?"active":""}`,onClick:()=>r(n===S?null:S),children:S},S))})]}),i.jsxs("div",{className:"suppliers-header-filter-group",children:[i.jsx("span",{className:"suppliers-header-filter-label",children:"Risk:"}),i.jsx("div",{className:"suppliers-header-filter-chips",children:BQ.map(S=>i.jsx("button",{className:`suppliers-header-filter-chip ${l===S?"active":""}`,onClick:()=>o(l===S?null:S),children:S},S))})]}),i.jsxs("div",{className:"suppliers-header-filter-group",children:[i.jsx("span",{className:"suppliers-header-filter-label",children:"Status:"}),i.jsx("div",{className:"suppliers-header-filter-chips",children:UQ.map(S=>i.jsx("button",{className:`suppliers-header-filter-chip ${u===S?"active":""}`,onClick:()=>d(u===S?null:S),children:S},S))})]})]}),i.jsxs("div",{className:"suppliers-header-sort-controls",children:[i.jsx("span",{className:"suppliers-header-sort-label",children:"Sort by:"}),i.jsxs("div",{className:"suppliers-header-sort-buttons",children:[i.jsxs("button",{className:`suppliers-header-sort-button ${h==="risk"?"active":""}`,onClick:()=>p("risk"),title:"Sort by risk",children:[i.jsx(Xz,{size:14}),"Risk"]}),i.jsxs("button",{className:`suppliers-header-sort-button ${h==="spend"?"active":""}`,onClick:()=>p("spend"),title:"Sort by total spend",children:[i.jsx(Ap,{size:14}),"Spend"]}),i.jsxs("button",{className:`suppliers-header-sort-button ${h==="name"?"active":""}`,onClick:()=>p("name"),title:"Sort alphabetically",children:[i.jsx(Kz,{size:14}),"Name"]}),i.jsxs("button",{className:`suppliers-header-sort-button ${h==="recent"?"active":""}`,onClick:()=>p("recent"),title:"Sort by most recent activity",children:[i.jsx(Ru,{size:14}),"Recent"]})]})]}),x&&i.jsx("button",{onClick:j,className:"suppliers-header-clear-filters",children:"Clear filters"})]})]})}function qQ({supplier:e,isSelected:t,onClick:n,currentRole:r}){const[l,o]=g.useState(!1),u=x=>{switch(x){case"A":return"green";case"B":return"blue";case"C":return"amber";case"D":return"orange";case"E":return"red";default:return"gray"}},d=x=>{switch(x){case"Active":return"green";case"On Watch":return"amber";case"Blocked":return"red";default:return"gray"}},h=x=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(x),p=x=>x.charAt(0).toUpperCase(),m=u(e.score),v=d(e.status);return i.jsxs("div",{className:`supplier-card ${t?"selected":""} ${l?"hovered":""}`,onClick:n,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),n())},children:[i.jsxs("div",{className:"supplier-card-top-row",children:[i.jsx("div",{className:`supplier-card-avatar-initial supplier-card-avatar-${m}`,children:p(e.name)}),i.jsx("div",{className:"supplier-card-name",children:e.name}),i.jsx("div",{className:`supplier-card-grade supplier-card-grade-${m}`,children:e.score})]}),i.jsxs("div",{className:"supplier-card-metrics-row",children:[i.jsxs("div",{className:"supplier-card-metric",children:[i.jsx(tn,{size:12}),i.jsxs("span",{className:"supplier-card-metric-value",children:[e.matchRate?.toFixed(0)||(100-e.mismatchRate).toFixed(0),"%"]})]}),i.jsxs("div",{className:"supplier-card-metric",children:[i.jsx(Ru,{size:12}),i.jsx("span",{className:"supplier-card-metric-value",children:e.lateDeliveries})]}),i.jsxs("div",{className:"supplier-card-metric",children:[i.jsx(Go,{size:12}),i.jsxs("span",{className:"supplier-card-metric-value",children:[e.priceVolatility.toFixed(1),"%"]})]})]}),i.jsxs("div",{className:"supplier-card-bottom-row",children:[i.jsx("div",{className:"supplier-card-spend",children:h(e.totalSpend)}),i.jsx("div",{className:`supplier-card-status supplier-card-status-${v}`,children:e.status})]}),l&&e.lastInvoiceDate&&i.jsxs("div",{className:"supplier-card-tooltip",children:["Last invoice: ",h(e.lastInvoiceValue||0)," on"," ",new Date(e.lastInvoiceDate).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit"}),e.flagsCount!==void 0&&e.flagsCount>0&&i.jsxs(i.Fragment,{children:["  ",e.flagsCount," flags"]}),e.matchRate&&i.jsxs(i.Fragment,{children:["  ",e.matchRate.toFixed(0),"% match rate"]})]})]})}function HQ({suppliers:e,selectedSupplierId:t,onSelectSupplier:n,page:r,pageCount:l,onPageChange:o,loading:u,currentRole:d}){return u?i.jsx("div",{className:"supplier-list",children:i.jsx("div",{className:"supplier-list-loading",children:"Loading suppliers..."})}):e.length===0?i.jsx("div",{className:"supplier-list",children:i.jsxs("div",{className:"supplier-list-empty",children:[i.jsx("h3",{children:"No suppliers found"}),i.jsx("p",{children:"Try adjusting your filters or search query"})]})}):i.jsxs("div",{className:"supplier-list",children:[i.jsx("div",{className:"supplier-list-header",children:i.jsxs("div",{className:"supplier-list-title",children:[e.length," ",e.length===1?"Supplier":"Suppliers"]})}),i.jsx("div",{className:"supplier-list-grid",children:e.map(h=>i.jsx(qQ,{supplier:h,isSelected:t===h.id,onClick:()=>n(t===h.id?null:h.id),currentRole:d},h.id))}),l>1&&i.jsxs("div",{className:"supplier-list-pagination",children:[i.jsx("button",{className:"supplier-list-pagination-button",onClick:()=>o(r-1),disabled:r===1,"aria-label":"Previous page",children:i.jsx(pu,{size:16})}),i.jsxs("span",{className:"supplier-list-pagination-info",children:["Page ",r," of ",l]}),i.jsx("button",{className:"supplier-list-pagination-button",onClick:()=>o(r+1),disabled:r===l,"aria-label":"Next page",children:i.jsx(Lf,{size:16})})]})]})}function WQ({supplier:e,supplierId:t,currentRole:n}){const[r,l]=g.useState(!1),u=({A:5,B:4,C:3,D:2,E:1}[e.score]||3)*20,d=async m=>{l(!0);try{await NQ(t,m),window.location.reload()}catch(v){console.error("Failed to update status:",v)}finally{l(!1)}},p=(m=>m>=80?"green":m>=60?"blue":m>=40?"amber":m>=20?"orange":"red")(u);return i.jsxs("div",{className:"overview-tab",children:[i.jsxs("div",{className:"overview-score-section",children:[i.jsxs("div",{className:"overview-score-dial",children:[i.jsxs("svg",{width:"120",height:"120",className:"overview-score-svg",children:[i.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"8"}),i.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:`var(--accent-${p})`,strokeWidth:"8",strokeDasharray:`${u/100*314} 314`,strokeLinecap:"round",transform:"rotate(-90 60 60)",className:"overview-score-progress"})]}),i.jsxs("div",{className:"overview-score-value",children:[i.jsx("div",{className:"overview-score-number",children:u}),i.jsx("div",{className:`overview-score-grade overview-score-grade-${p}`,children:e.score})]})]}),i.jsx("div",{className:"overview-score-label",children:i.jsxs("div",{className:"overview-score-status",children:["Score: ",u,"  Stable"]})})]}),i.jsxs("div",{className:"overview-breakdown",children:[i.jsxs("div",{className:"overview-breakdown-chip",children:[i.jsx("div",{className:"overview-breakdown-label",children:"Accuracy"}),i.jsxs("div",{className:"overview-breakdown-value",children:[e.accuracy.toFixed(1),"%"]})]}),i.jsxs("div",{className:"overview-breakdown-chip",children:[i.jsx("div",{className:"overview-breakdown-label",children:"Reliability"}),i.jsxs("div",{className:"overview-breakdown-value",children:[e.reliability.toFixed(1),"%"]})]}),i.jsxs("div",{className:"overview-breakdown-chip",children:[i.jsx("div",{className:"overview-breakdown-label",children:"Price Behaviour"}),i.jsx("div",{className:"overview-breakdown-value",children:e.priceBehaviour==="stable"?" Stable":e.priceBehaviour==="rising"?" Rising":" Volatile"})]}),i.jsxs("div",{className:"overview-breakdown-chip",children:[i.jsx("div",{className:"overview-breakdown-label",children:"Disputes"}),i.jsxs("div",{className:"overview-breakdown-value",children:[e.disputeHistory.totalEscalations," escalations"]})]})]}),e.timeline&&e.timeline.length>0&&i.jsxs("div",{className:"overview-timeline",children:[i.jsx("div",{className:"overview-timeline-title",children:"Timeline"}),i.jsx("div",{className:"overview-timeline-strip",children:e.timeline.map((m,v)=>i.jsxs("div",{className:"overview-timeline-event",children:[i.jsx("div",{className:`overview-timeline-dot overview-timeline-dot-${m.type}`}),i.jsxs("div",{className:"overview-timeline-content",children:[i.jsx("div",{className:"overview-timeline-date",children:new Date(m.date).toLocaleDateString("en-GB",{day:"numeric",month:"short"})}),i.jsx("div",{className:"overview-timeline-text",children:m.event})]})]},v))})]}),i.jsxs("div",{className:"overview-actions",children:[n==="GM"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{className:"overview-action-button",onClick:()=>d("On Watch"),disabled:r||e.status==="On Watch",children:[i.jsx(r0,{size:16}),"Mark as On Watch"]}),i.jsxs("button",{className:"overview-action-button",onClick:()=>d("Blocked"),disabled:r||e.status==="Blocked",children:[i.jsx(Jz,{size:16}),"Block new orders"]}),i.jsxs("button",{className:"overview-action-button",children:[i.jsx(t0,{size:16}),"Request review meeting"]})]}),n==="Finance"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{className:"overview-action-button",children:[i.jsx(n0,{size:16}),"Export supplier report"]}),i.jsxs("button",{className:"overview-action-button",children:[i.jsx(K4,{size:16}),"View contract terms"]})]}),n==="ShiftLead"&&i.jsxs("button",{className:"overview-action-button",children:[i.jsx(Xa,{size:16}),"View delivery expectations"]})]})]})}function VQ({supplier:e,supplierId:t,currentRole:n}){const[r,l]=g.useState([]),[o,u]=g.useState(!0),[d,h]=g.useState(new Set),[p,m]=g.useState(null);g.useEffect(()=>{let k=!0;async function E(){u(!0);try{const O=await bQ(t);k&&l(O)}catch(O){console.error("Failed to load issues:",O),k&&l([])}finally{k&&u(!1)}}return E(),()=>{k=!1}},[t]);const v=k=>{h(E=>{const O=new Set(E);return O.has(k)?O.delete(k):O.add(k),O})},x=async k=>{try{const E=await _Q(t,k);m(E)}catch(E){console.error("Failed to generate email:",E)}},j=r.reduce((k,E)=>k+E.count,0),w=r.filter(k=>k.status==="Resolved").reduce((k,E)=>k+(E.suggestedCredit||0),0),N=r.filter(k=>k.status==="Open"||k.status==="In Review").length,S=k=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:2}).format(k),C=k=>{switch(k){case"Open":return"red";case"In Review":return"amber";case"Resolved":return"green";case"Escalated":return"orange";default:return"gray"}};return o?i.jsx("div",{className:"issues-credits-tab-loading",children:"Loading issues..."}):i.jsxs("div",{className:"issues-credits-tab",children:[i.jsxs("div",{className:"issues-credits-summary",children:[i.jsxs("div",{className:"issues-credits-summary-item",children:[i.jsx("div",{className:"issues-credits-summary-label",children:"Flags"}),i.jsx("div",{className:"issues-credits-summary-value",children:j})]}),i.jsxs("div",{className:"issues-credits-summary-item",children:[i.jsx("div",{className:"issues-credits-summary-label",children:"Credits Obtained"}),i.jsx("div",{className:"issues-credits-summary-value",children:S(w)})]}),i.jsxs("div",{className:"issues-credits-summary-item",children:[i.jsx("div",{className:"issues-credits-summary-label",children:"Still Open"}),i.jsx("div",{className:"issues-credits-summary-value",children:N})]})]}),i.jsx("div",{className:"issues-credits-list",children:r.map(k=>{const E=d.has(k.id),O=C(k.status);return i.jsxs("div",{className:"issues-credits-issue-card",children:[i.jsxs("div",{className:"issues-credits-issue-header",onClick:()=>v(k.id),children:[i.jsxs("div",{className:"issues-credits-issue-main",children:[i.jsx("div",{className:"issues-credits-issue-type",children:k.type}),i.jsxs("div",{className:"issues-credits-issue-meta",children:[i.jsxs("span",{children:[k.count," occurrences"]}),i.jsx("span",{children:""}),i.jsxs("span",{children:["Latest: ",new Date(k.latestOccurrence).toLocaleDateString("en-GB")]}),k.monetaryImpact>0&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[S(k.monetaryImpact)," impact"]})]})]})]}),i.jsxs("div",{className:"issues-credits-issue-actions",children:[i.jsx("div",{className:`issues-credits-issue-status issues-credits-issue-status-${O}`,children:k.status}),E?i.jsx(ur,{size:18}):i.jsx(jn,{size:18})]})]}),E&&i.jsxs("div",{className:"issues-credits-issue-details",children:[k.affectedInvoices&&k.affectedInvoices.length>0&&i.jsxs("div",{className:"issues-credits-issue-section",children:[i.jsx("div",{className:"issues-credits-issue-section-title",children:"Affected Invoices"}),i.jsx("div",{className:"issues-credits-issue-invoices",children:k.affectedInvoices.map(D=>i.jsx("span",{className:"issues-credits-issue-invoice",children:D},D))})]}),k.recommendedAction&&i.jsxs("div",{className:"issues-credits-issue-section",children:[i.jsx("div",{className:"issues-credits-issue-section-title",children:"Recommended Action"}),i.jsx("div",{className:"issues-credits-issue-action-text",children:k.recommendedAction})]}),k.suggestedCredit&&k.suggestedCredit>0&&i.jsxs("div",{className:"issues-credits-issue-section",children:[i.jsx("div",{className:"issues-credits-issue-section-title",children:"Suggested Credit"}),i.jsx("div",{className:"issues-credits-issue-credit-amount",children:S(k.suggestedCredit)})]}),i.jsxs("div",{className:"issues-credits-issue-buttons",children:[n==="Finance"&&i.jsxs("button",{className:"issues-credits-issue-button",onClick:()=>x([k.id]),children:[i.jsx(I4,{size:16}),"Generate credit email"]}),n==="GM"&&k.status!=="Resolved"&&i.jsxs("button",{className:"issues-credits-issue-button",children:[i.jsx(Wa,{size:16}),"Escalate to GM"]}),k.status!=="Resolved"&&i.jsxs("button",{className:"issues-credits-issue-button",children:[i.jsx(Vo,{size:16}),"Mark as addressed"]})]})]})]},k.id)})}),p&&i.jsx("div",{className:"issues-credits-email-modal",children:i.jsxs("div",{className:"issues-credits-email-content",children:[i.jsxs("div",{className:"issues-credits-email-header",children:[i.jsx("h3",{children:"Credit Email Template"}),i.jsx("button",{onClick:()=>m(null),className:"issues-credits-email-close",children:""})]}),i.jsx("textarea",{value:p,readOnly:!0,className:"issues-credits-email-textarea",rows:10}),i.jsxs("div",{className:"issues-credits-email-actions",children:[i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(p),alert("Email copied to clipboard")},className:"issues-credits-email-button",children:"Copy to Clipboard"}),i.jsx("button",{onClick:()=>m(null),className:"issues-credits-email-button",children:"Close"})]})]})})]})}function GQ({supplier:e,supplierId:t,currentRole:n}){const[r,l]=g.useState([]),[o,u]=g.useState(null),[d,h]=g.useState(!0),[p,m]=g.useState("");g.useEffect(()=>{let N=!0;async function S(){h(!0);try{const C=await jQ(t,o||void 0);N&&(l(C),!o&&C.length>0&&u(C[0].itemId))}catch(C){console.error("Failed to load pricing:",C),N&&l([])}finally{N&&h(!1)}}return S(),()=>{N=!1}},[t,o]);const v=r.find(N=>N.itemId===o),x=r.filter(N=>N.itemName.toLowerCase().includes(p.toLowerCase())),j=N=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:2}).format(N),w=v?v.prices.map(N=>({date:new Date(N.date).toLocaleDateString("en-GB",{day:"numeric",month:"short"}),price:N.price,forecast:N.forecast,confidence:N.confidence})):[];return d?i.jsx("div",{className:"pricing-tab-loading",children:"Loading pricing data..."}):i.jsxs("div",{className:"pricing-tab",children:[i.jsxs("div",{className:"pricing-tab-selector",children:[i.jsxs("div",{className:"pricing-tab-search",children:[i.jsx(Bl,{size:16}),i.jsx("input",{type:"text",placeholder:"Search items...",value:p,onChange:N=>m(N.target.value),className:"pricing-tab-search-input"})]}),i.jsx("select",{value:o||"",onChange:N=>u(N.target.value||null),className:"pricing-tab-select",children:x.map(N=>i.jsx("option",{value:N.itemId,children:N.itemName},N.itemId))})]}),v&&i.jsxs(i.Fragment,{children:[v.recentChange&&i.jsxs("div",{className:"pricing-tab-change",children:[i.jsx(Go,{size:16}),i.jsxs("span",{children:[v.recentChange.percentage>0?"+":"",v.recentChange.percentage.toFixed(1),"% vs"," ",v.recentChange.period]})]}),v.volatilityFlags&&v.volatilityFlags.length>0&&i.jsx("div",{className:"pricing-tab-flags",children:v.volatilityFlags.map((N,S)=>i.jsxs("div",{className:"pricing-tab-flag",children:[i.jsx(tn,{size:14}),i.jsxs("span",{children:[new Date(N.date).toLocaleDateString("en-GB"),": ",N.change.toFixed(1),"% -"," ",N.reason]})]},S))}),w.length>0&&i.jsx("div",{className:"pricing-tab-chart",children:i.jsx(C0,{width:"100%",height:300,children:i.jsxs(Bb,{data:w,children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"rgba(59, 130, 246, 0.3)",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"rgba(59, 130, 246, 0.3)",stopOpacity:0})]}),i.jsxs("linearGradient",{id:"colorForecast",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"rgba(251, 191, 36, 0.2)",stopOpacity:.2}),i.jsx("stop",{offset:"95%",stopColor:"rgba(251, 191, 36, 0.2)",stopOpacity:0})]})]}),i.jsx(kh,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),i.jsx(Dh,{dataKey:"date",stroke:"rgba(255, 255, 255, 0.5)",tick:{fill:"rgba(255, 255, 255, 0.6)",fontSize:12}}),i.jsx(Oh,{stroke:"rgba(255, 255, 255, 0.5)",tick:{fill:"rgba(255, 255, 255, 0.6)",fontSize:12},tickFormatter:N=>j(N)}),i.jsx(kb,{contentStyle:{backgroundColor:"rgba(42, 42, 42, 0.95)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.87)"},formatter:N=>j(N)}),i.jsx(Eh,{type:"monotone",dataKey:"price",stroke:"rgba(59, 130, 246, 1)",fill:"url(#colorPrice)",strokeWidth:2,dot:!1}),i.jsx(Rb,{type:"monotone",dataKey:"forecast",stroke:"rgba(251, 191, 36, 1)",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})})}),v.averagePrice&&i.jsxs("div",{className:"pricing-tab-average",children:[i.jsx("div",{className:"pricing-tab-average-label",children:"Average Price"}),i.jsx("div",{className:"pricing-tab-average-value",children:j(v.averagePrice)})]}),n!=="ShiftLead"&&i.jsxs("div",{className:"pricing-tab-actions",children:[i.jsx("button",{className:"pricing-tab-action-button",children:"Compare with other suppliers"}),i.jsx("button",{className:"pricing-tab-action-button",children:"Mark price as under review"})]})]})]})}function YQ({supplier:e,supplierId:t,currentRole:n}){const[r,l]=g.useState([]),[o,u]=g.useState(!0);g.useEffect(()=>{let j=!0;async function w(){u(!0);try{const N=await wQ(t);j&&l(N)}catch(N){console.error("Failed to load deliveries:",N),j&&l([])}finally{j&&u(!1)}}return w(),()=>{j=!1}},[t]);const d=r.filter(j=>j.onTime).length,h=r.length>0?d/r.length*100:0,p=r.filter(j=>j.delayHours&&j.delayHours>0).reduce((j,w)=>j+(w.delayHours||0),0)/r.filter(j=>j.delayHours&&j.delayHours>0).length||0,m=r.filter(j=>j.missingItems&&j.missingItems>0).length,v={};r.forEach(j=>{const w=new Date(j.date).toLocaleDateString("en-GB",{weekday:"long"});v[w]=(v[w]||0)+1});const x=j=>{switch(j){case"Fully matched":return"green";case"Partially matched":return"amber";case"Unmatched":return"red";default:return"gray"}};return o?i.jsx("div",{className:"deliveries-tab-loading",children:"Loading delivery data..."}):i.jsxs("div",{className:"deliveries-tab",children:[i.jsxs("div",{className:"deliveries-tab-metrics",children:[i.jsxs("div",{className:"deliveries-tab-metric",children:[i.jsx("div",{className:"deliveries-tab-metric-label",children:"On-time Rate"}),i.jsxs("div",{className:"deliveries-tab-metric-value",children:[h.toFixed(1),"%"]})]}),i.jsxs("div",{className:"deliveries-tab-metric",children:[i.jsx("div",{className:"deliveries-tab-metric-label",children:"Average Delay"}),i.jsx("div",{className:"deliveries-tab-metric-value",children:p>0?`${p.toFixed(1)} hours`:"N/A"})]}),i.jsxs("div",{className:"deliveries-tab-metric",children:[i.jsx("div",{className:"deliveries-tab-metric-label",children:"Short Deliveries"}),i.jsx("div",{className:"deliveries-tab-metric-value",children:m})]})]}),Object.keys(v).length>0&&i.jsxs("div",{className:"deliveries-tab-calendar",children:[i.jsx("div",{className:"deliveries-tab-calendar-title",children:"Delivery Days"}),i.jsx("div",{className:"deliveries-tab-calendar-days",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(j=>{const w=v[j]||0,S=r.filter(k=>new Date(k.date).toLocaleDateString("en-GB",{weekday:"long"})===j).filter(k=>k.onTime).length,C=w>0;return i.jsxs("div",{className:`deliveries-tab-calendar-day ${C?"active":""}`,children:[i.jsx("div",{className:"deliveries-tab-calendar-day-name",children:j.slice(0,3)}),C&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"deliveries-tab-calendar-day-count",children:w}),i.jsx("div",{className:"deliveries-tab-calendar-day-status",children:S===w?i.jsx(Vo,{size:12,className:"status-on-time"}):S>0?i.jsx(Wa,{size:12,className:"status-partial"}):i.jsx(VE,{size:12,className:"status-late"})})]})]},j)})})]}),i.jsxs("div",{className:"deliveries-tab-list",children:[i.jsx("div",{className:"deliveries-tab-list-title",children:"Recent Deliveries"}),r.length===0?i.jsx("div",{className:"deliveries-tab-empty",children:"No delivery data available"}):i.jsx("div",{className:"deliveries-tab-deliveries",children:r.map(j=>{const w=x(j.status);return i.jsxs("div",{className:"deliveries-tab-delivery",children:[i.jsxs("div",{className:"deliveries-tab-delivery-main",children:[i.jsx("div",{className:"deliveries-tab-delivery-number",children:j.deliveryNoteNumber}),i.jsx("div",{className:"deliveries-tab-delivery-date",children:new Date(j.date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]}),i.jsxs("div",{className:"deliveries-tab-delivery-status",children:[i.jsx("div",{className:`deliveries-tab-delivery-status-chip deliveries-tab-delivery-status-${w}`,children:j.status}),!j.onTime&&j.delayHours&&i.jsxs("div",{className:"deliveries-tab-delivery-delay",children:[j.delayHours,"h delay"]}),j.missingItems&&j.missingItems>0&&i.jsxs("div",{className:"deliveries-tab-delivery-missing",children:[j.missingItems," items missing"]})]})]},j.id)})})]})]})}function KQ({supplier:e,supplierId:t,currentRole:n}){const[r,l]=g.useState([]),[o,u]=g.useState([]),[d,h]=g.useState(!0),[p,m]=g.useState(""),[v,x]=g.useState(!1),j=n==="GM"||n==="Finance";g.useEffect(()=>{let N=!0;async function S(){h(!0);try{const C=await SQ(t);N&&(l(C),u([{id:"note-1",timestamp:"2025-10-15T10:30:00Z",author:"Finance Team",role:"Finance",content:"Sales rep changed in March. New contact details updated."},{id:"note-2",timestamp:"2025-09-10T14:20:00Z",author:"GM",role:"GM",content:"New contract signed  fix prices until September 2026."}]))}catch(C){console.error("Failed to load audit data:",C),N&&(l([]),u([]))}finally{N&&h(!1)}}return S(),()=>{N=!1}},[t]);const w=async()=>{if(!(!p.trim()||v)){x(!0);try{await CQ(t,p.trim(),"Current User",n),u([{id:`note-${Date.now()}`,timestamp:new Date().toISOString(),author:"Current User",role:n,content:p.trim()},...o]),m("")}catch(N){console.error("Failed to save note:",N)}finally{x(!1)}}};return d?i.jsx("div",{className:"notes-audit-tab-loading",children:"Loading notes and audit data..."}):i.jsxs("div",{className:"notes-audit-tab",children:[i.jsxs("div",{className:"notes-audit-section",children:[i.jsx("div",{className:"notes-audit-section-header",children:i.jsx("h3",{className:"notes-audit-section-title",children:"Staff Notes"})}),j&&i.jsxs("div",{className:"notes-audit-add-note",children:[i.jsx("textarea",{value:p,onChange:N=>m(N.target.value),placeholder:"Add a note about this supplier...",className:"notes-audit-note-input",rows:3}),i.jsx("button",{onClick:w,disabled:!p.trim()||v,className:"notes-audit-save-button",children:v?"Saving...":"Save Note"})]}),i.jsx("div",{className:"notes-audit-notes-list",children:o.length===0?i.jsx("div",{className:"notes-audit-empty",children:"No notes yet"}):o.map(N=>i.jsxs("div",{className:"notes-audit-note",children:[i.jsxs("div",{className:"notes-audit-note-header",children:[i.jsxs("div",{className:"notes-audit-note-author",children:[i.jsx(f3,{size:14}),i.jsx("span",{children:N.author}),i.jsxs("span",{className:"notes-audit-note-role",children:["(",N.role,")"]})]}),i.jsx("div",{className:"notes-audit-note-date",children:new Date(N.timestamp).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),i.jsx("div",{className:"notes-audit-note-content",children:N.content})]},N.id))})]}),i.jsxs("div",{className:"notes-audit-section",children:[i.jsx("div",{className:"notes-audit-section-header",children:i.jsx("h3",{className:"notes-audit-section-title",children:"Audit Timeline"})}),i.jsx("div",{className:"notes-audit-timeline",children:r.length===0?i.jsx("div",{className:"notes-audit-empty",children:"No audit entries yet"}):r.map(N=>i.jsxs("div",{className:"notes-audit-timeline-entry",children:[i.jsx("div",{className:"notes-audit-timeline-dot"}),i.jsxs("div",{className:"notes-audit-timeline-content",children:[i.jsxs("div",{className:"notes-audit-timeline-header",children:[i.jsx("div",{className:"notes-audit-timeline-actor",children:N.actor}),i.jsx("div",{className:"notes-audit-timeline-time",children:new Date(N.timestamp).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),i.jsx("div",{className:"notes-audit-timeline-action",children:N.action}),N.details&&i.jsx("div",{className:"notes-audit-timeline-details",children:N.details})]})]},N.id))})]}),j&&i.jsxs("div",{className:"notes-audit-section",children:[i.jsx("div",{className:"notes-audit-section-header",children:i.jsx("h3",{className:"notes-audit-section-title",children:"Attachments"})}),i.jsx("div",{className:"notes-audit-attachments",children:i.jsx("div",{className:"notes-audit-empty",children:"No attachments. Upload contract documents or other files here."})})]})]})}const QQ=e=>{switch(e){case"A":return"green";case"B":return"blue";case"C":return"amber";case"D":return"orange";case"E":return"red";default:return"gray"}},XQ=e=>{switch(e){case"Active":return"green";case"On Watch":return"amber";case"Blocked":return"red";default:return"gray"}},ZQ=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",maximumFractionDigits:0}).format(e),JQ=e=>e.charAt(0).toUpperCase(),eX=[{id:"overview",label:"Overview"},{id:"issues",label:"Issues & Credits"},{id:"pricing",label:"Pricing"},{id:"deliveries",label:"Deliveries"},{id:"notes",label:"Notes & Audit"}];function tX({supplier:e,supplierId:t,activeTab:n,onTabChange:r,loading:l,currentRole:o}){if(l)return i.jsx("div",{className:"supplier-detail-panel",children:i.jsx("div",{className:"supplier-detail-panel-loading",children:"Loading supplier details..."})});const u=QQ(e.score),d=XQ(e.status);return i.jsxs("div",{className:"supplier-detail-panel",children:[i.jsxs("div",{className:"supplier-detail-panel-header",children:[i.jsxs("div",{className:"supplier-detail-panel-header-top",children:[i.jsx("div",{className:`supplier-detail-panel-avatar supplier-detail-panel-avatar-${u}`,children:JQ(e.name)}),i.jsxs("div",{className:"supplier-detail-panel-header-info",children:[i.jsx("div",{className:"supplier-detail-panel-name",children:e.name}),i.jsx("div",{className:"supplier-detail-panel-selected-indicator",children:"Selected from list"})]}),i.jsx("div",{className:`supplier-detail-panel-grade supplier-detail-panel-grade-${u}`,children:e.score})]}),i.jsxs("div",{className:"supplier-detail-panel-header-bottom",children:[i.jsx("div",{className:"supplier-detail-panel-spend",children:ZQ(e.totalSpend)}),i.jsx("div",{className:`supplier-detail-panel-status supplier-detail-panel-status-${d}`,children:e.status})]})]}),i.jsx("div",{className:"supplier-detail-panel-tabs",children:eX.map(h=>i.jsx("button",{className:`supplier-detail-panel-tab ${n===h.id?"active":""}`,onClick:()=>r(h.id),children:h.label},h.id))}),i.jsxs("div",{className:"supplier-detail-panel-content",children:[n==="overview"&&i.jsx(WQ,{supplier:e,supplierId:t,currentRole:o}),n==="issues"&&i.jsx(VQ,{supplier:e,supplierId:t,currentRole:o}),n==="pricing"&&i.jsx(GQ,{supplier:e,supplierId:t,currentRole:o}),n==="deliveries"&&i.jsx(YQ,{supplier:e,supplierId:t,currentRole:o}),n==="notes"&&i.jsx(KQ,{supplier:e,supplierId:t,currentRole:o})]})]})}const Fy="GM";function nX(){console.log("[Suppliers] SuppliersContent rendering");const[e,t]=Pz(),{filters:n}=us(),[r,l]=g.useState([]),[o,u]=g.useState(e.get("id")||null),[d,h]=g.useState(null),[p,m]=g.useState(!0),[v,x]=g.useState(!1),[j,w]=g.useState(""),[N,S]=g.useState(null),[C,k]=g.useState(null),[E,O]=g.useState(null),[D,A]=g.useState("risk"),[M,q]=g.useState(1),te=30,[ce,G]=g.useState(e.get("tab")||"overview");g.useEffect(()=>{let J=!0;async function xe(){m(!0);try{const Ce=await xQ(n.venueId||void 0,n.dateRange);J&&l(Ce)}catch(Ce){console.error("Failed to load suppliers:",Ce),J&&l([])}finally{J&&m(!1)}}return xe(),()=>{J=!1}},[n.venueId,n.dateRange]),g.useEffect(()=>{if(!o){h(null);return}let J=!0;async function xe(){x(!0);try{const Ce=await c2(o);J&&h(Ce)}catch(Ce){console.error("Failed to load supplier detail:",Ce),J&&h(null)}finally{J&&x(!1)}}return xe(),()=>{J=!1}},[o]),g.useEffect(()=>{if(o){const J=new URLSearchParams;J.set("id",o),ce!=="overview"&&J.set("tab",ce),t(J,{replace:!0})}else t({},{replace:!0})},[o,ce,t]);const R=g.useCallback(J=>{u(J),J&&G("overview")},[]),he=[...r.filter(J=>{if(j){const xe=j.toLowerCase();if(!J.name.toLowerCase().includes(xe)&&!J.id.toLowerCase().includes(xe))return!1}return!(N&&J.category!==N||C&&!{High:["D","E"],Medium:["C"],Low:["A","B"]}[C]?.includes(J.score)||E&&J.status!==E)})].sort((J,xe)=>{switch(D){case"spend":return xe.totalSpend-J.totalSpend;case"name":return J.name.localeCompare(xe.name);case"recent":const Ce=J.lastInvoiceDate?new Date(J.lastInvoiceDate).getTime():0;return(xe.lastInvoiceDate?new Date(xe.lastInvoiceDate).getTime():0)-Ce;case"risk":default:const ie={E:3,D:3,C:2,B:1,A:1},we=ie[J.score]||0,Z=ie[xe.score]||0;if(we!==Z)return Z-we;const K=J.totalSpend*(J.mismatchRate/100);return xe.totalSpend*(xe.mismatchRate/100)-K}}),ee=Math.ceil(he.length/te),U=he.slice((M-1)*te,M*te);g.useEffect(()=>{q(1)},[j,N,C,E,D]);const ne={totalSpend:r.reduce((J,xe)=>J+xe.totalSpend,0),activeCount:r.filter(J=>J.status==="Active").length,avgScore:r.length>0?r.reduce((J,xe)=>J+({A:5,B:4,C:3,D:2,E:1}[xe.score]||0),0)/r.length:0};return i.jsxs("div",{className:"suppliers-page",children:[i.jsx(Iu,{children:i.jsx(FQ,{searchQuery:j,onSearchChange:w,categoryFilter:N,onCategoryFilterChange:S,riskFilter:C,onRiskFilterChange:k,statusFilter:E,onStatusFilterChange:O,sortBy:D,onSortChange:A,summaryStats:ne,currentRole:Fy})}),i.jsxs("div",{className:"suppliers-main",children:[i.jsx("div",{className:"suppliers-grid-column",children:i.jsx(HQ,{suppliers:U,selectedSupplierId:o,onSelectSupplier:R,page:M,pageCount:ee,onPageChange:q,loading:p,currentRole:Fy})}),i.jsx("div",{className:"suppliers-detail-column",children:o&&d?i.jsx(tX,{supplier:d,supplierId:o,activeTab:ce,onTabChange:G,loading:v,currentRole:Fy}):i.jsx("div",{className:"suppliers-empty-detail",children:i.jsxs("div",{className:"suppliers-empty-detail-content",children:[i.jsx("h3",{children:"Select a Supplier"}),i.jsx("p",{children:"Click on a supplier card to view detailed information"})]})})})]})]})}function rX(){return console.log("[Suppliers] Component rendering"),i.jsx(ZE,{children:i.jsx(nX,{})})}const aX={spoilage:"Spoilage",overcooked:"Overcooked","customer-return":"Customer return","over-portion":"Over-portion","prep-error":"Prep error","storage-issue":"Storage issue","delivery-quality":"Delivery quality"},iX={spoilage:"badge-spoilage",overcooked:"badge-overcooked","customer-return":"badge-customer-return","over-portion":"badge-over-portion","prep-error":"badge-prep-error","storage-issue":"badge-storage-issue","delivery-quality":"badge-delivery-quality"};function sX({entry:e,isSelected:t,onClick:n}){const r=l=>{const o=new Date(l),u=o.getDate(),d=o.toLocaleDateString("en-GB",{month:"short"}),h=o.getHours(),p=o.getMinutes().toString().padStart(2,"0");return`${u} ${d}  ${h}:${p}`};return i.jsxs("div",{className:`waste-card ${t?"waste-card-selected":""}`,onClick:n,children:[i.jsxs("div",{className:"waste-card-top",children:[i.jsx("div",{className:"waste-card-item-name",children:e.itemName}),i.jsx("div",{className:"waste-card-timestamp",children:r(e.timestamp)})]}),i.jsxs("div",{className:"waste-card-middle",children:[i.jsxs("div",{className:"waste-card-cost",children:["",e.costLost.toFixed(2)," lost"]}),i.jsx("span",{className:`waste-card-badge ${iX[e.reason]}`,children:aX[e.reason]})]}),i.jsxs("div",{className:"waste-card-bottom",children:[i.jsx("span",{className:"waste-card-staff",children:e.staffMember}),i.jsx("span",{className:"waste-card-venue",children:e.venue})]})]})}function lX({filters:e,onFilterChange:t,availableStaff:n}){const r=[{value:"all",label:"All"},{value:"meal",label:"Meals"},{value:"prep",label:"Prep"},{value:"ingredient",label:"Ingredients"}],l=[{value:"all",label:"All Reasons"},{value:"spoilage",label:"Spoilage"},{value:"overcooked",label:"Overcooked"},{value:"customer-return",label:"Customer return"},{value:"over-portion",label:"Over-portion"},{value:"prep-error",label:"Prep error"},{value:"storage-issue",label:"Storage issue"},{value:"delivery-quality",label:"Delivery quality"}],o=p=>{t({...e,category:p})},u=p=>{t({...e,reason:p})},d=p=>{t({...e,staffMember:p})},h=p=>{t({...e,searchQuery:p||void 0})};return i.jsxs("div",{className:"waste-filters",children:[i.jsxs("div",{className:"waste-filters-section",children:[i.jsx("div",{className:"waste-filters-label",children:"Category"}),i.jsx("div",{className:"waste-filters-pills",children:r.map(p=>i.jsx("button",{className:`waste-filter-pill ${e.category===p.value||!e.category&&p.value==="all"?"waste-filter-pill-active":""}`,onClick:()=>o(p.value),children:p.label},p.value))})]}),i.jsxs("div",{className:"waste-filters-section",children:[i.jsx("div",{className:"waste-filters-label",children:"Reason"}),i.jsx("select",{className:"waste-filter-select",value:e.reason||"all",onChange:p=>u(p.target.value),children:l.map(p=>i.jsx("option",{value:p.value,children:p.label},p.value))})]}),i.jsxs("div",{className:"waste-filters-section",children:[i.jsx("div",{className:"waste-filters-label",children:"Staff"}),i.jsxs("select",{className:"waste-filter-select",value:e.staffMember||"all",onChange:p=>d(p.target.value),children:[i.jsx("option",{value:"all",children:"All Staff"}),n.map(p=>i.jsx("option",{value:p,children:p},p))]})]}),i.jsxs("div",{className:"waste-filters-section",children:[i.jsx("div",{className:"waste-filters-label",children:"Search"}),i.jsx("input",{type:"text",className:"waste-filter-search",placeholder:"Search items, venues...",value:e.searchQuery||"",onChange:p=>h(p.target.value)})]})]})}const oX=g.memo(function({title:t="No invoices yet",description:n="Upload your first invoice to get started",actionLabel:r="Upload Invoice",onAction:l,icon:o=""}){return i.jsxs("div",{className:"empty-state",children:[i.jsx("div",{className:"empty-state-icon",children:o}),i.jsx("h2",{className:"empty-state-title",children:t}),i.jsx("p",{className:"empty-state-description",children:n}),l&&i.jsx("button",{className:"empty-state-action",onClick:l,children:r})]})});function cX({wasteEntries:e,selectedId:t,onSelect:n,filters:r,onFilterChange:l,onRecordWaste:o}){const u=Array.from(new Set(e.map(d=>d.staffMember))).sort();return i.jsxs("div",{className:"waste-log-list",children:[i.jsx("div",{className:"waste-log-list-header",children:i.jsx("h2",{className:"waste-log-list-title",children:"Waste Log"})}),i.jsx(lX,{filters:r,onFilterChange:l,availableStaff:u}),i.jsx("div",{className:"waste-log-list-cards",children:e.length===0?i.jsx(oX,{title:"No waste recorded yet",description:"Start tracking waste to identify cost savings opportunities",actionLabel:"Record Waste",onAction:o,icon:""}):e.map(d=>i.jsx(sX,{entry:d,isSelected:t===d.id,onClick:()=>n(d.id)},d.id))})]})}function uX({product:e,maxCostLost:t}){const n=Mu(),r=t>0?e.costLost/t*100:0,l=()=>{e.productId?n(`/products?product=${e.productId}`):n("/products")};return i.jsxs("div",{className:"product-waste-row",onClick:l,children:[i.jsxs("div",{className:"product-waste-row-content",children:[i.jsx("div",{className:"product-waste-row-name",children:e.productName}),i.jsxs("div",{className:"product-waste-row-stats",children:[i.jsxs("span",{className:"product-waste-row-percentage",children:[e.wastePercentage.toFixed(1),"% waste"]}),i.jsxs("span",{className:"product-waste-row-cost",children:["",e.costLost.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})," lost"]})]})]}),i.jsx("div",{className:"product-waste-row-bar-container",children:i.jsx("div",{className:"product-waste-row-bar",style:{width:`${r}%`}})})]})}function dX({meal:e}){const t=()=>{console.log("Navigate to meal:",e.mealId||e.mealName)};return i.jsx("div",{className:"meal-waste-row",onClick:t,children:i.jsxs("div",{className:"meal-waste-row-content",children:[i.jsx("div",{className:"meal-waste-row-name",children:e.mealName}),i.jsxs("div",{className:"meal-waste-row-stats",children:[i.jsxs("span",{className:"meal-waste-row-count",children:[e.wasteEntriesCount," entries"]}),i.jsxs("span",{className:"meal-waste-row-cost",children:["",e.totalCostLost.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})," lost"]})]})]})})}function fX({selectedWasteEntry:e,insights:t,dateRange:n,loading:r=!1}){if(r||!t)return i.jsx("div",{className:"waste-insights-panel",children:i.jsx("div",{className:"waste-insights-loading",children:"Loading insights..."})});const l=t.productBreakdown.length>0?Math.max(...t.productBreakdown.map(u=>u.costLost)):0,o=u=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(u);return i.jsxs("div",{className:"waste-insights-panel",children:[i.jsxs("div",{className:"waste-insights-card",children:[i.jsx("h3",{className:"waste-insights-card-title",children:"Waste Overview"}),i.jsxs("div",{className:"waste-overview-metrics",children:[i.jsxs("div",{className:"waste-metric-tile",children:[i.jsx("div",{className:"waste-metric-label",children:"Waste %"}),i.jsxs("div",{className:"waste-metric-value",children:[t.wastePercentage.toFixed(1),"%"]})]}),i.jsxs("div",{className:"waste-metric-tile",children:[i.jsx("div",{className:"waste-metric-label",children:"Cost of waste"}),i.jsx("div",{className:"waste-metric-value",children:o(t.totalCostLost)})]}),i.jsxs("div",{className:"waste-metric-tile",children:[i.jsx("div",{className:"waste-metric-label",children:"Top wasted category"}),i.jsx("div",{className:"waste-metric-value",children:t.topCategory})]}),i.jsxs("div",{className:"waste-metric-tile",children:[i.jsx("div",{className:"waste-metric-label",children:"Staff attribution"}),i.jsx("div",{className:"waste-metric-value",children:t.staffAttribution})]})]}),i.jsxs("div",{className:"waste-overview-graph",children:[i.jsx("div",{className:"waste-graph-title",children:"Waste Cost Over Time"}),i.jsx(C0,{width:"100%",height:200,children:i.jsxs(Bb,{data:t.trendData,children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"wasteColorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#2B3A55",stopOpacity:.3}),i.jsx("stop",{offset:"95%",stopColor:"#2B3A55",stopOpacity:0})]})}),i.jsx(kh,{strokeDasharray:"3 3",stroke:"rgba(0, 0, 0, 0.05)"}),i.jsx(Dh,{dataKey:"date",stroke:"rgba(0, 0, 0, 0.4)",tick:{fill:"rgba(0, 0, 0, 0.6)",fontSize:11},tickFormatter:u=>{const d=new Date(u);return`${d.getDate()}/${d.getMonth()+1}`}}),i.jsx(Oh,{stroke:"rgba(0, 0, 0, 0.4)",tick:{fill:"rgba(0, 0, 0, 0.6)",fontSize:11},tickFormatter:u=>`${u.toFixed(0)}`}),i.jsx(kb,{contentStyle:{backgroundColor:"white",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"6px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.04)"},formatter:u=>o(u)}),i.jsx(Eh,{type:"monotone",dataKey:"value",stroke:"#2B3A55",fill:"url(#wasteColorGradient)",strokeWidth:2,dot:!1})]})})]})]}),i.jsxs("div",{className:"waste-insights-card",children:[i.jsx("h3",{className:"waste-insights-card-title",children:"Products with highest waste"}),t.productBreakdown.length===0?i.jsx("div",{className:"waste-insights-empty",children:"No product waste data available"}):i.jsx("div",{className:"waste-product-breakdown",children:t.productBreakdown.map((u,d)=>i.jsx(uX,{product:u,maxCostLost:l},d))})]}),i.jsxs("div",{className:"waste-insights-card",children:[i.jsx("h3",{className:"waste-insights-card-title",children:"Meals yielding most waste"}),t.mealBreakdown.length===0?i.jsx("div",{className:"waste-insights-empty",children:"No meal waste data available"}):i.jsx("div",{className:"waste-meal-breakdown",children:t.mealBreakdown.map((u,d)=>i.jsx(dX,{meal:u},d))})]}),i.jsxs("div",{className:"waste-insights-card",children:[i.jsx("h3",{className:"waste-insights-card-title",children:"Supplier quality impact"}),t.supplierImpact.length===0?i.jsx("div",{className:"waste-insights-empty",children:"No supplier impact data available"}):i.jsxs("div",{className:"waste-supplier-impact",children:[t.supplierImpact.map((u,d)=>i.jsxs("div",{className:"waste-supplier-row",children:[i.jsxs("div",{className:"waste-supplier-row-content",children:[i.jsx("div",{className:"waste-supplier-name",children:u.supplierName}),i.jsxs("div",{className:"waste-supplier-stats",children:[i.jsx("span",{className:"waste-supplier-cost",children:o(u.wasteCost)}),i.jsxs("span",{className:"waste-supplier-percentage",children:[u.wastePercentage.toFixed(1),"% waste"]})]})]}),u.isAboveThreshold&&i.jsx("div",{className:"waste-supplier-badge-amber",children:"High waste detected"})]},d)),i.jsx("div",{className:"waste-supplier-notes",children:t.supplierImpact.some(u=>u.isAboveThreshold)&&i.jsxs("div",{className:"waste-supplier-note",children:["High waste detected on ",t.supplierImpact.filter(u=>u.isAboveThreshold).map(u=>u.supplierName).join(", ")," products"]})})]})]}),i.jsxs("div",{className:"waste-insights-card",children:[i.jsx("h3",{className:"waste-insights-card-title",children:"Margin erosion due to waste"}),i.jsxs("div",{className:"waste-margin-impact",children:[i.jsxs("div",{className:"waste-margin-row",children:[i.jsx("span",{className:"waste-margin-label",children:"Food cost target:"}),i.jsxs("span",{className:"waste-margin-value",children:[t.marginImpact.foodCostTarget,"%"]})]}),i.jsxs("div",{className:"waste-margin-row",children:[i.jsx("span",{className:"waste-margin-label",children:"Actual cost with waste:"}),i.jsxs("span",{className:"waste-margin-value waste-margin-value-high",children:[t.marginImpact.actualCostWithWaste.toFixed(1),"%"]})]}),i.jsxs("div",{className:"waste-margin-row",children:[i.jsx("span",{className:"waste-margin-label",children:"Lost margin:"}),i.jsxs("span",{className:"waste-margin-value waste-margin-value-negative",children:[t.marginImpact.lostMargin.toFixed(1),"pp"]})]}),i.jsxs("div",{className:"waste-margin-row waste-margin-row-highlight",children:[i.jsx("span",{className:"waste-margin-label",children:"Amount needed to return to target:"}),i.jsx("span",{className:"waste-margin-value waste-margin-value-amount",children:o(t.marginImpact.amountNeededToReturnToTarget)})]})]})]}),e&&i.jsxs("div",{className:"waste-insights-card waste-selected-entry-card",children:[i.jsx("h3",{className:"waste-insights-card-title",children:"Selected Entry"}),i.jsxs("div",{className:"waste-selected-entry-details",children:[i.jsxs("div",{className:"waste-selected-entry-row",children:[i.jsx("span",{className:"waste-selected-entry-label",children:"Item:"}),i.jsx("span",{className:"waste-selected-entry-value",children:e.itemName})]}),i.jsxs("div",{className:"waste-selected-entry-row",children:[i.jsx("span",{className:"waste-selected-entry-label",children:"Quantity:"}),i.jsxs("span",{className:"waste-selected-entry-value",children:[e.quantity," ",e.unit]})]}),i.jsxs("div",{className:"waste-selected-entry-row",children:[i.jsx("span",{className:"waste-selected-entry-label",children:"Cost Lost:"}),i.jsx("span",{className:"waste-selected-entry-value",children:o(e.costLost)})]}),i.jsxs("div",{className:"waste-selected-entry-row",children:[i.jsx("span",{className:"waste-selected-entry-label",children:"Reason:"}),i.jsx("span",{className:"waste-selected-entry-value",children:e.reason})]}),e.note&&i.jsxs("div",{className:"waste-selected-entry-row",children:[i.jsx("span",{className:"waste-selected-entry-label",children:"Note:"}),i.jsx("span",{className:"waste-selected-entry-value",children:e.note})]})]})]})]})}const pX=(e=20)=>{const t=["spoilage","overcooked","customer-return","over-portion","prep-error","storage-issue","delivery-quality"],n=["meal","ingredient","prep"],r=["Waterloo","Royal Oak Hotel","Main Restaurant"],l=["John Smith","Sarah Johnson","Mike Brown","Emma Wilson","David Lee"],o=["Chicken Breast 5kg","Carling Keg 11g","Fish & Chips","Beef Burger","Caesar Salad","Pasta Carbonara","Tomato Soup","Bread Loaf","Milk 4L","Cheese Block","Lamb Shank","Salmon Fillet","Rice 10kg","Potatoes 25kg","Onions 5kg"],u=[],d=new Date;for(let h=0;h<e;h++){const p=Math.floor(Math.random()*30),m=new Date(d.getTime()-p*24*60*60*1e3),v=Math.random()*10+1,x=["kg","g","L","portion","keg","crate"][Math.floor(Math.random()*6)],j=Math.random()*500+10;u.push({id:`waste-${h+1}`,itemName:o[Math.floor(Math.random()*o.length)],itemType:n[Math.floor(Math.random()*n.length)],quantity:Math.round(v*10)/10,unit:x,costLost:Math.round(j*100)/100,reason:t[Math.floor(Math.random()*t.length)],staffMember:l[Math.floor(Math.random()*l.length)],venue:r[Math.floor(Math.random()*r.length)],timestamp:m.toISOString(),note:Math.random()>.7?"Additional notes about this waste entry":void 0})}return u.sort((h,p)=>new Date(p.timestamp).getTime()-new Date(h.timestamp).getTime())},hX=()=>{const e=[],t=new Date;for(let n=29;n>=0;n--){const r=new Date(t.getTime()-n*24*60*60*1e3);e.push({date:r.toISOString().split("T")[0],value:Math.random()*500+200})}return{wastePercentage:6.4,totalCostLost:12450.75,topCategory:"Ingredients",staffAttribution:"John Smith (32%)",productBreakdown:[{productName:"Chicken Breast 5kg",wastePercentage:6.4,costLost:3120,productId:"prod-1"},{productName:"Carling Keg 11g",wastePercentage:3.1,costLost:1260,productId:"prod-2"},{productName:"Fish & Chips",wastePercentage:5.2,costLost:980,productId:"prod-3"},{productName:"Beef Burger",wastePercentage:4.8,costLost:750,productId:"prod-4"},{productName:"Caesar Salad",wastePercentage:3.9,costLost:620,productId:"prod-5"}],mealBreakdown:[{mealName:"Fish & Chips",wasteEntriesCount:12,totalCostLost:980},{mealName:"Beef Burger",wasteEntriesCount:8,totalCostLost:750},{mealName:"Caesar Salad",wasteEntriesCount:6,totalCostLost:620},{mealName:"Pasta Carbonara",wasteEntriesCount:5,totalCostLost:450}],supplierImpact:[{supplierName:"Supplier A",wasteCost:3200,wastePercentage:4.2,isAboveThreshold:!1},{supplierName:"Supplier B",wasteCost:5800,wastePercentage:8.1,isAboveThreshold:!0},{supplierName:"Supplier C",wasteCost:2100,wastePercentage:3.5,isAboveThreshold:!1}],marginImpact:{foodCostTarget:30,actualCostWithWaste:33.4,lostMargin:-3.4,amountNeededToReturnToTarget:12450.75},trendData:e}};function mX(e={},t="30d"){const[n,r]=g.useState([]),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{o(!0),setTimeout(()=>{let h=pX(25);if(e.category&&e.category!=="all"&&(h=h.filter(p=>p.itemType===e.category)),e.reason&&e.reason!=="all"&&(h=h.filter(p=>p.reason===e.reason)),e.staffMember&&e.staffMember!=="all"&&(h=h.filter(p=>p.staffMember===e.staffMember)),e.searchQuery){const p=e.searchQuery.toLowerCase();h=h.filter(m=>m.itemName.toLowerCase().includes(p)||m.venue.toLowerCase().includes(p)||m.staffMember.toLowerCase().includes(p))}r(h),o(!1)},300)},[e,t]),{data:n,loading:l,error:u}}function vX(e="30d",t){const[n,r]=g.useState(null),[l,o]=g.useState(!0),[u,d]=g.useState(null);return g.useEffect(()=>{o(!0),setTimeout(()=>{r(hX()),o(!1)},400)},[e,t]),{data:n,loading:l,error:u}}function gX(){const[e,t]=g.useState(!1),[n,r]=g.useState(null);return{recordWaste:g.useCallback(async o=>(t(!0),r(null),new Promise(u=>{setTimeout(()=>{const d={id:`waste-${Date.now()}`,...o,costLost:Math.random()*500+10,timestamp:new Date().toISOString()};t(!1),u(d)},500)})),[]),loading:e,error:n}}const yX=[{value:"meal",label:"Meal"},{value:"ingredient",label:"Ingredient"},{value:"prep",label:"Prep batch"}],xX=[{value:"spoilage",label:"Spoilage"},{value:"overcooked",label:"Overcooked"},{value:"customer-return",label:"Customer return"},{value:"over-portion",label:"Over-portion"},{value:"prep-error",label:"Prepped too much"},{value:"storage-issue",label:"Storage issue"},{value:"delivery-quality",label:"Delivery quality issue"}],bX=["g","kg","L","portion","keg","crate","unit","box"],jX=["Fish & Chips","Beef Burger","Caesar Salad","Pasta Carbonara","Chicken Curry","Lamb Shank"],wX=["Chicken Breast 5kg","Carling Keg 11g","Tomato Soup","Bread Loaf","Milk 4L","Cheese Block","Rice 10kg","Potatoes 25kg"],SX=["Prepped Vegetables","Marinated Chicken","Soup Base","Dough Batch","Sauce Mix"];function NX({isOpen:e,onClose:t,onSuccess:n,venue:r="Waterloo"}){const[l,o]=g.useState("meal"),[u,d]=g.useState(""),[h,p]=g.useState(0),[m,v]=g.useState("kg"),[x,j]=g.useState("spoilage"),[w,N]=g.useState(""),[S,C]=g.useState("John Smith"),[k,E]=g.useState(""),[O,D]=g.useState([]),[A,M]=g.useState(!1),{recordWaste:q,loading:te}=gX(),ce=["John Smith","Sarah Johnson","Mike Brown","Emma Wilson","David Lee"];g.useEffect(()=>{if(u.length>0){const ee=(l==="meal"?jX:l==="ingredient"?wX:SX).filter(U=>U.toLowerCase().includes(u.toLowerCase())).slice(0,5);D(ee),M(ee.length>0)}else D([]),M(!1)},[u,l]);const R=(()=>{if(h<=0)return 0;const ee=l==="meal"?8.5:l==="ingredient"?5.2:3.75,U=m==="kg"?1:m==="g"?.001:1;return Math.round(h*ee*U*100)/100})(),F=async ee=>{if(ee.preventDefault(),!(!u.trim()||h<=0))try{await q({itemName:u.trim(),itemType:l,quantity:h,unit:m,reason:x,staffMember:k||S,venue:r,note:w.trim()||void 0}),du({type:"success",message:"Waste logged successfully"}),d(""),p(0),v("kg"),j("spoilage"),N(""),E(""),n(),t()}catch{du({type:"error",message:"Failed to log waste. Please try again."})}},he=()=>{te||t()};return e?i.jsx("div",{className:"modal-overlay",onClick:he,children:i.jsxs("div",{className:"modal-container",onClick:ee=>ee.stopPropagation(),children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h2",{className:"modal-title",children:"Record Waste"}),i.jsx("button",{className:"modal-close-button",onClick:he,disabled:te,children:i.jsx(sn,{size:20})})]}),i.jsxs("form",{onSubmit:F,children:[i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"What was wasted?"}),i.jsx("div",{className:"waste-modal-segmented-control",children:yX.map(ee=>i.jsx("button",{type:"button",className:`waste-modal-segment ${l===ee.value?"waste-modal-segment-active":""}`,onClick:()=>{o(ee.value),d(""),D([]),M(!1)},children:ee.label},ee.value))}),i.jsxs("div",{className:"waste-modal-autocomplete-container",children:[i.jsx("input",{type:"text",className:"modal-form-input",placeholder:`Select ${l==="meal"?"meal":l==="ingredient"?"ingredient":"prep item"}`,value:u,onChange:ee=>d(ee.target.value),onFocus:()=>{O.length>0&&M(!0)},required:!0}),A&&O.length>0&&i.jsx("div",{className:"waste-modal-autocomplete-dropdown",children:O.map((ee,U)=>i.jsx("div",{className:"waste-modal-autocomplete-item",onClick:()=>{d(ee),M(!1)},children:ee},U))})]})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Quantity wasted"}),i.jsxs("div",{className:"waste-modal-quantity-row",children:[i.jsx("input",{type:"number",className:"modal-form-input waste-modal-quantity-input",placeholder:"0",value:h||"",onChange:ee=>p(parseFloat(ee.target.value)||0),min:"0",step:"0.01",required:!0}),i.jsx("select",{className:"modal-form-select waste-modal-unit-select",value:m,onChange:ee=>v(ee.target.value),children:bX.map(ee=>i.jsx("option",{value:ee,children:ee},ee))})]}),R>0&&i.jsxs("div",{className:"waste-modal-cost-display",children:[i.jsx("span",{className:"waste-modal-cost-label",children:"Cost lost:"}),i.jsxs("span",{className:"waste-modal-cost-value",children:["",R.toFixed(2)]})]}),i.jsx("div",{className:"waste-modal-cost-note",children:"Approximate cost based on recent purchases"})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Reason"}),i.jsx("select",{className:"modal-form-select",value:x,onChange:ee=>j(ee.target.value),required:!0,children:xX.map(ee=>i.jsx("option",{value:ee.value,children:ee.label},ee.value))}),i.jsx("textarea",{className:"modal-form-textarea",placeholder:"Optional note...",value:w,onChange:ee=>N(ee.target.value),rows:3})]}),i.jsxs("div",{className:"modal-form-group",children:[i.jsx("label",{className:"modal-form-label",children:"Staff"}),i.jsx("input",{type:"text",className:"modal-form-input",value:S,onChange:ee=>C(ee.target.value),required:!0}),i.jsxs("select",{className:"modal-form-select waste-modal-tag-staff",value:k,onChange:ee=>E(ee.target.value),children:[i.jsx("option",{value:"",children:"Tag another staff member (optional)"}),ce.filter(ee=>ee!==S).map(ee=>i.jsx("option",{value:ee,children:ee},ee))]})]})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"glass-button",onClick:he,disabled:te,children:"Cancel"}),i.jsx("button",{type:"submit",className:"glass-button",disabled:te||!u.trim()||h<=0,children:te?"Logging...":"Log Waste"})]})]})]})}):null}function CX(){const[e,t]=g.useState("Waterloo"),[n,r]=g.useState("30d"),[l,o]=g.useState(""),[u,d]=g.useState({}),[h,p]=g.useState(null),[m,v]=g.useState(!1),x={...u,searchQuery:l||void 0},{data:j}=mX(x,n),{data:w,loading:N}=vX(n,e),S=j.find(O=>O.id===h)||null,C=["All Venues","Waterloo","Royal Oak Hotel","Main Restaurant"],k=[{value:"7d",label:"7 Days"},{value:"30d",label:"30 Days"},{value:"90d",label:"90 Days"},{value:"custom",label:"Custom"}],E=()=>{v(!1)};return i.jsxs("div",{className:"waste-page",children:[i.jsx(Iu,{children:i.jsxs("div",{className:"waste-page-header",children:[i.jsxs("div",{className:"waste-page-header-content",children:[i.jsx("h1",{className:"waste-page-title",children:"Waste Log"}),i.jsx("p",{className:"waste-page-subtitle",children:"Track waste, cost and margin loss across all venues"})]}),i.jsxs("div",{className:"waste-page-controls",children:[i.jsx("select",{className:"waste-page-control-select",value:e,onChange:O=>t(O.target.value),children:C.map(O=>i.jsx("option",{value:O,children:O},O))}),i.jsx("select",{className:"waste-page-control-select",value:n,onChange:O=>r(O.target.value),children:k.map(O=>i.jsx("option",{value:O.value,children:O.label},O.value))}),i.jsx("input",{type:"text",className:"waste-page-control-search",placeholder:"Search waste entries...",value:l,onChange:O=>o(O.target.value)}),i.jsx("button",{className:"waste-page-record-button",onClick:()=>v(!0),children:"Record Waste"})]})]})}),i.jsx("div",{className:"waste-page-content",children:i.jsxs("div",{className:"waste-page-grid",children:[i.jsx("div",{className:"waste-page-left-column",children:i.jsx(cX,{wasteEntries:j,selectedId:h,onSelect:p,filters:u,onFilterChange:d,onRecordWaste:()=>v(!0)})}),i.jsx("div",{className:"waste-page-right-column",children:i.jsx(fX,{selectedWasteEntry:S,insights:w,dateRange:n,loading:N})})]})}),i.jsx(NX,{isOpen:m,onClose:()=>v(!1),onSuccess:E,venue:e==="All Venues"?"Waterloo":e}),i.jsx(n2,{})]})}function _X(){const[e,t]=g.useState([]),[n,r]=g.useState(null),[l,o]=g.useState(null),[u,d]=g.useState(""),[h,p]=g.useState(!1),[m,v]=g.useState(!1),[x,j]=g.useState(null),[w,N]=g.useState({by_severity:{},by_tool:{}}),[S,C]=g.useState(!1);g.useEffect(()=>{k()},[]);const k=async()=>{v(!0),j(null);try{const M=await fetch(`${Be}/api/dev/run_checks`);if(!M.ok)throw new Error(`Failed to run checks: ${M.statusText}`);const q=await M.json();q.ok?(t(q.issues),N({by_severity:q.by_severity,by_tool:q.by_tool}),q.errors.length>0&&j(`Some checks failed: ${q.errors.join(", ")}`)):j("Checks failed to complete")}catch(M){j(M instanceof Error?M.message:"Failed to run checks")}finally{v(!1)}},E=async()=>{if(n){p(!0),j(null),o(null);try{const M=await fetch(`${Be}/api/dev/llm/explain`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue_id:n.id,file_path:n.file_path,error_snippet:n.message,code_region:u||void 0,line_number:n.line,tool:n.tool})});if(!M.ok)throw new Error(`Failed to explain issue: ${M.statusText}`);const q=await M.json();q.ok&&q.explanation?o(q.explanation):j(q.error||"Failed to generate explanation")}catch(M){j(M instanceof Error?M.message:"Failed to explain issue")}finally{p(!1)}}},O=()=>{l&&(navigator.clipboard.writeText(l.cursor_prompt),C(!0),setTimeout(()=>C(!1),2e3))},D=M=>{switch(M){case"error":return"bg-red-100 text-red-800 border-red-300";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-blue-100 text-blue-800 border-blue-300"}},A=M=>{switch(M){case"error":return"";case"warning":return"";default:return""}};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Dev Debug Assistant"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Offline code quality checker with AI-powered explanations"})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsx("button",{onClick:k,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:m?" Running Checks...":" Run Checks"})})]})})}),e.length>0&&i.jsx("div",{className:"bg-white border-b border-gray-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:i.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[i.jsxs("div",{className:"font-medium text-gray-700",children:["Total: ",i.jsx("span",{className:"text-gray-900",children:e.length})]}),Object.entries(w.by_severity).map(([M,q])=>i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{children:A(M)}),i.jsxs("span",{className:"text-gray-700",children:[M,":"]}),i.jsx("span",{className:"font-medium text-gray-900",children:q})]},M)),i.jsx("div",{className:"flex items-center gap-2 ml-auto",children:Object.entries(w.by_tool).map(([M,q])=>i.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs font-medium text-gray-700",children:[M,": ",q]},M))})]})})}),x&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-4 mx-4 mt-4 rounded-r",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-red-400",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm text-red-700",children:x})})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Detected Issues"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Select an issue to get an explanation"})]}),i.jsx("div",{className:"divide-y divide-gray-200 max-h-[calc(100vh-350px)] overflow-y-auto",children:e.length===0?i.jsx("div",{className:"p-8 text-center text-gray-500",children:m?i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("p",{children:"Running checks..."})]}):i.jsxs("div",{children:[i.jsx("p",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"No issues found!"}),i.jsx("p",{className:"text-sm mt-1",children:'Click "Run Checks" to scan your code'})]})}):e.map(M=>i.jsx("button",{onClick:()=>{r(M),o(null),d("")},className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${n?.id===M.id?"bg-blue-50 border-l-4 border-blue-600":""}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-xl mt-0.5",children:A(M.severity)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium border ${D(M.severity)}`,children:M.severity}),i.jsx("span",{className:"text-xs font-medium text-gray-600",children:M.tool}),M.rule&&i.jsx("span",{className:"text-xs text-gray-500",children:M.rule})]}),i.jsxs("p",{className:"text-sm font-medium text-gray-900 mb-1 truncate",children:[M.file_path,M.line&&`:${M.line}`,M.column&&`:${M.column}`]}),i.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:M.message})]})]})},M.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Issue Explanation"}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n?`Analyzing ${n.tool} issue`:"Select an issue to get started"})]}),i.jsx("div",{className:"p-4 space-y-4 max-h-[calc(100vh-350px)] overflow-y-auto",children:n?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-xl",children:A(n.severity)}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium border ${D(n.severity)}`,children:n.severity}),i.jsx("span",{className:"text-xs font-medium text-gray-600",children:n.tool})]}),i.jsx("p",{className:"text-sm font-mono text-gray-700 mb-2",children:n.file_path}),i.jsx("p",{className:"text-sm text-gray-900",children:n.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Code Context (optional, 30-60 lines around the error)"}),i.jsx("textarea",{value:u,onChange:M=>d(M.target.value),placeholder:"Paste 30-60 lines of code around the error for better explanation...",className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsx("button",{onClick:E,disabled:h,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:h?" Generating Explanation...":" Generate Explanation & Patch Suggestion"}),l&&i.jsxs("div",{className:"space-y-4 border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Plain English"}),i.jsx("p",{className:"text-sm text-blue-800",children:l.plain_english})]}),i.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-purple-900 mb-2",children:" Technical Cause"}),i.jsx("p",{className:"text-sm text-purple-800",children:l.technical_cause})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[i.jsx("h3",{className:"text-sm font-semibold text-green-900 mb-2",children:" Suggested Fix"}),i.jsx("pre",{className:"text-sm text-green-800 whitespace-pre-wrap",children:l.suggested_fix})]}),i.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-sm font-semibold text-orange-900",children:" Cursor Prompt (Copy & Paste)"}),i.jsx("button",{onClick:O,className:"px-3 py-1 bg-orange-600 text-white text-xs rounded hover:bg-orange-700 transition-colors",children:S?" Copied!":" Copy"})]}),i.jsx("p",{className:"text-sm text-orange-800 font-mono bg-white p-2 rounded border border-orange-200",children:l.cursor_prompt})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-200",children:[i.jsxs("span",{children:["Confidence: ",(l.confidence*100).toFixed(0),"%"]}),i.jsxs("span",{children:["Method: ",l.generation_method==="ollama_llm"?" AI (Ollama)":" Template"]})]})]})]}):i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("p",{className:"text-3xl mb-2",children:""}),i.jsx("p",{children:"Select an issue from the list"})]})})]})]})})]})}class Ef extends g.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:i.jsxs("div",{style:{padding:"24px",maxWidth:"800px",margin:"0 auto",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",color:"#ef4444"},children:[i.jsx("h2",{style:{marginTop:0,marginBottom:"16px"},children:"Something went wrong"}),i.jsxs("details",{style:{marginTop:"16px",color:"rgba(255, 255, 255, 0.8)"},children:[i.jsx("summary",{style:{cursor:"pointer",marginBottom:"8px"},children:"Error details"}),i.jsxs("pre",{style:{background:"rgba(0, 0, 0, 0.3)",padding:"12px",borderRadius:"8px",overflow:"auto",fontSize:"12px",marginTop:"8px"},children:[this.state.error&&this.state.error.toString(),this.state.errorInfo&&i.jsxs(i.Fragment,{children:[`

`,this.state.errorInfo.componentStack]})]})]}),i.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()},style:{marginTop:"16px",padding:"8px 16px",background:"#ef4444",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}function kX(){return i.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[i.jsx("h1",{children:"Settings"}),i.jsx("p",{children:"Settings page coming soon..."})]})}function EX(){return i.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[i.jsx("h1",{children:"Reports"}),i.jsx("p",{children:"Reports page coming soon..."})]})}function DX(){return i.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[i.jsx("h1",{children:"Flagged Issues"}),i.jsx("p",{children:"Flagged issues page coming soon..."})]})}function OX(){return i.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[i.jsx("h1",{children:"Delivery Notes"}),i.jsx("p",{children:"Delivery notes page coming soon..."})]})}function TX(){return i.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[i.jsx("h1",{children:"Forecasting"}),i.jsx("p",{children:"Forecasting page coming soon..."})]})}function AX(){return i.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[i.jsx("h1",{children:"Notes & Logs"}),i.jsx("p",{children:"Notes & logs page coming soon..."})]})}function MX(){return i.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto",minHeight:"100%"},children:[i.jsx(Iu,{children:i.jsx("h1",{style:{margin:0},children:"Products"})}),i.jsxs("div",{style:{marginTop:"24px"},children:[i.jsx("h1",{children:"Products"}),i.jsxs("p",{children:["Products page coming soon. See ",i.jsx("code",{children:"docs/PRODUCTS_PAGE_SPEC.md"})," for details."]})]})]})}function PX(){const[e,t]=g.useState(280),[n,r]=g.useState(!0),l="GM";return g.useEffect(()=>{typeof window<"u"&&window.innerWidth>=1024?document.documentElement.style.setProperty("--sidebar-width",`${e}px`):document.documentElement.style.setProperty("--sidebar-width","0px")},[e]),i.jsxs("div",{style:{minHeight:"100vh",display:"flex"},children:[i.jsx(y3,{currentRole:l,onWidthChange:t,onToggle:r}),i.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",paddingLeft:typeof window<"u"&&window.innerWidth>=1024?`${e}px`:"0",transition:"padding-left 300ms cubic-bezier(0.4, 0, 0.2, 1)",minWidth:0,width:"100%",boxSizing:"border-box",overflowX:"hidden"},children:i.jsx("main",{style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column"},children:i.jsx(az,{})})})]})}function zX(){return console.log("[Owlin] App component rendering - Sidebar should be visible"),i.jsx(w3,{children:i.jsx("div",{className:"App",children:i.jsx(sz,{children:i.jsxs(Gr,{path:"/",element:i.jsx(PX,{}),children:[i.jsx(Gr,{index:!0,element:i.jsx(vK,{})}),i.jsx(Gr,{path:"invoices",element:i.jsx(Ef,{children:i.jsx(PQ,{})})}),i.jsx(Gr,{path:"invoices-gen",element:i.jsx(Ef,{children:i.jsx(LQ,{})})}),i.jsx(Gr,{path:"delivery-notes",element:i.jsx(OX,{})}),i.jsx(Gr,{path:"suppliers",element:i.jsx(rX,{})}),i.jsx(Gr,{path:"issues",element:i.jsx(DX,{})}),i.jsx(Gr,{path:"products",element:i.jsx(Ef,{children:i.jsx(MX,{})})}),i.jsx(Gr,{path:"waste",element:i.jsx(Ef,{children:i.jsx(CX,{})})}),i.jsx(Gr,{path:"reports",element:i.jsx(EX,{})}),i.jsx(Gr,{path:"forecasting",element:i.jsx(TX,{})}),i.jsx(Gr,{path:"notes",element:i.jsx(AX,{})}),i.jsx(Gr,{path:"settings",element:i.jsx(kX,{})}),i.jsx(Gr,{path:"dev/debug",element:i.jsx(_X,{})})]})})})})}pP.createRoot(document.getElementById("root")).render(i.jsx(g.StrictMode,{children:i.jsx(Oz,{children:i.jsx(zX,{})})}));export{si as g,mE as r};
