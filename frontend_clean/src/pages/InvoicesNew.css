/* Dark Theme Invoices Page - Matching Dashboard Style */

:root {
  --bg-primary: #1a1a1a;
  --bg-secondary: #1f1f1f;
  --bg-card: rgba(255, 255, 255, 0.03);
  --bg-card-hover: rgba(255, 255, 255, 0.05);
  --bg-glass: rgba(255, 255, 255, 0.05);
  --bg-glass-hover: rgba(255, 255, 255, 0.08);
  --border-color: rgba(255, 255, 255, 0.1);
  --border-hover: rgba(255, 255, 255, 0.2);
  --text-primary: rgba(255, 255, 255, 0.87);
  --text-secondary: rgba(255, 255, 255, 0.6);
  --text-muted: rgba(255, 255, 255, 0.4);
  --accent-teal: #14b8a6;
  --accent-blue: #3b82f6;
  --accent-purple: #8b5cf6;
  --accent-green: #22c55e;
  --accent-orange: #f59e0b;
  --accent-red: #ef4444;
  --accent-yellow: #eab308;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.4);
  --shadow-card: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2);
  --shadow-hover: 0 10px 20px -5px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.4);
}

.invoices-page-new {
  display: flex;
  flex-direction: column;
  min-height: 100vh; /* Fill viewport */
  height: 100%; /* Also respect parent height */
  background: var(--bg-primary);
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  overflow-x: hidden; /* Prevent horizontal scroll */
  overflow-y: auto; /* Allow vertical scroll */
  color: var(--text-primary);
  /* Smooth transitions for state changes */
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* Integrate with layout - MUST be relative to respect parent padding */
  position: relative;
  width: 100%;
  /* Ensure it flows with the layout and respects sidebar padding */
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  /* Smooth integration with sidebar */
  align-items: stretch;
  /* Ensure it doesn't extend beyond parent container */
  max-width: 100%;
  /* CRITICAL: Ensure it respects parent padding from Layout component */
  /* The Layout adds paddingLeft to <main>, so this must stay within bounds */
  left: 0;
  right: 0;
}

/* Header Bar - Dark theme, integrated */
.invoices-header-new {
  background: transparent; /* Background handled by AppHeader */
  border-bottom: none; /* Border handled by AppHeader */
  padding: clamp(16px, 2vw, 24px) clamp(20px, 2.5vw, 32px); /* Fluid padding */
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: clamp(12px, 2vw, 40px); /* Fluid gap that smoothly adapts */
  flex-shrink: 0;
  flex-wrap: wrap; /* Allow wrapping on narrow screens */
  z-index: auto; /* Not needed - AppHeader handles z-index */
  backdrop-filter: none; /* Backdrop handled by AppHeader */
  -webkit-backdrop-filter: none;
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smoother transition */
  /* Integrate with page boundaries */
  width: 100%;
  position: relative;
  /* Must be relative to respect parent padding */
  /* Ensure it respects container */
  box-sizing: border-box;
  margin: 0;
  overflow: visible; /* Allow dropdowns to show */
}

/* Mobile header - stack elements */
@media (max-width: 768px) {
  .invoices-header-new {
    padding: 16px 20px;
    gap: 12px;
  }
}

/* Left Section: Title + Subtitle */
.invoices-header-left {
  display: flex;
  align-items: center;
  flex: 0 0 auto; /* Don't grow, don't shrink, auto width */
  min-width: 0;
  flex-shrink: 0; /* Prevent title from shrinking */
}

.invoices-header-title-section {
  display: flex;
  flex-direction: column;
  gap: 6px; /* More space between title and subtitle */
}

.invoices-header-title {
  font-size: clamp(18px, 2.5vw, 22px); /* Responsive font size */
  font-weight: 700;
  color: var(--text-primary);
  margin: 0;
  letter-spacing: -0.02em;
}

.invoices-header-subtitle {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0;
  font-weight: 400;
}

/* Center Section: Filters + Search */
.invoices-header-center {
  display: flex;
  align-items: center;
  gap: clamp(10px, 1.8vw, 20px); /* Fluid gap */
  flex: 1 1 0; /* Equal flex basis, can grow and shrink */
  justify-content: flex-start; /* Anchor elements to the left */
  min-width: 0;
  max-width: none; /* Remove max-width constraint */
  overflow: visible; /* Allow dropdowns to show */
  margin-right: 0; /* No right margin - buttons will be pushed to the right */
  padding-right: 0; /* Ensure no extra padding */
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smooth transitions */
  position: relative; /* For better layout control */
}

.invoices-header-filters {
  display: flex;
  align-items: center;
  gap: clamp(6px, 1vw, 10px); /* Fluid gap between filter buttons */
  flex-shrink: 1; /* Allow filters to shrink at same rate */
  flex-basis: auto; /* Natural size basis */
  min-width: 0;
  transition: gap 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smooth gap transitions */
}

/* Right Section: Primary Actions */
.invoices-header-right {
  display: flex;
  align-items: center;
  gap: clamp(8px, 1.2vw, 12px); /* Fluid gap */
  flex: 0 1 auto; /* Can shrink if needed */
  flex-basis: auto; /* Natural size basis */
  justify-content: flex-start; /* Anchor to left, shrink from right */
  min-width: 0;
  flex-shrink: 1; /* Allow shrinking at same rate */
  margin-left: clamp(12px, 2.5vw, 32px); /* Fluid responsive margin to prevent overlap */
  margin-right: 0; /* No right margin - buttons will be close to assistant */
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smooth transitions */
}

/* Legacy support - keep for backward compatibility */
.invoices-header-controls {
  display: flex;
  align-items: center;
  gap: 16px; /* More spacing between controls */
  flex: 1;
  justify-content: flex-end;
  min-width: 0; /* Allow shrinking to prevent overflow */
  padding-right: 0; /* Spacing handled by spacer div */
}

/* Modern Button/Pill - Softer, calmer */
.glass-button {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 10px; /* More rounded for calmness */
  padding: 10px 18px; /* More padding */
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Smoother transitions */
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: none; /* Removed shadow for calmer feel */
  transform: translateZ(0);
  -webkit-font-smoothing: antialiased;
  backface-visibility: hidden;
}

.glass-button:hover {
  background: var(--bg-glass-hover);
  border-color: var(--border-hover);
  transform: translateY(-2px) translateZ(0); /* More pronounced lift */
  box-shadow: var(--shadow-sm); /* Subtle shadow only on hover */
}

.glass-button:active {
  transform: translateY(0) translateZ(0);
  box-shadow: var(--shadow-sm);
}

.glass-button.active {
  background: rgba(59, 130, 246, 0.08); /* Lighter active state */
  border-color: var(--accent-blue);
  color: var(--accent-blue);
  box-shadow: none; /* No shadow for calmer feel */
}

/* Segmented Control */
.segmented-control {
  display: flex;
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 4px;
  gap: 4px;
  border: 1px solid var(--border-color);
}

.segmented-control button {
  padding: 7px 16px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.segmented-control button:hover {
  color: var(--text-primary);
  background: rgba(255, 255, 255, 0.05);
}

.segmented-control button.active {
  background: var(--bg-card);
  color: var(--text-primary);
  box-shadow: var(--shadow-sm);
  font-weight: 600;
}

/* Search Input */
.search-input {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 9px 16px;
  color: var(--text-primary);
  font-size: clamp(12px, 1.5vw, 13px); /* Responsive font size */
  min-width: clamp(200px, 30vw, 300px); /* Responsive width */
  width: 100%;
  max-width: 400px;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: var(--shadow-sm);
}

@media (max-width: 768px) {
  .search-input {
    min-width: 100%;
    max-width: 100%;
  }
}

.search-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2), var(--shadow-md);
}

.search-input::placeholder {
  color: var(--text-muted);
}

/* Main Content - 3 Column Grid - Integrated with layout */
.invoices-main-new {
  display: grid;
  grid-template-columns: minmax(280px, 3fr) minmax(320px, 4fr) minmax(280px, 3fr); /* Fluid columns with min/max */
  gap: clamp(16px, 2vw, 24px); /* Responsive gap */
  padding: clamp(16px, 2vw, 24px) clamp(20px, 2.5vw, 32px); /* Responsive padding */
  flex: 1;
  overflow-y: auto; /* Allow scrolling when upload zone is large */
  overflow-x: hidden; /* Hide horizontal overflow */
  min-height: 0;
  /* Smooth grid transitions */
  transition: grid-template-columns 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* Integrate with page boundaries */
  width: 100%;
  box-sizing: border-box;
  /* Ensure it doesn't overflow parent */
  max-width: 100%;
  /* Respect container boundaries */
  margin: 0;
  position: relative;
}

/* Tablet layout - adjust columns */
@media (max-width: 1200px) {
  .invoices-main-new {
    grid-template-columns: minmax(260px, 2fr) minmax(300px, 5fr) minmax(260px, 2fr);
    gap: clamp(12px, 1.5vw, 20px);
  }
}

/* Narrow tablet - stack right column below */
@media (max-width: 968px) {
  .invoices-main-new {
    grid-template-columns: minmax(240px, 1fr) minmax(280px, 2fr);
    gap: clamp(12px, 1.5vw, 16px);
  }
  
  /* Move right column (discrepancy widget) to bottom */
  .invoices-main-new > *:nth-child(3) {
    grid-column: 1 / -1;
    max-width: 100%;
  }
}

/* Mobile layout - single column */
@media (max-width: 768px) {
  .invoices-main-new {
    grid-template-columns: 1fr;
    gap: 16px;
    padding: 16px;
  }
}

/* When upload zone is visible, allow full width */
.invoices-main-new.upload-focused {
  grid-template-columns: 1fr;
  align-content: start;
  justify-items: center;
  padding: 32px; /* More padding when focused on upload */
}

/* Left Column - Document List - More spacious */
.invoices-list-column {
  display: flex;
  flex-direction: column;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 16px; /* More rounded for calmness */
  overflow: hidden;
  box-shadow: var(--shadow-card);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth transitions */
}

.invoices-list-column:hover {
  box-shadow: var(--shadow-md);
}

.invoices-list-header {
  padding: 20px 24px; /* More padding */
  border-bottom: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(255, 255, 255, 0.02);
}

.invoices-list-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  letter-spacing: -0.01em;
}

.invoices-list-scrollable {
  flex: 1;
  overflow-y: auto;
  padding: 16px; /* More padding */
  display: flex;
  flex-direction: column;
  gap: 10px; /* Reduced gap for better stacking of rectangular cards */
  /* Smooth scrolling */
  scroll-behavior: smooth;
  /* Auto-scroll to new items */
  scroll-padding: 16px;
}

/* Invoice Card - Rectangular, compact design for better stacking */
.invoice-card-new {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: 10px 14px; /* Reduced vertical padding, slightly more horizontal for rectangular shape */
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  box-shadow: var(--shadow-sm);
  /* Enable smooth transformations */
  transform-origin: center;
  will-change: transform, box-shadow;
  outline: none; /* For focus styles */
  /* Rectangular aspect ratio - wider than tall */
  min-height: auto;
  height: auto;
}

.invoice-card-new:focus {
  outline: 2px solid var(--accent-blue);
  outline-offset: 2px;
}

.invoice-card-new::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: transparent;
  border-radius: 10px 0 0 10px;
  transition: background 0.2s ease;
}

.invoice-card-new:hover {
  background: var(--bg-glass-hover);
  border-color: var(--border-hover);
  transform: translateY(-3px) scale(1.01);
  box-shadow: var(--shadow-md);
  z-index: 10;
}

/* Predictive hover - glow related cards */
.invoice-card-new[data-supplier]:hover ~ .invoice-card-new[data-supplier] {
  opacity: 0.6;
  transform: scale(0.98);
}

.invoice-card-new[data-supplier]:hover {
  opacity: 1;
  transform: translateY(-3px) scale(1.02);
}

.invoice-card-new:hover::before {
  background: var(--accent-blue);
}

.invoice-card-new.selected {
  background: rgba(59, 130, 246, 0.15);
  border-color: var(--accent-blue);
  box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.3), var(--shadow-md);
  z-index: 5;
  margin-top: 12px;
  margin-bottom: 12px;
  position: relative;
  transform: scale(1.01);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Card transformation states */
.invoice-card-new.uploading {
  animation: cardPulse 2s ease-in-out infinite;
  border-color: var(--accent-blue);
}

.invoice-card-new.processing {
  position: relative;
  overflow: hidden;
}

.invoice-card-new.processing::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
  animation: progressGlow 2s ease-in-out infinite;
}

.invoice-card-new.completed {
  animation: cardComplete 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes cardPulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0);
  }
}

@keyframes progressGlow {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

@keyframes cardComplete {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
  }
  100% {
    transform: scale(1);
  }
}

.invoice-card-new.selected::before {
  background: transparent;
  width: 4px;
  animation: lightFlowLeft 3s ease-in-out infinite;
  box-shadow: 
    0 0 8px rgba(59, 130, 246, 0.5),
    0 0 16px rgba(168, 85, 247, 0.4),
    -2px 0 12px rgba(59, 130, 246, 0.3);
}

@keyframes lightFlowLeft {
  0% {
    background: linear-gradient(180deg, 
      rgba(59, 130, 246, 0) 0%,
      rgba(59, 130, 246, 0.4) 15%,
      rgba(168, 85, 247, 0.7) 30%,
      rgba(59, 130, 246, 0.9) 50%,
      rgba(168, 85, 247, 0.7) 70%,
      rgba(59, 130, 246, 0.4) 85%,
      rgba(59, 130, 246, 0) 100%);
    box-shadow: 
      0 0 8px rgba(59, 130, 246, 0.5),
      0 0 16px rgba(168, 85, 247, 0.4),
      -2px 0 12px rgba(59, 130, 246, 0.3);
  }
  50% {
    background: linear-gradient(180deg, 
      rgba(168, 85, 247, 0) 0%,
      rgba(168, 85, 247, 0.4) 15%,
      rgba(59, 130, 246, 0.7) 30%,
      rgba(168, 85, 247, 0.9) 50%,
      rgba(59, 130, 246, 0.7) 70%,
      rgba(168, 85, 247, 0.4) 85%,
      rgba(168, 85, 247, 0) 100%);
    box-shadow: 
      0 0 12px rgba(168, 85, 247, 0.6),
      0 0 20px rgba(59, 130, 246, 0.5),
      -2px 0 16px rgba(168, 85, 247, 0.4);
  }
  100% {
    background: linear-gradient(180deg, 
      rgba(59, 130, 246, 0) 0%,
      rgba(59, 130, 246, 0.4) 15%,
      rgba(168, 85, 247, 0.7) 30%,
      rgba(59, 130, 246, 0.9) 50%,
      rgba(168, 85, 247, 0.7) 70%,
      rgba(59, 130, 246, 0.4) 85%,
      rgba(59, 130, 246, 0) 100%);
    box-shadow: 
      0 0 8px rgba(59, 130, 246, 0.5),
      0 0 16px rgba(168, 85, 247, 0.4),
      -2px 0 12px rgba(59, 130, 246, 0.3);
  }
}


.invoice-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 10px;
}

.invoice-card-number {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: -0.01em;
}

.invoice-card-date {
  font-size: 12px;
  color: var(--text-muted);
  font-weight: 400;
}

.invoice-card-supplier {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.invoice-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 10px;
}

.invoice-card-value {
  font-size: 17px;
  font-weight: 700;
  color: var(--accent-green);
  letter-spacing: -0.02em;
}

.invoice-card-badges {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

/* Badge Styles */
.badge {
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  letter-spacing: 0.01em;
}

.badge-manual {
  background: rgba(148, 163, 184, 0.15); /* Softer neutral grey */
  color: #cbd5e1;
  border: 1px solid rgba(148, 163, 184, 0.25);
}

.badge-scanned {
  background: rgba(100, 116, 139, 0.15); /* Softer neutral blue-grey */
  color: #94a3b8;
  border: 1px solid rgba(100, 116, 139, 0.25);
}

.badge-ocr {
  background: rgba(100, 116, 139, 0.15);
  color: #94a3b8;
  border: 1px solid rgba(100, 116, 139, 0.25);
}

.badge-manual-indicator {
  background: rgba(148, 163, 184, 0.15);
  color: #cbd5e1;
  border: 1px solid rgba(148, 163, 184, 0.25);
}

.badge-matched {
  background: rgba(34, 197, 94, 0.2);
  color: #4ade80;
  border: 1px solid rgba(34, 197, 94, 0.3);
}

.badge-ready {
  background: rgba(20, 184, 166, 0.2);
  color: #5eead4;
  border: 1px solid rgba(20, 184, 166, 0.3);
}

.badge-unmatched {
  background: rgba(239, 68, 68, 0.2);
  color: #f87171;
  border: 1px solid rgba(239, 68, 68, 0.3);
}

.badge-flagged {
  background: rgba(234, 179, 8, 0.2);
  color: #fbbf24;
  border: 1px solid rgba(234, 179, 8, 0.3);
}

.badge-needs-review {
  background: rgba(245, 158, 11, 0.15);
  color: #d97706;
  border: 1px solid rgba(245, 158, 11, 0.3);
  font-size: 10px;
  padding: 3px 6px;
  border-radius: 4px;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.badge-pending {
  background: rgba(245, 158, 11, 0.2);
  color: #fbbf24;
  border: 1px solid rgba(245, 158, 11, 0.3);
}

/* Middle Column - Document Detail - More spacing */
.invoices-detail-column {
  display: flex;
  flex-direction: column;
  gap: 24px; /* More spacing between cards */
  overflow-y: auto;
  min-height: 0;
  /* Smooth scrolling */
  scroll-behavior: smooth;
}

/* Detail Card - More spacious, calmer */
.detail-card {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 16px; /* More rounded */
  padding: clamp(16px, 2.5vw, 28px); /* Responsive padding */
  box-shadow: var(--shadow-card);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth transitions */
  /* Enable smooth transformations */
  transform-origin: center;
  /* Prevent overflow */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  overflow: hidden; /* Prevent content overflow */
  min-width: 0; /* Allow shrinking */
}

@media (max-width: 768px) {
  .detail-card {
    padding: 16px;
    border-radius: 12px;
  }
}

.detail-card:hover {
  box-shadow: var(--shadow-md);
  border-right-color: rgba(255, 255, 255, 0.1) !important;
  outline: none !important;
}

.detail-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px; /* More space */
}

.detail-card-title {
  font-size: clamp(15px, 1.8vw, 17px); /* Responsive font size */
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  letter-spacing: -0.01em;
}

.detail-card-content {
  display: flex;
  flex-direction: column;
  gap: clamp(16px, 2vw, 20px); /* Responsive spacing */
  position: relative; /* Establish stacking context */
}

/* Ensure proper spacing between detail cards */
.detail-card + .detail-card {
  margin-top: clamp(16px, 2vw, 24px);
}

@media (max-width: 768px) {
  .detail-card + .detail-card {
    margin-top: 16px;
  }
  
  .detail-card-content {
    gap: 16px;
  }
}

/* Document Header Card */
.document-header-card {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: clamp(16px, 2vw, 20px);
}

@media (max-width: 768px) {
  .document-header-card {
    grid-template-columns: 1fr;
    gap: 16px;
  }
}

.document-header-left {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.document-header-supplier {
  font-size: 26px;
  font-weight: 700;
  color: var(--text-primary);
  letter-spacing: -0.02em;
}

.document-header-meta {
  display: flex;
  gap: 16px;
  font-size: 13px;
  color: var(--text-secondary);
  flex-wrap: wrap;
}

.document-header-right {
  text-align: right;
}

.document-header-total {
  font-size: 34px;
  font-weight: 700;
  color: var(--accent-green);
  letter-spacing: -0.03em;
}

.document-header-subtotal {
  font-size: 13px;
  color: var(--text-muted);
  margin-top: 6px;
}

/* Comparison Table */
.comparison-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.comparison-table th {
  text-align: left;
  padding: 12px;
  border-bottom: 2px solid var(--border-color);
  color: var(--text-secondary);
  font-weight: 600;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  background: rgba(255, 255, 255, 0.02);
}

.comparison-table td {
  padding: 12px;
  border-bottom: 1px solid var(--border-color);
  color: var(--text-primary);
}

.comparison-table tr {
  transition: background 0.15s ease;
}

.comparison-table tr:hover {
  background: rgba(255, 255, 255, 0.05);
}

.comparison-table tr.mismatch {
  background: rgba(234, 179, 8, 0.15);
  border-left: 3px solid var(--accent-yellow);
}

.comparison-table tr.mismatch:hover {
  background: rgba(234, 179, 8, 0.2);
}

/* Right Column - Issues & Actions - More spacing */
.invoices-actions-column {
  display: flex;
  flex-direction: column;
  gap: 24px; /* More spacing between cards */
  overflow-y: auto;
  min-height: 0;
  /* Smooth scrolling */
  scroll-behavior: smooth;
}

/* Issues Card - More spacious */
.issues-card {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 16px; /* More rounded */
  padding: 24px; /* More padding */
  box-shadow: var(--shadow-card);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth transitions */
}

.issues-card:hover {
  box-shadow: var(--shadow-md);
}

.issues-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px; /* More space */
}

.issues-card-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  letter-spacing: -0.01em;
}

.issues-list {
  display: flex;
  flex-direction: column;
  gap: 12px; /* More spacing between issues */
}

.issue-item {
  padding: 14px; /* More padding */
  background: rgba(255, 255, 255, 0.02);
  border-radius: 10px; /* More rounded */
  border-left: 3px solid var(--accent-red);
  font-size: 13px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Smoother transition */
}

.issue-item:hover {
  background: var(--bg-glass-hover);
  transform: translateX(2px);
}

.issue-item.minor {
  border-left-color: var(--accent-yellow);
}

.issue-item.critical {
  border-left-color: var(--accent-red);
}

.issue-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.issue-item-title {
  font-weight: 600;
  color: var(--text-primary);
}

.issue-item-severity {
  font-size: 11px;
  padding: 3px 8px;
  border-radius: 4px;
  background: rgba(239, 68, 68, 0.1);
  color: var(--accent-red);
  font-weight: 500;
}

.issue-item-description {
  color: var(--text-secondary);
  font-size: 12px;
  line-height: 1.5;
}

/* Empty States - More spacious, calmer */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 32px; /* More padding */
  text-align: center;
  color: var(--text-muted);
  animation: fadeIn 0.4s ease-out;
}

.empty-state-icon {
  font-size: 64px; /* Larger icon */
  margin-bottom: 24px; /* More space */
  opacity: 0.3; /* More subtle */
  transition: transform 0.3s ease;
}

.empty-state:hover .empty-state-icon {
  transform: scale(1.1);
}

.empty-state-title {
  font-size: 20px; /* Larger */
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 10px; /* More space */
  letter-spacing: -0.01em;
}

.empty-state-description {
  font-size: 15px; /* Larger */
  color: var(--text-muted);
  margin-bottom: 32px; /* More space */
  max-width: 360px; /* Wider */
  line-height: 1.6; /* Better readability */
}

/* Scrollbar Styling */
.invoices-list-scrollable::-webkit-scrollbar,
.invoices-detail-column::-webkit-scrollbar,
.invoices-actions-column::-webkit-scrollbar {
  width: 8px;
}

.invoices-list-scrollable::-webkit-scrollbar-track,
.invoices-detail-column::-webkit-scrollbar-track,
.invoices-actions-column::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
}

.invoices-list-scrollable::-webkit-scrollbar-thumb,
.invoices-detail-column::-webkit-scrollbar-thumb,
.invoices-actions-column::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

.invoices-list-scrollable::-webkit-scrollbar-thumb:hover,
.invoices-detail-column::-webkit-scrollbar-thumb:hover,
.invoices-actions-column::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Responsive */
@media (max-width: 1400px) {
  .invoices-main-new {
    grid-template-columns: 2.5fr 4fr 3.5fr; /* Narrowed middle column to match main layout */
  }
}

@media (max-width: 1200px) {
  .invoices-main-new {
    grid-template-columns: 1fr;
  }
  
  .invoices-actions-column {
    grid-row: 2;
  }
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.invoice-card-new {
  animation: fadeIn 0.3s ease-out;
}

.detail-card {
  animation: fadeIn 0.3s ease-out;
}

/* Contextual Overlay - Continuous Context Principle */
.contextual-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(26, 26, 26, 0.95);
  backdrop-filter: blur(8px);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: overlaySlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 16px;
}

@keyframes overlaySlideIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Predictive Guidance Banner */
.prediction-banner {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
  border: 1px solid rgba(59, 130, 246, 0.2);
  border-radius: 12px;
  padding: 12px 16px;
  margin-bottom: 16px;
  animation: bannerGlow 2s ease-in-out infinite;
  cursor: pointer;
  transition: all 0.3s ease;
}

.prediction-banner:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: rgba(59, 130, 246, 0.4);
}

@keyframes bannerGlow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.3);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0);
  }
}

/* Inline Progress Indicator - OCR Progress Ring */
.progress-ring {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 12px;
  pointer-events: none;
  overflow: hidden;
}

.progress-ring::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
  transform: translateX(-100%);
  animation: progressFill 2s ease-in-out infinite;
}

@keyframes progressFill {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* Auto-scroll target highlight */
.scroll-target {
  animation: scrollHighlight 1s ease-out;
}

@keyframes scrollHighlight {
  0% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.6);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
  }
}

/* Card Transformation States */
.invoice-card-new.transforming {
  animation: cardTransform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes cardTransform {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

/* Issue Slide-in Animation */
.issue-slide-in {
  animation: slideInFromRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideInFromRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Completion Pulse */
.completion-pulse {
  animation: completionPulse 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes completionPulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
  }
  100% {
    transform: scale(1);
  }
}

/* Adaptive Focus Mode - Fade non-active */
.focus-mode .invoices-list-column:not(.focused),
.focus-mode .invoices-actions-column:not(.focused) {
  opacity: 0.4;
  filter: blur(2px);
  transition: all 0.3s ease;
}

.focus-mode .invoices-list-column.focused,
.focus-mode .invoices-actions-column.focused {
  opacity: 1;
  filter: none;
  transform: scale(1.02);
  z-index: 10;
}

/* Connecting Line Animation - Visual Continuity */
.connecting-line {
  position: absolute;
  height: 2px;
  background: linear-gradient(90deg, var(--accent-blue), transparent);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.invoice-card-new:hover ~ .connecting-line,
.invoice-card-new.selected ~ .connecting-line {
  opacity: 0.6;
  animation: lineFlow 1s ease-in-out infinite;
}

@keyframes lineFlow {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}

/* Co-pilot UI Bar - Positioned relative to page, not viewport */
.copilot-bar {
  position: absolute;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: 12px 20px;
  box-shadow: var(--shadow-lg);
  z-index: 1000;
  max-width: 600px;
  animation: copilotSlideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  gap: 12px;
  /* Ensure it respects container boundaries */
  width: calc(100% - 48px);
  max-width: 600px;
}

@keyframes copilotSlideUp {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Smooth state transitions */
.state-transition {
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Supplier grouping glow */
.supplier-group {
  position: relative;
}

.supplier-group::before {
  content: '';
  position: absolute;
  left: -4px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--accent-purple);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.supplier-group:hover::before {
  opacity: 0.6;
}

/* Fixed Submission Footer */
.submission-bar-fixed {
  position: fixed;
  bottom: 0;
  left: var(--sidebar-width, 0px); /* Use CSS variable set by Layout component */
  right: 0;
  background: var(--bg-card);
  border-top: 2px solid var(--border-color);
  padding: 0;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
  z-index: 1000;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: left 200ms ease-out; /* Match sidebar transition */
}

/* Fallback for mobile/tablet - no sidebar */
@media (max-width: 1023px) {
  .submission-bar-fixed {
    left: 0;
  }
}

.submission-bar-content {
  max-width: 100%;
  margin: 0 auto;
  padding: 20px 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 24px;
}

.submission-bar-text {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.submission-bar-count {
  font-size: 24px;
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1.2;
}

.submission-bar-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  line-height: 1.2;
}

.submission-bar-actions {
  display: flex;
  gap: 16px;
  align-items: center;
}

.submission-button-clear {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 12px 24px;
  color: var(--text-primary);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  white-space: nowrap;
}

.submission-button-clear:hover {
  background: var(--bg-glass-hover);
  border-color: var(--border-hover);
  transform: translateY(-1px);
}

.submission-button-clear:active {
  transform: translateY(0);
}

.submission-button-submit {
  background: var(--accent-blue);
  border: 2px solid var(--accent-blue);
  border-radius: 10px;
  padding: 12px 24px;
  color: white;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  white-space: nowrap;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
}

.submission-button-submit:hover:not(:disabled) {
  background: #2563eb;
  border-color: #2563eb;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
  transform: translateY(-1px);
}

.submission-button-submit:active:not(:disabled) {
  transform: translateY(0);
}

.submission-button-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: var(--bg-secondary);
  border-color: var(--border-color);
  color: var(--text-muted);
  box-shadow: none;
}

/* Add padding to main content to prevent overlap with fixed footer */
.invoices-main-new.has-submission-footer {
  padding-bottom: 100px; /* Space for fixed footer */
}

/* Temporal Memory - Restore Position Indicator - Relative to page */
.restore-position-indicator {
  position: absolute;
  top: 80px;
  right: 32px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 8px 12px;
  box-shadow: var(--shadow-md);
  z-index: 999;
  animation: indicatorFadeIn 0.3s ease;
  cursor: pointer;
}

@keyframes indicatorFadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Responsive Design for Invoices Header - Coordinated with button states */

/* Large screens - Full layout with expanded search */
@media (min-width: 1600px) {
  .invoices-header-center {
    gap: clamp(16px, 1.5vw, 24px);
  }

  .search-wrapper {
    flex: 1 1 auto;
    max-width: clamp(400px, 35vw, 600px); /* Fluid expansion */
    min-width: clamp(250px, 20vw, 300px);
  }

  .search-input {
    min-width: clamp(250px, 20vw, 300px);
    max-width: 100%;
    width: 100%;
  }
}

/* Extra large screens - Even more expansion */
@media (min-width: 1920px) {
  .invoices-header-center {
    gap: clamp(20px, 1.8vw, 28px);
  }

  .search-wrapper {
    max-width: clamp(600px, 40vw, 800px); /* Fluid expansion on very wide screens */
    min-width: clamp(350px, 25vw, 400px);
  }

  .search-input {
    min-width: clamp(350px, 25vw, 400px);
  }
}

/* Medium-large screens */
@media (max-width: 1599px) and (min-width: 1400px) {
  .invoices-header-center {
    gap: clamp(12px, 1.2vw, 18px);
  }

  .search-wrapper {
    max-width: clamp(300px, 28vw, 450px);
    min-width: clamp(200px, 18vw, 250px);
  }

  .search-input {
    min-width: clamp(200px, 18vw, 250px);
    max-width: 100%;
  }
}

/* Medium screens - Short text buttons */
@media (max-width: 1399px) and (min-width: 1100px) {
  .invoices-header-center {
    gap: clamp(10px, 1vw, 14px);
  }

  .search-wrapper {
    max-width: clamp(220px, 22vw, 320px);
    min-width: clamp(150px, 15vw, 180px);
  }

  .search-input {
    min-width: clamp(150px, 15vw, 180px);
    max-width: 100%;
  }
}

/* Small-medium screens */
@media (max-width: 1099px) and (min-width: 900px) {
  .invoices-header-center {
    gap: clamp(8px, 0.9vw, 12px);
  }

  .search-wrapper {
    max-width: clamp(180px, 20vw, 240px);
    min-width: clamp(120px, 13vw, 150px);
  }

  .search-input {
    min-width: clamp(120px, 13vw, 150px);
    max-width: 100%;
  }
}

/* Small screens */
@media (max-width: 899px) and (min-width: 700px) {
  .invoices-header-center {
    gap: clamp(6px, 0.8vw, 10px);
  }

  .search-wrapper {
    max-width: clamp(140px, 18vw, 200px);
    min-width: clamp(100px, 12vw, 120px);
  }

  .search-input {
    min-width: clamp(100px, 12vw, 120px);
    max-width: 100%;
  }
}

/* Very small screens */
@media (max-width: 699px) {
  .invoices-header-center {
    gap: clamp(6px, 1vw, 10px);
  }

  .search-wrapper {
    max-width: 100%;
    min-width: clamp(80px, 15vw, 100px);
    flex: 1 1 auto;
  }

  .search-input {
    min-width: clamp(80px, 15vw, 100px);
    max-width: 100%;
  }
}

@media (max-width: 968px) {
  .invoices-header-new {
    flex-wrap: wrap;
    gap: 16px;
    padding: 20px;
  }

  .invoices-header-left {
    flex: 1 1 100%;
    margin-bottom: 8px;
  }

  .invoices-header-center {
    flex: 1 1 auto;
    order: 2;
    justify-content: flex-start;
    min-width: 0;
  }

  .invoices-header-right {
    flex: 1 1 auto;
    order: 3;
    justify-content: flex-end;
    margin-left: 0;
  }

  .invoices-header-actions {
    flex-wrap: wrap;
    gap: 8px;
  }

  .glass-button.primary-action-large {
    flex: 0 1 auto;
  }

  .search-input {
    min-width: 150px;
    max-width: 100%;
  }
}

@media (max-width: 640px) {
  .invoices-header-new {
    flex-direction: column;
    align-items: stretch;
    gap: 16px;
    padding: 16px;
  }

  .invoices-header-left {
    flex: 1 1 100%;
    margin-bottom: 0;
  }

  .invoices-header-center {
    flex: 1 1 100%;
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
    order: 2;
  }

  .invoices-header-filters {
    width: 100%;
    justify-content: space-between;
  }

  .search-input {
    width: 100%;
    min-width: 100%;
    max-width: 100%;
  }

  .invoices-header-right {
    flex: 1 1 100%;
    order: 3;
  }

  .invoices-header-actions {
    width: 100%;
    flex-direction: column;
    gap: 10px;
  }

  .glass-button.primary-action-large {
    width: 100%;
    min-width: 100%;
  }
}

/* Manual Pairing Column Styles */
.manual-pairing-column {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: var(--bg-card);
  border-radius: 12px;
  border: 1px solid var(--border-color);
  overflow-y: auto;
  max-height: calc(100vh - 200px);
}

.manual-pairing-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border-color);
}

.manual-pairing-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.loading-indicator {
  font-size: 12px;
  color: var(--text-muted);
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 1; }
}

.pairing-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.pairing-section-title {
  margin: 0 0 8px 0;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.dn-card {
  background: var(--bg-glass);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 12px;
  transition: all 0.2s ease;
}

.dn-card.suggested {
  border-color: var(--accent-teal);
  background: rgba(20, 184, 166, 0.05);
}

.dn-card:hover {
  background: var(--bg-glass-hover);
  border-color: var(--border-hover);
}

.dn-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.dn-number {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.confidence-badge {
  font-size: 11px;
  font-weight: 600;
  color: var(--accent-teal);
  background: rgba(20, 184, 166, 0.1);
  padding: 2px 8px;
  border-radius: 4px;
}

.dn-card-body {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  gap: 12px;
}

.dn-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.dn-supplier {
  font-size: 13px;
  color: var(--text-primary);
  font-weight: 500;
}

.dn-date {
  font-size: 12px;
  color: var(--text-secondary);
}

.dn-total {
  font-size: 13px;
  color: var(--accent-green);
  font-weight: 600;
}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;
  color: var(--text-muted);
  gap: 16px;
}

.empty-state p {
  margin: 0;
  font-size: 14px;
}

/* Section highlight animation for discrepancy navigation */
.owlin-section-highlight {
  box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.5);
  transition: box-shadow 0.8s ease-out;
}